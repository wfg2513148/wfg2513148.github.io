<!doctype html><html lang=zh-CN><meta charset=UTF-8><meta content="width=device-width" name=viewport><meta content=#222 name=theme-color><meta content="Hexo 7.3.0" name=generator><link crossorigin href=https://cdnjs.cloudflare.com rel=preconnect><link href=/images/apple-touch-icon-next.png rel=apple-touch-icon sizes=180x180><link href=/images/favicon-32x32-next.png rel=icon sizes=32x32 type=image/png><link href=/images/favicon-16x16-next.png rel=icon sizes=16x16 type=image/png><link color=#222 href=/images/logo.svg rel=mask-icon><meta content=_ZS2imU4knMegUWG7C18NQWvwS2icy1O2n7QI13BfDs name=google-site-verification><style>:root{--body-bg-color:#fff;--content-bg-color:#fff;--card-bg-color:#f5f5f5;--text-color:#555;--selection-bg:#262a30;--selection-color:#eee;--blockquote-color:#666;--link-color:#555;--link-hover-color:#222;--brand-color:#fff;--brand-hover-color:#fff;--table-row-odd-bg-color:#f9f9f9;--table-row-hover-bg-color:#f5f5f5;--menu-item-bg-color:#f5f5f5;--theme-color:#222;--btn-default-bg:#222;--btn-default-color:#fff;--btn-default-border-color:#222;--btn-default-hover-bg:#fff;--btn-default-hover-color:#222;--btn-default-hover-border-color:#222;--highlight-background:#f3f3f3;--highlight-foreground:#444;--highlight-gutter-background:#e1e1e1;--highlight-gutter-foreground:#555;color-scheme:light}html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{margin:.67em 0;font-size:2em}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace;font-size:1em}a{background:0 0}abbr[title]{border-bottom:none;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace;font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:100%;line-height:1.15}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted buttontext}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;white-space:normal;max-width:100%;padding:0;display:table}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}details{display:block}summary{display:list-item}template,[hidden]{display:none}::selection{background:var(--selection-bg);color:var(--selection-color)}html,body{height:100%}body{background:var(--body-bg-color);box-sizing:border-box;color:var(--text-color);min-height:100%;font-family:Lato,PingFang SC,Microsoft YaHei,sans-serif;font-size:1em;line-height:2;transition:padding .2s ease-in-out;position:relative}h1,h2,h3,h4,h5,h6{margin:30px 0 15px;font-family:Lato,PingFang SC,Microsoft YaHei,sans-serif;font-weight:700;line-height:1.5}h1{font-size:1.5em}h2{font-size:1.375em}h3{font-size:1.25em}h4{font-size:1.125em}h5{font-size:1em}h6{font-size:.875em}a{color:var(--link-color);cursor:pointer;overflow-wrap:break-word;border-bottom:1px solid #999;outline:0;text-decoration:none}a:hover{border-bottom-color:var(--link-hover-color);color:var(--link-hover-color)}iframe,img,video,embed{max-width:100%;margin-left:auto;margin-right:auto;display:block}hr{background-image:repeating-linear-gradient(-45deg,#ddd,#ddd 4px,#0000 4px 8px);border:0;height:3px;margin:40px 0}blockquote{color:var(--blockquote-color);border-left:4px solid #ddd;margin:0;padding:0 15px}blockquote cite:before{content:"-";padding:0 5px}dt{font-weight:700}dd{margin:0;padding:0}.table-container{overflow:auto}table{border-collapse:collapse;border-spacing:0;width:100%;margin:0 0 20px;font-size:.875em}tbody tr:nth-of-type(odd){background:var(--table-row-odd-bg-color)}tbody tr:hover{background:var(--table-row-hover-bg-color)}caption,th,td{padding:8px}th,td{border:1px solid #ddd;border-bottom-width:3px}th{padding-bottom:10px;font-weight:700}td{border-bottom-width:1px}.btn{background:var(--btn-default-bg);border:2px solid var(--btn-default-border-color);color:var(--btn-default-color);border-radius:0;padding:0 20px;font-size:.875em;line-height:2;transition:background-color .2s ease-in-out;display:inline-block}.btn:hover{background:var(--btn-default-hover-bg);border-color:var(--btn-default-hover-border-color);color:var(--btn-default-hover-color)}.btn+.btn{margin:0 0 8px 8px}.btn .fa-fw{text-align:left;width:1.28571em}.toggle{line-height:0}.toggle .toggle-line{background:#fff;width:100%;height:2px;transition:left .4s,opacity .4s,top .4s,transform .4s,width .4s;display:block;position:relative;top:0;left:0}.toggle .toggle-line:first-child{margin-top:1px}.toggle .toggle-line:not(:first-child){margin-top:4px}.toggle.toggle-arrow :first-child{width:50%;top:2px;transform:rotate(-45deg)}.toggle.toggle-arrow :last-child{width:50%;top:-2px;transform:rotate(45deg)}.toggle.toggle-close :nth-child(2){opacity:0}.toggle.toggle-close :first-child{top:6px;transform:rotate(-45deg)}.toggle.toggle-close :last-child{top:-6px;transform:rotate(45deg)}pre code.hljs{padding:1em;display:block;overflow-x:auto}code.hljs{padding:3px 5px}.hljs{color:#444;background:#f3f3f3}.hljs-comment{color:#697070}.hljs-tag,.hljs-punctuation{color:#444a}.hljs-tag .hljs-name,.hljs-tag .hljs-attr{color:#444}.hljs-keyword,.hljs-attribute,.hljs-selector-tag,.hljs-meta .hljs-keyword,.hljs-doctag,.hljs-name{font-weight:700}.hljs-type,.hljs-string,.hljs-number,.hljs-selector-id,.hljs-selector-class,.hljs-quote,.hljs-template-tag,.hljs-deletion{color:#800}.hljs-title,.hljs-section{color:#800;font-weight:700}.hljs-regexp,.hljs-symbol,.hljs-variable,.hljs-template-variable,.hljs-link,.hljs-selector-attr,.hljs-operator,.hljs-selector-pseudo{color:#ab5656}.hljs-literal{color:#695}.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-addition{color:#397300}.hljs-meta{color:#1f7199}.hljs-meta .hljs-string{color:#38a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.highlight:hover .copy-btn,.code-container:hover .copy-btn{opacity:1}.code-container{position:relative}.copy-btn{color:#333;cursor:pointer;opacity:0;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;padding:2px 6px;font-size:.8125em;line-height:1.6;transition:opacity .2s ease-in-out;position:absolute;top:8px;right:4px}code,kbd,figure.highlight,pre{background:var(--highlight-background);color:var(--highlight-foreground)}figure.highlight,pre{margin:0 auto 20px;line-height:1.6}figure.highlight figcaption,pre .caption{background:var(--highlight-gutter-background);color:var(--highlight-foreground);padding:.5em;font-size:.875em;line-height:1.2;display:flow-root}figure.highlight figcaption a,pre .caption a{color:var(--highlight-foreground);float:right}figure.highlight figcaption a:hover,pre .caption a:hover{border-bottom-color:var(--highlight-foreground)}pre,code{font-family:consolas,Menlo,monospace,PingFang SC,Microsoft YaHei}code{overflow-wrap:break-word;border-radius:3px;padding:2px 4px;font-size:.875em}kbd{white-space:nowrap;border:2px solid #ccc;border-radius:.2em;padding:.1em .3em;font-family:inherit;box-shadow:.1em .1em .2em #0000001a}figure.highlight{position:relative;overflow:auto}figure.highlight pre{border:0;margin:0;padding:10px 0}figure.highlight table{border:0;width:auto;margin:0}figure.highlight td{border:0;padding:0}figure.highlight .gutter{-webkit-user-select:none;user-select:none}figure.highlight .gutter pre{background:var(--highlight-gutter-background);color:var(--highlight-gutter-foreground);text-align:right;padding-left:10px;padding-right:10px}figure.highlight .code pre{width:100%;padding-left:10px}figure.highlight .marked{background:#0000004d}pre .caption{margin-bottom:10px}.gist table{width:auto}.gist table td{border:0}pre{padding:10px;overflow:auto}pre code{text-shadow:none;background:0 0;padding:0}.blockquote-center{text-align:center;border-left:0;margin:40px 0;padding:0;position:relative}.blockquote-center:before,.blockquote-center:after{opacity:.6;width:100%;line-height:1;position:absolute;left:0}.blockquote-center:before{text-align:left;content:"";border-top:1px solid #ccc;font-family:"Font Awesome 6 Free";font-weight:900;top:-20px}.blockquote-center:after{text-align:right;content:"";border-bottom:1px solid #ccc;font-family:"Font Awesome 6 Free";font-weight:900;bottom:-20px}.blockquote-center p,.blockquote-center div{text-align:center}.group-picture{margin-bottom:20px}.group-picture .group-picture-row{gap:3px;margin-bottom:3px;display:flex}.group-picture .group-picture-column{flex:1}.group-picture .group-picture-column img{object-fit:cover;width:100%;height:100%;margin:0}.post-body .label{color:#555;padding:0 2px}.post-body .label.default{background:#f0f0f0}.post-body .label.primary{background:#efe6f7}.post-body .label.info{background:#e5f2f8}.post-body .label.success{background:#e7f4e9}.post-body .label.warning{background:#fcf6e1}.post-body .label.danger{background:#fae8eb}.post-body .link-grid{grid-gap:1.5rem;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;margin-bottom:20px;padding:1rem;display:grid}.post-body .link-grid .link-grid-container{border:solid #ddd;min-width:0;min-height:5rem;padding:.5rem;transition:background .3s;position:relative;box-shadow:1rem 1rem .5rem #00000080}.post-body .link-grid .link-grid-container:hover{background:var(--card-bg-color);animation:.5s next-shake}.post-body .link-grid .link-grid-container:active{transform:translate(.2rem,.2rem);box-shadow:.5rem .5rem .25rem #00000080}.post-body .link-grid .link-grid-container .link-grid-image{box-sizing:border-box;border:1px solid #ddd;border-radius:50%;width:5rem;height:5rem;padding:3px;position:absolute}.post-body .link-grid .link-grid-container p{margin:0 1rem 0 6rem}.post-body .link-grid .link-grid-container p:first-of-type{font-size:1.2em}.post-body .link-grid .link-grid-container p:last-of-type{opacity:.7;font-size:.8em;line-height:1.3rem}.post-body .link-grid .link-grid-container a{border:0;width:100%;height:100%;position:absolute;top:0;left:0}@keyframes next-shake{0%{transform:translate(1pt,1pt)rotate(0)}10%{transform:translate(-1pt,-2pt)rotate(-1deg)}20%{transform:translate(-3pt)rotate(1deg)}30%{transform:translate(3pt,2pt)rotate(0)}40%{transform:translate(1pt,-1pt)rotate(1deg)}50%{transform:translate(-1pt,2pt)rotate(-1deg)}60%{transform:translate(-3pt,1pt)rotate(0)}70%{transform:translate(3pt,1pt)rotate(-1deg)}80%{transform:translate(-1pt,-1pt)rotate(1deg)}90%{transform:translate(1pt,2pt)rotate(0)}to{transform:translate(1pt,-2pt)rotate(-1deg)}}.post-body .note{border:1px solid #eee;border-left-width:5px;border-radius:3px;margin-bottom:20px;padding:1em;position:relative}.post-body .note summary{cursor:pointer;outline:0}.post-body .note summary p{display:inline}.post-body .note h2,.post-body .note h3,.post-body .note h4,.post-body .note h5,.post-body .note h6{border-bottom:initial;margin:0;padding-top:0}.post-body .note :first-child{margin-top:0}.post-body .note :last-child{margin-bottom:0}.post-body .note.default{border-left-color:#777}.post-body .note.default h2,.post-body .note.default h3,.post-body .note.default h4,.post-body .note.default h5,.post-body .note.default h6{color:#777}.post-body .note.primary{border-left-color:#6f42c1}.post-body .note.primary h2,.post-body .note.primary h3,.post-body .note.primary h4,.post-body .note.primary h5,.post-body .note.primary h6{color:#6f42c1}.post-body .note.info{border-left-color:#428bca}.post-body .note.info h2,.post-body .note.info h3,.post-body .note.info h4,.post-body .note.info h5,.post-body .note.info h6{color:#428bca}.post-body .note.success{border-left-color:#5cb85c}.post-body .note.success h2,.post-body .note.success h3,.post-body .note.success h4,.post-body .note.success h5,.post-body .note.success h6{color:#5cb85c}.post-body .note.warning{border-left-color:#f0ad4e}.post-body .note.warning h2,.post-body .note.warning h3,.post-body .note.warning h4,.post-body .note.warning h5,.post-body .note.warning h6{color:#f0ad4e}.post-body .note.danger{border-left-color:#d9534f}.post-body .note.danger h2,.post-body .note.danger h3,.post-body .note.danger h4,.post-body .note.danger h5,.post-body .note.danger h6{color:#d9534f}.post-body .tabs{margin-bottom:20px}.post-body .tabs,.tabs-comment{padding-top:10px}.post-body .tabs ul.nav-tabs,.tabs-comment ul.nav-tabs{background:var(--body-bg-color);z-index:5;flex-wrap:wrap;justify-content:center;margin:0;padding:0;display:flex;position:sticky;top:0}@media (width<=413px){.post-body .tabs ul.nav-tabs,.tabs-comment ul.nav-tabs{margin-bottom:5px;display:block}}.post-body .tabs ul.nav-tabs li.tab,.tabs-comment ul.nav-tabs li.tab{border:1px solid #0000;border-top-width:3px;border-bottom-color:#ddd;border-radius:0;flex-grow:1;list-style-type:none}@media (width<=413px){.post-body .tabs ul.nav-tabs li.tab,.tabs-comment ul.nav-tabs li.tab{border:1px solid #0000;border-left-width:3px;border-radius:0}}.post-body .tabs ul.nav-tabs li.tab a,.tabs-comment ul.nav-tabs li.tab a{border-bottom:initial;text-align:center;padding:.25em .75em;line-height:1.8;transition:all .2s ease-out;display:block}.post-body .tabs ul.nav-tabs li.tab a i[class^=fa],.tabs-comment ul.nav-tabs li.tab a i[class^=fa]{width:1.28571em}.post-body .tabs ul.nav-tabs li.tab.active,.tabs-comment ul.nav-tabs li.tab.active{border-color:#fc6423 #ddd #0000}@media (width<=413px){.post-body .tabs ul.nav-tabs li.tab.active,.tabs-comment ul.nav-tabs li.tab.active{border-color:#ddd #ddd #ddd #fc6423}}.post-body .tabs ul.nav-tabs li.tab.active a,.tabs-comment ul.nav-tabs li.tab.active a{cursor:default}.post-body .tabs .tab-content,.tabs-comment .tab-content{border:1px solid #ddd;border-top-color:#0000;border-radius:0}@media (width<=413px){.post-body .tabs .tab-content,.tabs-comment .tab-content{border-top-color:#ddd;border-radius:0}}.post-body .tabs .tab-content .tab-pane,.tabs-comment .tab-content .tab-pane{padding:20px 20px 0}.post-body .tabs .tab-content .tab-pane:not(.active),.tabs-comment .tab-content .tab-pane:not(.active){display:none}.pagination .prev,.pagination .next,.pagination .page-number,.pagination .space{margin:-1px 10px 0;padding:0 10px;display:inline-block}@media (width<=767px){.pagination .prev,.pagination .next,.pagination .page-number,.pagination .space{margin:0 5px}}.pagination .page-number.current{color:var(--content-bg-color);background:#ccc;border-color:#ccc}.pagination{text-align:center;border-top:1px solid #eee;margin:120px 0 0}.pagination .prev,.pagination .next,.pagination .page-number{border-top:1px solid #eee;border-bottom:0;transition:border-color .2s ease-in-out}.pagination .prev:hover,.pagination .next:hover,.pagination .page-number:hover{border-top-color:var(--link-hover-color)}@media (width<=767px){.pagination{border-top:0}.pagination .prev,.pagination .next,.pagination .page-number{border-top:0;border-bottom:1px solid #eee}.pagination .prev:hover,.pagination .next:hover,.pagination .page-number:hover{border-bottom-color:var(--link-hover-color)}}.pagination .space{margin:0;padding:0}.comments{margin-top:60px;overflow:hidden}.comment-button-group{flex-wrap:wrap;justify-content:center;margin:1em 0;display:flex}.comment-button-group .comment-button{margin:.1em .2em}.comment-button-group .comment-button.active{background:var(--btn-default-hover-bg);border-color:var(--btn-default-hover-border-color);color:var(--btn-default-hover-color)}.comment-position{display:none}.comment-position.active{display:block}.tabs-comment{margin-top:4em;padding-top:0}.tabs-comment .comments{margin-top:0;padding-top:0}.headband{background:var(--theme-color);height:3px}@media (width<=991px){.headband{display:none}}.site-brand-container{flex-shrink:0;padding:0 10px;display:flex}.use-motion .column,.use-motion .site-brand-container .toggle{opacity:0}.site-meta{text-align:center;flex-grow:1}@media (width<=767px){.site-meta{text-align:center}}.custom-logo-image{margin-top:20px}@media (width<=991px){.custom-logo-image{display:none}}.brand{color:var(--brand-color);border-bottom:0;padding:0 40px;display:inline-block}.brand:hover{color:var(--brand-hover-color)}.site-title{margin:0;font-family:Lato,PingFang SC,Microsoft YaHei,sans-serif;font-size:1.375em;font-weight:400;line-height:1.5}.site-subtitle{color:#999;margin:10px 0;font-size:.8125em}.use-motion .site-title,.use-motion .site-subtitle,.use-motion .custom-logo-image{opacity:0;position:relative;top:-10px}.site-nav-toggle,.site-nav-right{display:none}@media (width<=767px){.site-nav-toggle,.site-nav-right{flex-direction:column;justify-content:center;display:flex}}.site-nav-toggle .toggle,.site-nav-right .toggle{color:var(--text-color);width:22px;padding:10px}.site-nav-toggle .toggle .toggle-line,.site-nav-right .toggle .toggle-line{background:var(--text-color);border-radius:1px}@media (width<=767px){.site-nav{--scroll-height:0;visibility:hidden;height:0;transition:height .2s ease-in-out,visibility .2s ease-in-out;overflow:hidden}body:not(.site-nav-on) .site-nav .animated{animation:none}body.site-nav-on .site-nav{height:var(--scroll-height);visibility:unset}}.menu{text-align:center;margin:0;padding:1em 0}.menu-item{margin:0 10px;list-style:none;display:inline-block}@media (width<=767px){.menu-item{margin-top:10px;display:block}.menu-item.menu-item-search{display:none}}.menu-item a{border-bottom:0;font-size:.8125em;transition:border-color .2s ease-in-out;display:block}.menu-item a:hover,.menu-item a.menu-item-active{background:var(--menu-item-bg-color)}.menu-item i[class^=fa]{margin-right:8px}.menu-item .badge{color:#555;text-shadow:none;background:#eee;border-radius:0;margin-left:.35em;padding:1px 4px;font-weight:700;line-height:1}.use-motion .menu-item{visibility:hidden}.sidebar{right:-320px}.sidebar-active .sidebar{right:0}.sidebar{z-index:20;background:#222;width:320px;max-height:100vh;transition:left .2s ease-out,right .2s ease-out;position:fixed;top:0;bottom:0;overflow-y:auto;box-shadow:inset 0 2px 6px #000}.sidebar a{color:#999;border-bottom-color:#555}.sidebar a:hover{color:#eee;border-bottom-color:#eee}.links-of-author:not(:first-child){margin-top:15px}.links-of-author a{vertical-align:middle;border-bottom-color:#555;margin-bottom:10px;margin-right:10px;transition:all .2s ease-in-out;display:inline-block}.links-of-author a:before{content:" ";background:#0995ff;border-radius:50%;width:4px;height:4px;margin-right:3px;display:inline-block;transform:translateY(-2px)}.links-of-blogroll-item{padding:0 5px}.popular-posts .popular-posts-item .popular-posts-link:hover{background:0 0}.sidebar-dimmer{opacity:0;visibility:hidden;z-index:10;background:#000;width:100%;height:100%;transition:visibility .4s,opacity .4s;position:fixed;top:0;left:0}.sidebar-active .sidebar-dimmer{opacity:.7;visibility:visible}.sidebar-inner{color:#999;text-align:center;flex-direction:column;justify-content:center;padding:18px 10px;display:flex}.sidebar-toggle{cursor:pointer;opacity:.8;z-index:30;background:#222;width:16px;height:16px;padding:5px;position:fixed;bottom:61px;right:30px}@media (width<=991px){.sidebar-toggle{right:20px}}.sidebar-toggle:hover{opacity:1}@media (width<=991px){.sidebar-toggle{opacity:1}}.sidebar-toggle:hover .toggle-line{background:#87daff}@media (any-hover:hover){body:not(.sidebar-active) .sidebar-toggle:hover :first-child{width:50%;top:2px;transform:rotate(-45deg)}body:not(.sidebar-active) .sidebar-toggle:hover :last-child{width:50%;top:-2px;transform:rotate(45deg)}}.sidebar-active .sidebar-toggle :nth-child(2){opacity:0}.sidebar-active .sidebar-toggle :first-child{top:6px;transform:rotate(-45deg)}.sidebar-active .sidebar-toggle :last-child{top:-6px;transform:rotate(45deg)}.sidebar-nav{pointer-events:none;visibility:hidden;height:0;margin:0;padding-left:0;font-size:.875em;transition:height .2s ease-in-out,visibility .2s ease-in-out;overflow:hidden}.sidebar-nav-active .sidebar-nav{pointer-events:unset;height:calc(2em + 1px);visibility:unset}.sidebar-nav li{color:#666;cursor:pointer;border-bottom:1px solid #0000;transition:border-bottom-color .2s ease-in-out,color .2s ease-in-out;display:inline-block}.sidebar-nav li.sidebar-nav-overview{margin-left:10px}.sidebar-nav li:hover{color:#f5f5f5}.sidebar-toc-active .sidebar-nav-toc,.sidebar-overview-active .sidebar-nav-overview{color:#87daff;border-bottom-color:#87daff;transition-delay:.2s}.sidebar-toc-active .sidebar-nav-toc:hover,.sidebar-overview-active .sidebar-nav-overview:hover{color:#87daff}.sidebar-panel-container{flex:1;align-items:start;padding-top:0;transition:padding-top .2s ease-in-out;display:grid;overflow:hidden auto}.sidebar-nav-active .sidebar-panel-container{padding-top:20px}.sidebar-panel{opacity:0;pointer-events:none;visibility:hidden;grid-area:1/1;height:0;transition:opacity .2s ease-in-out,transform .2s ease-in-out,visibility .2s ease-in-out;animation:.2s ease-in-out deactivate-sidebar-panel;overflow:hidden;transform:translateY(0)}.sidebar-nav-active .sidebar-panel,.sidebar-overview-active .sidebar-panel.post-toc-wrap{transform:translateY(-20px)}.sidebar-overview-active:not(.sidebar-nav-active) .sidebar-panel.post-toc-wrap{transition-delay:0s,.2s,0s}.sidebar-overview-active .sidebar-panel.site-overview-wrap,.sidebar-toc-active .sidebar-panel.post-toc-wrap{opacity:1;pointer-events:unset;height:auto;visibility:unset;transition-delay:.2s,.2s,0s;animation-name:activate-sidebar-panel;transform:translateY(0)}.sidebar-panel.site-overview-wrap{flex-direction:column;justify-content:flex-start;gap:10px;display:flex}@keyframes deactivate-sidebar-panel{0%{height:var(--inactive-panel-height,0)}to{height:var(--active-panel-height,0)}}@keyframes activate-sidebar-panel{0%{height:var(--inactive-panel-height,auto)}to{height:var(--active-panel-height,auto)}}.post-toc{font-size:.875em}.post-toc ol{text-align:left;margin:0;padding:0 2px 0 10px;list-style:none}.post-toc ol>:last-child{margin-bottom:5px}.post-toc ol>ol{padding-left:0}.post-toc ol a{transition:all .2s ease-in-out}.post-toc .nav-item{text-overflow:ellipsis;white-space:nowrap;line-height:1.8;overflow:hidden}.post-toc .nav .nav-child{--height:0;opacity:0;visibility:hidden;height:0;transition:all .2s ease-in-out;overflow:hidden}.post-toc .nav .active>.nav-child{height:var(--height,auto);opacity:1;visibility:unset}.post-toc .nav .active>a{color:#87daff;border-bottom-color:#87daff}.post-toc .nav .active-current>a,.post-toc .nav .active-current>a:hover{color:#87daff}.site-author-image{border:2px solid #333;border-radius:50%;max-width:96px;padding:2px}.site-author-name{color:#f5f5f5;margin:5px 0 0;font-weight:400}.site-description{color:#999;margin-top:5px;font-size:1em}.site-state{flex-wrap:wrap;justify-content:center;line-height:1.4;display:flex}.site-state-item{padding:0 15px}.site-state-item a{border-bottom:0;display:block}.site-state-item-count{font-size:1.25em;font-weight:600;display:block}.site-state-item-name{color:inherit;font-size:.875em}.sidebar .sidebar-button:not(:first-child){margin-top:15px}.sidebar .sidebar-button button{color:#fc6423;cursor:pointer;background:0 0;border:1px solid #fc6423;border-radius:4px;padding:0 15px;line-height:2}.sidebar .sidebar-button button:hover{color:#fff;background:#fc6423}.sidebar .sidebar-button button i[class^=fa]{margin-right:5px}.links-of-author a{font-size:.8125em}.links-of-author i[class^=fa]{margin-right:2px}.cc-license .cc-opacity{opacity:.7;border-bottom:0}.cc-license .cc-opacity:hover{opacity:.9}.cc-license img{display:inline-block}.links-of-blogroll{font-size:.8125em}.links-of-blogroll-title{font-size:.875em;font-weight:600}.links-of-blogroll-list{flex-flow:column wrap;justify-content:center;gap:5px;margin:5px 0 0;padding:0;list-style:none;display:flex}.links-of-blogroll-item{max-width:100%}.links-of-blogroll-item a{box-sizing:border-box;text-overflow:ellipsis;white-space:nowrap;max-width:100%;display:inline-block;overflow:hidden}.footer{color:#999;padding:20px 0;font-size:.875em;transition:left .2s ease-in-out,right .2s ease-in-out}.footer.footer-fixed{position:absolute;bottom:0;left:0;right:0}.footer-inner{box-sizing:border-box;text-align:center;flex-direction:column;justify-content:center;width:700px;margin:0 auto;display:flex}@media (width<=767px){.footer-inner{width:auto}}@media (width>=1200px){.footer-inner{width:800px}}@media (width>=1600px){.footer-inner{width:900px}}.use-motion .footer{opacity:0}.languages{font-size:1.125em;display:inline-block;position:relative}.languages .lang-select-label span{margin:0 .5em}.languages .lang-select{opacity:0;width:100%;height:100%;position:absolute;top:0;left:0}.with-love{color:red;margin:0 5px;animation:1.33s ease-in-out infinite icon-animate;display:inline-block}@keyframes icon-animate{0%,to{transform:scale(1)}10%,30%{transform:scale(.9)}20%,40%,60%,80%{transform:scale(1.1)}50%,70%{transform:scale(1.1)}}.back-to-top{color:#fff;cursor:pointer;opacity:.8;z-index:30;background:#222;align-items:center;height:26px;font-size:12px;transition:bottom .2s ease-in-out;display:flex;position:fixed;bottom:-100px;right:30px}.back-to-top span{margin-right:8px;display:none}.back-to-top .fa{text-align:center;width:26px}@media (width<=991px){.back-to-top{right:20px}}.back-to-top:hover{opacity:1}@media (width<=991px){.back-to-top{opacity:1}}.back-to-top:hover{color:#87daff}.back-to-top.back-to-top-on{bottom:30px}.reading-progress-bar{--progress:0;z-index:50;height:3px;width:var(--progress);background:#37c6c0;position:fixed;top:0;left:0}.rtl.post-body p,.rtl.post-body a,.rtl.post-body h1,.rtl.post-body h2,.rtl.post-body h3,.rtl.post-body h4,.rtl.post-body h5,.rtl.post-body h6,.rtl.post-body li,.rtl.post-body ul,.rtl.post-body ol{direction:rtl;font-family:UKIJ Ekran}.rtl.post-title{font-family:UKIJ Ekran}.post-button{text-align:center;margin-top:40px}.use-motion .post-block,.use-motion .pagination,.use-motion .comments,.use-motion .post-header,.use-motion .post-body,.use-motion .collection-header{visibility:hidden}.posts-collapse .post-content{margin-bottom:35px;margin-left:35px;position:relative}@media (width<=767px){.posts-collapse .post-content{margin-left:0;margin-right:0}}.posts-collapse .post-content .collection-title{font-size:1.125em;position:relative}.posts-collapse .post-content .collection-title:before{content:" ";background:#999;border:1px solid #fff;border-radius:50%;width:10px;height:10px;margin-top:-4px;margin-left:-6px;position:absolute;top:50%}.posts-collapse .post-content .collection-year{margin:60px 0;font-size:1.5em;font-weight:700;position:relative}.posts-collapse .post-content .collection-year .collection-year-count{color:#555;text-shadow:none;background:#eee;border-radius:0;margin-left:.35em;padding:1px 4px;font-size:.75em;font-weight:700;line-height:1}.posts-collapse .post-content .collection-year:before{content:" ";background:#bbb;border-radius:50%;width:8px;height:8px;margin-top:-4px;margin-left:-4px;position:absolute;top:50%}.posts-collapse .post-content .collection-header{margin-left:20px;display:block}.posts-collapse .post-content .collection-header small{color:#bbb;margin-left:5px}.posts-collapse .post-content .post-header{border-bottom:1px dashed #ccc;margin:30px 2px 0;padding-left:15px;transition:border .2s ease-in-out;position:relative}.posts-collapse .post-content .post-header:before{content:" ";background:#bbb;border:1px solid #fff;border-radius:50%;width:6px;height:6px;transition:background .2s ease-in-out;position:absolute;top:.75em;left:-6px}.posts-collapse .post-content .post-header:hover{border-bottom-color:#666}.posts-collapse .post-content .post-header:hover:before{background:#222}.posts-collapse .post-content .post-meta-container{margin-right:10px;font-size:.75em;display:inline}.posts-collapse .post-content .post-title{display:inline}.posts-collapse .post-content .post-title a{color:var(--link-color);border-bottom:0}.posts-collapse .post-content .post-title .fa{margin-left:5px;font-size:.875em}.posts-collapse .post-content:before{content:" ";background:#f5f5f5;width:4px;height:100%;margin-left:-2px;position:absolute;top:1.25em}.post-body{overflow-wrap:break-word;font-family:Lato,PingFang SC,Microsoft YaHei,sans-serif}@media (width>=1200px){.post-body{font-size:1.125em}}@media (width>=992px){.post-body{text-align:justify}}@media (width<=991px){.post-body{text-align:justify}}.post-body h1 .header-anchor,.post-body h2 .header-anchor,.post-body h3 .header-anchor,.post-body h4 .header-anchor,.post-body h5 .header-anchor,.post-body h6 .header-anchor,.post-body h1 .headerlink,.post-body h2 .headerlink,.post-body h3 .headerlink,.post-body h4 .headerlink,.post-body h5 .headerlink,.post-body h6 .headerlink{color:inherit;float:right;opacity:0;border-bottom-style:none;margin-left:10px;font-size:.875em}.post-body h1 .header-anchor:before,.post-body h2 .header-anchor:before,.post-body h3 .header-anchor:before,.post-body h4 .header-anchor:before,.post-body h5 .header-anchor:before,.post-body h6 .header-anchor:before,.post-body h1 .headerlink:before,.post-body h2 .headerlink:before,.post-body h3 .headerlink:before,.post-body h4 .headerlink:before,.post-body h5 .headerlink:before,.post-body h6 .headerlink:before{content:"";font-family:"Font Awesome 6 Free";font-weight:900}.post-body h1:hover .header-anchor,.post-body h2:hover .header-anchor,.post-body h3:hover .header-anchor,.post-body h4:hover .header-anchor,.post-body h5:hover .header-anchor,.post-body h6:hover .header-anchor,.post-body h1:hover .headerlink,.post-body h2:hover .headerlink,.post-body h3:hover .headerlink,.post-body h4:hover .headerlink,.post-body h5:hover .headerlink,.post-body h6:hover .headerlink{opacity:.5}.post-body h1:hover .header-anchor:hover,.post-body h2:hover .header-anchor:hover,.post-body h3:hover .header-anchor:hover,.post-body h4:hover .header-anchor:hover,.post-body h5:hover .header-anchor:hover,.post-body h6:hover .header-anchor:hover,.post-body h1:hover .headerlink:hover,.post-body h2:hover .headerlink:hover,.post-body h3:hover .headerlink:hover,.post-body h4:hover .headerlink:hover,.post-body h5:hover .headerlink:hover,.post-body h6:hover .headerlink:hover{opacity:1}.post-body .exturl .fa{margin-left:4px;font-size:.875em}.post-body figure:not(.highlight) figcaption{color:#999;text-align:center;margin:-15px auto 15px;font-size:.875em;font-weight:700;line-height:1}.post-body iframe,.post-body img,.post-body video,.post-body embed{margin-bottom:20px}.post-body .video-container{width:100%;height:0;margin-bottom:20px;padding-top:75%;position:relative;overflow:hidden}.post-body .video-container iframe,.post-body .video-container object,.post-body .video-container embed{width:100%;height:100%;margin:0;position:absolute;top:0;left:0}.post-gallery{min-height:200px;display:flex}.post-gallery .post-gallery-image{flex:1}.post-gallery .post-gallery-image:not(:first-child){clip-path:polygon(40px 0,100% 0,100% 100%,0 100%);margin-left:-20px}.post-gallery .post-gallery-image:not(:last-child){margin-right:-20px}.post-gallery .post-gallery-image img{object-fit:cover;opacity:1;width:100%;height:100%}.posts-expand .post-gallery{margin-bottom:60px}.posts-collapse .post-gallery{margin:15px 0}.posts-expand .post-header{text-align:center;margin-bottom:60px;font-size:1.125em}.posts-expand .post-title{margin:initial;overflow-wrap:break-word;font-size:1.5em;font-weight:400}.posts-expand .post-title-link{color:var(--link-color);border-bottom:0;max-width:100%;display:inline-block;position:relative}.posts-expand .post-title-link:before{background:var(--link-color);content:"";width:100%;height:2px;transition:transform .2s ease-in-out;position:absolute;bottom:0;left:0;transform:scaleX(0)}.posts-expand .post-title-link:hover:before{transform:scaleX(1)}.posts-expand .post-title-link .fa{margin-left:5px;font-size:.875em}.post-sticky-flag{margin-right:8px;display:inline-block;transform:rotate(30deg)}.posts-expand .post-meta-container{color:#999;margin-top:3px;font-family:Lato,PingFang SC,Microsoft YaHei,sans-serif;font-size:.75em}.posts-expand .post-meta-container .post-description{margin-top:2px;font-size:.875em}.posts-expand .post-meta-container time{border-bottom:1px dashed #999}.post-meta{flex-wrap:wrap;justify-content:center;display:flex}:not(.post-meta-break)+.post-meta-item:before{content:"|";margin:0 .5em}.post-meta-item-icon{margin-right:3px}@media (width<=991px){.post-meta-item-text{display:none}}.post-meta-break{flex-basis:100%;height:0}.post-nav{border-top:1px solid #eee;justify-content:space-between;gap:30px;margin-top:1em;padding:10px 5px 0;display:flex}.post-nav-item{flex:1}.post-nav-item a{border-bottom:0;font-size:.875em;line-height:1.6;display:block}.post-nav-item a:active{top:2px}.post-nav-item .fa{font-size:.75em}.post-nav-item:first-child .fa{margin-right:5px}.post-nav-item:last-child{text-align:right}.post-nav-item:last-child .fa{margin-left:5px}.post-footer{flex-direction:column;justify-content:center;display:flex}.post-eof{background:#ccc;width:8%;height:1px;margin:80px auto 60px}.post-block:last-of-type .post-eof{display:none}.post-copyright ul{background:var(--card-bg-color);border-left:3px solid #ff2a2a;margin:1em 0 0;padding:.5em 1em;list-style:none;position:relative;overflow:hidden}.post-copyright ul:after{content:"";opacity:.1;font-family:"Font Awesome 6 Brands";font-size:200px;position:absolute;top:-150px;right:-50px}.post-tags{text-align:center;margin-top:40px}.post-tags a{font-size:.8125em;display:inline-block}.post-tags a:not(:last-child){margin-right:10px}.social-like{border-top:1px solid #eee;flex-wrap:wrap;justify-content:center;margin-top:1em;padding-top:1em;font-size:.875em;display:flex}.social-like a{border-bottom:none}.reward-container{text-align:center;margin:1em 0 0;padding:1em 0}.reward-container button{color:#87daff;cursor:pointer;vertical-align:text-top;background:0 0;border:2px solid #87daff;border-radius:2px;outline:0;padding:0 15px;line-height:2}.reward-container button:hover{color:#fff;background:#87daff}.post-reward{padding-top:20px;display:none}.post-reward.active{display:block}.post-reward div{display:inline-block}.post-reward div span{display:block}.post-reward img{width:180px;max-width:100%;margin:.8em 2em 0;display:inline-block}@keyframes next-roll{0%{transform:rotate(30deg)}to{transform:rotate(-30deg)}}.category-all-page .category-all-title{text-align:center}.category-all-page .category-all{margin-top:20px}.category-all-page .category-list{margin:0;padding:0;list-style:none}.category-all-page .category-list-item{margin:5px 10px}.category-all-page .category-list-count{color:#555;text-shadow:none;background:#eee;border-radius:0;margin-left:.35em;padding:1px 4px;font-size:.75em;font-weight:700;line-height:1}.category-all-page .category-list-child{padding-left:10px}.event-list hr{background:#222;margin:20px 0 45px}.event-list hr:after{color:#fff;content:"NOW";background:#222;padding:0 5px;font-weight:700;display:inline-block}.event-list .event{--event-background:#222;--event-foreground:#bbb;--event-title:#fff;background:var(--event-background);padding:15px}.event-list .event .event-summary{color:var(--event-title);border-bottom:0;margin:0;padding:0 0 0 35px;position:relative}.event-list .event .event-summary:before{background:var(--event-title);content:" ";border-radius:50%;width:12px;height:12px;margin-top:-6px;animation:1s ease-in-out infinite alternate dot-flash;position:absolute;top:50%;left:0}.event-list .event:nth-of-type(odd) .event-summary:before{animation-delay:.5s}.event-list .event:not(:last-child){margin-bottom:20px}.event-list .event .event-relative-time{color:var(--event-foreground);padding-left:12px;font-size:12px;font-weight:400;display:inline-block}.event-list .event .event-details{color:var(--event-foreground);padding:6px 0 6px 35px;line-height:18px;display:block}.event-list .event .event-details:before{color:var(--event-foreground);width:14px;margin-right:9px;font-family:"Font Awesome 6 Free";font-weight:900;display:inline-block}.event-list .event .event-details.event-location:before{content:""}.event-list .event .event-details.event-duration:before{content:""}.event-list .event .event-details.event-description:before{content:""}.event-list .event-past{--event-background:#f5f5f5;--event-foreground:#999;--event-title:#222}@keyframes dot-flash{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}ul.breadcrumb{text-align:center;margin:1em 0;padding:0 2em;font-size:.75em;list-style:none}ul.breadcrumb li{display:inline}ul.breadcrumb li:not(:first-child):before{content:"/ ";padding:.5em;font-weight:400}ul.breadcrumb li:last-child{font-weight:700}.tag-cloud{text-align:center}.tag-cloud a{margin:10px;display:inline-block}.tag-cloud-0{color:#aaa;border-bottom-color:#aaa}.tag-cloud-1{color:#9a9a9a;border-bottom-color:#9a9a9a}.tag-cloud-2{color:#8b8b8b;border-bottom-color:#8b8b8b}.tag-cloud-3{color:#7c7c7c;border-bottom-color:#7c7c7c}.tag-cloud-4{color:#6c6c6c;border-bottom-color:#6c6c6c}.tag-cloud-5{color:#5d5d5d;border-bottom-color:#5d5d5d}.tag-cloud-6{color:#4e4e4e;border-bottom-color:#4e4e4e}.tag-cloud-7{color:#3e3e3e;border-bottom-color:#3e3e3e}.tag-cloud-8{color:#2f2f2f;border-bottom-color:#2f2f2f}.tag-cloud-9{color:#202020;border-bottom-color:#202020}.tag-cloud-10{color:#111;border-bottom-color:#111}.search-active{overflow:hidden}.search-pop-overlay{visibility:hidden;z-index:40;background:0 0;width:100%;height:100%;transition:visibility .4s,background .4s;display:flex;position:fixed;top:0;left:0}.search-active .search-pop-overlay{visibility:visible;background:#0000004d}.search-popup{background:var(--card-bg-color);border-radius:5px;width:700px;height:80%;margin:auto;transition:transform .4s;transform:scale(0)}.search-active .search-popup{transform:scale(1)}@media (width<=767px){.search-popup{border-radius:0;width:100%;height:100%}}.search-popup .search-icon,.search-popup .popup-btn-close{color:#999;padding:0 10px;font-size:18px}.search-popup .popup-btn-close{cursor:pointer}.search-popup .popup-btn-close:hover .fa{color:#222}.search-popup .search-header{background:#eee;border-top-left-radius:5px;border-top-right-radius:5px;padding:5px;display:flex}.search-popup input.search-input{background:0 0;border:0;outline:0;width:100%}.search-popup input.search-input::-webkit-search-cancel-button{display:none}.search-popup .search-result-container{flex-direction:column;height:calc(100% - 55px);padding:5px 25px;display:flex;overflow:auto}.search-popup .search-result-container hr{flex-shrink:0;margin:5px 0 10px}.search-popup .search-result-container hr:first-child{display:none}.search-popup .search-result-list{margin:0 5px;padding:0}.search-popup a.search-result-title{font-weight:700}.search-popup p.search-result{border-bottom:1px dashed #ccc;margin:0 0 10px;padding:5px 0}.search-popup .search-input-container{flex-grow:1;padding:2px}.search-popup .search-result-icon{color:#ccc;margin:auto}mark.search-keyword{color:#ff2a2a;background:0 0;border-bottom:1px dashed #ff2a2a;font-weight:700}.use-motion .animated{visibility:inherit;animation-fill-mode:none}.use-motion .sidebar .animated{animation-fill-mode:both}header.header{width:700px;margin:0 auto}@media (width<=767px){header.header{width:auto}}@media (width>=1200px){header.header{width:800px}}@media (width>=1600px){header.header{width:900px}}.main-inner{width:700px;margin:0 auto;padding-bottom:60px}@media (width<=767px){.main-inner{width:auto}}@media (width>=1200px){.main-inner{width:800px}}@media (width>=1600px){.main-inner{width:900px}}@media (width<=767px){.main-inner{padding-left:20px;padding-right:20px}}.post-block:first-of-type{padding-top:70px}@media (width<=767px){.post-block:first-of-type{padding-top:35px}}.custom-logo-image{background:#fff;max-width:150px;margin:0 auto 10px;padding:5px}.brand{background:var(--btn-default-bg)}header.header{padding-top:100px}@media (width<=767px){header.header{padding-top:50px}.site-nav{padding-top:30px}.main-menu{border-top:1px solid #ddd;border-bottom:1px solid #ddd}.menu{text-align:left}.menu .menu-item{margin:0 10px}}.menu .menu-item a{border-bottom:1px solid #0000}@media (width<=767px){.menu .menu-item a{align-items:center;padding:5px 10px;display:flex}.menu .menu-item a .badge{margin-left:auto}}.menu .menu-item a:hover,.menu .menu-item a.menu-item-active{border-bottom:1px solid var(--link-hover-color);background:0 0}@media (width<=767px){.menu .menu-item a:hover,.menu .menu-item a.menu-item-active{border-bottom:1px dotted #ddd}}@media (width>=768px){.menu .menu-item i[class^=fa]{width:100%;margin-right:0;line-height:2;display:block}}.sub-menu{margin:10px 0}.sub-menu .menu-item{display:inline-block}@media (width>=1200px){.sidebar-dimmer{display:none}.sidebar-active{padding-right:320px}.sidebar-active .footer-fixed{right:320px}}</style><link integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css rel=stylesheet><link integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css rel=stylesheet><script class=next-config data-name=main type=application/json>{"hostname":"wangfanggang.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.23.0","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"default"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script defer src=/js/config.js></script><meta content=blog property=og:type><meta content="Java 学习笔记 - 钢钢更新" property=og:title><meta content=https://wangfanggang.com/Java/java_note/index.html property=og:url><meta content=钢钢更新 property=og:site_name><meta content=zh_CN property=og:locale><meta content=https://ws1.sinaimg.cn/mw690/006By2pOly1g32d72qammj31gc0vmb2b.jpg property=og:image><meta content=http://stepimagewm.how2j.cn/573.png property=og:image><meta content=http://stepimagewm.how2j.cn/574.png property=og:image><meta content=http://stepimagewm.how2j.cn/2478.png property=og:image><meta content=http://stepimagewm.how2j.cn/605.png property=og:image><meta content=https://wangfanggang.com/1557708467006.png property=og:image><meta content=http://stepimagewm.how2j.cn/609.png property=og:image><meta content=http://stepimagewm.how2j.cn/610.png property=og:image><meta content=http://stepimagewm.how2j.cn/611.png property=og:image><meta content=http://stepimagewm.how2j.cn/612.png property=og:image><meta content=http://stepimagewm.how2j.cn/653.png property=og:image><meta content=http://stepimagewm.how2j.cn/654.png property=og:image><meta content=http://stepimagewm.how2j.cn/672.png property=og:image><meta content=http://stepimagewm.how2j.cn/683.png property=og:image><meta content=http://stepimagewm.how2j.cn/696.png property=og:image><meta content=http://stepimagewm.how2j.cn/2412.png property=og:image><meta content=http://stepimagewm.how2j.cn/742.png property=og:image><meta content=http://stepimagewm.how2j.cn/759.png property=og:image><meta content=http://stepimagewm.how2j.cn/2432.png property=og:image><meta content=http://stepimagewm.how2j.cn/771.png property=og:image><meta content=http://stepimagewm.how2j.cn/2142.png property=og:image><meta content=http://stepimagewm.how2j.cn/5678.png property=og:image><meta content=http://stepimagewm.how2j.cn/2453.png property=og:image><meta content=http://stepimagewm.how2j.cn/2454.png property=og:image><meta content=http://stepimagewm.how2j.cn/2455.png property=og:image><meta content=http://stepimagewm.how2j.cn/2456.png property=og:image><meta content=http://stepimagewm.how2j.cn/2457.png property=og:image><meta content=http://stepimagewm.how2j.cn/2458.png property=og:image><meta content=http://stepimagewm.how2j.cn/2459.png property=og:image><meta content=http://stepimagewm.how2j.cn/2460.png property=og:image><meta content=http://stepimagewm.how2j.cn/2461.png property=og:image><meta content=http://stepimagewm.how2j.cn/2462.png property=og:image><meta content=http://stepimagewm.how2j.cn/808.png property=og:image><meta content=http://stepimagewm.how2j.cn/806.png property=og:image><meta content=http://stepimagewm.how2j.cn/809.png property=og:image><meta content=http://stepimagewm.how2j.cn/810.png property=og:image><meta content=http://stepimagewm.how2j.cn/1008.png property=og:image><meta content=http://stepimagewm.how2j.cn/1009.png property=og:image><meta content=http://stepimagewm.how2j.cn/1010.png property=og:image><meta content=http://stepimagewm.how2j.cn/830.png property=og:image><meta content=http://stepimagewm.how2j.cn/2498.png property=og:image><meta content=http://stepimagewm.how2j.cn/2501.png property=og:image><meta content=http://stepimagewm.how2j.cn/2499.png property=og:image><meta content=http://stepimagewm.how2j.cn/2500.png property=og:image><meta content=http://stepimagewm.how2j.cn/2497.png property=og:image><meta content=http://stepimagewm.how2j.cn/798.png property=og:image><meta content=http://stepimagewm.how2j.cn/2513.png property=og:image><meta content=http://stepimagewm.how2j.cn/799.png property=og:image><meta content=http://stepimagewm.how2j.cn/2508.png property=og:image><meta content=http://stepimagewm.how2j.cn/819.png property=og:image><meta content=http://stepimagewm.how2j.cn/828.png property=og:image><meta content=http://stepimagewm.how2j.cn/829.png property=og:image><meta content=http://stepimagewm.how2j.cn/2564.png property=og:image><meta content=https://wangfanggang.com/1557839242864.png property=og:image><meta content=http://stepimagewm.how2j.cn/838.png property=og:image><meta content=http://stepimagewm.how2j.cn/836.png property=og:image><meta content=http://stepimagewm.how2j.cn/835.png property=og:image><meta content=http://stepimagewm.how2j.cn/2551.png property=og:image><meta content=http://stepimagewm.how2j.cn/2552.png property=og:image><meta content=http://stepimagewm.how2j.cn/2553.png property=og:image><meta content=http://stepimagewm.how2j.cn/786.png property=og:image><meta content=http://stepimagewm.how2j.cn/787.png property=og:image><meta content=http://stepimagewm.how2j.cn/789.png property=og:image><meta content=http://stepimagewm.how2j.cn/790.png property=og:image><meta content=http://stepimagewm.how2j.cn/793.png property=og:image><meta content=http://stepimagewm.how2j.cn/2595.png property=og:image><meta content=http://stepimagewm.how2j.cn/2596.png property=og:image><meta content=http://stepimagewm.how2j.cn/794.png property=og:image><meta content=http://stepimagewm.how2j.cn/796.png property=og:image><meta content=http://stepimagewm.how2j.cn/2600.png property=og:image><meta content=http://stepimagewm.how2j.cn/1006.png property=og:image><meta content=http://stepimagewm.how2j.cn/2601.png property=og:image><meta content=http://stepimagewm.how2j.cn/2610.png property=og:image><meta content=http://stepimagewm.how2j.cn/2611.png property=og:image><meta content=http://stepimagewm.how2j.cn/2612.png property=og:image><meta content=http://stepimagewm.how2j.cn/2617.png property=og:image><meta content=http://stepimagewm.how2j.cn/2626.png property=og:image><meta content=http://stepimagewm.how2j.cn/856.png property=og:image><meta content=http://stepimagewm.how2j.cn/858.png property=og:image><meta content=http://stepimagewm.how2j.cn/859.png property=og:image><meta content=http://stepimagewm.how2j.cn/860.png property=og:image><meta content=http://stepimagewm.how2j.cn/866.png property=og:image><meta content=http://stepimagewm.how2j.cn/1714.png property=og:image><meta content=http://stepimagewm.how2j.cn/878.png property=og:image><meta content=http://stepimagewm.how2j.cn/2654.png property=og:image><meta content=http://stepimagewm.how2j.cn/2655.png property=og:image><meta content=http://stepimagewm.how2j.cn/1833.png property=og:image><meta content=http://stepimagewm.how2j.cn/2708.png property=og:image><meta content=http://stepimagewm.how2j.cn/4264.png property=og:image><meta content=http://stepimagewm.how2j.cn/4041.png property=og:image><meta content=http://stepimagewm.how2j.cn/4048.png property=og:image><meta content=2019-05-15T22:02:35.000Z property=article:published_time><meta content=2019-09-03T12:27:53.000Z property=article:modified_time><meta content="王方钢 / Kenny Wang" property=article:author><meta content=Java property=article:tag><meta content=summary name=twitter:card><meta content=https://ws1.sinaimg.cn/mw690/006By2pOly1g32d72qammj31gc0vmb2b.jpg name=twitter:image><link href=https://wangfanggang.com/Java/java_note/ rel=canonical><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://wangfanggang.com/Java/java_note/","path":"Java/java_note/","title":"Java 学习笔记 - 钢钢更新"}</script><script class=next-config data-name=calendar type=application/json>""</script><title>Java 学习笔记 - 钢钢更新 | 钢钢更新</title><script integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin defer src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js></script><script defer src=/js/utils.js></script><script defer src=/js/motion.js></script><script defer src=/js/sidebar.js></script><script defer src=/js/next-boot.js></script><script integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin defer src=https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js></script><script defer src=/js/third-party/search/local-search.js></script><script defer src=/js/third-party/addtoany.js></script><noscript><link href=/css/noscript.css rel=stylesheet></noscript><body class=use-motion itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><div class=column><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=site-brand-container><div class=site-nav-toggle><div aria-label=切换导航栏 class=toggle role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><a class=brand href=/ rel=start> <i class=logo-line></i> <p class=site-title>钢钢更新</p> <i class=logo-line></i> </a><p class=site-subtitle itemprop=description>用行动改变世界，做个有情怀的技术宅</div><div class=site-nav-right><div class="toggle popup-trigger" aria-label=搜索 role=button><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>首页</a><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="fa fa-tags fa-fw"></i>标签</a><li class="menu-item menu-item-categories"><a href=/categories/ rel=section><i class="fa fa-th fa-fw"></i>分类</a><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="fa fa-archive fa-fw"></i>归档</a><li class="menu-item menu-item-sitemap"><a href=/sitemap.xml rel=section><i class="fa fa-sitemap fa-fw"></i>站点地图</a><li class="menu-item menu-item-search"><a class=popup-trigger role=button><i class="fa fa-search fa-fw"></i>搜索 </a></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon> <i class="fa fa-search"></i> </span><div class=search-input-container><input autocapitalize=off autocomplete=off class=search-input maxlength=80 placeholder=搜索... spellcheck=false type=search></div><span class=popup-btn-close role=button> <i class="fa fa-times-circle"></i> </span></div><div class=search-result-container><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录<li class=sidebar-nav-overview>站点概览</ul><div class=sidebar-panel-container><!--noindex--><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class=nav><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%95%B0%E7%BB%84><span class=nav-number>1.</span> <span class=nav-text>数组</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84><span class=nav-number>1.1.</span> <span class=nav-text>创建数组</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%AE%BF%E9%97%AE%E6%95%B0%E7%BB%84><span class=nav-number>1.2.</span> <span class=nav-text>访问数组</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%95%B0%E7%BB%84%E9%95%BF%E5%BA%A6><span class=nav-number>1.3.</span> <span class=nav-text>数组长度</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%95%B0%E7%BB%84%E6%9C%80%E5%B0%8F%E5%80%BC><span class=nav-number>1.4.</span> <span class=nav-text>数组最小值</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%88%86%E9%85%8D%E7%A9%BA%E9%97%B4%E4%B8%8E%E8%B5%8B%E5%80%BC%E5%88%86%E6%AD%A5%E8%BF%9B%E8%A1%8C><span class=nav-number>1.5.</span> <span class=nav-text>分配空间与赋值分步进行</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%88%86%E9%85%8D%E7%A9%BA%E9%97%B4%EF%BC%8C%E5%90%8C%E6%97%B6%E8%B5%8B%E5%80%BC><span class=nav-number>1.6.</span> <span class=nav-text>分配空间，同时赋值</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%8E%92%E5%BA%8F><span class=nav-number>1.7.</span> <span class=nav-text>排序</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%80%89%E6%8B%A9%E6%B3%95%E6%8E%92%E5%BA%8F><span class=nav-number>1.7.1.</span> <span class=nav-text>选择法排序</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%86%92%E6%B3%A1%E6%B3%95%E6%8E%92%E5%BA%8F><span class=nav-number>1.7.2.</span> <span class=nav-text>冒泡法排序</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%86%92%E6%B3%A1%E6%B3%95%EF%BC%8C%E9%80%89%E6%8B%A9%E6%B3%95%EF%BC%8C%E4%BA%8C%E5%8F%89%E6%A0%91-%E6%8E%92%E5%BA%8F%E6%AF%94%E8%BE%83><span class=nav-number>1.7.3.</span> <span class=nav-text>冒泡法，选择法，二叉树 排序比较</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%A2%9E%E5%BC%BA%E5%9E%8Bfor%E5%BE%AA%E7%8E%AF><span class=nav-number>1.8.</span> <span class=nav-text>增强型for循环</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%A4%8D%E5%88%B6%E6%95%B0%E7%BB%84><span class=nav-number>1.9.</span> <span class=nav-text>复制数组</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84><span class=nav-number>1.10.</span> <span class=nav-text>初始化二维数组</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#JAVA-UTIL-ARRAYS%E7%B1%BB%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95><span class=nav-number>1.11.</span> <span class=nav-text>JAVA.UTIL.ARRAYS类常用方法</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%95%B0%E7%BB%84%E5%A4%8D%E5%88%B6><span class=nav-number>1.11.1.</span> <span class=nav-text>数组复制</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%AD%97%E7%AC%A6%E4%B8%B2><span class=nav-number>1.11.2.</span> <span class=nav-text>转换为字符串</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%95%B0%E7%BB%84%E6%8E%92%E5%BA%8F><span class=nav-number>1.11.3.</span> <span class=nav-text>数组排序</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%95%B0%E7%BB%84%E6%90%9C%E7%B4%A2><span class=nav-number>1.11.4.</span> <span class=nav-text>数组搜索</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%95%B0%E7%BB%84%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E7%9B%B8%E5%90%8C><span class=nav-number>1.11.5.</span> <span class=nav-text>数组判断是否相同</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%95%B0%E7%BB%84%E5%A1%AB%E5%85%85><span class=nav-number>1.11.6.</span> <span class=nav-text>数组填充</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1><span class=nav-number>2.</span> <span class=nav-text>类和对象</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%BC%95%E7%94%A8><span class=nav-number>2.1.</span> <span class=nav-text>引用</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%89%A9%E5%93%81%E7%B1%BBItem><span class=nav-number>2.1.1.</span> <span class=nav-text>物品类Item</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%AD%A6%E5%99%A8%E7%B1%BBWeapon%EF%BC%88%E4%B8%8D%E7%BB%A7%E6%89%BF%EF%BC%89><span class=nav-number>2.1.2.</span> <span class=nav-text>武器类Weapon（不继承）</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%AD%A6%E5%99%A8%E7%B1%BBWeapon%EF%BC%88%E7%BB%A7%E6%89%BF%E7%B1%BBItem%EF%BC%89><span class=nav-number>2.1.3.</span> <span class=nav-text>武器类Weapon（继承类Item）</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD><span class=nav-number>2.2.</span> <span class=nav-text>方法重载</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#attack%E6%96%B9%E6%B3%95%E7%9A%84%E9%87%8D%E8%BD%BD><span class=nav-number>2.2.1.</span> <span class=nav-text>attack方法的重载</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8F%AF%E5%8F%98%E6%95%B0%E9%87%8F%E7%9A%84%E5%8F%82%E6%95%B0><span class=nav-number>2.2.2.</span> <span class=nav-text>可变数量的参数</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95><span class=nav-number>2.3.</span> <span class=nav-text>构造方法</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%9A%90%E5%BC%8F%E7%9A%84%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95><span class=nav-number>2.3.1.</span> <span class=nav-text>隐式的构造方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%9C%89%E5%8F%82%E7%9A%84%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95><span class=nav-number>2.3.2.</span> <span class=nav-text>有参的构造方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E7%9A%84%E9%87%8D%E8%BD%BD><span class=nav-number>2.3.3.</span> <span class=nav-text>构造方法的重载</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#this><span class=nav-number>2.4.</span> <span class=nav-text>this</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%80%9A%E8%BF%87this%E8%AE%BF%E9%97%AE%E5%B1%9E%E6%80%A7><span class=nav-number>2.4.1.</span> <span class=nav-text>通过this访问属性</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%80%9A%E8%BF%87this%E8%B0%83%E7%94%A8%E5%85%B6%E4%BB%96%E7%9A%84%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95><span class=nav-number>2.4.2.</span> <span class=nav-text>通过this调用其他的构造方法</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E4%BC%A0%E5%8F%82><span class=nav-number>2.5.</span> <span class=nav-text>传参</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E4%BC%A0%E5%8F%82><span class=nav-number>2.5.1.</span> <span class=nav-text>基本类型传参</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BC%95%E7%94%A8%E4%B8%8E%E7%AD%89%E5%8F%B7><span class=nav-number>2.5.2.</span> <span class=nav-text>引用与等号</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%B1%BB%E7%B1%BB%E5%9E%8B%E4%BC%A0%E5%8F%82><span class=nav-number>2.5.3.</span> <span class=nav-text>类类型传参</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E7%B1%BB%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB><span class=nav-number>2.6.</span> <span class=nav-text>类之间的关系</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#private-%E7%A7%81%E6%9C%89%E7%9A%84><span class=nav-number>2.6.1.</span> <span class=nav-text>private 私有的</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#package-friendly-default-%E4%B8%8D%E5%86%99><span class=nav-number>2.6.2.</span> <span class=nav-text>package/friendly/default 不写</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#protected-%E5%8F%97%E4%BF%9D%E6%8A%A4%E7%9A%84><span class=nav-number>2.6.3.</span> <span class=nav-text>protected 受保护的</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#public-%E5%85%AC%E5%85%B1%E7%9A%84><span class=nav-number>2.6.4.</span> <span class=nav-text>public 公共的</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E4%BF%AE%E9%A5%B0%E7%AC%A6%E5%B0%8F%E7%BB%93><span class=nav-number>2.7.</span> <span class=nav-text>修饰符小结</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%82%A3%E4%B9%88%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E8%AF%A5%E7%94%A8%E4%BB%80%E4%B9%88%E4%BF%AE%E9%A5%B0%E7%AC%A6%E5%91%A2%EF%BC%9F><span class=nav-number>2.7.1.</span> <span class=nav-text>那么什么情况该用什么修饰符呢？</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E7%B1%BB%E5%B1%9E%E6%80%A7><span class=nav-number>2.8.</span> <span class=nav-text>类属性</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%AE%BF%E9%97%AE%E7%B1%BB%E5%B1%9E%E6%80%A7><span class=nav-number>2.8.1.</span> <span class=nav-text>访问类属性</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%EF%BC%9F%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%E7%B1%BB%E5%B1%9E%E6%80%A7%EF%BC%9F><span class=nav-number>2.8.2.</span> <span class=nav-text>什么时候使用对象属性？什么时候使用类属性？</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95><span class=nav-number>2.9.</span> <span class=nav-text>静态方法</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%B0%83%E7%94%A8%E7%B1%BB%E6%96%B9%E6%B3%95><span class=nav-number>2.9.1.</span> <span class=nav-text>调用类方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E8%AE%BE%E8%AE%A1%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95-%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E8%AE%BE%E8%AE%A1%E7%B1%BB%E6%96%B9%E6%B3%95><span class=nav-number>2.9.2.</span> <span class=nav-text>什么时候设计对象方法? 什么时候设计类方法?</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%B1%9E%E6%80%A7%E5%88%9D%E5%A7%8B%E5%8C%96><span class=nav-number>2.10.</span> <span class=nav-text>属性初始化</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F><span class=nav-number>2.11.</span> <span class=nav-text>单例模式</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%A5%BF%E6%B1%89%E5%BC%8F%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F><span class=nav-number>2.11.1.</span> <span class=nav-text>饿汉式单例模式</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%87%92%E6%B1%89%E5%BC%8F%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F><span class=nav-number>2.11.2.</span> <span class=nav-text>懒汉式单例模式</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%E9%A5%BF%E6%B1%89%E5%BC%8F%EF%BC%9F%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%E6%87%92%E6%B1%89%E5%BC%8F%EF%BC%9F><span class=nav-number>2.11.3.</span> <span class=nav-text>什么时候使用饿汉式？什么时候使用懒汉式？</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E4%B8%89%E5%85%83%E7%B4%A0%EF%BC%88%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%9F%EF%BC%89><span class=nav-number>2.11.4.</span> <span class=nav-text>单例模式三元素（什么是单例模式？）</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B><span class=nav-number>2.12.</span> <span class=nav-text>枚举类型</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8%E6%9E%9A%E4%B8%BE%E7%9A%84%E5%A5%BD%E5%A4%84><span class=nav-number>2.12.1.</span> <span class=nav-text>使用枚举的好处</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%81%8D%E5%8E%86%E6%9E%9A%E4%B8%BE><span class=nav-number>2.12.2.</span> <span class=nav-text>遍历枚举</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%8E%A5%E5%8F%A3%E4%B8%8E%E7%BB%A7%E6%89%BF><span class=nav-number>3.</span> <span class=nav-text>接口与继承</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%8E%A5%E5%8F%A3><span class=nav-number>3.1.</span> <span class=nav-text>接口</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%89%A9%E7%90%86%E6%94%BB%E5%87%BB%E6%8E%A5%E5%8F%A3><span class=nav-number>3.1.1.</span> <span class=nav-text>物理攻击接口</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%AE%BE%E8%AE%A1%E4%B8%80%E7%B1%BB%E8%8B%B1%E9%9B%84%EF%BC%8C%E8%83%BD%E5%A4%9F%E4%BD%BF%E7%94%A8%E7%89%A9%E7%90%86%E6%94%BB%E5%87%BB><span class=nav-number>3.1.1.1.</span> <span class=nav-text>设计一类英雄，能够使用物理攻击</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%AD%94%E6%B3%95%E6%94%BB%E5%87%BB%E6%8E%A5%E5%8F%A3><span class=nav-number>3.1.2.</span> <span class=nav-text>魔法攻击接口</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%AE%BE%E8%AE%A1%E4%B8%80%E7%B1%BB%E8%8B%B1%E9%9B%84%EF%BC%8C%E5%8F%AA%E8%83%BD%E4%BD%BF%E7%94%A8%E9%AD%94%E6%B3%95%E6%94%BB%E5%87%BB><span class=nav-number>3.1.2.1.</span> <span class=nav-text>设计一类英雄，只能使用魔法攻击</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%AE%BE%E8%AE%A1%E4%B8%80%E7%B1%BB%E8%8B%B1%E9%9B%84%EF%BC%8C%E6%97%A2%E8%83%BD%E8%BF%9B%E8%A1%8C%E7%89%A9%E7%90%86%E6%94%BB%E5%87%BB%EF%BC%8C%E5%8F%88%E8%83%BD%E8%BF%9B%E8%A1%8C%E9%AD%94%E6%B3%95%E6%94%BB%E5%87%BB><span class=nav-number>3.1.3.</span> <span class=nav-text>设计一类英雄，既能进行物理攻击，又能进行魔法攻击</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E8%AF%A5%E4%BD%BF%E7%94%A8%E6%8E%A5%E5%8F%A3><span class=nav-number>3.1.4.</span> <span class=nav-text>什么样的情况下该使用接口?</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%AF%B9%E8%B1%A1%E8%BD%AC%E5%9E%8B><span class=nav-number>3.2.</span> <span class=nav-text>对象转型</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#instanceof><span class=nav-number>3.2.1.</span> <span class=nav-text>instanceof</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%87%8D%E5%86%99%EF%BC%88%E8%A6%86%E7%9B%96Override%EF%BC%89><span class=nav-number>3.3.</span> <span class=nav-text>重写（覆盖Override）</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%88%B6%E7%B1%BBItem><span class=nav-number>3.3.1.</span> <span class=nav-text>父类Item</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AD%90%E7%B1%BBLifePotion><span class=nav-number>3.3.2.</span> <span class=nav-text>子类LifePotion</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%B0%83%E7%94%A8%E9%87%8D%E5%86%99%E7%9A%84%E6%96%B9%E6%B3%95><span class=nav-number>3.3.3.</span> <span class=nav-text>调用重写的方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E9%87%8D%E5%86%99%E8%BF%99%E6%A0%B7%E7%9A%84%E6%9C%BA%E5%88%B6%E6%80%8E%E4%B9%88%E6%A0%B7%EF%BC%9F><span class=nav-number>3.3.4.</span> <span class=nav-text>如果没有重写这样的机制怎么样？</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%A4%9A%E6%80%81><span class=nav-number>3.4.</span> <span class=nav-text>多态</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%93%8D%E4%BD%9C%E7%AC%A6%E7%9A%84%E5%A4%9A%E6%80%81><span class=nav-number>3.4.1.</span> <span class=nav-text>操作符的多态</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%A7%82%E5%AF%9F%E7%B1%BB%E7%9A%84%E5%A4%9A%E6%80%81%E7%8E%B0%E8%B1%A1><span class=nav-number>3.4.2.</span> <span class=nav-text>观察类的多态现象</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%B1%BB%E7%9A%84%E5%A4%9A%E6%80%81%E6%9D%A1%E4%BB%B6><span class=nav-number>3.4.3.</span> <span class=nav-text>类的多态条件</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%B1%BB%E7%9A%84%E5%A4%9A%E6%80%81-%E4%B8%8D%E4%BD%BF%E7%94%A8%E5%A4%9A%E6%80%81><span class=nav-number>3.4.4.</span> <span class=nav-text>类的多态-不使用多态</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%B1%BB%E7%9A%84%E5%A4%9A%E6%80%81-%E4%BD%BF%E7%94%A8%E5%A4%9A%E6%80%81><span class=nav-number>3.4.5.</span> <span class=nav-text>类的多态-使用多态</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%9A%90%E8%97%8F><span class=nav-number>3.5.</span> <span class=nav-text>隐藏</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%88%B6%E7%B1%BB><span class=nav-number>3.5.1.</span> <span class=nav-text>父类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AD%90%E7%B1%BB%E9%9A%90%E8%97%8F%E7%88%B6%E7%B1%BB%E7%9A%84%E7%B1%BB%E6%96%B9%E6%B3%95><span class=nav-number>3.5.2.</span> <span class=nav-text>子类隐藏父类的类方法</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#super><span class=nav-number>3.6.</span> <span class=nav-text>super</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%87%86%E5%A4%87%E4%B8%80%E4%B8%AA%E6%98%BE%E5%BC%8F%E6%8F%90%E4%BE%9B%E6%97%A0%E5%8F%82%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E7%9A%84%E7%88%B6%E7%B1%BB><span class=nav-number>3.6.1.</span> <span class=nav-text>准备一个显式提供无参构造方法的父类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%AD%90%E7%B1%BB%EF%BC%8C%E7%88%B6%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E4%B8%80%E5%AE%9A%E4%BC%9A%E8%A2%AB%E8%B0%83%E7%94%A8><span class=nav-number>3.6.2.</span> <span class=nav-text>实例化子类，父类的构造方法一定会被调用</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%88%B6%E7%B1%BB%E6%98%BE%E5%BC%8F%E6%8F%90%E4%BE%9B%E4%B8%A4%E4%B8%AA%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95><span class=nav-number>3.6.3.</span> <span class=nav-text>父类显式提供两个构造方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AD%90%E7%B1%BB%E6%98%BE%E5%BC%8F%E8%B0%83%E7%94%A8%E7%88%B6%E7%B1%BB%E5%B8%A6%E5%8F%82%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95><span class=nav-number>3.6.4.</span> <span class=nav-text>子类显式调用父类带参构造方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%B0%83%E7%94%A8%E7%88%B6%E7%B1%BB%E5%B1%9E%E6%80%A7><span class=nav-number>3.6.5.</span> <span class=nav-text>调用父类属性</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%B0%83%E7%94%A8%E7%88%B6%E7%B1%BB%E6%96%B9%E6%B3%95><span class=nav-number>3.6.6.</span> <span class=nav-text>调用父类方法</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#Object%E7%B1%BB><span class=nav-number>3.7.</span> <span class=nav-text>Object类</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#Object%E7%B1%BB%E6%98%AF%E6%89%80%E6%9C%89%E7%B1%BB%E7%9A%84%E7%88%B6%E7%B1%BB><span class=nav-number>3.7.1.</span> <span class=nav-text>Object类是所有类的父类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#toString-NaN><span class=nav-number>3.7.2.</span> <span class=nav-text>toString()</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#finalize><span class=nav-number>3.7.3.</span> <span class=nav-text>finalize()</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#equals><span class=nav-number>3.7.4.</span> <span class=nav-text>equals()</span></a><li class="nav-item nav-level-3"><a class=nav-link><span class=nav-number>3.7.5.</span> <span class=nav-text>==</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#finial><span class=nav-number>3.8.</span> <span class=nav-text>finial</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#final%E4%BF%AE%E9%A5%B0%E7%B1%BB><span class=nav-number>3.8.1.</span> <span class=nav-text>final修饰类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#final%E4%BF%AE%E9%A5%B0%E6%96%B9%E6%B3%95><span class=nav-number>3.8.2.</span> <span class=nav-text>final修饰方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#final%E4%BF%AE%E9%A5%B0%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F><span class=nav-number>3.8.3.</span> <span class=nav-text>final修饰基本类型变量</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%8A%BD%E8%B1%A1%E7%B1%BB><span class=nav-number>3.9.</span> <span class=nav-text>抽象类</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%8A%BD%E8%B1%A1%E7%B1%BB%E5%8F%AF%E4%BB%A5%E6%B2%A1%E6%9C%89%E6%8A%BD%E8%B1%A1%E6%96%B9%E6%B3%95><span class=nav-number>3.9.1.</span> <span class=nav-text>抽象类可以没有抽象方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%8A%BD%E8%B1%A1%E7%B1%BB%E5%92%8C%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8C%BA%E5%88%AB><span class=nav-number>3.9.2.</span> <span class=nav-text>抽象类和接口的区别</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%86%85%E9%83%A8%E7%B1%BB><span class=nav-number>3.10.</span> <span class=nav-text>内部类</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%9D%9E%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB><span class=nav-number>3.10.1.</span> <span class=nav-text>非静态内部类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB><span class=nav-number>3.10.2.</span> <span class=nav-text>静态内部类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8C%BF%E5%90%8D%E7%B1%BB><span class=nav-number>3.10.3.</span> <span class=nav-text>匿名类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%9C%AC%E5%9C%B0%E7%B1%BB><span class=nav-number>3.10.4.</span> <span class=nav-text>本地类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%9C%A8%E5%8C%BF%E5%90%8D%E7%B1%BB%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%A4%96%E9%83%A8%E7%9A%84%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F><span class=nav-number>3.10.5.</span> <span class=nav-text>在匿名类中使用外部的局部变量</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95><span class=nav-number>3.11.</span> <span class=nav-text>默认方法</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BB%80%E4%B9%88%E6%98%AF%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95><span class=nav-number>3.11.1.</span> <span class=nav-text>什么是默认方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E6%9C%89%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95><span class=nav-number>3.11.2.</span> <span class=nav-text>为什么会有默认方法</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%95%B0%E5%AD%97%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2><span class=nav-number>4.</span> <span class=nav-text>数字与字符串</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%A3%85%E7%AE%B1%E6%8B%86%E7%AE%B1><span class=nav-number>4.1.</span> <span class=nav-text>装箱拆箱</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%B0%81%E8%A3%85%E7%B1%BB><span class=nav-number>4.1.1.</span> <span class=nav-text>封装类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Number%E7%B1%BB><span class=nav-number>4.1.2.</span> <span class=nav-text>Number类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E8%BD%AC%E5%B0%81%E8%A3%85%E7%B1%BB><span class=nav-number>4.1.3.</span> <span class=nav-text>基本类型转封装类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%B0%81%E8%A3%85%E7%B1%BB%E8%BD%AC%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B><span class=nav-number>4.1.4.</span> <span class=nav-text>封装类转基本类型</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%87%AA%E5%8A%A8%E8%A3%85%E7%AE%B1><span class=nav-number>4.1.5.</span> <span class=nav-text>自动装箱</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%87%AA%E5%8A%A8%E6%8B%86%E7%AE%B1><span class=nav-number>4.1.6.</span> <span class=nav-text>自动拆箱</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#int%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC%EF%BC%8C%E6%9C%80%E5%B0%8F%E5%80%BC><span class=nav-number>4.1.7.</span> <span class=nav-text>int的最大值，最小值</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2><span class=nav-number>4.2.</span> <span class=nav-text>字符串转换</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%95%B0%E5%AD%97%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2><span class=nav-number>4.2.1.</span> <span class=nav-text>数字转字符串</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%95%B0%E5%AD%97><span class=nav-number>4.2.2.</span> <span class=nav-text>字符串转数字</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%95%B0%E5%AD%A6%E6%96%B9%E6%B3%95><span class=nav-number>4.3.</span> <span class=nav-text>数学方法</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5-%E9%9A%8F%E6%9C%BA%E6%95%B0%EF%BC%8C%E5%BC%80%E6%96%B9%EF%BC%8C%E6%AC%A1%E6%96%B9%EF%BC%8C%CF%80%EF%BC%8C%E8%87%AA%E7%84%B6%E5%B8%B8%E6%95%B0><span class=nav-number>4.3.1.</span> <span class=nav-text>四舍五入, 随机数，开方，次方，π，自然常数</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA><span class=nav-number>4.4.</span> <span class=nav-text>格式化输出</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#printf-%E5%92%8C-format><span class=nav-number>4.4.1.</span> <span class=nav-text>printf 和 format</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%8D%A2%E8%A1%8C%E7%AC%A6><span class=nav-number>4.4.2.</span> <span class=nav-text>换行符</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%80%BB%E9%95%BF%E5%BA%A6%EF%BC%8C%E5%B7%A6%E5%AF%B9%E9%BD%90%EF%BC%8C%E8%A1%A50%EF%BC%8C%E5%8D%83%E4%BD%8D%E5%88%86%E9%9A%94%E7%AC%A6%EF%BC%8C%E5%B0%8F%E6%95%B0%E7%82%B9%E4%BD%8D%E6%95%B0%EF%BC%8C%E6%9C%AC%E5%9C%B0%E5%8C%96%E8%A1%A8%E8%BE%BE><span class=nav-number>4.4.3.</span> <span class=nav-text>总长度，左对齐，补0，千位分隔符，小数点位数，本地化表达</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%AD%97%E7%AC%A6><span class=nav-number>4.5.</span> <span class=nav-text>字符</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BF%9D%E5%AD%98%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E7%9A%84%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8char><span class=nav-number>4.5.1.</span> <span class=nav-text>保存一个字符的时候使用char</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#char%E5%AF%B9%E5%BA%94%E7%9A%84%E5%B0%81%E8%A3%85%E7%B1%BB><span class=nav-number>4.5.2.</span> <span class=nav-text>char对应的封装类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Character%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95><span class=nav-number>4.5.3.</span> <span class=nav-text>Character常见方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%B8%B8%E8%A7%81%E8%BD%AC%E4%B9%89><span class=nav-number>4.5.4.</span> <span class=nav-text>常见转义</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%AD%97%E7%AC%A6%E4%B8%B2><span class=nav-number>4.6.</span> <span class=nav-text>字符串</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E5%AD%97%E7%AC%A6%E4%B8%B2><span class=nav-number>4.6.1.</span> <span class=nav-text>创建字符串</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#final><span class=nav-number>4.6.2.</span> <span class=nav-text>final</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#immutable><span class=nav-number>4.6.3.</span> <span class=nav-text>immutable</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96><span class=nav-number>4.6.4.</span> <span class=nav-text>字符串格式化</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6><span class=nav-number>4.6.5.</span> <span class=nav-text>字符串长度</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%93%8D%E7%BA%B5%E5%AD%97%E7%AC%A6%E4%B8%B2><span class=nav-number>4.7.</span> <span class=nav-text>操纵字符串</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%8E%B7%E5%8F%96%E5%AD%97%E7%AC%A6><span class=nav-number>4.7.1.</span> <span class=nav-text>获取字符</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%8E%B7%E5%8F%96%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AD%97%E7%AC%A6%E6%95%B0%E7%BB%84><span class=nav-number>4.7.2.</span> <span class=nav-text>获取对应的字符数组</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%88%AA%E5%8F%96%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2><span class=nav-number>4.7.3.</span> <span class=nav-text>截取子字符串</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%86%E9%9A%94><span class=nav-number>4.7.4.</span> <span class=nav-text>分隔</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8E%BB%E6%8E%89%E9%A6%96%E5%B0%BE%E7%A9%BA%E6%A0%BC><span class=nav-number>4.7.5.</span> <span class=nav-text>去掉首尾空格</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%A4%A7%E5%B0%8F%E5%86%99><span class=nav-number>4.7.6.</span> <span class=nav-text>大小写</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AE%9A%E4%BD%8D><span class=nav-number>4.7.7.</span> <span class=nav-text>定位</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%9B%BF%E6%8D%A2><span class=nav-number>4.7.8.</span> <span class=nav-text>替换</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%AF%94%E8%BE%83%E5%AD%97%E7%AC%A6%E4%B8%B2><span class=nav-number>4.8.</span> <span class=nav-text>比较字符串</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%98%AF%E5%90%A6%E6%98%AF%E5%90%8C%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1><span class=nav-number>4.8.1.</span> <span class=nav-text>是否是同一个对象</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%98%AF%E5%90%A6%E6%98%AF%E5%90%8C%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1-%E7%89%B9%E4%BE%8B><span class=nav-number>4.8.2.</span> <span class=nav-text>是否是同一个对象-特例</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E7%9B%B8%E5%90%8C><span class=nav-number>4.8.3.</span> <span class=nav-text>内容是否相同</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%98%AF%E5%90%A6%E4%BB%A5%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%BC%80%E5%A7%8B%E6%88%96%E8%80%85%E7%BB%93%E6%9D%9F><span class=nav-number>4.8.4.</span> <span class=nav-text>是否以子字符串开始或者结束</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#StringBuffer><span class=nav-number>4.9.</span> <span class=nav-text>StringBuffer</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%BF%BD%E5%8A%A0-%E5%88%A0%E9%99%A4-%E6%8F%92%E5%85%A5-%E5%8F%8D%E8%BD%AC><span class=nav-number>4.9.1.</span> <span class=nav-text>追加 删除 插入 反转</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%95%BF%E5%BA%A6-%E5%AE%B9%E9%87%8F><span class=nav-number>4.9.2.</span> <span class=nav-text>长度 容量</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%97%A5%E6%9C%9F><span class=nav-number>5.</span> <span class=nav-text>日期</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#Date><span class=nav-number>5.1.</span> <span class=nav-text>Date</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%97%B6%E9%97%B4%E5%8E%9F%E7%82%B9%E6%A6%82%E5%BF%B5><span class=nav-number>5.1.1.</span> <span class=nav-text>时间原点概念</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E6%97%A5%E6%9C%9F%E5%AF%B9%E8%B1%A1><span class=nav-number>5.1.2.</span> <span class=nav-text>创建日期对象</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#getTime><span class=nav-number>5.1.3.</span> <span class=nav-text>getTime</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#System-currentTimeMillis><span class=nav-number>5.1.4.</span> <span class=nav-text>System.currentTimeMillis()</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96><span class=nav-number>5.2.</span> <span class=nav-text>日期格式化</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%97%A5%E6%9C%9F%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2><span class=nav-number>5.2.1.</span> <span class=nav-text>日期转字符串</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%97%A5%E6%9C%9F><span class=nav-number>5.2.2.</span> <span class=nav-text>字符串转日期</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#Calendar><span class=nav-number>5.3.</span> <span class=nav-text>Calendar</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#Calendar%E4%B8%8EDate%E8%BF%9B%E8%A1%8C%E8%BD%AC%E6%8D%A2><span class=nav-number>5.3.1.</span> <span class=nav-text>Calendar与Date进行转换</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%BF%BB%E6%97%A5%E5%8E%86><span class=nav-number>5.3.2.</span> <span class=nav-text>翻日历</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86><span class=nav-number>6.</span> <span class=nav-text>异常处理</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BC%82%E5%B8%B8><span class=nav-number>6.1.</span> <span class=nav-text>什么是异常</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%96%87%E4%BB%B6%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%BC%82%E5%B8%B8><span class=nav-number>6.1.1.</span> <span class=nav-text>文件不存在异常</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86-1><span class=nav-number>6.2.</span> <span class=nav-text>异常处理</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#try-catch><span class=nav-number>6.2.1.</span> <span class=nav-text>try catch</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8%E5%BC%82%E5%B8%B8%E7%9A%84%E7%88%B6%E7%B1%BB%E8%BF%9B%E8%A1%8Ccatch><span class=nav-number>6.2.2.</span> <span class=nav-text>使用异常的父类进行catch</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%A4%9A%E5%BC%82%E5%B8%B8%E6%8D%95%E6%8D%89%E5%8A%9E%E6%B3%951><span class=nav-number>6.2.3.</span> <span class=nav-text>多异常捕捉办法1</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%A4%9A%E5%BC%82%E5%B8%B8%E6%8D%95%E6%8D%89%E5%8A%9E%E6%B3%952><span class=nav-number>6.2.4.</span> <span class=nav-text>多异常捕捉办法2</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#finally><span class=nav-number>6.2.5.</span> <span class=nav-text>finally</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#throws><span class=nav-number>6.2.6.</span> <span class=nav-text>throws</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#throw%E5%92%8Cthrows%E7%9A%84%E5%8C%BA%E5%88%AB><span class=nav-number>6.2.7.</span> <span class=nav-text>throw和throws的区别</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%BC%82%E5%B8%B8%E5%88%86%E7%B1%BB><span class=nav-number>6.3.</span> <span class=nav-text>异常分类</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8F%AF%E6%9F%A5%E5%BC%82%E5%B8%B8><span class=nav-number>6.3.1.</span> <span class=nav-text>可查异常</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%BC%82%E5%B8%B8><span class=nav-number>6.3.2.</span> <span class=nav-text>运行时异常</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%94%99%E8%AF%AF><span class=nav-number>6.3.3.</span> <span class=nav-text>错误</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%89%E7%A7%8D%E5%88%86%E7%B1%BB><span class=nav-number>6.3.4.</span> <span class=nav-text>三种分类</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#Throwable><span class=nav-number>6.4.</span> <span class=nav-text>Throwable</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8><span class=nav-number>6.5.</span> <span class=nav-text>自定义异常</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8><span class=nav-number>6.5.1.</span> <span class=nav-text>创建自定义异常</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%8A%9B%E5%87%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8><span class=nav-number>6.5.2.</span> <span class=nav-text>抛出自定义异常</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#I-O><span class=nav-number>7.</span> <span class=nav-text>I/O</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%96%87%E4%BB%B6%E5%AF%B9%E8%B1%A1><span class=nav-number>7.1.</span> <span class=nav-text>文件对象</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%AF%B9%E8%B1%A1><span class=nav-number>7.1.1.</span> <span class=nav-text>创建一个文件对象</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%96%87%E4%BB%B6%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95><span class=nav-number>7.1.2.</span> <span class=nav-text>文件常用方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BB%80%E4%B9%88%E6%98%AF%E6%B5%81><span class=nav-number>7.1.3.</span> <span class=nav-text>什么是流</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%96%87%E4%BB%B6%E8%BE%93%E5%85%A5%E6%B5%81><span class=nav-number>7.1.4.</span> <span class=nav-text>文件输入流</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%AD%97%E8%8A%82%E6%B5%81><span class=nav-number>7.2.</span> <span class=nav-text>字节流</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#ASCII%E7%A0%81><span class=nav-number>7.2.1.</span> <span class=nav-text>ASCII码</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BB%A5%E5%AD%97%E8%8A%82%E6%B5%81%E7%9A%84%E5%BD%A2%E5%BC%8F%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9><span class=nav-number>7.2.2.</span> <span class=nav-text>以字节流的形式读取文件内容</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BB%A5%E5%AD%97%E8%8A%82%E6%B5%81%E7%9A%84%E5%BD%A2%E5%BC%8F%E5%90%91%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE><span class=nav-number>7.2.3.</span> <span class=nav-text>以字节流的形式向文件写入数据</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%85%B3%E9%97%AD%E6%B5%81%E7%9A%84%E6%96%B9%E5%BC%8F><span class=nav-number>7.3.</span> <span class=nav-text>关闭流的方式</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%9C%A8try%E4%B8%AD%E5%85%B3%E9%97%AD><span class=nav-number>7.3.1.</span> <span class=nav-text>在try中关闭</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%9C%A8finally%E4%B8%AD%E5%85%B3%E9%97%AD><span class=nav-number>7.3.2.</span> <span class=nav-text>在finally中关闭</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8try-%E7%9A%84%E6%96%B9%E5%BC%8F><span class=nav-number>7.3.3.</span> <span class=nav-text>使用try()的方式</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%AD%97%E7%AC%A6%E6%B5%81-READER-WRITER><span class=nav-number>7.4.</span> <span class=nav-text>字符流 READER/WRITER</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8%E5%AD%97%E7%AC%A6%E6%B5%81%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6><span class=nav-number>7.4.1.</span> <span class=nav-text>使用字符流读取文件</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8%E5%AD%97%E7%AC%A6%E6%B5%81%E6%8A%8A%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%86%99%E5%85%A5%E5%88%B0%E6%96%87%E4%BB%B6><span class=nav-number>7.4.2.</span> <span class=nav-text>使用字符流把字符串写入到文件</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E4%B8%AD%E6%96%87%E9%97%AE%E9%A2%98><span class=nav-number>7.5.</span> <span class=nav-text>中文问题</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%94%A8FileInputStream-%E5%AD%97%E8%8A%82%E6%B5%81%E6%AD%A3%E7%A1%AE%E8%AF%BB%E5%8F%96%E4%B8%AD%E6%96%87><span class=nav-number>7.5.1.</span> <span class=nav-text>用FileInputStream 字节流正确读取中文</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%94%A8FileReader-%E5%AD%97%E7%AC%A6%E6%B5%81%E6%AD%A3%E7%A1%AE%E8%AF%BB%E5%8F%96%E4%B8%AD%E6%96%87><span class=nav-number>7.5.2.</span> <span class=nav-text>用FileReader 字符流正确读取中文</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E7%BC%93%E5%AD%98%E6%B5%81><span class=nav-number>7.6.</span> <span class=nav-text>缓存流</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%E6%B5%81%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE><span class=nav-number>7.6.1.</span> <span class=nav-text>使用缓存流读取数据</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%E6%B5%81%E5%86%99%E5%87%BA%E6%95%B0%E6%8D%AE><span class=nav-number>7.6.2.</span> <span class=nav-text>使用缓存流写出数据</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#flush><span class=nav-number>7.6.3.</span> <span class=nav-text>flush</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%95%B0%E6%8D%AE%E6%B5%81><span class=nav-number>7.7.</span> <span class=nav-text>数据流</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%9B%B4%E6%8E%A5%E8%BF%9B%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%AF%BB%E5%86%99><span class=nav-number>7.7.1.</span> <span class=nav-text>直接进行字符串的读写</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%AF%B9%E8%B1%A1%E6%B5%81><span class=nav-number>7.8.</span> <span class=nav-text>对象流</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1><span class=nav-number>7.8.1.</span> <span class=nav-text>序列化一个对象</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#System-in><span class=nav-number>7.9.</span> <span class=nav-text>System.in</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#Scanner%E8%AF%BB%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2><span class=nav-number>7.9.1.</span> <span class=nav-text>Scanner读取字符串</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Scanner%E4%BB%8E%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%AF%BB%E5%8F%96%E6%95%B4%E6%95%B0><span class=nav-number>7.9.2.</span> <span class=nav-text>Scanner从控制台读取整数</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B5%81%E5%85%B3%E7%B3%BB%E5%9B%BE><span class=nav-number>7.9.3.</span> <span class=nav-text>流关系图</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6><span class=nav-number>8.</span> <span class=nav-text>集合框架</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#ArrayList><span class=nav-number>8.1.</span> <span class=nav-text>ArrayList</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8%E6%95%B0%E7%BB%84%E7%9A%84%E5%B1%80%E9%99%90%E6%80%A7><span class=nav-number>8.1.1.</span> <span class=nav-text>使用数组的局限性</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#ArrayList%E5%AD%98%E6%94%BE%E5%AF%B9%E8%B1%A1><span class=nav-number>8.1.2.</span> <span class=nav-text>ArrayList存放对象</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%A2%9E%E5%8A%A0><span class=nav-number>8.1.3.</span> <span class=nav-text>增加</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8><span class=nav-number>8.1.4.</span> <span class=nav-text>判断是否存在</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E7%9A%84%E5%AF%B9%E8%B1%A1><span class=nav-number>8.1.5.</span> <span class=nav-text>获取指定位置的对象</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1%E6%89%80%E5%A4%84%E7%9A%84%E4%BD%8D%E7%BD%AE><span class=nav-number>8.1.6.</span> <span class=nav-text>获取对象所处的位置</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%A0%E9%99%A4><span class=nav-number>8.1.7.</span> <span class=nav-text>删除</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%9B%BF%E6%8D%A2-1><span class=nav-number>8.1.8.</span> <span class=nav-text>替换</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%8E%B7%E5%8F%96%E5%A4%A7%E5%B0%8F><span class=nav-number>8.1.9.</span> <span class=nav-text>获取大小</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%95%B0%E7%BB%84><span class=nav-number>8.1.10.</span> <span class=nav-text>转换为数组</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%8A%8A%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%AE%B9%E5%99%A8%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%E9%83%BD%E5%8A%A0%E8%BF%9B%E6%9D%A5><span class=nav-number>8.1.11.</span> <span class=nav-text>把另一个容器所有对象都加进来</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B8%85%E7%A9%BA><span class=nav-number>8.1.12.</span> <span class=nav-text>清空</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#List%E6%8E%A5%E5%8F%A3><span class=nav-number>8.2.</span> <span class=nav-text>List接口</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#ArrayList%E5%92%8CList><span class=nav-number>8.2.1.</span> <span class=nav-text>ArrayList和List</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%9C%A8ArrayList%E4%B8%8A%E4%BD%BF%E7%94%A8%E6%B3%9B%E5%9E%8B><span class=nav-number>8.3.</span> <span class=nav-text>在ArrayList上使用泛型</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B3%9B%E5%9E%8B-Generic><span class=nav-number>8.3.1.</span> <span class=nav-text>泛型 Generic</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B3%9B%E5%9E%8B%E7%9A%84%E7%AE%80%E5%86%99><span class=nav-number>8.3.2.</span> <span class=nav-text>泛型的简写</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%81%8D%E5%8E%86ArrayList><span class=nav-number>8.4.</span> <span class=nav-text>遍历ArrayList</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%94%A8for%E5%BE%AA%E7%8E%AF%E9%81%8D%E5%8E%86><span class=nav-number>8.4.1.</span> <span class=nav-text>用for循环遍历</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%BF%AD%E4%BB%A3%E5%99%A8%E9%81%8D%E5%8E%86><span class=nav-number>8.4.2.</span> <span class=nav-text>迭代器遍历</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%94%A8%E5%A2%9E%E5%BC%BA%E5%9E%8Bfor%E5%BE%AA%E7%8E%AF><span class=nav-number>8.4.3.</span> <span class=nav-text>用增强型for循环</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#LinkedList><span class=nav-number>8.5.</span> <span class=nav-text>LinkedList</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#LinkedList-%E4%B8%8E-List%E6%8E%A5%E5%8F%A3><span class=nav-number>8.5.1.</span> <span class=nav-text>LinkedList 与 List接口</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8-Deque><span class=nav-number>8.5.2.</span> <span class=nav-text>双向链表 - Deque</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%98%9F%E5%88%97-Queue><span class=nav-number>8.5.3.</span> <span class=nav-text>队列 - Queue</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E4%BA%8C%E5%8F%89%E6%A0%91><span class=nav-number>8.6.</span> <span class=nav-text>二叉树</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BA%8C%E5%8F%89%E6%A0%91%E6%A6%82%E5%BF%B5><span class=nav-number>8.6.1.</span> <span class=nav-text>二叉树概念</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BA%8C%E5%8F%89%E6%A0%91%E6%8E%92%E5%BA%8F-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE><span class=nav-number>8.6.2.</span> <span class=nav-text>二叉树排序 - 插入数据</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BA%8C%E5%8F%89%E6%A0%91%E6%8E%92%E5%BA%8F-%E9%81%8D%E5%8E%86><span class=nav-number>8.6.3.</span> <span class=nav-text>二叉树排序 - 遍历</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#HashMap><span class=nav-number>8.7.</span> <span class=nav-text>HashMap</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#HashMap%E7%9A%84%E9%94%AE%E5%80%BC%E5%AF%B9><span class=nav-number>8.7.1.</span> <span class=nav-text>HashMap的键值对</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%94%AE%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%EF%BC%8C%E5%80%BC%E5%8F%AF%E4%BB%A5%E9%87%8D%E5%A4%8D><span class=nav-number>8.7.2.</span> <span class=nav-text>键不能重复，值可以重复</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#HashSet><span class=nav-number>8.8.</span> <span class=nav-text>HashSet</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%85%83%E7%B4%A0%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D><span class=nav-number>8.8.1.</span> <span class=nav-text>元素不能重复</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B2%A1%E6%9C%89%E9%A1%BA%E5%BA%8F><span class=nav-number>8.8.2.</span> <span class=nav-text>没有顺序</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%81%8D%E5%8E%86><span class=nav-number>8.8.3.</span> <span class=nav-text>遍历</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#HashSet%E5%92%8CHashMap%E7%9A%84%E5%85%B3%E7%B3%BB><span class=nav-number>8.8.4.</span> <span class=nav-text>HashSet和HashMap的关系</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#Collection-Collection><span class=nav-number>8.9.</span> <span class=nav-text>Collection & Collection</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#Collections><span class=nav-number>8.10.</span> <span class=nav-text>Collections</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8F%8D%E8%BD%AC><span class=nav-number>8.10.1.</span> <span class=nav-text>反转</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B7%B7%E6%B7%86><span class=nav-number>8.10.2.</span> <span class=nav-text>混淆</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%8E%92%E5%BA%8F-1><span class=nav-number>8.10.3.</span> <span class=nav-text>排序</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BA%A4%E6%8D%A2><span class=nav-number>8.10.4.</span> <span class=nav-text>交换</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%BB%9A%E5%8A%A8><span class=nav-number>8.10.5.</span> <span class=nav-text>滚动</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E5%8C%96><span class=nav-number>8.10.6.</span> <span class=nav-text>线程安全化</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#ArrayList-vs-HashSet><span class=nav-number>8.11.</span> <span class=nav-text>ArrayList vs HashSet</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%98%AF%E5%90%A6%E6%9C%89%E9%A1%BA%E5%BA%8F><span class=nav-number>8.11.1.</span> <span class=nav-text>是否有顺序</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%83%BD%E5%90%A6%E9%87%8D%E5%A4%8D><span class=nav-number>8.11.2.</span> <span class=nav-text>能否重复</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#ArrayList-vs-LinkedList><span class=nav-number>8.12.</span> <span class=nav-text>ArrayList vs LinkedList</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#ArrayList%E5%92%8CLinkedList%E7%9A%84%E5%8C%BA%E5%88%AB><span class=nav-number>8.12.1.</span> <span class=nav-text>ArrayList和LinkedList的区别</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE><span class=nav-number>8.12.2.</span> <span class=nav-text>插入数据</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AE%9A%E4%BD%8D%E6%95%B0%E6%8D%AE><span class=nav-number>8.12.3.</span> <span class=nav-text>定位数据</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#HashMap-vs-HashTable><span class=nav-number>8.13.</span> <span class=nav-text>HashMap vs HashTable</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#HashMap%E5%92%8CHashtable%E7%9A%84%E5%8C%BA%E5%88%AB><span class=nav-number>8.13.1.</span> <span class=nav-text>HashMap和Hashtable的区别</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#Hashcode-%E5%8E%9F%E7%90%86><span class=nav-number>8.14.</span> <span class=nav-text>Hashcode 原理</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#List%E6%9F%A5%E6%89%BE%E7%9A%84%E4%BD%8E%E6%95%88%E7%8E%87><span class=nav-number>8.14.1.</span> <span class=nav-text>List查找的低效率</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#HashMap%E7%9A%84%E6%80%A7%E8%83%BD%E8%A1%A8%E7%8E%B0><span class=nav-number>8.14.2.</span> <span class=nav-text>HashMap的性能表现</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#HashMap%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AD%97%E5%85%B8><span class=nav-number>8.14.3.</span> <span class=nav-text>HashMap原理与字典</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%86%E6%9E%90HashMap%E6%80%A7%E8%83%BD%E5%8D%93%E8%B6%8A%E7%9A%84%E5%8E%9F%E5%9B%A0><span class=nav-number>8.14.4.</span> <span class=nav-text>分析HashMap性能卓越的原因</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#HashSet%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E9%87%8D%E5%A4%8D><span class=nav-number>8.14.5.</span> <span class=nav-text>HashSet判断是否重复</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%AF%94%E8%BE%83%E5%99%A8><span class=nav-number>8.15.</span> <span class=nav-text>比较器</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#Comparator><span class=nav-number>8.15.1.</span> <span class=nav-text>Comparator</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Comparable><span class=nav-number>8.15.2.</span> <span class=nav-text>Comparable</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%85%B6%E4%BB%96-%E8%81%9A%E5%90%88%E6%93%8D%E4%BD%9C><span class=nav-number>8.16.</span> <span class=nav-text>其他 - 聚合操作</span></a></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%B3%9B%E5%9E%8B><span class=nav-number>9.</span> <span class=nav-text>泛型</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%9B%86%E5%90%88%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B><span class=nav-number>9.1.</span> <span class=nav-text>集合中的泛型</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%8D%E4%BD%BF%E7%94%A8%E6%B3%9B%E5%9E%8B><span class=nav-number>9.1.1.</span> <span class=nav-text>不使用泛型</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8%E6%B3%9B%E5%9E%8B><span class=nav-number>9.1.2.</span> <span class=nav-text>使用泛型</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AD%90%E7%B1%BB%E5%AF%B9%E8%B1%A1><span class=nav-number>9.1.3.</span> <span class=nav-text>子类对象</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B3%9B%E5%9E%8B%E7%9A%84%E7%AE%80%E5%86%99-1><span class=nav-number>9.1.4.</span> <span class=nav-text>泛型的简写</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%94%AF%E6%8C%81%E6%B3%9B%E5%9E%8B%E7%9A%84%E7%B1%BB><span class=nav-number>9.2.</span> <span class=nav-text>支持泛型的类</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%8D%E6%94%AF%E6%8C%81%E6%B3%9B%E5%9E%8B%E7%9A%84Stack><span class=nav-number>9.2.1.</span> <span class=nav-text>不支持泛型的Stack</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%94%AF%E6%8C%81%E6%B3%9B%E5%9E%8B%E7%9A%84Stack><span class=nav-number>9.2.2.</span> <span class=nav-text>支持泛型的Stack</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%80%9A%E9%85%8D%E7%AC%A6><span class=nav-number>9.3.</span> <span class=nav-text>通配符</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#extends><span class=nav-number>9.3.1.</span> <span class=nav-text>? extends</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#super-1><span class=nav-number>9.3.2.</span> <span class=nav-text>? super</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B3%9B%E5%9E%8B%E9%80%9A%E9%85%8D%E7%AC%A6><span class=nav-number>9.3.3.</span> <span class=nav-text>泛型通配符 ?</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B3%9B%E5%9E%8B%E9%80%9A%E9%85%8D%E7%AC%A6%E6%80%BB%E7%BB%93><span class=nav-number>9.3.4.</span> <span class=nav-text>泛型通配符总结</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%AD%90%E7%B1%BB%E6%B3%9B%E5%9E%8B-%E4%B8%8E-%E7%88%B6%E7%B1%BB%E6%B3%9B%E5%9E%8B-%E7%9A%84%E8%BD%AC%E6%8D%A2><span class=nav-number>9.4.</span> <span class=nav-text>子类泛型 与 父类泛型 的转换</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AF%B9%E8%B1%A1%E8%BD%AC%E5%9E%8B-1><span class=nav-number>9.4.1.</span> <span class=nav-text>对象转型</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AD%90%E7%B1%BB%E6%B3%9B%E5%9E%8B-%E4%B8%8D%E8%83%BD%E8%BD%AC-%E7%88%B6%E7%B1%BB%E6%B3%9B%E5%9E%8B><span class=nav-number>9.4.2.</span> <span class=nav-text>子类泛型 不能转 父类泛型</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%88%B6%E7%B1%BB%E6%B3%9B%E5%9E%8B-%E4%B9%9F%E4%B8%8D%E8%83%BD%E8%BD%AC%E6%8D%A2%E4%B8%BA-%E5%AD%90%E7%B1%BB%E6%B3%9B%E5%9E%8B><span class=nav-number>9.4.3.</span> <span class=nav-text>父类泛型 也不能转换为 子类泛型</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#Lambda><span class=nav-number>10.</span> <span class=nav-text>Lambda</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%99%AE%E9%80%9A%E6%96%B9%E6%B3%95><span class=nav-number>10.1.</span> <span class=nav-text>普通方法</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8C%BF%E5%90%8D%E7%B1%BB%E6%96%B9%E5%BC%8F><span class=nav-number>10.1.1.</span> <span class=nav-text>匿名类方式</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Lambda%E6%96%B9%E5%BC%8F><span class=nav-number>10.1.2.</span> <span class=nav-text>Lambda方式</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BB%8E%E5%8C%BF%E5%90%8D%E7%B1%BB%E6%BC%94%E5%8F%98%E6%88%90Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F><span class=nav-number>10.1.3.</span> <span class=nav-text>从匿名类演变成Lambda表达式</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8C%BF%E5%90%8D%E6%96%B9%E6%B3%95><span class=nav-number>10.1.4.</span> <span class=nav-text>匿名方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Lambda%E7%9A%84%E5%BC%8A%E7%AB%AF><span class=nav-number>10.1.5.</span> <span class=nav-text>Lambda的弊端</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8><span class=nav-number>10.2.</span> <span class=nav-text>方法引用</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BC%95%E7%94%A8%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95><span class=nav-number>10.2.1.</span> <span class=nav-text>引用静态方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BC%95%E7%94%A8%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95><span class=nav-number>10.2.2.</span> <span class=nav-text>引用对象方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BC%95%E7%94%A8%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E6%B3%95><span class=nav-number>10.2.3.</span> <span class=nav-text>引用容器中的对象的方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BC%95%E7%94%A8%E6%9E%84%E9%80%A0%E5%99%A8><span class=nav-number>10.2.4.</span> <span class=nav-text>引用构造器</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%81%9A%E5%90%88%E6%93%8D%E4%BD%9C><span class=nav-number>10.3.</span> <span class=nav-text>聚合操作</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F%E4%B8%8E%E8%81%9A%E5%90%88%E6%93%8D%E4%BD%9C%E6%96%B9%E5%BC%8F%E9%81%8D%E5%8E%86%E6%95%B0%E6%8D%AE><span class=nav-number>10.3.1.</span> <span class=nav-text>传统方式与聚合操作方式遍历数据</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Stream%E5%92%8C%E7%AE%A1%E9%81%93%E7%9A%84%E6%A6%82%E5%BF%B5><span class=nav-number>10.3.2.</span> <span class=nav-text>Stream和管道的概念</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E7%AE%A1%E9%81%93%E6%BA%90><span class=nav-number>10.3.2.1.</span> <span class=nav-text>管道源</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C><span class=nav-number>10.3.2.2.</span> <span class=nav-text>中间操作</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E7%BB%93%E6%9D%9F%E6%93%8D%E4%BD%9C><span class=nav-number>10.3.2.3.</span> <span class=nav-text>结束操作</span></a></ol></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E5%A4%9A%E7%BA%BF%E7%A8%8B><span class=nav-number>11.</span> <span class=nav-text>多线程</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B><span class=nav-number>11.1.</span> <span class=nav-text>启动一个线程</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%BA%BF%E7%A8%8B%E6%A6%82%E5%BF%B5><span class=nav-number>11.1.1.</span> <span class=nav-text>线程概念</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E7%BB%A7%E6%89%BF%E7%BA%BF%E7%A8%8B%E7%B1%BB><span class=nav-number>11.1.2.</span> <span class=nav-text>创建多线程-继承线程类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E5%AE%9E%E7%8E%B0Runnable%E6%8E%A5%E5%8F%A3><span class=nav-number>11.1.3.</span> <span class=nav-text>创建多线程-实现Runnable接口</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E5%8C%BF%E5%90%8D%E7%B1%BB><span class=nav-number>11.1.4.</span> <span class=nav-text>创建多线程-匿名类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F><span class=nav-number>11.1.5.</span> <span class=nav-text>创建多线程的三种方式</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%B8%B8%E8%A7%81%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95><span class=nav-number>11.2.</span> <span class=nav-text>常见线程方法</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BD%93%E5%89%8D%E7%BA%BF%E7%A8%8B%E6%9A%82%E5%81%9C><span class=nav-number>11.2.1.</span> <span class=nav-text>当前线程暂停</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8A%A0%E5%85%A5%E5%88%B0%E5%BD%93%E5%89%8D%E7%BA%BF%E7%A8%8B%E4%B8%AD><span class=nav-number>11.2.2.</span> <span class=nav-text>加入到当前线程中</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7><span class=nav-number>11.2.3.</span> <span class=nav-text>线程优先级</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%B4%E6%97%B6%E6%9A%82%E5%81%9C><span class=nav-number>11.2.4.</span> <span class=nav-text>临时暂停</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B><span class=nav-number>11.2.5.</span> <span class=nav-text>守护线程</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%90%8C%E6%AD%A5><span class=nav-number>11.3.</span> <span class=nav-text>同步</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%BC%94%E7%A4%BA%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98><span class=nav-number>11.3.1.</span> <span class=nav-text>演示同步问题</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%86%E6%9E%90%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98%E4%BA%A7%E7%94%9F%E7%9A%84%E5%8E%9F%E5%9B%A0><span class=nav-number>11.3.2.</span> <span class=nav-text>分析同步问题产生的原因</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF><span class=nav-number>11.3.3.</span> <span class=nav-text>解决思路</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#synchronized-%E5%90%8C%E6%AD%A5%E5%AF%B9%E8%B1%A1%E6%A6%82%E5%BF%B5><span class=nav-number>11.3.4.</span> <span class=nav-text>synchronized 同步对象概念</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8synchronized-%E8%A7%A3%E5%86%B3%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98><span class=nav-number>11.3.5.</span> <span class=nav-text>使用synchronized 解决同步问题</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8hero%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA%E5%90%8C%E6%AD%A5%E5%AF%B9%E8%B1%A1><span class=nav-number>11.3.6.</span> <span class=nav-text>使用hero对象作为同步对象</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%9C%A8%E6%96%B9%E6%B3%95%E5%89%8D%EF%BC%8C%E5%8A%A0%E4%B8%8A%E4%BF%AE%E9%A5%B0%E7%AC%A6synchronized><span class=nav-number>11.3.7.</span> <span class=nav-text>在方法前，加上修饰符synchronized</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E7%B1%BB><span class=nav-number>11.3.8.</span> <span class=nav-text>线程安全的类</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%B8%B8%E8%A7%81%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9B%B8%E5%85%B3%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98><span class=nav-number>11.4.</span> <span class=nav-text>常见的线程安全相关的面试题</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#HashMap%E5%92%8CHashtable%E7%9A%84%E5%8C%BA%E5%88%AB-1><span class=nav-number>11.4.1.</span> <span class=nav-text>HashMap和Hashtable的区别</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#StringBuffer-%E5%92%8C-StringBuilder-%E7%9A%84%E5%8C%BA%E5%88%AB><span class=nav-number>11.4.2.</span> <span class=nav-text>StringBuffer 和 StringBuilder 的区别</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#ArrayList-%E5%92%8C-Vector-%E7%9A%84%E5%8C%BA%E5%88%AB><span class=nav-number>11.4.3.</span> <span class=nav-text>ArrayList 和 Vector 的区别</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%8A%8A%E9%9D%9E%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E9%9B%86%E5%90%88%E8%BD%AC%E6%8D%A2%E4%B8%BA%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8><span class=nav-number>11.4.4.</span> <span class=nav-text>把非线程安全的集合转换为线程安全</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%AD%BB%E9%94%81><span class=nav-number>11.5.</span> <span class=nav-text>多线程死锁</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%BC%94%E7%A4%BA%E6%AD%BB%E9%94%81><span class=nav-number>11.5.1.</span> <span class=nav-text>演示死锁</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E7%BA%BF%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E4%BA%A4%E4%BA%92-WAIT-%E5%92%8C-NOTIFY><span class=nav-number>11.6.</span> <span class=nav-text>线程之间的交互 - WAIT 和 NOTIFY</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%8D%E5%A5%BD%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F><span class=nav-number>11.6.1.</span> <span class=nav-text>不好的解决方式</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8wait%E5%92%8Cnotify%E8%BF%9B%E8%A1%8C%E7%BA%BF%E7%A8%8B%E4%BA%A4%E4%BA%92><span class=nav-number>11.6.2.</span> <span class=nav-text>使用wait和notify进行线程交互</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%85%B3%E4%BA%8Ewait%E3%80%81notify-%E5%92%8C-notifyAll><span class=nav-number>11.6.3.</span> <span class=nav-text>关于wait、notify 和 notifyAll</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E7%BA%BF%E7%A8%8B%E6%B1%A0><span class=nav-number>11.7.</span> <span class=nav-text>线程池</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF><span class=nav-number>11.7.1.</span> <span class=nav-text>线程池设计思路</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BA%BF%E7%A8%8B%E6%B1%A0><span class=nav-number>11.7.2.</span> <span class=nav-text>开发一个自定义线程池</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B5%8B%E8%AF%95%E7%BA%BF%E7%A8%8B%E6%B1%A0><span class=nav-number>11.7.3.</span> <span class=nav-text>测试线程池</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8java%E8%87%AA%E5%B8%A6%E7%BA%BF%E7%A8%8B%E6%B1%A0><span class=nav-number>11.7.4.</span> <span class=nav-text>使用java自带线程池</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#Lock%E5%AF%B9%E8%B1%A1><span class=nav-number>11.8.</span> <span class=nav-text>Lock对象</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%9B%9E%E5%BF%86-synchronized-%E5%90%8C%E6%AD%A5%E7%9A%84%E6%96%B9%E5%BC%8F><span class=nav-number>11.8.1.</span> <span class=nav-text>回忆 synchronized 同步的方式</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8Lock%E5%AF%B9%E8%B1%A1%E5%AE%9E%E7%8E%B0%E5%90%8C%E6%AD%A5%E6%95%88%E6%9E%9C><span class=nav-number>11.8.2.</span> <span class=nav-text>使用Lock对象实现同步效果</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#trylock%E6%96%B9%E6%B3%95><span class=nav-number>11.8.3.</span> <span class=nav-text>trylock方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%BA%BF%E7%A8%8B%E4%BA%A4%E4%BA%92><span class=nav-number>11.8.4.</span> <span class=nav-text>线程交互</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%80%BB%E7%BB%93-Lock-%E5%92%8C-synchronized-%E7%9A%84%E5%8C%BA%E5%88%AB><span class=nav-number>11.8.5.</span> <span class=nav-text>总结 Lock 和 synchronized 的区别</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%8E%9F%E5%AD%90%E8%AE%BF%E9%97%AE><span class=nav-number>11.9.</span> <span class=nav-text>原子访问</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8E%9F%E5%AD%90%E6%80%A7%E6%93%8D%E4%BD%9C%E6%A6%82%E5%BF%B5><span class=nav-number>11.9.1.</span> <span class=nav-text>原子性操作概念</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#AtomicInteger><span class=nav-number>11.9.2.</span> <span class=nav-text>AtomicInteger</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%90%8C%E6%AD%A5%E6%B5%8B%E8%AF%95><span class=nav-number>11.9.3.</span> <span class=nav-text>同步测试</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#JDBC><span class=nav-number>12.</span> <span class=nav-text>JDBC</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C><span class=nav-number>12.1.</span> <span class=nav-text>准备工作</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%BA%E9%A1%B9%E7%9B%AE%E5%AF%BC%E5%85%A5mysql-jdbc%E7%9A%84jar%E5%8C%85><span class=nav-number>12.1.1.</span> <span class=nav-text>为项目导入mysql-jdbc的jar包</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A9%B1%E5%8A%A8><span class=nav-number>12.1.2.</span> <span class=nav-text>初始化驱动</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%BB%BA%E7%AB%8B%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%BF%9E%E6%8E%A5><span class=nav-number>12.1.3.</span> <span class=nav-text>建立与数据库的连接</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%9B%E5%BB%BAStatement><span class=nav-number>12.1.4.</span> <span class=nav-text>创建Statement</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%89%A7%E8%A1%8CSQL%E8%AF%AD%E5%8F%A5><span class=nav-number>12.1.5.</span> <span class=nav-text>执行SQL语句</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5><span class=nav-number>12.1.6.</span> <span class=nav-text>关闭连接</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8-try-with-resource-%E7%9A%84%E6%96%B9%E5%BC%8F%E8%87%AA%E5%8A%A8%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5><span class=nav-number>12.1.7.</span> <span class=nav-text>使用 try-with-resource 的方式自动关闭连接</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%A2%9E%E3%80%81%E5%88%A0%E3%80%81%E6%94%B9><span class=nav-number>12.2.</span> <span class=nav-text>增、删、改</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%A2%9E%E5%8A%A0-1><span class=nav-number>12.2.1.</span> <span class=nav-text>增加</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%A0%E9%99%A4-1><span class=nav-number>12.2.2.</span> <span class=nav-text>删除</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BF%AE%E6%94%B9><span class=nav-number>12.2.3.</span> <span class=nav-text>修改</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%9F%A5%E8%AF%A2><span class=nav-number>12.3.</span> <span class=nav-text>查询</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5><span class=nav-number>12.3.1.</span> <span class=nav-text>查询语句</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#SQL%E8%AF%AD%E5%8F%A5%E5%88%A4%E6%96%AD%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E6%98%AF%E5%90%A6%E6%AD%A3%E7%A1%AE><span class=nav-number>12.3.2.</span> <span class=nav-text>SQL语句判断账号密码是否正确</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%8E%B7%E5%8F%96%E6%80%BB%E6%95%B0><span class=nav-number>12.3.3.</span> <span class=nav-text>获取总数</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E9%A2%84%E7%BC%96%E8%AF%91Statement><span class=nav-number>12.4.</span> <span class=nav-text>预编译Statement</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8PreparedStatement><span class=nav-number>12.4.1.</span> <span class=nav-text>使用PreparedStatement</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#PreparedStatement%E7%9A%84%E4%BC%98%E7%82%B91-%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE><span class=nav-number>12.4.2.</span> <span class=nav-text>PreparedStatement的优点1 - 参数设置</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#PreparedStatement%E7%9A%84%E4%BC%98%E7%82%B92-%E6%80%A7%E8%83%BD%E8%A1%A8%E7%8E%B0><span class=nav-number>12.4.3.</span> <span class=nav-text>PreparedStatement的优点2 - 性能表现</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#PreparedStatement%E7%9A%84%E4%BC%98%E7%82%B93-%E9%98%B2%E6%AD%A2SQL%E6%B3%A8%E5%85%A5%E5%BC%8F%E6%94%BB%E5%87%BB><span class=nav-number>12.4.4.</span> <span class=nav-text>PreparedStatement的优点3 - 防止SQL注入式攻击</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#execute-%E4%B8%8E-executeUpdate-%E7%9A%84%E5%8C%BA%E5%88%AB><span class=nav-number>12.5.</span> <span class=nav-text>execute 与 executeUpdate 的区别</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E7%9B%B8%E5%90%8C%E7%82%B9><span class=nav-number>12.5.1.</span> <span class=nav-text>相同点</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%8D%E5%90%8C%E7%82%B9><span class=nav-number>12.5.2.</span> <span class=nav-text>不同点</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E7%89%B9%E6%AE%8A%E6%93%8D%E4%BD%9C><span class=nav-number>12.6.</span> <span class=nav-text>特殊操作</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%8E%B7%E5%8F%96%E8%87%AA%E5%A2%9E%E9%95%BFid><span class=nav-number>12.6.1.</span> <span class=nav-text>获取自增长id</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%8E%B7%E5%8F%96%E8%A1%A8%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE><span class=nav-number>12.6.2.</span> <span class=nav-text>获取表的元数据</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E4%BA%8B%E5%8A%A1><span class=nav-number>12.7.</span> <span class=nav-text>事务</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%8D%E4%BD%BF%E7%94%A8%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%83%85%E5%86%B5><span class=nav-number>12.7.1.</span> <span class=nav-text>不使用事务的情况</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BD%BF%E7%94%A8%E4%BA%8B%E5%8A%A1><span class=nav-number>12.7.2.</span> <span class=nav-text>使用事务</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#MYSQL-%E8%A1%A8%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%BF%85%E9%A1%BB%E6%98%AFINNODB%E6%89%8D%E6%94%AF%E6%8C%81%E4%BA%8B%E5%8A%A1><span class=nav-number>12.7.3.</span> <span class=nav-text>MYSQL 表的类型必须是INNODB才支持事务</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#ORM><span class=nav-number>12.8.</span> <span class=nav-text>ORM</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%A0%B9%E6%8D%AEid%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AAHero%E5%AF%B9%E8%B1%A1><span class=nav-number>12.8.1.</span> <span class=nav-text>根据id返回一个Hero对象</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#DAO><span class=nav-number>12.9.</span> <span class=nav-text>DAO</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#DAO%E6%8E%A5%E5%8F%A3><span class=nav-number>12.9.1.</span> <span class=nav-text>DAO接口</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#HeroDAO><span class=nav-number>12.9.2.</span> <span class=nav-text>HeroDAO</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0><span class=nav-number>12.10.</span> <span class=nav-text>数据库连接池</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E5%8E%9F%E7%90%86-%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F><span class=nav-number>12.10.1.</span> <span class=nav-text>数据库连接池原理 - 传统方式</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E5%8E%9F%E7%90%86-%E4%BD%BF%E7%94%A8%E6%B1%A0><span class=nav-number>12.10.2.</span> <span class=nav-text>数据库连接池原理 - 使用池</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#ConnectionPool%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96><span class=nav-number>12.10.3.</span> <span class=nav-text>ConnectionPool构造方法和初始化</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B5%8B%E8%AF%95%E7%B1%BB><span class=nav-number>12.10.4.</span> <span class=nav-text>测试类</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6><span class=nav-number>13.</span> <span class=nav-text>反射机制</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%8E%B7%E5%8F%96%E7%B1%BB%E5%AF%B9%E8%B1%A1><span class=nav-number>13.1.</span> <span class=nav-text>获取类对象</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%BB%80%E4%B9%88%E6%98%AF%E7%B1%BB%E5%AF%B9%E8%B1%A1%EF%BC%9F><span class=nav-number>13.1.1.</span> <span class=nav-text>什么是类对象？</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%8E%B7%E5%8F%96%E7%B1%BB%E5%AF%B9%E8%B1%A1-1><span class=nav-number>13.1.2.</span> <span class=nav-text>获取类对象</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%8E%B7%E5%8F%96%E7%B1%BB%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%B1%BB%E5%B1%9E%E6%80%A7%E8%A2%AB%E5%88%9D%E5%A7%8B%E5%8C%96><span class=nav-number>13.1.3.</span> <span class=nav-text>获取类对象的时候，会导致类属性被初始化</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1><span class=nav-number>13.2.</span> <span class=nav-text>创建对象</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1><span class=nav-number>13.2.1.</span> <span class=nav-text>创建一个对象</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%AE%BF%E9%97%AE%E5%B1%9E%E6%80%A7><span class=nav-number>13.3.</span> <span class=nav-text>访问属性</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#Hero-java><span class=nav-number>13.3.1.</span> <span class=nav-text>Hero.java</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#TestRelection><span class=nav-number>13.3.2.</span> <span class=nav-text>TestRelection</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#getField-%E5%92%8C-getDeclaredField-%E7%9A%84%E5%8C%BA%E5%88%AB><span class=nav-number>13.3.3.</span> <span class=nav-text>getField 和 getDeclaredField 的区别</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95><span class=nav-number>13.4.</span> <span class=nav-text>调用方法</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95-1><span class=nav-number>13.4.1.</span> <span class=nav-text>调用方法</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6%E7%9A%84%E4%BD%9C%E7%94%A8><span class=nav-number>13.5.</span> <span class=nav-text>反射机制的作用</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%9A%E5%8A%A1%E7%B1%BB><span class=nav-number>13.5.1.</span> <span class=nav-text>业务类</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%9D%9E%E5%8F%8D%E5%B0%84%E6%96%B9%E5%BC%8F><span class=nav-number>13.5.2.</span> <span class=nav-text>非反射方式</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%8F%8D%E5%B0%84%E6%96%B9%E5%BC%8F><span class=nav-number>13.5.3.</span> <span class=nav-text>反射方式</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%B3%A8%E8%A7%A3><span class=nav-number>14.</span> <span class=nav-text>注解</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%B3%A8%E8%A7%A3%E7%AE%80%E4%BB%8B><span class=nav-number>14.1.</span> <span class=nav-text>注解简介</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%9F%BA%E6%9C%AC%E5%86%85%E7%BD%AE%E6%B3%A8%E8%A7%A3><span class=nav-number>14.2.</span> <span class=nav-text>基本内置注解</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#Override><span class=nav-number>14.2.1.</span> <span class=nav-text>@Override</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Deprecated><span class=nav-number>14.2.2.</span> <span class=nav-text>@Deprecated</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#SuppressWarnings><span class=nav-number>14.2.3.</span> <span class=nav-text>@SuppressWarnings</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#SafeVarargs><span class=nav-number>14.2.4.</span> <span class=nav-text>@SafeVarargs</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#FunctionalInterface><span class=nav-number>14.2.5.</span> <span class=nav-text>@FunctionalInterface</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3><span class=nav-number>14.3.</span> <span class=nav-text>自定义注解</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E9%9D%9E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8FDBUtil><span class=nav-number>14.3.1.</span> <span class=nav-text>非注解方式DBUtil</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3-JDBCConfig><span class=nav-number>14.3.2.</span> <span class=nav-text>自定义注解@JDBCConfig</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8FDBUtil><span class=nav-number>14.3.3.</span> <span class=nav-text>注解方式DBUtil</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%A7%A3%E6%9E%90%E6%B3%A8%E8%A7%A3><span class=nav-number>14.3.4.</span> <span class=nav-text>解析注解</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%85%83%E6%B3%A8%E8%A7%A3><span class=nav-number>14.4.</span> <span class=nav-text>元注解</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%85%83%E6%B3%A8%E8%A7%A3%E6%A6%82%E5%BF%B5><span class=nav-number>14.4.1.</span> <span class=nav-text>元注解概念</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Target><span class=nav-number>14.4.2.</span> <span class=nav-text>@Target</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Retention><span class=nav-number>14.4.3.</span> <span class=nav-text>@Retention</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Inherited><span class=nav-number>14.4.4.</span> <span class=nav-text>@Inherited</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Documented><span class=nav-number>14.4.5.</span> <span class=nav-text>@Documented</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Repeatable-java1-8-%E6%96%B0%E5%A2%9E><span class=nav-number>14.4.6.</span> <span class=nav-text>@Repeatable (java1.8 新增)</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#Repeatable-%E8%BF%90%E7%94%A8%E4%B8%BE%E4%BE%8B><span class=nav-number>14.4.7.</span> <span class=nav-text>@Repeatable 运用举例</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E4%BB%BF-Hibernate-%E6%B3%A8%E8%A7%A3><span class=nav-number>14.5.</span> <span class=nav-text>仿 Hibernate 注解</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#hibernate%E4%B8%A4%E7%A7%8D%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F><span class=nav-number>14.5.1.</span> <span class=nav-text>hibernate两种配置方式</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%87%AA%E5%AE%9A%E4%B9%89hibernate%E6%B3%A8%E8%A7%A3><span class=nav-number>14.5.2.</span> <span class=nav-text>自定义hibernate注解</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%BF%90%E7%94%A8%E5%9C%A8Hero%E5%AF%B9%E8%B1%A1%E4%B8%8A><span class=nav-number>14.5.3.</span> <span class=nav-text>运用在Hero对象上</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E8%A7%A3%E6%9E%90%E6%B3%A8%E8%A7%A3-1><span class=nav-number>14.5.4.</span> <span class=nav-text>解析注解</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E6%B3%A8%E8%A7%A3%E5%88%86%E7%B1%BB><span class=nav-number>14.6.</span> <span class=nav-text>注解分类</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%8C%89%E7%85%A7%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%88%86><span class=nav-number>14.6.1.</span> <span class=nav-text>按照作用域分</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%8C%89%E7%85%A7%E6%9D%A5%E6%BA%90%E5%88%86><span class=nav-number>14.6.2.</span> <span class=nav-text>按照来源分</span></a></ol></ol></ol></div></div><!--/noindex--><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop=author itemscope itemtype=http://schema.org/Person><img alt="王方钢 / Kenny Wang" class=site-author-image itemprop=image src=/uploads/kwang.jpg><p class=site-author-name itemprop=name>王方钢 / Kenny Wang<div class=site-description itemprop=description></div></div><div class="site-state-wrap animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/> <span class=site-state-item-count>182</span> <span class=site-state-item-name>日志</span> </a></div><div class="site-state-item site-state-categories"><a href=/categories/> <span class=site-state-item-count>19</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/> <span class=site-state-item-count>64</span> <span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-author animated"><span class=links-of-author-item> <a rel="noopener me" title="GitHub → https://github.com/wfg2513148" href=https://github.com/wfg2513148 target=_blank><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class=links-of-author-item> <a rel="noopener me" title="E-Mail → mailto:wfgdlut@gmail.com" href=mailto:wfgdlut@gmail.com target=_blank><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class=links-of-author-item> <a rel="noopener me" title="Twitter → https://x.com/wfgdlut" href=https://x.com/wfgdlut target=_blank><i class="fab fa-twitter fa-fw"></i>Twitter</a> </span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article lang=zh-CN><link href=https://wangfanggang.com/Java/java_note/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=/uploads/kwang.jpg itemprop=image> <meta content="王方钢 / Kenny Wang" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content=钢钢更新 itemprop=name> <meta itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="Java 学习笔记 - 钢钢更新 | 钢钢更新" itemprop=name> <meta itemprop=description> </span><header class=post-header><h1 itemprop="name headline" class=post-title>Java 学习笔记 - 钢钢更新</h1><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2019-05-15 22:02:35" datetime=2019-05-15T22:02:35+00:00>2019-05-15</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2019-09-03 12:27:53" datetime=2019-09-03T12:27:53+00:00 itemprop=dateModified>2019-09-03</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Java/ itemprop=url rel=index><span itemprop=name>Java</span></a> </span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>59k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>3:35</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><img src=https://ws1.sinaimg.cn/mw690/006By2pOly1g32d72qammj31gc0vmb2b.jpg></p><span id=more></span><h1 id=数组><a class=headerlink href=#数组 title=数组></a>数组</h1><h2 id=创建数组><a class=headerlink href=#创建数组 title=创建数组></a>创建数组</h2><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//声明一个引用</span></span><br><span class=line>        <span class=type>int</span>[] a;</span><br><span class=line>        <span class=comment>//创建一个长度是5的数组，并且使用引用a指向该数组</span></span><br><span class=line>        a = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>5</span>];</span><br><span class=line>         </span><br><span class=line>        <span class=type>int</span>[] b = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>5</span>]; <span class=comment>//声明的同时，指向一个数组</span></span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=访问数组><a class=headerlink href=#访问数组 title=访问数组></a>访问数组</h2><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span>[] a;</span><br><span class=line>        a = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>5</span>];</span><br><span class=line>         </span><br><span class=line>        a[<span class=number>0</span>]= <span class=number>1</span>;  <span class=comment>//下标0，代表数组里的第一个数</span></span><br><span class=line>        a[<span class=number>1</span>]= <span class=number>2</span>;</span><br><span class=line>        a[<span class=number>2</span>]= <span class=number>3</span>;</span><br><span class=line>        a[<span class=number>3</span>]= <span class=number>4</span>;</span><br><span class=line>        a[<span class=number>4</span>]= <span class=number>5</span>;</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=数组长度><a class=headerlink href=#数组长度 title=数组长度></a>数组长度</h2><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>	<span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>		<span class=type>int</span>[] a; </span><br><span class=line>		a = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>5</span>];</span><br><span class=line>		</span><br><span class=line>		System.out.println(a.length); <span class=comment>//打印数组的长度</span></span><br><span class=line>		</span><br><span class=line>		a[<span class=number>4</span>]=<span class=number>100</span>; <span class=comment>//下标4，实质上是“第5个”，即最后一个 </span></span><br><span class=line>		a[<span class=number>5</span>]=<span class=number>101</span>; <span class=comment>//下标5，实质上是“第6个”，超出范围 ,产生数组下标越界异常</span></span><br><span class=line>		</span><br><span class=line>	}</span><br><span class=line>}</span><br></pre></table></figure><h2 id=数组最小值><a class=headerlink href=#数组最小值 title=数组最小值></a>数组最小值</h2><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span>[] a = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>5</span>];</span><br><span class=line>        a[<span class=number>0</span>] = (<span class=type>int</span>) (Math.random() * <span class=number>100</span>);</span><br><span class=line>        a[<span class=number>1</span>] = (<span class=type>int</span>) (Math.random() * <span class=number>100</span>);</span><br><span class=line>        a[<span class=number>2</span>] = (<span class=type>int</span>) (Math.random() * <span class=number>100</span>);</span><br><span class=line>        a[<span class=number>3</span>] = (<span class=type>int</span>) (Math.random() * <span class=number>100</span>);</span><br><span class=line>        a[<span class=number>4</span>] = (<span class=type>int</span>) (Math.random() * <span class=number>100</span>);</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"数组中的各个随机数是:"</span>);</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length; i++)</span><br><span class=line>            System.out.println(a[i]);</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"本练习的目的是，找出最小的一个值: "</span>);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=分配空间与赋值分步进行><a class=headerlink href=#分配空间与赋值分步进行 title=分配空间与赋值分步进行></a>分配空间与赋值分步进行</h2><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span>[] a = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>5</span>]; <span class=comment>//分配了长度是5的数组，但是没有赋值</span></span><br><span class=line>         </span><br><span class=line>        <span class=comment>//没有赋值，那么就会使用默认值</span></span><br><span class=line>        <span class=comment>//作为int类型的数组，默认值是0</span></span><br><span class=line>        System.out.println(a[<span class=number>0</span>]);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//进行赋值</span></span><br><span class=line>     </span><br><span class=line>        a[<span class=number>0</span>] = <span class=number>100</span>;</span><br><span class=line>        a[<span class=number>1</span>] = <span class=number>101</span>;</span><br><span class=line>        a[<span class=number>2</span>] = <span class=number>103</span>;</span><br><span class=line>        a[<span class=number>3</span>] = <span class=number>120</span>;</span><br><span class=line>        a[<span class=number>4</span>] = <span class=number>140</span>;</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=分配空间，同时赋值><a class=headerlink href=#分配空间，同时赋值 title=分配空间，同时赋值></a>分配空间，同时赋值</h2><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//写法一： 分配空间同时赋值</span></span><br><span class=line>        <span class=type>int</span>[] a = <span class=keyword>new</span> <span class="title class_">int</span>[]{<span class=number>100</span>,<span class=number>102</span>,<span class=number>444</span>,<span class=number>836</span>,<span class=number>3236</span>};</span><br><span class=line> </span><br><span class=line>        <span class=comment>//写法二： 省略了new int[],效果一样</span></span><br><span class=line>        <span class=type>int</span>[] b = {<span class=number>100</span>,<span class=number>102</span>,<span class=number>444</span>,<span class=number>836</span>,<span class=number>3236</span>};</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//写法三：同时分配空间，和指定内容</span></span><br><span class=line>        <span class=comment>//在这个例子里，长度是3，内容是5个，产生矛盾了</span></span><br><span class=line>        <span class=comment>//所以如果指定了数组的内容，就不能同时设置数组的长度</span></span><br><span class=line>        <span class=type>int</span>[] c = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>3</span>]{<span class=number>100</span>,<span class=number>102</span>,<span class=number>444</span>,<span class=number>836</span>,<span class=number>3236</span>};</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=排序><a class=headerlink href=#排序 title=排序></a>排序</h2><h3 id=选择法排序><a class=headerlink href=#选择法排序 title=选择法排序></a>选择法排序</h3><blockquote><p><code>选择法排序</code>的思路：</blockquote><ul><li>把第一位和其他所有的进行比较，只要比第一位小的，就换到第一个位置来<li>比较完后，第一位就是最小的<li>然后再从第二位和剩余的其他所有进行比较，只要比第二位小，就换到第二个位置来<li>比较完后，第二位就是第二小的<li>以此类推</ul><p><img src=http://stepimagewm.how2j.cn/573.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> a [] = <span class=keyword>new</span> <span class="title class_">int</span>[]{<span class=number>18</span>,<span class=number>62</span>,<span class=number>68</span>,<span class=number>82</span>,<span class=number>65</span>,<span class=number>9</span>};</span><br><span class=line>        <span class=comment>//排序前，先把内容打印出来</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length; i++) {</span><br><span class=line>            System.out.print(a[i] + <span class=string>" "</span>);</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>" "</span>);</span><br><span class=line>        <span class=comment>//选择法排序</span></span><br><span class=line>     </span><br><span class=line>        <span class=comment>//第一步： 把第一位和其他所有位进行比较</span></span><br><span class=line>        <span class=comment>//如果发现其他位置的数据比第一位小，就进行交换</span></span><br><span class=line>         </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>1</span>; i &lt; a.length; i++) {</span><br><span class=line>            <span class=keyword>if</span>(a[i]&lt;a[<span class=number>0</span>]){  </span><br><span class=line>                <span class=type>int</span> <span class=variable>temp</span> <span class=operator>=</span> a[<span class=number>0</span>];</span><br><span class=line>                a[<span class=number>0</span>] = a[i];</span><br><span class=line>                a[i] = temp;</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        <span class=comment>//把内容打印出来</span></span><br><span class=line>        <span class=comment>//可以发现，最小的一个数，到了最前面</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length; i++) {</span><br><span class=line>            System.out.print(a[i] + <span class=string>" "</span>);</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>" "</span>);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//第二步： 把第二位的和剩下的所有位进行比较</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>2</span>; i &lt; a.length; i++) {</span><br><span class=line>            <span class=keyword>if</span>(a[i]&lt;a[<span class=number>1</span>]){  </span><br><span class=line>                <span class=type>int</span> <span class=variable>temp</span> <span class=operator>=</span> a[<span class=number>1</span>];</span><br><span class=line>                a[<span class=number>1</span>] = a[i];</span><br><span class=line>                a[i] = temp;</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        <span class=comment>//把内容打印出来</span></span><br><span class=line>        <span class=comment>//可以发现，倒数第二小的数，到了第二个位置</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length; i++) {</span><br><span class=line>            System.out.print(a[i] + <span class=string>" "</span>);</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>" "</span>);       </span><br><span class=line>         </span><br><span class=line>        <span class=comment>//可以发现一个规律</span></span><br><span class=line>        <span class=comment>//移动的位置是从0 逐渐增加的</span></span><br><span class=line>        <span class=comment>//所以可以在外面套一层循环</span></span><br><span class=line>         </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>j</span> <span class=operator>=</span> <span class=number>0</span>; j &lt; a.length-<span class=number>1</span>; j++) {</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> j+<span class=number>1</span>; i &lt; a.length; i++) {</span><br><span class=line>                <span class=keyword>if</span>(a[i]&lt;a[j]){  </span><br><span class=line>                    <span class=type>int</span> <span class=variable>temp</span> <span class=operator>=</span> a[j];</span><br><span class=line>                    a[j] = a[i];</span><br><span class=line>                    a[i] = temp;</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//把内容打印出来</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length; i++) {</span><br><span class=line>            System.out.print(a[i] + <span class=string>" "</span>);</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>" "</span>);       </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=冒泡法排序><a class=headerlink href=#冒泡法排序 title=冒泡法排序></a>冒泡法排序</h3><blockquote><p><code>冒泡法排序</code>的思路：</blockquote><ul><li>第一步：从第一位开始，把相邻两位进行比较<li>如果发现前面的比后面的大，就把大的数据交换在后面，循环比较完毕后，最后一位就是最大的<li>第二步： 再来一次，只不过不用比较最后一位<li>以此类推</ul><p><img src=http://stepimagewm.how2j.cn/574.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> a [] = <span class=keyword>new</span> <span class="title class_">int</span>[]{<span class=number>18</span>,<span class=number>62</span>,<span class=number>68</span>,<span class=number>82</span>,<span class=number>65</span>,<span class=number>9</span>};</span><br><span class=line>        <span class=comment>//排序前，先把内容打印出来</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length; i++) {</span><br><span class=line>            System.out.print(a[i] + <span class=string>" "</span>);</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>" "</span>);</span><br><span class=line>        <span class=comment>//冒泡法排序</span></span><br><span class=line>      </span><br><span class=line>        <span class=comment>//第一步：从第一位开始，把相邻两位进行比较</span></span><br><span class=line>        <span class=comment>//如果发现前面的比后面的大，就把大的数据交换在后面</span></span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length-<span class=number>1</span>; i++) {</span><br><span class=line>            <span class=keyword>if</span>(a[i]>a[i+<span class=number>1</span>]){  </span><br><span class=line>                <span class=type>int</span> <span class=variable>temp</span> <span class=operator>=</span> a[i];</span><br><span class=line>                a[i] = a[i+<span class=number>1</span>];</span><br><span class=line>                a[i+<span class=number>1</span>] = temp;</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        <span class=comment>//把内容打印出来</span></span><br><span class=line>        <span class=comment>//可以发现，最大的到了最后面</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length; i++) {</span><br><span class=line>            System.out.print(a[i] + <span class=string>" "</span>);</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>" "</span>);</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//第二步： 再来一次，只不过不用比较最后一位</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length-<span class=number>2</span>; i++) {</span><br><span class=line>            <span class=keyword>if</span>(a[i]>a[i+<span class=number>1</span>]){  </span><br><span class=line>                <span class=type>int</span> <span class=variable>temp</span> <span class=operator>=</span> a[i];</span><br><span class=line>                a[i] = a[i+<span class=number>1</span>];</span><br><span class=line>                a[i+<span class=number>1</span>] = temp;</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        <span class=comment>//把内容打印出来</span></span><br><span class=line>        <span class=comment>//可以发现，倒数第二大的到了倒数第二个位置</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length; i++) {</span><br><span class=line>            System.out.print(a[i] + <span class=string>" "</span>);</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>" "</span>);       </span><br><span class=line>          </span><br><span class=line>        <span class=comment>//可以发现一个规律</span></span><br><span class=line>        <span class=comment>//后边界在收缩</span></span><br><span class=line>        <span class=comment>//所以可以在外面套一层循环</span></span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>j</span> <span class=operator>=</span> <span class=number>0</span>; j &lt; a.length; j++) {</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length-j-<span class=number>1</span>; i++) {</span><br><span class=line>                <span class=keyword>if</span>(a[i]>a[i+<span class=number>1</span>]){  </span><br><span class=line>                    <span class=type>int</span> <span class=variable>temp</span> <span class=operator>=</span> a[i];</span><br><span class=line>                    a[i] = a[i+<span class=number>1</span>];</span><br><span class=line>                    a[i+<span class=number>1</span>] = temp;</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//把内容打印出来</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; a.length; i++) {</span><br><span class=line>            System.out.print(a[i] + <span class=string>" "</span>);</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>" "</span>);       </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=冒泡法，选择法，二叉树-排序比较><a title="冒泡法，选择法，二叉树 排序比较" class=headerlink href=#冒泡法，选择法，二叉树-排序比较></a>冒泡法，选择法，二叉树 排序比较</h3><p><img src=http://stepimagewm.how2j.cn/2478.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br><span class=line>94</span><br><span class=line>95</span><br><span class=line>96</span><br><span class=line>97</span><br><span class=line>98</span><br><span class=line>99</span><br><span class=line>100</span><br><span class=line>101</span><br><span class=line>102</span><br><span class=line>103</span><br><span class=line>104</span><br><span class=line>105</span><br><span class=line>106</span><br><span class=line>107</span><br><span class=line>108</span><br><span class=line>109</span><br><span class=line>110</span><br><span class=line>111</span><br><span class=line>112</span><br><span class=line>113</span><br><span class=line>114</span><br><span class=line>115</span><br><span class=line>116</span><br><span class=line>117</span><br><span class=line>118</span><br><span class=line>119</span><br><span class=line>120</span><br><span class=line>121</span><br><span class=line>122</span><br><span class=line>123</span><br><span class=line>124</span><br><span class=line>125</span><br><span class=line>126</span><br><span class=line>127</span><br><span class=line>128</span><br><span class=line>129</span><br><span class=line>130</span><br><span class=line>131</span><br><span class=line>132</span><br><span class=line>133</span><br><span class=line>134</span><br><span class=line>135</span><br><span class=line>136</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.Arrays;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">SortCompare</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//初始化随机数</span></span><br><span class=line>        <span class=type>int</span> <span class=variable>total</span> <span class=operator>=</span> <span class=number>40000</span>;</span><br><span class=line>        System.out.println(<span class=string>"初始化一个长度是"</span>+total+<span class=string>"的随机数字的数组"</span>);</span><br><span class=line>        <span class=type>int</span>[] originalNumbers = <span class=keyword>new</span> <span class="title class_">int</span>[total];</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; originalNumbers.length; i++) {</span><br><span class=line>            originalNumbers[i] = (<span class=type>int</span>)(Math.random()*total);</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>"初始化完毕"</span>);</span><br><span class=line>        System.out.println(<span class=string>"接下来分别用3种算法进行排序"</span>);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//从初始化了的随机数组复制过来，以保证，每一种排序算法的目标数组，都是一样的</span></span><br><span class=line>        <span class=type>int</span>[] use4sort;</span><br><span class=line>         </span><br><span class=line>        use4sort= Arrays.copyOf(originalNumbers, originalNumbers.length);</span><br><span class=line>        <span class=type>int</span>[] sortedNumbersBySelection= performance(<span class=keyword>new</span> <span class="title class_">SelectionSort</span>(use4sort),<span class=string>"选择法"</span>);</span><br><span class=line>         </span><br><span class=line>        use4sort= Arrays.copyOf(originalNumbers, originalNumbers.length);</span><br><span class=line>        <span class=type>int</span>[] sortedNumbersByBubbling=performance(<span class=keyword>new</span> <span class="title class_">BubblingSort</span>(use4sort),<span class=string>"冒泡法"</span>);</span><br><span class=line>         </span><br><span class=line>        use4sort= Arrays.copyOf(originalNumbers, originalNumbers.length);</span><br><span class=line>        <span class=type>int</span>[] sortedNumbersByTree=performance(<span class=keyword>new</span> <span class="title class_">TreeSort</span>(use4sort),<span class=string>"二叉树"</span>);</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"查看排序结果，是否是不同的数组对象"</span>);</span><br><span class=line>        System.out.println(sortedNumbersBySelection);</span><br><span class=line>        System.out.println(sortedNumbersByBubbling);</span><br><span class=line>        System.out.println(sortedNumbersByTree);</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"查看排序结果，内容是否相同"</span>);</span><br><span class=line>        System.out.println(<span class=string>"比较 选择法 和 冒泡法  排序结果："</span>);</span><br><span class=line>        System.out.println(Arrays.equals(sortedNumbersBySelection, sortedNumbersByBubbling));</span><br><span class=line>        System.out.println(<span class=string>"比较 选择法 和 二叉树  排序结果："</span>);</span><br><span class=line>        System.out.println(Arrays.equals(sortedNumbersBySelection, sortedNumbersByTree));</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>interface</span> <span class="title class_">Sort</span>{</span><br><span class=line>        <span class=keyword>void</span> <span class="title function_">sort</span><span class=params>()</span>;</span><br><span class=line>        <span class=type>int</span>[] values();</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>static</span> <span class=keyword>class</span> <span class="title class_">SelectionSort</span> <span class=keyword>implements</span> <span class="title class_">Sort</span>{</span><br><span class=line> </span><br><span class=line>        <span class=type>int</span> numbers[];</span><br><span class=line>        SelectionSort(<span class=type>int</span> [] numbers){</span><br><span class=line>            <span class=built_in>this</span>.numbers = numbers;</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=meta>@Override</span></span><br><span class=line>        <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">sort</span><span class=params>()</span> {</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>j</span> <span class=operator>=</span> <span class=number>0</span>; j &lt; numbers.length-<span class=number>1</span>; j++) {</span><br><span class=line>                <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> j+<span class=number>1</span>; i &lt; numbers.length; i++) {</span><br><span class=line>                    <span class=keyword>if</span>(numbers[i]&lt;numbers[j]){  </span><br><span class=line>                        <span class=type>int</span> <span class=variable>temp</span> <span class=operator>=</span> numbers[j];</span><br><span class=line>                        numbers[j] = numbers[i];</span><br><span class=line>                        numbers[i] = temp;</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=meta>@Override</span></span><br><span class=line>        <span class=keyword>public</span> <span class=type>int</span>[] values() {</span><br><span class=line>            <span class=comment>// TODO Auto-generated method stub</span></span><br><span class=line>            <span class=keyword>return</span> numbers;</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>static</span> <span class=keyword>class</span> <span class="title class_">BubblingSort</span> <span class=keyword>implements</span> <span class="title class_">Sort</span>{</span><br><span class=line>        <span class=type>int</span> numbers[];</span><br><span class=line>        BubblingSort(<span class=type>int</span> [] numbers){</span><br><span class=line>            <span class=built_in>this</span>.numbers = numbers;</span><br><span class=line>        }</span><br><span class=line>        <span class=meta>@Override</span></span><br><span class=line>        <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">sort</span><span class=params>()</span> {</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>j</span> <span class=operator>=</span> <span class=number>0</span>; j &lt; numbers.length; j++) {</span><br><span class=line>                <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; numbers.length-j-<span class=number>1</span>; i++) {</span><br><span class=line>                    <span class=keyword>if</span>(numbers[i]>numbers[i+<span class=number>1</span>]){  </span><br><span class=line>                        <span class=type>int</span> <span class=variable>temp</span> <span class=operator>=</span> numbers[i];</span><br><span class=line>                        numbers[i] = numbers[i+<span class=number>1</span>];</span><br><span class=line>                        numbers[i+<span class=number>1</span>] = temp;</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        <span class=meta>@Override</span></span><br><span class=line>        <span class=keyword>public</span> <span class=type>int</span>[] values() {</span><br><span class=line>            <span class=comment>// TODO Auto-generated method stub</span></span><br><span class=line>            <span class=keyword>return</span> numbers;</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>static</span> <span class=keyword>class</span> <span class="title class_">TreeSort</span> <span class=keyword>implements</span> <span class="title class_">Sort</span>{</span><br><span class=line>        <span class=type>int</span> numbers[];</span><br><span class=line>        Node n;</span><br><span class=line>         </span><br><span class=line>        TreeSort(<span class=type>int</span> [] numbers){</span><br><span class=line>            n =<span class=keyword>new</span> <span class="title class_">Node</span>();</span><br><span class=line>            <span class=built_in>this</span>.numbers = numbers;</span><br><span class=line>        }</span><br><span class=line>        <span class=meta>@Override</span></span><br><span class=line>        <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">sort</span><span class=params>()</span> {</span><br><span class=line>         </span><br><span class=line>            <span class=keyword>for</span> (<span class=type>int</span> i : numbers) {</span><br><span class=line>                n.add(i);</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        <span class=meta>@Override</span></span><br><span class=line>        <span class=keyword>public</span> <span class=type>int</span>[] values() {</span><br><span class=line>            List&lt;Object> list = n.values();</span><br><span class=line>            <span class=type>int</span> sortedNumbers[] = <span class=keyword>new</span> <span class="title class_">int</span>[list.size()];</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; sortedNumbers.length; i++) {</span><br><span class=line>                sortedNumbers[i] = Integer.parseInt(list.get(i).toString());</span><br><span class=line>            }</span><br><span class=line>            <span class=keyword>return</span> sortedNumbers;</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=type>int</span>[] performance(Sort algorithm, String type) {</span><br><span class=line>        <span class=type>long</span> <span class=variable>start</span> <span class=operator>=</span> System.currentTimeMillis();</span><br><span class=line>        algorithm.sort();</span><br><span class=line>        <span class=type>int</span> sortedNumbers[] = algorithm.values();</span><br><span class=line>        <span class=type>long</span> <span class=variable>end</span> <span class=operator>=</span> System.currentTimeMillis();</span><br><span class=line>        System.out.printf(<span class=string>"%s排序，一共耗时 %d 毫秒%n"</span>,type,end-start);</span><br><span class=line>        <span class=keyword>return</span> sortedNumbers;</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=增强型for循环><a class=headerlink href=#增强型for循环 title=增强型for循环></a>增强型for循环</h2><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> values [] = <span class=keyword>new</span> <span class="title class_">int</span>[]{<span class=number>18</span>,<span class=number>62</span>,<span class=number>68</span>,<span class=number>82</span>,<span class=number>65</span>,<span class=number>9</span>};</span><br><span class=line>        <span class=comment>//常规遍历</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; values.length; i++) {</span><br><span class=line>            <span class=type>int</span> <span class=variable>each</span> <span class=operator>=</span> values[i];</span><br><span class=line>            System.out.println(each);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//增强型for循环遍历</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> each : values) {</span><br><span class=line>            System.out.println(each);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=复制数组><a class=headerlink href=#复制数组 title=复制数组></a>复制数组</h2><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> a [] = <span class=keyword>new</span> <span class="title class_">int</span>[]{<span class=number>18</span>,<span class=number>62</span>,<span class=number>68</span>,<span class=number>82</span>,<span class=number>65</span>,<span class=number>9</span>};</span><br><span class=line>         </span><br><span class=line>        <span class=type>int</span> b[] = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>3</span>];<span class=comment>//分配了长度是3的空间，但是没有赋值</span></span><br><span class=line>         </span><br><span class=line>        <span class=comment>//通过数组赋值把，a数组的前3位赋值到b数组</span></span><br><span class=line>         </span><br><span class=line>        <span class=comment>//方法一： for循环</span></span><br><span class=line>         </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; b.length; i++) {</span><br><span class=line>            b[i] = a[i];</span><br><span class=line>        }</span><br><span class=line>        </span><br><span class=line>        <span class=comment>//方法二: System.arraycopy(src, srcPos, dest, destPos, length)</span></span><br><span class=line>        <span class=comment>//src: 源数组</span></span><br><span class=line>        <span class=comment>//srcPos: 从源数组复制数据的起始位置</span></span><br><span class=line>        <span class=comment>//dest: 目标数组</span></span><br><span class=line>        <span class=comment>//destPos: 复制到目标数组的启始位置</span></span><br><span class=line>        <span class=comment>//length: 复制的长度       </span></span><br><span class=line>        System.arraycopy(a, <span class=number>0</span>, b, <span class=number>0</span>, <span class=number>3</span>);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//把内容打印出来</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; b.length; i++) {</span><br><span class=line>            System.out.print(b[i] + <span class=string>" "</span>);</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=初始化二维数组><a class=headerlink href=#初始化二维数组 title=初始化二维数组></a>初始化二维数组</h2><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>       <span class=comment>//初始化二维数组，</span></span><br><span class=line>       <span class=type>int</span>[][] a = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>2</span>][<span class=number>3</span>]; <span class=comment>//有两个一维数组，每个一维数组的长度是3</span></span><br><span class=line>       a[<span class=number>1</span>][<span class=number>2</span>] = <span class=number>5</span>;  <span class=comment>//可以直接访问一维数组，因为已经分配了空间</span></span><br><span class=line>          </span><br><span class=line>       <span class=comment>//只分配了二维数组</span></span><br><span class=line>       <span class=type>int</span>[][] b = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>2</span>][]; <span class=comment>//有两个一维数组，每个一维数组的长度暂未分配</span></span><br><span class=line>       b[<span class=number>0</span>]  =<span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>3</span>]; <span class=comment>//必须事先分配长度，才可以访问</span></span><br><span class=line>       b[<span class=number>0</span>][<span class=number>2</span>] = <span class=number>5</span>;</span><br><span class=line>        </span><br><span class=line>       <span class=comment>//指定内容的同时，分配空间</span></span><br><span class=line>       <span class=type>int</span>[][] c = <span class=keyword>new</span> <span class="title class_">int</span>[][]{</span><br><span class=line>               {<span class=number>1</span>,<span class=number>2</span>,<span class=number>4</span>},</span><br><span class=line>               {<span class=number>4</span>,<span class=number>5</span>},</span><br><span class=line>               {<span class=number>6</span>,<span class=number>7</span>,<span class=number>8</span>,<span class=number>9</span>}</span><br><span class=line>       };</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=JAVA-UTIL-ARRAYS类常用方法><a class=headerlink href=#JAVA-UTIL-ARRAYS类常用方法 title=JAVA.UTIL.ARRAYS类常用方法></a>JAVA.UTIL.ARRAYS类常用方法</h2><h3 id=数组复制><a class=headerlink href=#数组复制 title=数组复制></a>数组复制</h3><blockquote></blockquote><ul><li>与使用System.arraycopy进行数组复制类似的， Arrays提供了一个copyOfRange方法进行数组复制。<li>不同的是System.arraycopy，需要事先准备好目标数组，并分配长度。 copyOfRange 只需要源数组就就可以了，通过返回值，就能够得到目标数组了。<li>除此之外，需要注意的是 copyOfRange 的第3个参数，表示源数组的结束位置，是取不到的。</ul><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre><td class=code><pre><span class=line><span class=keyword>import</span> java.util.Arrays;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> a[] = <span class=keyword>new</span> <span class="title class_">int</span>[] { <span class=number>18</span>, <span class=number>62</span>, <span class=number>68</span>, <span class=number>82</span>, <span class=number>65</span>, <span class=number>9</span> };</span><br><span class=line> </span><br><span class=line>        <span class=comment>// copyOfRange(int[] original, int from, int to)</span></span><br><span class=line>        <span class=comment>// 第一个参数表示源数组</span></span><br><span class=line>        <span class=comment>// 第二个参数表示开始位置(取得到)</span></span><br><span class=line>        <span class=comment>// 第三个参数表示结束位置(取不到)</span></span><br><span class=line>        <span class=type>int</span>[] b = Arrays.copyOfRange(a, <span class=number>0</span>, <span class=number>3</span>);</span><br><span class=line> </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; b.length; i++) {</span><br><span class=line>            System.out.print(b[i] + <span class=string>" "</span>);</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=转换为字符串><a class=headerlink href=#转换为字符串 title=转换为字符串></a>转换为字符串</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre><td class=code><pre><span class=line><span class=keyword>import</span> java.util.Arrays;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> a[] = <span class=keyword>new</span> <span class="title class_">int</span>[] { <span class=number>18</span>, <span class=number>62</span>, <span class=number>68</span>, <span class=number>82</span>, <span class=number>65</span>, <span class=number>9</span> };</span><br><span class=line>        <span class=type>String</span> <span class=variable>content</span> <span class=operator>=</span> Arrays.toString(a);</span><br><span class=line>        System.out.println(content);</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=数组排序><a class=headerlink href=#数组排序 title=数组排序></a>数组排序</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=keyword>import</span> java.util.Arrays;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> a[] = <span class=keyword>new</span> <span class="title class_">int</span>[] { <span class=number>18</span>, <span class=number>62</span>, <span class=number>68</span>, <span class=number>82</span>, <span class=number>65</span>, <span class=number>9</span> };</span><br><span class=line>        System.out.println(<span class=string>"排序之前 :"</span>);</span><br><span class=line>        System.out.println(Arrays.toString(a));</span><br><span class=line>        Arrays.sort(a);</span><br><span class=line>        System.out.println(<span class=string>"排序之后:"</span>);</span><br><span class=line>        System.out.println(Arrays.toString(a));</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=数组搜索><a class=headerlink href=#数组搜索 title=数组搜索></a>数组搜索</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=keyword>import</span> java.util.Arrays;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> a[] = <span class=keyword>new</span> <span class="title class_">int</span>[] { <span class=number>18</span>, <span class=number>62</span>, <span class=number>68</span>, <span class=number>82</span>, <span class=number>65</span>, <span class=number>9</span> };</span><br><span class=line> </span><br><span class=line>        Arrays.sort(a);</span><br><span class=line> </span><br><span class=line>        System.out.println(Arrays.toString(a));</span><br><span class=line>        <span class=comment>//使用binarySearch之前，必须先使用sort进行排序</span></span><br><span class=line>        System.out.println(<span class=string>"数字 62出现的位置:"</span>+Arrays.binarySearch(a, <span class=number>62</span>));</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=数组判断是否相同><a class=headerlink href=#数组判断是否相同 title=数组判断是否相同></a>数组判断是否相同</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre><td class=code><pre><span class=line><span class=keyword>import</span> java.util.Arrays;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> a[] = <span class=keyword>new</span> <span class="title class_">int</span>[] { <span class=number>18</span>, <span class=number>62</span>, <span class=number>68</span>, <span class=number>82</span>, <span class=number>65</span>, <span class=number>9</span> };</span><br><span class=line>        <span class=type>int</span> b[] = <span class=keyword>new</span> <span class="title class_">int</span>[] { <span class=number>18</span>, <span class=number>62</span>, <span class=number>68</span>, <span class=number>82</span>, <span class=number>65</span>, <span class=number>8</span> };</span><br><span class=line> </span><br><span class=line>        System.out.println(Arrays.equals(a, b));</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=数组填充><a class=headerlink href=#数组填充 title=数组填充></a>数组填充</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>import</span> java.util.Arrays;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> a[] = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>10</span>];</span><br><span class=line>  </span><br><span class=line>        Arrays.fill(a, <span class=number>5</span>);</span><br><span class=line>  </span><br><span class=line>        System.out.println(Arrays.toString(a));</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h1 id=类和对象><a class=headerlink href=#类和对象 title=类和对象></a>类和对象</h1><h2 id=引用><a class=headerlink href=#引用 title=引用></a>引用</h2><h3 id=物品类Item><a class=headerlink href=#物品类Item title=物品类Item></a>物品类Item</h3><blockquote><p>物品类Item 有属性 name,price</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Item</span> {</span><br><span class=line>    String name;</span><br><span class=line>    <span class=type>int</span> price;</span><br><span class=line>}</span><br></pre></table></figure><h3 id=武器类Weapon（不继承）><a class=headerlink href=#武器类Weapon（不继承） title=武器类Weapon（不继承）></a>武器类Weapon（不继承）</h3><blockquote><p>武器类： Weapon不继承Item的写法<br>独立设计 name和price属性<br>同时多了一个属性 damage 攻击力</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Weapon</span>{</span><br><span class=line>    String name;</span><br><span class=line>    <span class=type>int</span> price;</span><br><span class=line>    <span class=type>int</span> damage; <span class=comment>//攻击力</span></span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=武器类Weapon（继承类Item）><a class=headerlink href=#武器类Weapon（继承类Item） title=武器类Weapon（继承类Item）></a>武器类Weapon（继承类Item）</h3><blockquote><p>这一次Weapon继承Item<br>虽然Weapon自己没有设计name和price,但是通过继承Item类，也具备了name和price属性。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Weapon</span> <span class=keyword>extends</span> <span class="title class_">Item</span>{</span><br><span class=line>    <span class=type>int</span> damage; <span class=comment>//攻击力</span></span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Weapon</span> <span class=variable>infinityEdge</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Weapon</span>();</span><br><span class=line>        infinityEdge.damage = <span class=number>65</span>; <span class=comment>//damage属性在类Weapon中新设计的</span></span><br><span class=line>         </span><br><span class=line>        infinityEdge.name = <span class=string>"无尽之刃"</span>;<span class=comment>//name属性，是从Item中继承来的，就不需要重复设计了</span></span><br><span class=line>        infinityEdge.price = <span class=number>3600</span>;</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><h2 id=方法重载><a class=headerlink href=#方法重载 title=方法重载></a>方法重载</h2><h3 id=attack方法的重载><a class=headerlink href=#attack方法的重载 title=attack方法的重载></a>attack方法的重载</h3><blockquote><p>有一种英雄，叫做物理攻击英雄 ADHero<br>为ADHero 提供三种方法</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ADHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(name + <span class=string>" 进行了一次攻击 ，但是不确定打中谁了"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>(Hero h1)</span> {</span><br><span class=line>        System.out.println(name + <span class=string>"对"</span> + h1.name + <span class=string>"进行了一次攻击 "</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>(Hero h1, Hero h2)</span> {</span><br><span class=line>        System.out.println(name + <span class=string>"同时对"</span> + h1.name + <span class=string>"和"</span> + h2.name + <span class=string>"进行了攻击 "</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ADHero</span> <span class=variable>bh</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ADHero</span>();</span><br><span class=line>        bh.name = <span class=string>"赏金猎人"</span>;</span><br><span class=line> </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h1.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h2.name = <span class=string>"提莫"</span>;</span><br><span class=line> </span><br><span class=line>        bh.attack(h1);</span><br><span class=line>        bh.attack(h1, h2);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=可变数量的参数><a class=headerlink href=#可变数量的参数 title=可变数量的参数></a>可变数量的参数</h3><blockquote><p>如果要攻击更多的英雄，就需要设计更多的方法，这样类会显得很累赘，像这样：</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>(Hero h1)</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>(Hero h1,Hero h2)</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>(Hero h1,Hero h2,Hero h3)</span></span><br></pre></table></figure><blockquote><p>这时，可以采用可变数量的参数<br>只需要设计一个方法</blockquote><p><code>public void attack(Hero ...heros)</code><blockquote><p>即可代表上述所有的方法了<br>在方法里，使用操作数组的方式处理参数heros即可</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ADHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(name + <span class=string>" 进行了一次攻击 ，但是不确定打中谁了"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=comment>// 可变数量的参数</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>(Hero... heros)</span> {</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; heros.length; i++) {</span><br><span class=line>            System.out.println(name + <span class=string>" 攻击了 "</span> + heros[i].name);</span><br><span class=line> </span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ADHero</span> <span class=variable>bh</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ADHero</span>();</span><br><span class=line>        bh.name = <span class=string>"赏金猎人"</span>;</span><br><span class=line> </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h1.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h2.name = <span class=string>"提莫"</span>;</span><br><span class=line> </span><br><span class=line>        bh.attack(h1);</span><br><span class=line>        bh.attack(h1, h2);</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h2 id=构造方法><a class=headerlink href=#构造方法 title=构造方法></a>构造方法</h2><blockquote><p>方法名和类名一样（包括大小写）<br>没有返回类型<br>实例化一个对象的时候，必然调用构造方法</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line> </span><br><span class=line>    String name;</span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> armor;</span><br><span class=line> </span><br><span class=line>    <span class=type>int</span> moveSpeed;</span><br><span class=line> </span><br><span class=line>    <span class=comment>// 方法名和类名一样（包括大小写）</span></span><br><span class=line>    <span class=comment>// 没有返回类型</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"实例化一个对象的时候，必然调用构造方法"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//实例化一个对象的时候，必然调用构造方法</span></span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=隐式的构造方法><a class=headerlink href=#隐式的构造方法 title=隐式的构造方法></a>隐式的构造方法</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>     </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>     </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>     </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>     </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>     </span><br><span class=line>    <span class=comment>//这个无参的构造方法，如果不写，</span></span><br><span class=line>    <span class=comment>//就会默认提供一个无参的构造方法</span></span><br><span class=line>    <span class=comment>//  public Hero(){ </span></span><br><span class=line>    <span class=comment>//      System.out.println("调用Hero的构造方法");</span></span><br><span class=line>    <span class=comment>//  }</span></span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>garen</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        garen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        garen.hp = <span class=number>616.28f</span>;</span><br><span class=line>        garen.armor = <span class=number>27.536f</span>;</span><br><span class=line>        garen.moveSpeed = <span class=number>350</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>        teemo.hp = <span class=number>383f</span>;</span><br><span class=line>        teemo.armor = <span class=number>14f</span>;</span><br><span class=line>        teemo.moveSpeed = <span class=number>330</span>;</span><br><span class=line>    }  </span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><h3 id=有参的构造方法><a class=headerlink href=#有参的构造方法 title=有参的构造方法></a>有参的构造方法</h3><blockquote><p>一旦提供了一个有参的构造方法<br>同时又没有显式的提供一个无参的构造方法<br>那么默认的无参的构造方法，就“木有了“</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>      </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>      </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>      </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>      </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>      </span><br><span class=line>    <span class=comment>//有参的构造方法</span></span><br><span class=line>    <span class=comment>//默认的无参的构造方法就失效了</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String heroname)</span>{ </span><br><span class=line>        name = heroname;</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>garen</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"盖伦"</span>); </span><br><span class=line>          </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>(); <span class=comment>//无参的构造方法“木有了”</span></span><br><span class=line>    }  </span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h3 id=构造方法的重载><a class=headerlink href=#构造方法的重载 title=构造方法的重载></a>构造方法的重载</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>       </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>       </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>       </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>       </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>       </span><br><span class=line>    <span class=comment>//带一个参数的构造方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String heroname)</span>{ </span><br><span class=line>        name = heroname;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//带两个参数的构造方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String heroname,<span class=type>float</span> herohp)</span>{ </span><br><span class=line>        name = heroname;</span><br><span class=line>        hp = herohp;</span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>garen</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"盖伦"</span>); </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"提莫"</span>,<span class=number>383</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><h2 id=this><a class=headerlink href=#this title=this></a>this</h2><blockquote><p>this代表当前对象</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>     </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>     </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>     </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>     </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line> </span><br><span class=line>    <span class=comment>//打印内存中的虚拟地址</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">showAddressInMemory</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"打印this看到的虚拟地址："</span>+<span class=built_in>this</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>garen</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        garen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        <span class=comment>//直接打印对象，会显示该对象在内存中的虚拟地址</span></span><br><span class=line>        <span class=comment>//格式：Hero@c17164 c17164即虚拟地址，每次执行，得到的地址不一定一样</span></span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"打印对象看到的虚拟地址："</span>+garen);</span><br><span class=line>        <span class=comment>//调用showAddressInMemory，打印该对象的this，显示相同的虚拟地址</span></span><br><span class=line>        garen.showAddressInMemory();</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>        System.out.println(<span class=string>"打印对象看到的虚拟地址："</span>+teemo);</span><br><span class=line>        teemo.showAddressInMemory();</span><br><span class=line>    }  </span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><h3 id=通过this访问属性><a class=headerlink href=#通过this访问属性 title=通过this访问属性></a>通过this访问属性</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>     </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>     </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>     </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>     </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line> </span><br><span class=line>    <span class=comment>//参数名和属性名一样</span></span><br><span class=line>    <span class=comment>//在方法体中，只能访问到参数name</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setName1</span><span class=params>(String name)</span>{</span><br><span class=line>        name = name;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//为了避免setName1中的问题，参数名不得不使用其他变量名</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setName2</span><span class=params>(String heroName)</span>{</span><br><span class=line>        name = heroName;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//通过this访问属性</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setName3</span><span class=params>(String name)</span>{</span><br><span class=line>        <span class=comment>//name代表的是参数name</span></span><br><span class=line>        <span class=comment>//this.name代表的是属性name</span></span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Hero</span>  <span class=variable>h</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>         </span><br><span class=line>        h.setName1(<span class=string>"teemo"</span>);</span><br><span class=line>        System.out.println(h.name);</span><br><span class=line>         </span><br><span class=line>        h.setName2(<span class=string>"garen"</span>);</span><br><span class=line>        System.out.println(h.name);    </span><br><span class=line>         </span><br><span class=line>        h.setName3(<span class=string>"死歌"</span>);</span><br><span class=line>        System.out.println(h.name);    </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><h3 id=通过this调用其他的构造方法><a class=headerlink href=#通过this调用其他的构造方法 title=通过this调用其他的构造方法></a>通过this调用其他的构造方法</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>        </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>        </span><br><span class=line>    <span class=comment>//带一个参数的构造方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name)</span>{</span><br><span class=line>        System.out.println(<span class=string>"一个参数的构造方法"</span>);</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=comment>//带两个参数的构造方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name,<span class=type>float</span> hp)</span>{</span><br><span class=line>        <span class=built_in>this</span>(name);</span><br><span class=line>        System.out.println(<span class=string>"两个参数的构造方法"</span>);</span><br><span class=line>        <span class=built_in>this</span>.hp = hp;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"提莫"</span>,<span class=number>383</span>);</span><br><span class=line>         </span><br><span class=line>        System.out.println(teemo.name);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h2 id=传参><a class=headerlink href=#传参 title=传参></a>传参</h2><h3 id=基本类型传参><a class=headerlink href=#基本类型传参 title=基本类型传参></a>基本类型传参</h3><blockquote><p>在方法内，无法修改方法外的基本类型参数</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>        </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span>{</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//回血</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">huixue</span><span class=params>(<span class=type>int</span> xp)</span>{</span><br><span class=line>        hp = hp + xp;</span><br><span class=line>        <span class=comment>//回血完毕后，血瓶=0</span></span><br><span class=line>        xp=<span class=number>0</span>;</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name,<span class=type>float</span> hp)</span>{</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>        <span class=built_in>this</span>.hp = hp;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"提莫"</span>,<span class=number>383</span>);</span><br><span class=line>        <span class=comment>//血瓶，其值是100</span></span><br><span class=line>        <span class=type>int</span> <span class=variable>xueping</span> <span class=operator>=</span> <span class=number>100</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//提莫通过这个血瓶回血</span></span><br><span class=line>         </span><br><span class=line>        teemo.huixue(xueping);</span><br><span class=line>         </span><br><span class=line>        System.out.println(xueping);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h3 id=引用与等号><a class=headerlink href=#引用与等号 title=引用与等号></a>引用与等号</h3><blockquote></blockquote><ul><li>如果一个变量是基本类型<br>比如<code> int hp = 50;</code><br>我们就直接管hp叫变量<br><code>=表示赋值的意思</code><li>如果一个变量是类类型<br>比如 <code>Hero h = new Hero();</code><br>我们就管h叫做引用。<br><code>=不再是赋值的意思</code><br><code>=表示指向的意思</code><br>比如: <code>Hero h = new Hero();</code><br>这句话的意思是<br>引用h，指向一个Hero对象</ul><h3 id=类类型传参><a class=headerlink href=#类类型传参 title=类类型传参></a>类类型传参</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line> </span><br><span class=line>    String name; <span class=comment>// 姓名</span></span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>// 血量</span></span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>// 护甲</span></span><br><span class=line> </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>// 移动速度</span></span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name, <span class=type>float</span> hp)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>        <span class=built_in>this</span>.hp = hp;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=comment>// 攻击一个英雄，并让他掉damage点血</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>(Hero hero, <span class=type>int</span> damage)</span> {</span><br><span class=line>        hero.hp = hero.hp - damage;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"提莫"</span>, <span class=number>383</span>);</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>garen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"盖伦"</span>, <span class=number>616</span>);</span><br><span class=line>        garen.attack(teemo, <span class=number>100</span>);</span><br><span class=line>        System.out.println(teemo.hp);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h2 id=类之间的关系><a class=headerlink href=#类之间的关系 title=类之间的关系></a>类之间的关系</h2><blockquote><p>类和类之间的关系有如下几种:<br>以Hero为例</blockquote><ul><li>自身：指的是Hero自己<li>同包子类：ADHero这个类是Hero的子类，并且和Hero处于<code>同一个包下</code><li>不同包子类：Support这个类是Hero的子类，但是在<code>另一个包下</code><li>同包类： GiantDragon 这个类和Hero是<code>同一个包</code>，但是彼此<code>没有继承关系</code><li>其他类：Item这个类，<code>在不同包</code>，也没有继承关系的类</ul><p><img src=http://stepimagewm.how2j.cn/605.png><h3 id=private-私有的><a title="private 私有的" class=headerlink href=#private-私有的></a>private 私有的</h3><p><code>红色字体，表示不可行</code><br><img alt="Alt text" src=/./1557708467006.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Weapon;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line> </span><br><span class=line>    <span class=comment>//属性id是private的，只有Hero自己可以访问</span></span><br><span class=line>    <span class=comment>//子类不能继承</span></span><br><span class=line>    <span class=comment>//其他类也不能访问</span></span><br><span class=line>    <span class=keyword>private</span> <span class=type>int</span> id;</span><br><span class=line>     </span><br><span class=line>    String name;</span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> armor;</span><br><span class=line> </span><br><span class=line>    <span class=type>int</span> moveSpeed;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">equip</span><span class=params>(Weapon w)</span> {</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=package-friendly-default-不写><a title="package/friendly/default 不写" class=headerlink href=#package-friendly-default-不写></a>package/friendly/default 不写</h3><blockquote><p>没有修饰符即代表package/friendly/default<br>float maxHP; 血量上限</blockquote><p><img src=http://stepimagewm.how2j.cn/609.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Weapon;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>private</span> <span class=type>int</span> id;</span><br><span class=line> </span><br><span class=line>    String name;</span><br><span class=line> </span><br><span class=line>    <span class=comment>// 无修饰符的属性 hp</span></span><br><span class=line>    <span class=comment>// 自己可以访问</span></span><br><span class=line> </span><br><span class=line>    <span class=comment>// 同包子类可以继承</span></span><br><span class=line>    <span class=comment>// 不同包子类不能继承</span></span><br><span class=line> </span><br><span class=line>    <span class=comment>// 同包类可以访问</span></span><br><span class=line>    <span class=comment>// 不同包类不能访问</span></span><br><span class=line>    <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> armor;</span><br><span class=line> </span><br><span class=line>    <span class=type>int</span> moveSpeed;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">equip</span><span class=params>(Weapon w)</span> {</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=protected-受保护的><a title="protected 受保护的" class=headerlink href=#protected-受保护的></a>protected 受保护的</h3><p><img src=http://stepimagewm.how2j.cn/610.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Weapon;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>private</span> <span class=type>int</span> id;</span><br><span class=line> </span><br><span class=line>    String name;</span><br><span class=line> </span><br><span class=line>    <span class=comment>// protected饰符的属性 hp</span></span><br><span class=line>    <span class=comment>// 自己可以访问</span></span><br><span class=line> </span><br><span class=line>    <span class=comment>// 同包子类可以继承</span></span><br><span class=line>    <span class=comment>// 不同包子类可以继承</span></span><br><span class=line> </span><br><span class=line>    <span class=comment>// 同包类可以访问</span></span><br><span class=line>    <span class=comment>// 不同包类不能访问</span></span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> armor;</span><br><span class=line> </span><br><span class=line>    <span class=type>int</span> moveSpeed;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">equip</span><span class=params>(Weapon w)</span> {</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=public-公共的><a title="public 公共的" class=headerlink href=#public-公共的></a>public 公共的</h3><p><img src=http://stepimagewm.how2j.cn/611.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Weapon;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>private</span> <span class=type>int</span> id;</span><br><span class=line> </span><br><span class=line>    <span class=comment>// public的属性 name</span></span><br><span class=line>    <span class=comment>// 自己可以访问</span></span><br><span class=line> </span><br><span class=line>    <span class=comment>// 同包子类可以继承</span></span><br><span class=line>    <span class=comment>// 不同包子类可以继承</span></span><br><span class=line> </span><br><span class=line>    <span class=comment>// 同包类可以访问</span></span><br><span class=line>    <span class=comment>// 不同包类可以访问</span></span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> armor;</span><br><span class=line> </span><br><span class=line>    <span class=type>int</span> moveSpeed;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">equip</span><span class=params>(Weapon w)</span> {</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h2 id=修饰符小结><a class=headerlink href=#修饰符小结 title=修饰符小结></a>修饰符小结</h2><p><img src=http://stepimagewm.how2j.cn/612.png><h3 id=那么什么情况该用什么修饰符呢？><a class=headerlink href=#那么什么情况该用什么修饰符呢？ title=那么什么情况该用什么修饰符呢？></a>那么什么情况该用什么修饰符呢？</h3><blockquote><p>从作用域来看，public能够使用所有的情况。 但是大家在工作的时候，又不会真正全部都使用public,那么到底什么情况该用什么修饰符呢？</blockquote><ol><li>属性通常使用private封装起来<li>方法一般使用public用于被调用<li>会被子类继承的方法，通常使用protected<li>package用的不多，一般新手会用package,因为还不知道有修饰符这个东西</ol><p>再就是<code>作用范围最小原则</code><br>简单说，能用private就用private，不行就放大一级，用package,再不行就用protected，最后用public。 这样就能把数据尽量的封装起来，没有必要露出来的，就不用露出来了。<h2 id=类属性><a class=headerlink href=#类属性 title=类属性></a>类属性</h2><blockquote></blockquote><ul><li>当一个属性被static修饰的时候，就叫做<code>类属性</code>，又叫做<code>静态属性</code>。<li>当一个属性被声明成类属性，那么所有的对象，都共享一个值。</ul><p>与<code>对象属性</code>对比：<ul><li>不同对象的 对象属性 的值都可能不一样。<br>比如：盖伦的hp 和 提莫的hp 是不一样的，但是所有对象的类属性的值，都是一样的。</ul><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name; <span class=comment>//实例属性，对象属性，非静态属性</span></span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line>    <span class=keyword>static</span> String copyright;<span class=comment>//类属性,静态属性</span></span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>           <span class=type>Hero</span> <span class=variable>garen</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>           garen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>            </span><br><span class=line>           Hero.copyright = <span class=string>"版权由Riot Games公司所有"</span>;</span><br><span class=line>            </span><br><span class=line>           System.out.println(garen.name);</span><br><span class=line>           System.out.println(garen.copyright);</span><br><span class=line>            </span><br><span class=line>           <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>           teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>           System.out.println(teemo.name);    </span><br><span class=line>           System.out.println(teemo.copyright);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><h3 id=访问类属性><a class=headerlink href=#访问类属性 title=访问类属性></a>访问类属性</h3><blockquote><p>访问类属性有两种方式:</blockquote><ol><li>对象.类属性<br> <code>teemo.copyright</code><li>类.类属性<br> <code>Hero.copyright</code></ol><p>这两种方式都可以访问类属性，访问即修改和获取，但是建议使用第二种 <code>类.类属性</code> 的方式进行，这样更符合语义上的理解。<h3 id=什么时候使用对象属性？什么时候使用类属性？><a class=headerlink href=#什么时候使用对象属性？什么时候使用类属性？ title=什么时候使用对象属性？什么时候使用类属性？></a>什么时候使用对象属性？什么时候使用类属性？</h3><blockquote><ul><li>如果一个属性，每个英雄都不一样，比如name，这样的属性就应该设计为对象属性，因为它是<code>跟着对象走的</code>，每个对象的name都是不同的。<li>如果一个属性，<code>所有的英雄都共享</code>，都是一样的，那么就应该设计为类属性。比如血量上限，所有的英雄的血量上限都是 9999，不会因为英雄不同，而取不同的值。 这样的属性，就适合设计为类属性。</ul></blockquote><h2 id=静态方法><a class=headerlink href=#静态方法 title=静态方法></a>静态方法</h2><blockquote></blockquote><ul><li><code>类方法</code>： 又叫做静态方法。访问类方法，不需要对象的存在，直接就访问。<li><code>对象方法</code>： 又叫实例方法，非静态方法。访问一个对象方法，必须建立在有一个对象的前提的基础上。</ul><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=comment>//实例方法,对象方法，非静态方法</span></span><br><span class=line>    <span class=comment>//必须有对象才能够调用</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">die</span><span class=params>()</span>{</span><br><span class=line>        hp = <span class=number>0</span>;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//类方法，静态方法</span></span><br><span class=line>    <span class=comment>//通过类就可以直接调用</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">battleWin</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"battle win"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>           <span class=type>Hero</span> <span class=variable>garen</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>           garen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>           <span class=comment>//必须有一个对象才能调用</span></span><br><span class=line>           garen.die();</span><br><span class=line>            </span><br><span class=line>           <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>           teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>            </span><br><span class=line>           <span class=comment>//无需对象，直接通过类调用</span></span><br><span class=line>           Hero.battleWin();</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=调用类方法><a class=headerlink href=#调用类方法 title=调用类方法></a>调用类方法</h3><blockquote><p>和访问类属性一样，调用类方法也有两种方式:</blockquote><ol><li><p>对象.类方法<br><code>garen.battleWin();</code></p><li><p>类.类方法<br><code>Hero.battleWin();</code></p></ol><blockquote><p>这两种方式都可以调用类方法，但是建议使用第二种 类.类方法 的方式进行，这样更符合语义上的理解。<br>并且在很多时候，并没有实例，比如在前面练习的时候用到的随机数的获取办法<br> <code>Math.random()</code></blockquote><blockquote><p>random()就是一个类方法，直接通过类Math进行调用，并没有一个Math的实例存在。</blockquote><h3 id=什么时候设计对象方法-什么时候设计类方法><a title="什么时候设计对象方法? 什么时候设计类方法?" class=headerlink href=#什么时候设计对象方法-什么时候设计类方法></a>什么时候设计对象方法? 什么时候设计类方法?</h3><blockquote><p>如果在某一个方法里，调用了对象属性，比如</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> String <span class="title function_">getName</span><span class=params>()</span>{</span><br><span class=line>    <span class=keyword>return</span> name;</span><br><span class=line>}</span><br></pre></table></figure><blockquote><p>name属性是对象属性，只有存在一个具体对象的时候，name才有意义。 如果方法里访问了对象属性，那么这个方法，就必须设计为对象方法</blockquote><blockquote><p>如果一个方法，没有调用任何对象属性，那么就可以考虑设计为类方法，比如</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">printGameDuration</span><span class=params>()</span>{</span><br><span class=line>    System.out.println(<span class=string>"已经玩了10分50秒"</span>);</span><br><span class=line>}</span><br></pre></table></figure><blockquote><p>printGameDuration 打印当前玩了多长时间了，不和某一个具体的英雄关联起来，所有的英雄都是一样的。 这样的方法，更带有功能性色彩<br>就像取随机数一样，random()是一个功能用途的方法<br><code>Math.random()</code></blockquote><h2 id=属性初始化><a class=headerlink href=#属性初始化 title=属性初始化></a>属性初始化</h2><blockquote><p>对象属性初始化有3种：</blockquote><ol><li>声明该属性的时候初始化<li>构造方法中初始化<li>初始化块</ol><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span> <span class=string>"some hero"</span>; <span class=comment>//声明该属性的时候初始化</span></span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line>    <span class=type>float</span> maxHP;</span><br><span class=line>     </span><br><span class=line>    {</span><br><span class=line>        maxHP = <span class=number>200</span>; <span class=comment>//初始化块</span></span><br><span class=line>    }  </span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span>{</span><br><span class=line>        hp = <span class=number>100</span>; <span class=comment>//构造方法中初始化</span></span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><h2 id=单例模式><a class=headerlink href=#单例模式 title=单例模式></a>单例模式</h2><blockquote><p>单例模式又叫做 Singleton模式，指的是一个类，在一个JVM里，只有一个实例存在。</blockquote><h3 id=饿汉式单例模式><a class=headerlink href=#饿汉式单例模式 title=饿汉式单例模式></a>饿汉式单例模式</h3><blockquote><p>GiantDragon 应该只有一只，通过私有化其构造方法，使得外部无法通过new 得到新的实例。<br>GiantDragon 提供了一个public static的getInstance方法，外部调用者通过该方法获取12行定义的对象，而且每一次都是获取同一个对象。 从而达到单例的目的。<br>这种单例模式又叫做饿汉式单例模式，无论如何都会创建一个实例</blockquote><p><code>GiantDragon.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">GiantDragon</span> {</span><br><span class=line> </span><br><span class=line>    <span class=comment>//私有化构造方法使得该类无法在外部通过new 进行实例化</span></span><br><span class=line>    <span class=keyword>private</span> <span class="title function_">GiantDragon</span><span class=params>()</span>{</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=comment>//准备一个类属性，指向一个实例化对象。 因为是类属性，所以只有一个</span></span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=type>GiantDragon</span> <span class=variable>instance</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">GiantDragon</span>();</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//public static 方法，提供给调用者获取12行定义的对象</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> GiantDragon <span class="title function_">getInstance</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>return</span> instance;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><p><code>TestGiantDragon.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGiantDragon</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//通过new实例化会报错</span></span><br><span class=line><span class=comment>//      GiantDragon g = new GiantDragon();</span></span><br><span class=line>         </span><br><span class=line>        <span class=comment>//只能通过getInstance得到对象</span></span><br><span class=line>         </span><br><span class=line>        <span class=type>GiantDragon</span> <span class=variable>g1</span> <span class=operator>=</span> GiantDragon.getInstance();</span><br><span class=line>        <span class=type>GiantDragon</span> <span class=variable>g2</span> <span class=operator>=</span> GiantDragon.getInstance();</span><br><span class=line>        <span class=type>GiantDragon</span> <span class=variable>g3</span> <span class=operator>=</span> GiantDragon.getInstance();</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//都是同一个对象</span></span><br><span class=line>        System.out.println(g1==g2);</span><br><span class=line>        System.out.println(g1==g3);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=懒汉式单例模式><a class=headerlink href=#懒汉式单例模式 title=懒汉式单例模式></a>懒汉式单例模式</h3><p><code>懒汉式</code>单例模式与<code>饿汉式</code>单例模式不同，只有在调用getInstance的时候，才会创建实例。<p><code>GiantDragon.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">GiantDragon</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=comment>//私有化构造方法使得该类无法在外部通过new 进行实例化</span></span><br><span class=line>    <span class=keyword>private</span> <span class="title function_">GiantDragon</span><span class=params>()</span>{       </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=comment>//准备一个类属性，用于指向一个实例化对象，但是暂时指向null</span></span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> GiantDragon instance;</span><br><span class=line>      </span><br><span class=line>    <span class=comment>//public static 方法，返回实例对象</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> GiantDragon <span class="title function_">getInstance</span><span class=params>()</span>{</span><br><span class=line>        <span class=comment>//第一次访问的时候，发现instance没有指向任何对象，这时实例化一个对象</span></span><br><span class=line>        <span class=keyword>if</span>(<span class=literal>null</span>==instance){</span><br><span class=line>            instance = <span class=keyword>new</span> <span class="title class_">GiantDragon</span>();</span><br><span class=line>        }</span><br><span class=line>        <span class=comment>//返回 instance指向的对象</span></span><br><span class=line>        <span class=keyword>return</span> instance;</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><p><code>TestGiantDragon.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGiantDragon</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//通过new实例化会报错</span></span><br><span class=line><span class=comment>//      GiantDragon g = new GiantDragon();</span></span><br><span class=line>         </span><br><span class=line>        <span class=comment>//只能通过getInstance得到对象</span></span><br><span class=line>         </span><br><span class=line>        <span class=type>GiantDragon</span> <span class=variable>g1</span> <span class=operator>=</span> GiantDragon.getInstance();</span><br><span class=line>        <span class=type>GiantDragon</span> <span class=variable>g2</span> <span class=operator>=</span> GiantDragon.getInstance();</span><br><span class=line>        <span class=type>GiantDragon</span> <span class=variable>g3</span> <span class=operator>=</span> GiantDragon.getInstance();</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//都是同一个对象</span></span><br><span class=line>        System.out.println(g1==g2);</span><br><span class=line>        System.out.println(g1==g3);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=什么时候使用饿汉式？什么时候使用懒汉式？><a class=headerlink href=#什么时候使用饿汉式？什么时候使用懒汉式？ title=什么时候使用饿汉式？什么时候使用懒汉式？></a>什么时候使用饿汉式？什么时候使用懒汉式？</h3><blockquote><ul><li><code>饿汉式</code>是立即加载的方式，无论是否会用到这个对象，都会加载。<br>如果在构造方法里写了性能消耗较大，占时较久的代码，比如建立与数据库的连接，那么就会在启动的时候感觉稍微有些卡顿。</ul></blockquote><blockquote><ul><li><code>懒汉式</code>是延迟加载的方式，只有使用的时候才会加载。 并且有线程安全的考量。<br>使用懒汉式，在启动的时候，会感觉到比饿汉式略快，因为并没有做对象的实例化。 但是在第一次调用的时候，会进行实例化操作，感觉上就略慢。</ul></blockquote><blockquote><p>看业务需求，如果业务上允许有比较充分的启动和初始化时间，就使用饿汉式，否则就使用懒汉式。</blockquote><h3 id=单例模式三元素（什么是单例模式？）><a class=headerlink href=#单例模式三元素（什么是单例模式？） title=单例模式三元素（什么是单例模式？）></a>单例模式三元素（什么是单例模式？）</h3><blockquote><p>这个是面试的时候经常会考的点，面试题通常的问法是:<br><code>什么是单例模式？</code></blockquote><blockquote><p>回答的时候，要答到三元素:</blockquote><ol><li>构造方法私有化;<li>静态属性指向实例;<li>public static的 getInstance方法，返回第二步的静态属性;</ol><h2 id=枚举类型><a class=headerlink href=#枚举类型 title=枚举类型></a>枚举类型</h2><blockquote><p>枚举enum是一种特殊的类(还是类)，使用枚举可以很方便的定义常量<br>比如设计一个枚举类型 季节，里面有4种常量。</blockquote><p><code>Season.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>enum</span> <span class="title class_">Season</span> {</span><br><span class=line>    SPRING,SUMMER,AUTUMN,WINTER</span><br><span class=line>}</span><br></pre></table></figure><p><code>HelloWorld.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Season</span> <span class=variable>season</span> <span class=operator>=</span> Season.SPRING;</span><br><span class=line>        <span class=keyword>switch</span> (season) {</span><br><span class=line>        <span class=keyword>case</span> SPRING:</span><br><span class=line>            System.out.println(<span class=string>"春天"</span>);</span><br><span class=line>            <span class=keyword>break</span>;</span><br><span class=line>        <span class=keyword>case</span> SUMMER:</span><br><span class=line>            System.out.println(<span class=string>"夏天"</span>);</span><br><span class=line>            <span class=keyword>break</span>;</span><br><span class=line>        <span class=keyword>case</span> AUTUMN:</span><br><span class=line>            System.out.println(<span class=string>"秋天"</span>);</span><br><span class=line>            <span class=keyword>break</span>;</span><br><span class=line>        <span class=keyword>case</span> WINTER:</span><br><span class=line>            System.out.println(<span class=string>"冬天"</span>);</span><br><span class=line>            <span class=keyword>break</span>;</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=使用枚举的好处><a class=headerlink href=#使用枚举的好处 title=使用枚举的好处></a>使用枚举的好处</h3><blockquote><p>假设在使用switch的时候，不是使用枚举，而是使用int，而int的取值范围就不只是1-4，有可能取一个超出1-4之间的值，这样判断结果就似是而非了（因为只有4个季节）。<br>但是使用枚举，就能把范围死死的限定在<code>SPRING, SUMMER, AUTUMN, WINTER</code>当中，而不会出现奇怪的<code>第5季</code>。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>season</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line>        <span class=keyword>switch</span> (season) {</span><br><span class=line>        <span class=keyword>case</span> <span class=number>1</span>:</span><br><span class=line>            System.out.println(<span class=string>"春天"</span>);</span><br><span class=line>            <span class=keyword>break</span>;</span><br><span class=line>        <span class=keyword>case</span> <span class=number>2</span>:</span><br><span class=line>            System.out.println(<span class=string>"夏天"</span>);</span><br><span class=line>            <span class=keyword>break</span>;</span><br><span class=line>        <span class=keyword>case</span> <span class=number>3</span>:</span><br><span class=line>            System.out.println(<span class=string>"秋天"</span>);</span><br><span class=line>            <span class=keyword>break</span>;</span><br><span class=line>        <span class=keyword>case</span> <span class=number>4</span>:</span><br><span class=line>            System.out.println(<span class=string>"冬天"</span>);</span><br><span class=line>            <span class=keyword>break</span>;</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=遍历枚举><a class=headerlink href=#遍历枚举 title=遍历枚举></a>遍历枚举</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HelloWorld</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>for</span> (Season s : Season.values()) {</span><br><span class=line>            System.out.println(s);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h1 id=接口与继承><a class=headerlink href=#接口与继承 title=接口与继承></a>接口与继承</h1><h2 id=接口><a class=headerlink href=#接口 title=接口></a>接口</h2><blockquote><p>在设计LOL的时候，进攻类英雄有两种，一种是进行物理系攻击，一种是进行魔法系攻击<br>这时候，就可以使用接口来实现这个效果。<br><code>接口就像是一种约定</code>，我们约定某些英雄是物理系英雄，那么他们就一定能够进行物理攻击。</blockquote><h3 id=物理攻击接口><a class=headerlink href=#物理攻击接口 title=物理攻击接口></a>物理攻击接口</h3><blockquote><p>创建一个接口 File->New->Interface<br>AD ，声明一个方法 physicAttack 物理攻击，但是没有方法体，是一个“空”方法。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>interface</span> <span class="title class_">AD</span> {</span><br><span class=line>        <span class=comment>//物理伤害</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">physicAttack</span><span class=params>()</span>;</span><br><span class=line>}</span><br></pre></table></figure><h4 id=设计一类英雄，能够使用物理攻击><a class=headerlink href=#设计一类英雄，能够使用物理攻击 title=设计一类英雄，能够使用物理攻击></a>设计一类英雄，能够使用物理攻击</h4><blockquote><p>设计一类英雄，能够使用物理攻击，这类英雄在LOL中被叫做AD类：<code>ADHero</code></blockquote><blockquote><p>继承了Hero 类，所以继承了name, hp, armor等属性。<br><code>实现某个接口，就相当于承诺了某种约定。</code></blockquote><blockquote><p>所以，<code>实现</code>了AD这个<code>接口</code>，就<code>必须</code>提供AD接口中声明的方法<code>physicAttack()</code><br><code>实现</code>在语法上使用关键字 <code>implements</code></blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ADHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">AD</span>{</span><br><span class=line> </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">physicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行物理攻击"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=魔法攻击接口><a class=headerlink href=#魔法攻击接口 title=魔法攻击接口></a>魔法攻击接口</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>interface</span> <span class="title class_">AP</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">magicAttack</span><span class=params>()</span>;</span><br><span class=line>}</span><br></pre></table></figure><h4 id=设计一类英雄，只能使用魔法攻击><a class=headerlink href=#设计一类英雄，只能使用魔法攻击 title=设计一类英雄，只能使用魔法攻击></a>设计一类英雄，只能使用魔法攻击</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">APHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">AP</span>{</span><br><span class=line> </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">magicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行魔法攻击"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=设计一类英雄，既能进行物理攻击，又能进行魔法攻击><a class=headerlink href=#设计一类英雄，既能进行物理攻击，又能进行魔法攻击 title=设计一类英雄，既能进行物理攻击，又能进行魔法攻击></a>设计一类英雄，既能进行物理攻击，又能进行魔法攻击</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=comment>//同时能进行物理和魔法伤害的英雄</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ADAPHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">AD</span>,AP{</span><br><span class=line>  </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">magicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行魔法攻击"</span>);</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">physicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行物理攻击"</span>);</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><h3 id=什么样的情况下该使用接口><a class=headerlink href=#什么样的情况下该使用接口 title=什么样的情况下该使用接口?></a>什么样的情况下该使用接口?</h3><blockquote><p>如上的例子，似乎要接口，不要接口，都一样的，那么接口的意义是什么呢？</blockquote><blockquote><p>学习一个知识点，是由浅入深得进行的。 这里呢，只是引入了接口的概念，要真正理解接口的好处，需要更多的实践，以及在较为复杂的系统中进行大量运用之后，才能够真正理解，比如在学习了多态之后就能进一步加深理解。</blockquote><h2 id=对象转型><a class=headerlink href=#对象转型 title=对象转型></a>对象转型</h2><h3 id=instanceof><a class=headerlink href=#instanceof title=instanceof></a>instanceof</h3><blockquote><p>判断一个引用所指向的对象，是否是Hero类型，或者Hero的子类</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ADHero</span> <span class=variable>ad</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ADHero</span>();</span><br><span class=line>        <span class=type>APHero</span> <span class=variable>ap</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">APHero</span>();</span><br><span class=line>         </span><br><span class=line>        Hero h1= ad;</span><br><span class=line>        Hero h2= ap;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//判断引用h1指向的对象，是否是ADHero类型</span></span><br><span class=line>        System.out.println(h1 <span class=keyword>instanceof</span> ADHero);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//判断引用h2指向的对象，是否是APHero类型</span></span><br><span class=line>        System.out.println(h2 <span class=keyword>instanceof</span> APHero);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//判断引用h1指向的对象，是否是Hero的子类型</span></span><br><span class=line>        System.out.println(h1 <span class=keyword>instanceof</span> Hero);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=重写（覆盖Override）><a class=headerlink href=#重写（覆盖Override） title=重写（覆盖Override）></a>重写（覆盖Override）</h2><blockquote><p>子类可以继承父类的对象方法。在继承后，重复提供该方法，就叫做方法的<code>重写</code>，又叫<code>覆盖 override</code>。</blockquote><h3 id=父类Item><a class=headerlink href=#父类Item title=父类Item></a>父类Item</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> property;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Item</span> {</span><br><span class=line>    String name;</span><br><span class=line>    <span class=type>int</span> price;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">buy</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"购买"</span>);</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">effect</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"物品使用后，可以有效果"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=子类LifePotion><a class=headerlink href=#子类LifePotion title=子类LifePotion></a>子类LifePotion</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> property;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">LifePotion</span> <span class=keyword>extends</span> <span class="title class_">Item</span>{</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">effect</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"血瓶使用后，可以回血"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><h3 id=调用重写的方法><a class=headerlink href=#调用重写的方法 title=调用重写的方法></a>调用重写的方法</h3><blockquote><p>调用就会执行重写的方法，而不是从父类的方法。所以LifePotion的effect会打印：”血瓶使用后，可以回血”。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> property;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Item</span> {</span><br><span class=line>    String name;</span><br><span class=line>    <span class=type>int</span> price;</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">effect</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"物品使用后，可以有效果"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Item</span> <span class=variable>i</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Item</span>();</span><br><span class=line>        i.effect();</span><br><span class=line>         </span><br><span class=line>        <span class=type>LifePotion</span> <span class=variable>lp</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">LifePotion</span>();</span><br><span class=line>        lp.effect();</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><h3 id=如果没有重写这样的机制怎么样？><a class=headerlink href=#如果没有重写这样的机制怎么样？ title=如果没有重写这样的机制怎么样？></a>如果没有重写这样的机制怎么样？</h3><blockquote><p>如果没有重写这样的机制，也就是说LifePotion这个类，一旦继承了Item，所有方法都不能修改了。</blockquote><blockquote><p>但是LifePotion又希望提供一点不同的功能，为了达到这个目的，只能放弃继承Item,重新编写所有的属性和方法，然后在编写effect的时候，做一点小改动。</blockquote><blockquote><p>这样就增加了开发时间和维护成本。</blockquote><p><code>Item.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> property;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Item</span> {</span><br><span class=line>    String name;</span><br><span class=line>    <span class=type>int</span> price;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">buy</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"购买"</span>);</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">effect</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"物品使用后，可以有效果"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><p><code>LifePotion.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> property;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">LifePotion</span> {</span><br><span class=line>    String name;</span><br><span class=line>    <span class=type>int</span> price;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">buy</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"购买"</span>);</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">effect</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"血瓶使用后，可以回血"</span>);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=多态><a class=headerlink href=#多态 title=多态></a>多态</h2><h3 id=操作符的多态><a class=headerlink href=#操作符的多态 title=操作符的多态></a>操作符的多态</h3><blockquote><p>同一个操作符在不同情境下，具备不同的作用。<ul><li>如果+号两侧都是整型，那么+代表 数字相加；<li>如果+号两侧，任意一个是字符串，那么+代表字符串连接；</ul></blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line>        <span class=type>int</span> <span class=variable>j</span> <span class=operator>=</span> <span class=number>6</span>;</span><br><span class=line>        <span class=type>int</span> <span class=variable>k</span> <span class=operator>=</span> i+j; <span class=comment>//如果+号两侧都是整型，那么+代表 数字相加</span></span><br><span class=line>         </span><br><span class=line>        System.out.println(k);</span><br><span class=line>         </span><br><span class=line>        <span class=type>int</span> <span class=variable>a</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line>        <span class=type>String</span> <span class=variable>b</span> <span class=operator>=</span> <span class=string>"5"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>String</span> <span class=variable>c</span> <span class=operator>=</span> a+b; <span class=comment>//如果+号两侧，任意一个是字符串，那么+代表字符串连接</span></span><br><span class=line>        System.out.println(c);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>}</span><br></pre></table></figure><h3 id=观察类的多态现象><a class=headerlink href=#观察类的多态现象 title=观察类的多态现象></a>观察类的多态现象</h3><blockquote><p>观察类的多态现象：</blockquote><ol><li>i1和i2都是Item类型<li>都调用effect方法<li>输出不同的结果</ol><p>多态: 都是同一个类型，调用同一个方法，却能呈现不同的状态。<p><code>Item.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> property;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Item</span> {</span><br><span class=line>    String name;</span><br><span class=line>    <span class=type>int</span> price;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">buy</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"购买"</span>);</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">effect</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"物品使用后，可以有效果 "</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        Item i1= <span class=keyword>new</span> <span class="title class_">LifePotion</span>();</span><br><span class=line>        <span class=type>Item</span> <span class=variable>i2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">MagicPotion</span>();</span><br><span class=line>        System.out.print(<span class=string>"i1  是Item类型，执行effect打印:"</span>);</span><br><span class=line>        i1.effect();</span><br><span class=line>        System.out.print(<span class=string>"i2也是Item类型，执行effect打印:"</span>);</span><br><span class=line>        i2.effect();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><p><code>LifePotion.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> property;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">LifePotion</span> <span class=keyword>extends</span> <span class="title class_">Item</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">effect</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"血瓶使用后，可以回血"</span>);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><p><code>MagicPotion.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> property;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">MagicPotion</span> <span class=keyword>extends</span> <span class="title class_">Item</span>{</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">effect</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"蓝瓶使用后，可以回魔法"</span>);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=类的多态条件><a class=headerlink href=#类的多态条件 title=类的多态条件></a>类的多态条件</h3><blockquote><p>要实现类的多态，需要如下条件</blockquote><ol><li>父类（接口）引用指向子类对象<li>调用的方法有重写</ol><h3 id=类的多态-不使用多态><a class=headerlink href=#类的多态-不使用多态 title=类的多态-不使用多态></a>类的多态-不使用多态</h3><blockquote><p>如果不使用多态，<br>假设英雄要使用血瓶和魔瓶，就需要为Hero设计两个方法<br>useLifePotion<br>useMagicPotion</blockquote><blockquote><p>除了血瓶和魔瓶还有很多种物品，那么就需要设计很多很多个方法，比如<br>usePurityPotion 净化药水<br>useGuard 守卫<br>useInvisiblePotion 使用隐形药水<br>等等等等</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.LifePotion;</span><br><span class=line><span class=keyword>import</span> property.MagicPotion;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">useLifePotion</span><span class=params>(LifePotion lp)</span>{</span><br><span class=line>        lp.effect();</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">useMagicPotion</span><span class=params>(MagicPotion mp)</span>{</span><br><span class=line>        mp.effect();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>garen</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        garen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>     </span><br><span class=line>        <span class=type>LifePotion</span> <span class=variable>lp</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">LifePotion</span>();</span><br><span class=line>        <span class=type>MagicPotion</span> <span class=variable>mp</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">MagicPotion</span>();</span><br><span class=line>         </span><br><span class=line>        garen.useLifePotion(lp);</span><br><span class=line>        garen.useMagicPotion(mp);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>}</span><br></pre></table></figure><h3 id=类的多态-使用多态><a class=headerlink href=#类的多态-使用多态 title=类的多态-使用多态></a>类的多态-使用多态</h3><blockquote><p>如果物品的种类特别多，那么就需要设计很多的方法<br>比如useArmor,useWeapon等等</blockquote><blockquote><p>这个时候采用多态来解决这个问题<br>设计一个方法叫做useItem，其参数类型是Item<br>如果是使用血瓶，调用该方法<br>如果是使用魔瓶，还是调用该方法<br>无论英雄要使用什么样的物品，只需要一个方法即可。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Item;</span><br><span class=line><span class=keyword>import</span> property.LifePotion;</span><br><span class=line><span class=keyword>import</span> property.MagicPotion;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">useItem</span><span class=params>(Item i)</span>{</span><br><span class=line>        i.effect();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>garen</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        garen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>     </span><br><span class=line>        <span class=type>LifePotion</span> <span class=variable>lp</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">LifePotion</span>();</span><br><span class=line>        <span class=type>MagicPotion</span> <span class=variable>mp</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">MagicPotion</span>();</span><br><span class=line>         </span><br><span class=line>        garen.useItem(lp);</span><br><span class=line>        garen.useItem(mp);     </span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>}</span><br></pre></table></figure><h2 id=隐藏><a class=headerlink href=#隐藏 title=隐藏></a>隐藏</h2><h3 id=父类><a class=headerlink href=#父类 title=父类></a>父类</h3><blockquote><p>父类有一个类方法 ：battleWin</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line>  </span><br><span class=line>    <span class=comment>//类方法，静态方法</span></span><br><span class=line>    <span class=comment>//通过类就可以直接调用</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">battleWin</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"hero battle win"</span>);</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h3 id=子类隐藏父类的类方法><a class=headerlink href=#子类隐藏父类的类方法 title=子类隐藏父类的类方法></a>子类隐藏父类的类方法</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ADHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">AD</span>{</span><br><span class=line>  </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">physicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行物理攻击"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//隐藏父类的battleWin方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">battleWin</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"ad hero battle win"</span>);</span><br><span class=line>    }   </span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        Hero.battleWin();</span><br><span class=line>        ADHero.battleWin();</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><h2 id=super><a class=headerlink href=#super title=super></a>super</h2><h3 id=准备一个显式提供无参构造方法的父类><a class=headerlink href=#准备一个显式提供无参构造方法的父类 title=准备一个显式提供无参构造方法的父类></a>准备一个显式提供无参构造方法的父类</h3><blockquote><p>准备显式提供无参构造方法的父类<br>在实例化Hero对象的时候，其构造方法会打印<br>“Hero的构造方法 “</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Item;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>        </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">useItem</span><span class=params>(Item i)</span>{</span><br><span class=line>        System.out.println(<span class=string>"hero use item"</span>);</span><br><span class=line>        i.effect();</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"Hero的构造方法 "</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h3 id=实例化子类，父类的构造方法一定会被调用><a class=headerlink href=#实例化子类，父类的构造方法一定会被调用 title=实例化子类，父类的构造方法一定会被调用></a>实例化子类，父类的构造方法一定会被调用</h3><blockquote><p>实例化一个ADHero(), 其构造方法会被调用<br>其<code>父类的构造方法也会被调用</code><br>并且是父类构造方法<code>先调用</code><br>子类构造方法会默认调用父类的 无参的构造方法</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ADHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">AD</span>{</span><br><span class=line>  </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">physicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行物理攻击"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">ADHero</span><span class=params>()</span>{</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"AD Hero的构造方法"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">ADHero</span>();</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><h3 id=父类显式提供两个构造方法><a class=headerlink href=#父类显式提供两个构造方法 title=父类显式提供两个构造方法></a>父类显式提供两个构造方法</h3><blockquote><p>分别是无参的构造方法和带一个参数的构造方法</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Item;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>        </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">useItem</span><span class=params>(Item i)</span>{</span><br><span class=line>        System.out.println(<span class=string>"hero use item"</span>);</span><br><span class=line>        i.effect();</span><br><span class=line>    }   </span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"Hero的无参的构造方法 "</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name)</span>{</span><br><span class=line>        System.out.println(<span class=string>"Hero的有一个参数的构造方法 "</span>);</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h3 id=子类显式调用父类带参构造方法><a class=headerlink href=#子类显式调用父类带参构造方法 title=子类显式调用父类带参构造方法></a>子类显式调用父类带参构造方法</h3><blockquote><p>使用关键字super 显式调用父类带参的构造方法</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ADHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">AD</span>{</span><br><span class=line>  </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">physicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行物理攻击"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">ADHero</span><span class=params>(String name)</span>{</span><br><span class=line>        <span class=built_in>super</span>(name);</span><br><span class=line>        System.out.println(<span class=string>"AD Hero的构造方法"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">ADHero</span>(<span class=string>"德莱文"</span>);</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><h3 id=调用父类属性><a class=headerlink href=#调用父类属性 title=调用父类属性></a>调用父类属性</h3><blockquote><p>通过super调用父类的moveSpeed属性<br>ADHero也提供了属性moveSpeed</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=type>int</span> <span class="title function_">getMoveSpeed</span><span class=params>()</span>{</span><br><span class=line>   <span class=keyword>return</span> <span class=built_in>this</span>.moveSpeed;</span><br><span class=line>}</span><br><span class=line><span class=keyword>public</span> <span class=type>int</span> <span class="title function_">getMoveSpeed2</span><span class=params>()</span>{</span><br><span class=line>   <span class=keyword>return</span> <span class=built_in>super</span>.moveSpeed;</span><br><span class=line>}</span><br></pre></table></figure><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ADHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">AD</span>{</span><br><span class=line> </span><br><span class=line>    <span class=type>int</span> moveSpeed=<span class=number>400</span>; <span class=comment>//移动速度</span></span><br><span class=line> </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">physicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行物理攻击"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">getMoveSpeed</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>return</span> <span class=built_in>this</span>.moveSpeed;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">getMoveSpeed2</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>return</span> <span class=built_in>super</span>.moveSpeed;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        ADHero h= <span class=keyword>new</span> <span class="title class_">ADHero</span>();</span><br><span class=line>         </span><br><span class=line>        System.out.println(h.getMoveSpeed());</span><br><span class=line>        System.out.println(h.getMoveSpeed2());</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><h3 id=调用父类方法><a class=headerlink href=#调用父类方法 title=调用父类方法></a>调用父类方法</h3><blockquote><p>ADHero重写了useItem方法，并且在useItem中<code>通过super调用父类的useItem方法</code></blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Item;</span><br><span class=line><span class=keyword>import</span> property.LifePotion;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ADHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">AD</span> {</span><br><span class=line> </span><br><span class=line>    <span class=type>int</span> <span class=variable>moveSpeed</span> <span class=operator>=</span> <span class=number>400</span>; <span class=comment>// 移动速度</span></span><br><span class=line> </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">physicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行物理攻击"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">getMoveSpeed</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=built_in>this</span>.moveSpeed;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">getMoveSpeed2</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=built_in>super</span>.moveSpeed;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=comment>// 重写useItem，并在其中调用父类的userItem方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">useItem</span><span class=params>(Item i)</span> {</span><br><span class=line>        System.out.println(<span class=string>"adhero use item"</span>);</span><br><span class=line>        <span class=built_in>super</span>.useItem(i);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ADHero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ADHero</span>();</span><br><span class=line> </span><br><span class=line>        <span class=type>LifePotion</span> <span class=variable>lp</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">LifePotion</span>();</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h2 id=Object类><a class=headerlink href=#Object类 title=Object类></a>Object类</h2><h3 id=Object类是所有类的父类><a class=headerlink href=#Object类是所有类的父类 title=Object类是所有类的父类></a>Object类是所有类的父类</h3><blockquote><p>声明一个类的时候，默认是继承了Object<br>public class Hero <code>extends Object</code></blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Item;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> <span class=keyword>extends</span> <span class="title class_">Object</span> {</span><br><span class=line>        </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">useItem</span><span class=params>(Item i)</span>{</span><br><span class=line>        System.out.println(<span class=string>"hero use item"</span>);</span><br><span class=line>        i.effect();</span><br><span class=line>    }   </span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"Hero的无参的构造方法 "</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name)</span>{</span><br><span class=line>        System.out.println(<span class=string>"Hero的有一个参数的构造方法 "</span>);</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h3 id=toString-NaN><a class=headerlink href=#toString-NaN title=toString()></a>toString()</h3><blockquote><p>Object类提供一个toString方法，所以所有的类都有toString方法<br>toString()的意思是返回当前对象的字符串表达<br>通过 System.out.println 打印对象就是打印该对象的toString()返回值</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>return</span> name;</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        System.out.println(h.toString());</span><br><span class=line>        <span class=comment>//直接打印对象就是打印该对象的toString()返回值</span></span><br><span class=line>        System.out.println(h);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=finalize><a class=headerlink href=#finalize title=finalize()></a>finalize()</h3><blockquote><p>当一个对象没有任何引用指向的时候，它就满足垃圾回收的条件<br>当它被垃圾回收的时候，它的finalize() 方法就会被调用。<br>finalize() 不是开发人员主动调用的方法，而是由虚拟机JVM调用的。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>return</span> name;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">finalize</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"这个英雄正在被回收"</span>);</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//只有一引用</span></span><br><span class=line>        Hero h;</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>100000</span>; i++) {</span><br><span class=line>            <span class=comment>//不断生成新的对象</span></span><br><span class=line>            <span class=comment>//每创建一个对象，前一个对象，就没有引用指向了</span></span><br><span class=line>            <span class=comment>//那些对象，就满足垃圾回收的条件</span></span><br><span class=line>            <span class=comment>//当，垃圾堆积的比较多的时候，就会触发垃圾回收</span></span><br><span class=line>            <span class=comment>//一旦这个对象被回收，它的finalize()方法就会被调用</span></span><br><span class=line>            h = <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=equals><a class=headerlink href=#equals title=equals()></a>equals()</h3><blockquote><p>equals() 用于判断两个对象的内容是否相同<br>假设，当两个英雄的hp相同的时候，我们就认为这两个英雄相同。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">equals</span><span class=params>(Object o)</span>{</span><br><span class=line>        <span class=keyword>if</span>(o <span class=keyword>instanceof</span> Hero){</span><br><span class=line>            <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> (Hero) o;</span><br><span class=line>            <span class=keyword>return</span> <span class=built_in>this</span>.hp == h.hp;</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>return</span> <span class=literal>false</span>;</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        Hero h1= <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h1.hp = <span class=number>300</span>;</span><br><span class=line>        Hero h2= <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h2.hp = <span class=number>400</span>;</span><br><span class=line>        Hero h3= <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h3.hp = <span class=number>300</span>;</span><br><span class=line>         </span><br><span class=line>        System.out.println(h1.equals(h2));</span><br><span class=line>        System.out.println(h1.equals(h3));</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3><a title="==" class=headerlink href=#></a>==</h3><blockquote><p>这不是Object的方法，但是用于判断两个对象是否相同<br>更准确的讲，用于判断两个引用，是否指向了同一个对象</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">equals</span><span class=params>(Object o)</span>{</span><br><span class=line>        <span class=keyword>if</span>(o <span class=keyword>instanceof</span> Hero){</span><br><span class=line>            <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> (Hero) o;</span><br><span class=line>            <span class=keyword>return</span> <span class=built_in>this</span>.hp == h.hp;</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>return</span> <span class=literal>false</span>;</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        Hero h1= <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h1.hp = <span class=number>300</span>;</span><br><span class=line>        Hero h2= <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h2.hp = <span class=number>400</span>;</span><br><span class=line>        Hero h3= <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h3.hp = <span class=number>300</span>;</span><br><span class=line>         </span><br><span class=line>        System.out.println(h1==h2);</span><br><span class=line>        System.out.println(h1==h3);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=finial><a class=headerlink href=#finial title=finial></a>finial</h2><h3 id=final修饰类><a class=headerlink href=#final修饰类 title=final修饰类></a>final修饰类</h3><blockquote><p>当Hero被修饰成final的时候，表示Hero不能够被继承<br>其子类会出现编译错误</blockquote><p><img src=http://stepimagewm.how2j.cn/653.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>final</span> <span class=keyword>class</span> <span class="title class_">Hero</span> <span class=keyword>extends</span> <span class="title class_">Object</span> {</span><br><span class=line>        </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>        </span><br><span class=line>}</span><br></pre></table></figure><h3 id=final修饰方法><a class=headerlink href=#final修饰方法 title=final修饰方法></a>final修饰方法</h3><blockquote><p>Hero的useItem方法被修饰成final,那么该方法在ADHero中，不能够被重写</blockquote><p><img src=http://stepimagewm.how2j.cn/654.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Item;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> <span class=keyword>extends</span> <span class="title class_">Object</span> {</span><br><span class=line>        </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>final</span> <span class=keyword>void</span> <span class="title function_">useItem</span><span class=params>(Item i)</span>{</span><br><span class=line>        System.out.println(<span class=string>"hero use item"</span>);</span><br><span class=line>        i.effect();</span><br><span class=line>    }   </span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"Hero的无参的构造方法 "</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name)</span>{</span><br><span class=line>        System.out.println(<span class=string>"Hero的有一个参数的构造方法 "</span>);</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h3 id=final修饰基本类型变量><a class=headerlink href=#final修饰基本类型变量 title=final修饰基本类型变量></a>final修饰基本类型变量</h3><blockquote><p>final修饰基本类型变量，表示该变量只有一次赋值机会<br>16行进行了赋值，17行就不可以再进行赋值了</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> <span class=keyword>extends</span> <span class="title class_">Object</span> {</span><br><span class=line>        </span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>        </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=keyword>final</span> <span class=type>int</span> hp;</span><br><span class=line>        hp = <span class=number>5</span>;</span><br><span class=line>        hp = <span class=number>6</span>;</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=抽象类><a class=headerlink href=#抽象类 title=抽象类></a>抽象类</h2><blockquote><p>为Hero增加一个<code>抽象方法 attack</code>，并且把Hero声明为abstract的。<br>APHero, ADHero, ADAPHero是Hero的子类，继承了Hero的属性和方法。<br>但是各自的攻击手段是不一样的，所以继承Hero类后，这些<code>子类就必须提供</code>不一样的attack方法实现。</blockquote><p><code>Hero.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>abstract</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    String name;</span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> armor;</span><br><span class=line> </span><br><span class=line>    <span class=type>int</span> moveSpeed;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=comment>// 抽象方法attack</span></span><br><span class=line>    <span class=comment>// Hero的子类会被要求实现attack方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>abstract</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span>;</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><p><code>ADHero.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ADHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">AD</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">physicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行物理攻击"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span> {</span><br><span class=line>        physicAttack();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><p><code>APHero.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">APHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">AP</span> {</span><br><span class=line> </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">magicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行魔法攻击"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span> {</span><br><span class=line>        magicAttack();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><p><code>ADAPHero.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ADAPHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">AD</span>, AP {</span><br><span class=line> </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span> {</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"既可以进行物理攻击，也可以进行魔法攻击"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">magicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行魔法攻击"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">physicAttack</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"进行物理攻击"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=抽象类可以没有抽象方法><a class=headerlink href=#抽象类可以没有抽象方法 title=抽象类可以没有抽象方法></a>抽象类可以没有抽象方法</h3><blockquote><p>Hero类可以在不提供抽象方法的前提下，声明为抽象类<br>一旦一个类被声明为抽象类，就不能够被直接实例化</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>abstract</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    String name;</span><br><span class=line>          </span><br><span class=line>    <span class=type>float</span> hp;</span><br><span class=line>          </span><br><span class=line>    <span class=type>float</span> armor;</span><br><span class=line>          </span><br><span class=line>    <span class=type>int</span> moveSpeed;</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//虽然没有抽象方法，但是一旦被声明为了抽象类，就不能够直接被实例化</span></span><br><span class=line>        Hero h= <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>    }</span><br><span class=line>          </span><br><span class=line>}</span><br></pre></table></figure><h3 id=抽象类和接口的区别><a class=headerlink href=#抽象类和接口的区别 title=抽象类和接口的区别></a>抽象类和接口的区别</h3><blockquote><p><code>区别1：</code></blockquote><ul><li>子类只能继承一个抽象类，不能继承多个<li>子类可以实现多个接口<blockquote><p><code>区别2：</code><br>抽象类可以定义<ul><li>public, protected, package, private<li>静态和非静态属性<li>final和非final属性</ul></blockquote></ul><blockquote><p>但是接口中声明的属性，只能是:</blockquote><ul><li>public<li>静态<li>final的</ul><blockquote><p>即便没有显式的声明</blockquote><blockquote><p><code>注: </code>抽象类和接口都可以有实体方法。 接口中的实体方法，叫做默认方法</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>interface</span> <span class="title class_">AP</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>final</span> <span class=type>int</span> <span class=variable>resistPhysic</span> <span class=operator>=</span> <span class=number>100</span>;</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//resistMagic即便没有显式的声明为 public static final</span></span><br><span class=line>    <span class=comment>//但依然默认为public static final</span></span><br><span class=line>    <span class=type>int</span> <span class=variable>resistMagic</span> <span class=operator>=</span> <span class=number>0</span>;</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">magicAttack</span><span class=params>()</span>;</span><br><span class=line>}</span><br></pre></table></figure><h2 id=内部类><a class=headerlink href=#内部类 title=内部类></a>内部类</h2><h3 id=非静态内部类><a class=headerlink href=#非静态内部类 title=非静态内部类></a>非静态内部类</h3><blockquote><p>非静态内部类 BattleScore “战斗成绩”<br>非静态内部类可以直接在一个类里面定义</blockquote><blockquote><p>比如：<br>战斗成绩只有在一个英雄对象存在的时候才有意义<br>所以实例化BattleScore 的时候，必须建立在一个存在的英雄的基础上<br>语法: <code>new 外部类().new 内部类()</code><br>作为Hero的非静态内部类，是可以直接访问外部类的<code>private</code>实例属性name的。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>private</span> String name; <span class=comment>// 姓名</span></span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>// 血量</span></span><br><span class=line> </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>// 护甲</span></span><br><span class=line> </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>// 移动速度</span></span><br><span class=line> </span><br><span class=line>    <span class=comment>// 非静态内部类，只有一个外部类对象存在的时候，才有意义</span></span><br><span class=line>    <span class=comment>// 战斗成绩只有在一个英雄对象存在的时候才有意义</span></span><br><span class=line>    <span class=keyword>class</span> <span class="title class_">BattleScore</span> {</span><br><span class=line>        <span class=type>int</span> kill;</span><br><span class=line>        <span class=type>int</span> die;</span><br><span class=line>        <span class=type>int</span> assit;</span><br><span class=line> </span><br><span class=line>        <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">legendary</span><span class=params>()</span> {</span><br><span class=line>            <span class=keyword>if</span> (kill >= <span class=number>8</span>)</span><br><span class=line>                System.out.println(name + <span class=string>"超神！"</span>);</span><br><span class=line>            <span class=keyword>else</span></span><br><span class=line>                System.out.println(name + <span class=string>"尚未超神！"</span>);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>garen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        garen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        <span class=comment>// 实例化内部类</span></span><br><span class=line>        <span class=comment>// BattleScore对象只有在一个英雄对象存在的时候才有意义</span></span><br><span class=line>        <span class=comment>// 所以其实例化必须建立在一个外部类对象的基础之上</span></span><br><span class=line>        <span class=type>BattleScore</span> <span class=variable>score</span> <span class=operator>=</span> garen.<span class=keyword>new</span> <span class="title class_">BattleScore</span>();</span><br><span class=line>        score.kill = <span class=number>9</span>;</span><br><span class=line>        score.legendary();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=静态内部类><a class=headerlink href=#静态内部类 title=静态内部类></a>静态内部类</h3><blockquote><p>在一个类里面声明一个静态内部类<br>比如敌方水晶，当敌方水晶没有血的时候，己方所有英雄都取得胜利，而不只是某一个具体的英雄取得胜利。<br>与非静态内部类不同，<code>静态内部类</code>水晶类的实例化 <code>不需要一个外部类的实例为基础</code>，可以直接实例化</blockquote><blockquote><p>语法：<code>new 外部类.静态内部类();</code><br>因为没有一个外部类的实例，所以在静态内部类里面<code>不可以访问外部类的实例属性和方法</code>。<br>除了可以访问外部类的<code>私有静态成员</code>外，静态内部类和普通类没什么大的区别。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">battleWin</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"battle win"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//敌方的水晶</span></span><br><span class=line>    <span class=keyword>static</span> <span class=keyword>class</span> <span class="title class_">EnemyCrystal</span>{</span><br><span class=line>        <span class=type>int</span> hp=<span class=number>5000</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//如果水晶的血量为0，则宣布胜利</span></span><br><span class=line>        <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">checkIfVictory</span><span class=params>()</span>{</span><br><span class=line>            <span class=keyword>if</span>(hp==<span class=number>0</span>){</span><br><span class=line>                Hero.battleWin();</span><br><span class=line>                 </span><br><span class=line>                <span class=comment>//静态内部类不能直接访问外部类的对象属性</span></span><br><span class=line>                System.out.println(name + <span class=string>" win this game"</span>);</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//实例化静态内部类</span></span><br><span class=line>        Hero.<span class=type>EnemyCrystal</span> <span class=variable>crystal</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>.EnemyCrystal();</span><br><span class=line>        crystal.checkIfVictory();</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><h3 id=匿名类><a class=headerlink href=#匿名类 title=匿名类></a>匿名类</h3><blockquote><p>匿名类指的是在<code>声明一个类的同时实例化它</code>，使代码更加简洁精练<br>通常情况下，要使用一个接口或者抽象类，都必须创建一个子类</blockquote><blockquote><p>有的时候，为了快速使用，直接实例化一个抽象类，并“<code>当场</code>”实现其抽象方法。<br>既然实现了抽象方法，那么就是一个新的类，只是这个类，没有命名。<br>这样的类，叫做匿名类。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>abstract</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>          </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>          </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>          </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>abstract</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span>;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        ADHero adh=<span class=keyword>new</span> <span class="title class_">ADHero</span>();</span><br><span class=line>        <span class=comment>//通过打印adh，可以看到adh这个对象属于ADHero类</span></span><br><span class=line>        adh.attack();</span><br><span class=line>        System.out.println(adh);</span><br><span class=line>          </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(){</span><br><span class=line>            <span class=comment>//当场实现attack方法</span></span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span> {</span><br><span class=line>                System.out.println(<span class=string>"新的进攻手段"</span>);</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        h.attack();</span><br><span class=line>        <span class=comment>//通过打印h，可以看到h这个对象属于Hero$1这么一个系统自动分配的类名</span></span><br><span class=line>          </span><br><span class=line>        System.out.println(h);</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h3 id=本地类><a class=headerlink href=#本地类 title=本地类></a>本地类</h3><blockquote><p>本地类可以理解为有名字的匿名类<br>内部类与匿名类不一样的是，内部类必须声明在成员的位置，即与属性和方法平等的位置。<br>本地类和匿名类一样，直接声明在代码块里面，可以是主方法，for循环里等等地方。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>abstract</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    String name; <span class=comment>//姓名</span></span><br><span class=line>          </span><br><span class=line>    <span class=type>float</span> hp; <span class=comment>//血量</span></span><br><span class=line>          </span><br><span class=line>    <span class=type>float</span> armor; <span class=comment>//护甲</span></span><br><span class=line>          </span><br><span class=line>    <span class=type>int</span> moveSpeed; <span class=comment>//移动速度</span></span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>abstract</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span>;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//与匿名类的区别在于，本地类有了自定义的类名</span></span><br><span class=line>        <span class=keyword>class</span> <span class="title class_">SomeHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span>{</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span> {</span><br><span class=line>                System.out.println( name+ <span class=string>" 新的进攻手段"</span>);</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=type>SomeHero</span> <span class=variable>h</span>  <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">SomeHero</span>();</span><br><span class=line>        h.name =<span class=string>"地卜师"</span>;</span><br><span class=line>        h.attack();</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h3 id=在匿名类中使用外部的局部变量><a class=headerlink href=#在匿名类中使用外部的局部变量 title=在匿名类中使用外部的局部变量></a>在匿名类中使用外部的局部变量</h3><blockquote><p>在匿名类中使用外部的局部变量，外部的局部变量必须修饰为final</blockquote><blockquote><p>为什么要声明为final，其机制比较复杂，请参考第二个Hero代码中的解释</blockquote><blockquote><p>注：在jdk8中，已经不需要强制修饰成final了，如果没有写final，不会报错，因为编译器偷偷的帮你加上了看不见的final</blockquote><p><code>Hero.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>abstract</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>abstract</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span>;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=comment>//在匿名类中使用外部的局部变量，外部的局部变量必须修饰为final</span></span><br><span class=line>        <span class=keyword>final</span> <span class=type>int</span> <span class=variable>damage</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span> {</span><br><span class=line>                System.out.printf(<span class=string>"新的进攻手段，造成%d点伤害"</span>,damage );</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><p><code>Hero.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>abstract</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>abstract</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span>;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=comment>//在匿名类中使用外部的局部变量damage 必须修饰为final</span></span><br><span class=line>        <span class=type>int</span> <span class=variable>damage</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//这里使用本地类AnonymousHero来模拟匿名类的隐藏属性机制</span></span><br><span class=line>         </span><br><span class=line>        <span class=comment>//事实上的匿名类，会在匿名类里声明一个damage属性，并且使用构造方法初始化该属性的值</span></span><br><span class=line>        <span class=comment>//在attack中使用的damage，真正使用的是这个内部damage，而非外部damage</span></span><br><span class=line>         </span><br><span class=line>        <span class=comment>//假设外部属性不需要声明为final</span></span><br><span class=line>        <span class=comment>//那么在attack中修改damage的值，就会被暗示为修改了外部变量damage的值</span></span><br><span class=line>         </span><br><span class=line>        <span class=comment>//但是他们俩是不同的变量，是不可能修改外部变量damage的</span></span><br><span class=line>        <span class=comment>//所以为了避免产生误导，外部的damage必须声明为final,"看上去"就不能修改了</span></span><br><span class=line>        <span class=keyword>class</span> <span class="title class_">AnonymousHero</span> <span class=keyword>extends</span> <span class="title class_">Hero</span>{</span><br><span class=line>            <span class=type>int</span> damage;</span><br><span class=line>            <span class=keyword>public</span> <span class="title function_">AnonymousHero</span><span class=params>(<span class=type>int</span> damage)</span>{</span><br><span class=line>                <span class=built_in>this</span>.damage = damage;</span><br><span class=line>            }</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attack</span><span class=params>()</span> {</span><br><span class=line>                damage = <span class=number>10</span>;</span><br><span class=line>                System.out.printf(<span class=string>"新的进攻手段，造成%d点伤害"</span>,<span class=built_in>this</span>.damage );</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">AnonymousHero</span>(damage);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h2 id=默认方法><a class=headerlink href=#默认方法 title=默认方法></a>默认方法</h2><h3 id=什么是默认方法><a class=headerlink href=#什么是默认方法 title=什么是默认方法></a>什么是默认方法</h3><blockquote><p>默认方法是JDK8新特性，指的是接口也可以提供具体方法了，而不像以前，只能提供抽象方法。</blockquote><blockquote><p>Mortal 这个接口，增加了一个<code>默认方法</code> revive，这个方法有实现体，并且被声明为了<code>default</code>。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>interface</span> <span class="title class_">Mortal</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">die</span><span class=params>()</span>;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>default</span> <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">revive</span><span class=params>()</span> {</span><br><span class=line>        System.out.println(<span class=string>"本英雄复活了"</span>);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=为什么会有默认方法><a class=headerlink href=#为什么会有默认方法 title=为什么会有默认方法></a>为什么会有默认方法</h3><blockquote><p>假设没有默认方法这种机制，那么如果要为Mortal增加一个新的方法revive,那么所有实现了Mortal接口的类，都需要做改动。</blockquote><blockquote><p>但是引入了默认方法后，原来的类，不需要做任何改动，并且还能得到这个默认方法。</blockquote><blockquote><p>通过这种手段，就能够很好的扩展新的类，并且做到不影响原来的类。</blockquote><h1 id=数字与字符串><a class=headerlink href=#数字与字符串 title=数字与字符串></a>数字与字符串</h1><h2 id=装箱拆箱><a class=headerlink href=#装箱拆箱 title=装箱拆箱></a>装箱拆箱</h2><h3 id=封装类><a class=headerlink href=#封装类 title=封装类></a>封装类</h3><blockquote><p>所有的<code>基本类型</code>，都有对应的<code>类类型 </code><br>比如int对应的类是Integer<br>这种类就叫做封装类</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//把一个基本类型的变量,转换为Integer对象</span></span><br><span class=line>        <span class=type>Integer</span> <span class=variable>it</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Integer</span>(i);</span><br><span class=line>        <span class=comment>//把一个Integer对象，转换为一个基本类型的int</span></span><br><span class=line>        <span class=type>int</span> <span class=variable>i2</span> <span class=operator>=</span> it.intValue();</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=Number类><a class=headerlink href=#Number类 title=Number类></a>Number类</h3><blockquote><p>数字封装类有<br>Byte,Short,Integer,Long,Float,Double<br>这些类都是抽象类Number的子类</blockquote><p><img src=http://stepimagewm.how2j.cn/672.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>Integer</span> <span class=variable>it</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Integer</span>(i);</span><br><span class=line>        <span class=comment>//Integer是Number的子类，所以打印true</span></span><br><span class=line>        System.out.println(it <span class=keyword>instanceof</span> Number);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=基本类型转封装类><a class=headerlink href=#基本类型转封装类 title=基本类型转封装类></a>基本类型转封装类</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line> </span><br><span class=line>        <span class=comment>//基本类型转换成封装类型</span></span><br><span class=line>        <span class=type>Integer</span> <span class=variable>it</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Integer</span>(i);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=封装类转基本类型><a class=headerlink href=#封装类转基本类型 title=封装类转基本类型></a>封装类转基本类型</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line> </span><br><span class=line>        <span class=comment>//基本类型转换成封装类型</span></span><br><span class=line>        <span class=type>Integer</span> <span class=variable>it</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Integer</span>(i);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//封装类型转换成基本类型</span></span><br><span class=line>        <span class=type>int</span> <span class=variable>i2</span> <span class=operator>=</span> it.intValue();</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=自动装箱><a class=headerlink href=#自动装箱 title=自动装箱></a>自动装箱</h3><blockquote><p>不需要调用构造方法，<code>通过=符号自动</code>把 基本类型 转换为 类类型 就叫装箱。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line> </span><br><span class=line>        <span class=comment>//基本类型转换成封装类型</span></span><br><span class=line>        <span class=type>Integer</span> <span class=variable>it</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Integer</span>(i);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//自动转换就叫装箱</span></span><br><span class=line>        <span class=type>Integer</span> <span class=variable>it2</span> <span class=operator>=</span> i;</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=自动拆箱><a class=headerlink href=#自动拆箱 title=自动拆箱></a>自动拆箱</h3><blockquote><p>不需要调用Integer的intValue方法，通过=就自动转换成int类型，就叫拆箱。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line>  </span><br><span class=line>        <span class=type>Integer</span> <span class=variable>it</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Integer</span>(i);</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//封装类型转换成基本类型</span></span><br><span class=line>        <span class=type>int</span> <span class=variable>i2</span> <span class=operator>=</span> it.intValue();</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//自动转换就叫拆箱</span></span><br><span class=line>        <span class=type>int</span> <span class=variable>i3</span> <span class=operator>=</span> it;</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=int的最大值，最小值><a class=headerlink href=#int的最大值，最小值 title=int的最大值，最小值></a>int的最大值，最小值</h3><blockquote><p>int的最大值可以通过其对应的封装类Integer.MAX_VALUE获取。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=comment>//int的最大值</span></span><br><span class=line>        System.out.println(Integer.MAX_VALUE);</span><br><span class=line>        <span class=comment>//int的最小值      </span></span><br><span class=line>        System.out.println(Integer.MIN_VALUE);</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=字符串转换><a class=headerlink href=#字符串转换 title=字符串转换></a>字符串转换</h2><h3 id=数字转字符串><a class=headerlink href=#数字转字符串 title=数字转字符串></a>数字转字符串</h3><blockquote><ul><li>方法1： 使用String类的静态方法valueOf<li>方法2： 先把基本类型装箱为对象，然后调用对象的toString</ul></blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//方法1</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>str</span> <span class=operator>=</span> String.valueOf(i);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//方法2</span></span><br><span class=line>        <span class=type>Integer</span> <span class=variable>it</span> <span class=operator>=</span> i;</span><br><span class=line>        <span class=type>String</span> <span class=variable>str2</span> <span class=operator>=</span> it.toString();</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=字符串转数字><a class=headerlink href=#字符串转数字 title=字符串转数字></a>字符串转数字</h3><blockquote><p>调用Integer的静态方法parseInt</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>str</span> <span class=operator>=</span> <span class=string>"999"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>int</span> i= Integer.parseInt(str);</span><br><span class=line>         </span><br><span class=line>        System.out.println(i);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=数学方法><a class=headerlink href=#数学方法 title=数学方法></a>数学方法</h2><h3 id=四舍五入-随机数，开方，次方，π，自然常数><a title="四舍五入, 随机数，开方，次方，π，自然常数" class=headerlink href=#四舍五入-随机数，开方，次方，π，自然常数></a>四舍五入, 随机数，开方，次方，π，自然常数</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>float</span> <span class=variable>f1</span> <span class=operator>=</span> <span class=number>5.4f</span>;</span><br><span class=line>        <span class=type>float</span> <span class=variable>f2</span> <span class=operator>=</span> <span class=number>5.5f</span>;</span><br><span class=line>        <span class=comment>//5.4四舍五入即5</span></span><br><span class=line>        System.out.println(Math.round(f1));</span><br><span class=line>        <span class=comment>//5.5四舍五入即6</span></span><br><span class=line>        System.out.println(Math.round(f2));</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//得到一个0-1之间的随机浮点数（取不到1）</span></span><br><span class=line>        System.out.println(Math.random());</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//得到一个0-10之间的随机整数 （取不到10）</span></span><br><span class=line>        System.out.println((<span class=type>int</span>)( Math.random()*<span class=number>10</span>));</span><br><span class=line>        <span class=comment>//开方</span></span><br><span class=line>        System.out.println(Math.sqrt(<span class=number>9</span>));</span><br><span class=line>        <span class=comment>//次方（2的4次方）</span></span><br><span class=line>        System.out.println(Math.pow(<span class=number>2</span>,<span class=number>4</span>));</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//π</span></span><br><span class=line>        System.out.println(Math.PI);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//自然常数</span></span><br><span class=line>        System.out.println(Math.E);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=格式化输出><a class=headerlink href=#格式化输出 title=格式化输出></a>格式化输出</h2><blockquote><p>如果不使用格式化输出，就需要进行字符串连接，如果变量比较多，拼接就会显得繁琐。使用格式化输出，就可以简洁明了。</blockquote><blockquote><p>%s 表示字符串<br>%d 表示数字<br>%n 表示换行</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span><span class=string>"盖伦"</span>;</span><br><span class=line>        <span class=type>int</span> <span class=variable>kill</span> <span class=operator>=</span> <span class=number>8</span>;</span><br><span class=line>        String title=<span class=string>"超神"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//直接使用+进行字符串连接，编码感觉会比较繁琐，并且维护性差,易读性差</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>sentence</span> <span class=operator>=</span> name+ <span class=string>" 在进行了连续 "</span> + kill + <span class=string>" 次击杀后，获得了 "</span> + title +<span class=string>" 的称号"</span>;</span><br><span class=line>         </span><br><span class=line>        System.out.println(sentence);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//使用格式化输出</span></span><br><span class=line>        <span class=comment>//%s表示字符串，%d表示数字,%n表示换行</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>sentenceFormat</span> <span class=operator>=</span><span class=string>"%s 在进行了连续 %d 次击杀后，获得了 %s 的称号%n"</span>;</span><br><span class=line>        System.out.printf(sentenceFormat,name,kill,title);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=printf-和-format><a title="printf 和 format" class=headerlink href=#printf-和-format></a>printf 和 format</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span><span class=string>"盖伦"</span>;</span><br><span class=line>        <span class=type>int</span> <span class=variable>kill</span> <span class=operator>=</span> <span class=number>8</span>;</span><br><span class=line>        String title=<span class=string>"超神"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>String</span> <span class=variable>sentenceFormat</span> <span class=operator>=</span><span class=string>"%s 在进行了连续 %d 次击杀后，获得了 %s 的称号%n"</span>;</span><br><span class=line>        <span class=comment>//使用printf格式化输出</span></span><br><span class=line>        System.out.printf(sentenceFormat,name,kill,title);</span><br><span class=line>        <span class=comment>//使用format格式化输出</span></span><br><span class=line>        System.out.format(sentenceFormat,name,kill,title);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=换行符><a class=headerlink href=#换行符 title=换行符></a>换行符</h3><blockquote><p>换行符就是另起一行 — ‘\n’ 换行（newline）<br>回车符就是回到一行的开头 — ‘\r’ 回车（return）<br>在eclipse里敲一个回车，实际上是回车换行符<br>Java是跨平台的编程语言，同样的代码，可以在不同的平台使用，比如Windows, Linux, Mac</blockquote><blockquote><p>然而在不同的操作系统，换行符是不一样的<br>（1）在DOS和Windows中，每行结尾是 “\r\n”；<br>（2）Linux系统里，每行结尾只有 “\n”；<br>（3）Mac系统里，每行结尾是只有 “\r”。</blockquote><blockquote><p>为了使得同一个java程序的换行符在所有的操作系统中都有一样的表现，使用%n，就可以做到平台无关的换行</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        System.out.printf(<span class=string>"这是换行符%n"</span>);</span><br><span class=line>        System.out.printf(<span class=string>"这是换行符%n"</span>);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=总长度，左对齐，补0，千位分隔符，小数点位数，本地化表达><a class=headerlink href=#总长度，左对齐，补0，千位分隔符，小数点位数，本地化表达 title=总长度，左对齐，补0，千位分隔符，小数点位数，本地化表达></a>总长度，左对齐，补0，千位分隔符，小数点位数，本地化表达</h3><p><img src=http://stepimagewm.how2j.cn/683.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> digit;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.Locale;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestNumber</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>year</span> <span class=operator>=</span> <span class=number>2020</span>;</span><br><span class=line>        <span class=comment>//总长度，左对齐，补0，千位分隔符，小数点位数，本地化表达</span></span><br><span class=line>          </span><br><span class=line>        <span class=comment>//直接打印数字</span></span><br><span class=line>        System.out.format(<span class=string>"%d%n"</span>,year);</span><br><span class=line>        <span class=comment>//总长度是8,默认右对齐</span></span><br><span class=line>        System.out.format(<span class=string>"%8d%n"</span>,year);</span><br><span class=line>        <span class=comment>//总长度是8,左对齐</span></span><br><span class=line>        System.out.format(<span class=string>"%-8d%n"</span>,year);</span><br><span class=line>        <span class=comment>//总长度是8,不够补0</span></span><br><span class=line>        System.out.format(<span class=string>"%08d%n"</span>,year);</span><br><span class=line>        <span class=comment>//千位分隔符</span></span><br><span class=line>        System.out.format(<span class=string>"%,8d%n"</span>,year*<span class=number>10000</span>);</span><br><span class=line>  </span><br><span class=line>        <span class=comment>//小数点位数</span></span><br><span class=line>        System.out.format(<span class=string>"%.2f%n"</span>,Math.PI);</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//不同国家的千位分隔符</span></span><br><span class=line>        System.out.format(Locale.FRANCE,<span class=string>"%,.2f%n"</span>,Math.PI*<span class=number>10000</span>);</span><br><span class=line>        System.out.format(Locale.US,<span class=string>"%,.2f%n"</span>,Math.PI*<span class=number>10000</span>);</span><br><span class=line>        System.out.format(Locale.UK,<span class=string>"%,.2f%n"</span>,Math.PI*<span class=number>10000</span>);</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=字符><a class=headerlink href=#字符 title=字符></a>字符</h2><h3 id=保存一个字符的时候使用char><a class=headerlink href=#保存一个字符的时候使用char title=保存一个字符的时候使用char></a>保存一个字符的时候使用char</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestChar</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>char</span> <span class=variable>c1</span> <span class=operator>=</span> <span class=string>'a'</span>;</span><br><span class=line>        <span class=type>char</span> <span class=variable>c2</span> <span class=operator>=</span> <span class=string>'1'</span>;<span class=comment>//字符1,而非数字1</span></span><br><span class=line>        <span class=type>char</span> <span class=variable>c3</span> <span class=operator>=</span> <span class=string>'中'</span>;<span class=comment>//汉字字符</span></span><br><span class=line>        <span class=type>char</span> <span class=variable>c4</span> <span class=operator>=</span> <span class=string>'ab'</span>; <span class=comment>//只能放一个字符</span></span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=char对应的封装类><a class=headerlink href=#char对应的封装类 title=char对应的封装类></a>char对应的封装类</h3><blockquote><p>char对应的封装类是Character</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestChar</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>char</span> <span class=variable>c1</span> <span class=operator>=</span> <span class=string>'a'</span>;</span><br><span class=line>        <span class=type>Character</span> <span class=variable>c</span> <span class=operator>=</span> c1; <span class=comment>//自动装箱</span></span><br><span class=line>        c1 = c;<span class=comment>//自动拆箱</span></span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=Character常见方法><a class=headerlink href=#Character常见方法 title=Character常见方法></a>Character常见方法</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestChar</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        System.out.println(Character.isLetter(<span class=string>'a'</span>));<span class=comment>//判断是否为字母</span></span><br><span class=line>        System.out.println(Character.isDigit(<span class=string>'a'</span>)); <span class=comment>//判断是否为数字</span></span><br><span class=line>        System.out.println(Character.isWhitespace(<span class=string>' '</span>)); <span class=comment>//是否是空白</span></span><br><span class=line>        System.out.println(Character.isUpperCase(<span class=string>'a'</span>)); <span class=comment>//是否是大写</span></span><br><span class=line>        System.out.println(Character.isLowerCase(<span class=string>'a'</span>)); <span class=comment>//是否是小写</span></span><br><span class=line>         </span><br><span class=line>        System.out.println(Character.toUpperCase(<span class=string>'a'</span>)); <span class=comment>//转换为大写</span></span><br><span class=line>        System.out.println(Character.toLowerCase(<span class=string>'A'</span>)); <span class=comment>//转换为小写</span></span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>a</span> <span class=operator>=</span> <span class=string>'a'</span>; <span class=comment>//不能够直接把一个字符转换成字符串</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>a2</span> <span class=operator>=</span> Character.toString(<span class=string>'a'</span>); <span class=comment>//转换为字符串</span></span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=常见转义><a class=headerlink href=#常见转义 title=常见转义></a>常见转义</h3><p><img src=http://stepimagewm.how2j.cn/696.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestChar</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        System.out.println(<span class=string>"使用空格无法达到对齐的效果"</span>);</span><br><span class=line>        System.out.println(<span class=string>"abc def"</span>);</span><br><span class=line>        System.out.println(<span class=string>"ab def"</span>);</span><br><span class=line>        System.out.println(<span class=string>"a def"</span>);</span><br><span class=line>          </span><br><span class=line>        System.out.println(<span class=string>"使用\\t制表符可以达到对齐的效果"</span>);</span><br><span class=line>        System.out.println(<span class=string>"abc\tdef"</span>);</span><br><span class=line>        System.out.println(<span class=string>"ab\tdef"</span>);</span><br><span class=line>        System.out.println(<span class=string>"a\tdef"</span>);</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"一个\\t制表符长度是8"</span>);</span><br><span class=line>        System.out.println(<span class=string>"12345678def"</span>);</span><br><span class=line>          </span><br><span class=line>        System.out.println(<span class=string>"换行符 \\n"</span>);</span><br><span class=line>        System.out.println(<span class=string>"abc\ndef"</span>);</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"单引号 \\'"</span>);</span><br><span class=line>        System.out.println(<span class=string>"abc\'def"</span>);</span><br><span class=line>        System.out.println(<span class=string>"双引号 \\\""</span>);</span><br><span class=line>        System.out.println(<span class=string>"abc\"def"</span>);</span><br><span class=line>        System.out.println(<span class=string>"反斜杠本身 \\"</span>);</span><br><span class=line>        System.out.println(<span class=string>"abc\\def"</span>);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=字符串><a class=headerlink href=#字符串 title=字符串></a>字符串</h2><h3 id=创建字符串><a class=headerlink href=#创建字符串 title=创建字符串></a>创建字符串</h3><blockquote><p>字符串即字符的组合，在Java中，字符串是一个类，所以我们见到的字符串都是对象<br>常见创建字符串手段：</blockquote><ol><li>每当有一个<code>字面值</code>出现的时候，虚拟机就会创建一个字符串<li>调用String的构造方法创建一个字符串对象<li>通过+加号进行字符串拼接也会创建新的字符串对象</ol><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>String</span> <span class=variable>garen</span> <span class=operator>=</span><span class=string>"盖伦"</span>; <span class=comment>//字面值,虚拟机碰到字面值就会创建一个字符串对象</span></span><br><span class=line>         </span><br><span class=line>        <span class=type>String</span> <span class=variable>teemo</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">String</span>(<span class=string>"提莫"</span>); <span class=comment>//创建了两个字符串对象</span></span><br><span class=line>         </span><br><span class=line>        <span class=type>char</span>[] cs = <span class=keyword>new</span> <span class="title class_">char</span>[]{<span class=string>'崔'</span>,<span class=string>'斯'</span>,<span class=string>'特'</span>};</span><br><span class=line>         </span><br><span class=line>        <span class=type>String</span> <span class=variable>hero</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">String</span>(cs);<span class=comment>//  通过字符数组创建一个字符串对象</span></span><br><span class=line>         </span><br><span class=line>        <span class=type>String</span> <span class=variable>hero3</span> <span class=operator>=</span> garen + teemo;<span class=comment>//  通过+加号进行字符串拼接</span></span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=final><a class=headerlink href=#final title=final></a>final</h3><blockquote><p>String 被修饰为final,所以是不能被继承的</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>MyString</span> <span class=variable>str</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">MyString</span>();</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>        <span class=comment>/*这里会报错，因为String不能被继承*/</span></span><br><span class=line>    <span class=keyword>static</span> <span class=keyword>class</span> <span class="title class_">MyString</span> <span class=keyword>extends</span> <span class="title class_">String</span>{</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><h3 id=immutable><a class=headerlink href=#immutable title=immutable></a>immutable</h3><blockquote><p>immutable 是指不可改变的<br>比如创建了一个字符串对象<br>String garen =”盖伦”;</blockquote><blockquote><p><code>不可改变</code>的具体含义是指：</blockquote><ul><li>不能增加长度<li>不能减少长度<li>不能插入字符<li>不能删除字符<li>不能修改字符</ul><blockquote><p>一旦创建好这个字符串，里面的内容 <code>永远</code> 不能改变</blockquote><blockquote><p>String 的表现就像是一个<code>常量</code></blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span>  <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>String</span> <span class=variable>garen</span> <span class=operator>=</span><span class=string>"盖伦"</span>;</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=字符串格式化><a class=headerlink href=#字符串格式化 title=字符串格式化></a>字符串格式化</h3><blockquote><p>如果不使用字符串格式化，就需要进行字符串连接，如果变量比较多，拼接就会显得繁琐<br>使用字符串格式化，就可以简洁明了。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span><span class=string>"盖伦"</span>;</span><br><span class=line>        <span class=type>int</span> <span class=variable>kill</span> <span class=operator>=</span> <span class=number>8</span>;</span><br><span class=line>        String title=<span class=string>"超神"</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//直接使用+进行字符串连接，编码感觉会比较繁琐，并且维护性差,易读性差</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>sentence</span> <span class=operator>=</span> name+ <span class=string>" 在进行了连续 "</span> + kill + <span class=string>" 次击杀后，获得了 "</span> + title +<span class=string>" 的称号"</span>;</span><br><span class=line>          </span><br><span class=line>        System.out.println(sentence);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//格式化字符串</span></span><br><span class=line>        <span class=comment>//%s表示字符串，%d表示数字,%n表示换行</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>sentenceFormat</span> <span class=operator>=</span><span class=string>"%s 在进行了连续 %d 次击杀后，获得了 %s 的称号%n"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>String</span> <span class=variable>sentence2</span> <span class=operator>=</span> String.format(sentenceFormat, name,kill,title);</span><br><span class=line>         </span><br><span class=line>        System.out.println(sentence2);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=字符串长度><a class=headerlink href=#字符串长度 title=字符串长度></a>字符串长度</h3><blockquote><p>length方法返回当前字符串的长度<br>可以有长度为0的字符串,即空字符串</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span><span class=string>"盖伦"</span>;</span><br><span class=line>         </span><br><span class=line>        System.out.println(name.length());</span><br><span class=line>         </span><br><span class=line>        <span class=type>String</span> <span class=variable>unknowHero</span> <span class=operator>=</span> <span class=string>""</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//可以有长度为0的字符串,即空字符串</span></span><br><span class=line>        System.out.println(unknowHero.length());</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=操纵字符串><a class=headerlink href=#操纵字符串 title=操纵字符串></a>操纵字符串</h2><h3 id=获取字符><a class=headerlink href=#获取字符 title=获取字符></a>获取字符</h3><blockquote><p>charAt(int index)获取指定位置的字符</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>    	<span class=type>String</span> <span class=variable>sentence</span> <span class=operator>=</span> <span class=string>"盖伦,在进行了连续8次击杀后,获得了 超神 的称号"</span>;</span><br><span class=line>    	</span><br><span class=line>    	<span class=type>char</span> <span class=variable>c</span> <span class=operator>=</span> sentence.charAt(<span class=number>0</span>);</span><br><span class=line>    	</span><br><span class=line>    	System.out.println(c);</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=获取对应的字符数组><a class=headerlink href=#获取对应的字符数组 title=获取对应的字符数组></a>获取对应的字符数组</h3><blockquote><p>toCharArray()<br>获取对应的字符数组</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>   </span><br><span class=line>        <span class=type>String</span> <span class=variable>sentence</span> <span class=operator>=</span> <span class=string>"盖伦,在进行了连续8次击杀后,获得了超神 的称号"</span>;</span><br><span class=line> </span><br><span class=line>        <span class=type>char</span>[] cs = sentence.toCharArray(); <span class=comment>//获取对应的字符数组</span></span><br><span class=line>         </span><br><span class=line>        System.out.println(sentence.length() == cs.length);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=截取子字符串><a class=headerlink href=#截取子字符串 title=截取子字符串></a>截取子字符串</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>   </span><br><span class=line>        <span class=type>String</span> <span class=variable>sentence</span> <span class=operator>=</span> <span class=string>"盖伦,在进行了连续8次击杀后,获得了 超神 的称号"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//截取从第3个开始的字符串 （基0）</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>subString1</span> <span class=operator>=</span> sentence.substring(<span class=number>3</span>);</span><br><span class=line>         </span><br><span class=line>        System.out.println(subString1);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//截取从第3个开始的字符串 （基0）</span></span><br><span class=line>        <span class=comment>//到5-1的位置的字符串</span></span><br><span class=line>        <span class=comment>//左闭右开</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>subString2</span> <span class=operator>=</span> sentence.substring(<span class=number>3</span>,<span class=number>5</span>);</span><br><span class=line>         </span><br><span class=line>        System.out.println(subString2);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=分隔><a class=headerlink href=#分隔 title=分隔></a>分隔</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>   </span><br><span class=line>        <span class=type>String</span> <span class=variable>sentence</span> <span class=operator>=</span> <span class=string>"盖伦,在进行了连续8次击杀后,获得了 超神 的称号"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//根据,进行分割，得到3个子字符串</span></span><br><span class=line>        String subSentences[] = sentence.split(<span class=string>","</span>);</span><br><span class=line>        <span class=keyword>for</span> (String sub : subSentences) {</span><br><span class=line>            System.out.println(sub);</span><br><span class=line>        }</span><br><span class=line>           </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=去掉首尾空格><a class=headerlink href=#去掉首尾空格 title=去掉首尾空格></a>去掉首尾空格</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>   </span><br><span class=line>        <span class=type>String</span> <span class=variable>sentence</span> <span class=operator>=</span> <span class=string>"        盖伦,在进行了连续8次击杀后,获得了 超神 的称号      "</span>;</span><br><span class=line>         </span><br><span class=line>        System.out.println(sentence);</span><br><span class=line>        <span class=comment>//去掉首尾空格</span></span><br><span class=line>        System.out.println(sentence.trim());</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=大小写><a class=headerlink href=#大小写 title=大小写></a>大小写</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>   </span><br><span class=line>        <span class=type>String</span> <span class=variable>sentence</span> <span class=operator>=</span> <span class=string>"Garen"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//全部变成小写</span></span><br><span class=line>        System.out.println(sentence.toLowerCase());</span><br><span class=line>        <span class=comment>//全部变成大写</span></span><br><span class=line>        System.out.println(sentence.toUpperCase());</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=定位><a class=headerlink href=#定位 title=定位></a>定位</h3><blockquote><p>indexOf 判断字符或者子字符串出现的位置<br>contains 是否包含子字符串</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>     </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>    </span><br><span class=line>        <span class=type>String</span> <span class=variable>sentence</span> <span class=operator>=</span> <span class=string>"盖伦,在进行了连续8次击杀后,获得了超神 的称号"</span>;</span><br><span class=line>  </span><br><span class=line>        System.out.println(sentence.indexOf(<span class=string>'8'</span>)); <span class=comment>//字符第一次出现的位置</span></span><br><span class=line>          </span><br><span class=line>        System.out.println(sentence.indexOf(<span class=string>"超神"</span>)); <span class=comment>//字符串第一次出现的位置</span></span><br><span class=line>          </span><br><span class=line>        System.out.println(sentence.lastIndexOf(<span class=string>"了"</span>)); <span class=comment>//字符串最后出现的位置</span></span><br><span class=line>          </span><br><span class=line>        System.out.println(sentence.indexOf(<span class=string>','</span>,<span class=number>5</span>)); <span class=comment>//从位置5开始，出现的第一次,的位置</span></span><br><span class=line>          </span><br><span class=line>        System.out.println(sentence.contains(<span class=string>"击杀"</span>)); <span class=comment>//是否包含字符串"击杀"</span></span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=替换><a class=headerlink href=#替换 title=替换></a>替换</h3><blockquote><p>replaceAll 替换所有的<br>replaceFirst 只替换第一个</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>   </span><br><span class=line>        <span class=type>String</span> <span class=variable>sentence</span> <span class=operator>=</span> <span class=string>"盖伦,在进行了连续8次击杀后,获得了超神 的称号"</span>;</span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>temp</span> <span class=operator>=</span> sentence.replaceAll(<span class=string>"击杀"</span>, <span class=string>"被击杀"</span>); <span class=comment>//替换所有的</span></span><br><span class=line>         </span><br><span class=line>        temp = temp.replaceAll(<span class=string>"超神"</span>, <span class=string>"超鬼"</span>);</span><br><span class=line>         </span><br><span class=line>        System.out.println(temp);</span><br><span class=line>         </span><br><span class=line>        temp = sentence.replaceFirst(<span class=string>","</span>,<span class=string>""</span>);<span class=comment>//只替换第一个</span></span><br><span class=line>         </span><br><span class=line>        System.out.println(temp);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=比较字符串><a class=headerlink href=#比较字符串 title=比较字符串></a>比较字符串</h2><h3 id=是否是同一个对象><a class=headerlink href=#是否是同一个对象 title=是否是同一个对象></a>是否是同一个对象</h3><blockquote><p>str1和str2的内容一定是一样的！<br>但是，并不是同一个字符串对象</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>str1</span> <span class=operator>=</span> <span class=string>"the light"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>String</span> <span class=variable>str2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">String</span>(str1);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//==用于判断是否是同一个字符串对象</span></span><br><span class=line>        System.out.println( str1  ==  str2);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=是否是同一个对象-特例><a class=headerlink href=#是否是同一个对象-特例 title=是否是同一个对象-特例></a>是否是同一个对象-特例</h3><blockquote><p>str1 = “the light”;<br>str3 = “the light”;</blockquote><blockquote><p>一般说来，编译器每碰到一个字符串的字面值，就会创建一个新的对象<br>所以在第6行会创建了一个新的字符串”the light”<br>但是在第7行，编译器发现已经存在现成的”the light”，那么就直接拿来使用，而没有进行重复创建。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>String</span> <span class=variable>str1</span> <span class=operator>=</span> <span class=string>"the light"</span>;</span><br><span class=line>        <span class=type>String</span> <span class=variable>str3</span> <span class=operator>=</span> <span class=string>"the light"</span>;</span><br><span class=line>        System.out.println( str1  ==  str3);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=内容是否相同><a class=headerlink href=#内容是否相同 title=内容是否相同></a>内容是否相同</h3><blockquote><p>使用equals进行字符串内容的比较，必须大小写一致<br>equalsIgnoreCase，忽略大小写判断内容是否一致</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=type>String</span> <span class=variable>str1</span> <span class=operator>=</span> <span class=string>"the light"</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=type>String</span> <span class=variable>str2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">String</span>(str1);</span><br><span class=line>         </span><br><span class=line>        <span class=type>String</span> <span class=variable>str3</span> <span class=operator>=</span> str1.toUpperCase();</span><br><span class=line> </span><br><span class=line>        <span class=comment>//==用于判断是否是同一个字符串对象</span></span><br><span class=line>        System.out.println( str1  ==  str2);</span><br><span class=line>         </span><br><span class=line>        System.out.println(str1.equals(str2));<span class=comment>//完全一样返回true</span></span><br><span class=line>         </span><br><span class=line>        System.out.println(str1.equals(str3));<span class=comment>//大小写不一样，返回false</span></span><br><span class=line>        System.out.println(str1.equalsIgnoreCase(str3));<span class=comment>//忽略大小写的比较，返回true</span></span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><h3 id=是否以子字符串开始或者结束><a class=headerlink href=#是否以子字符串开始或者结束 title=是否以子字符串开始或者结束></a>是否以子字符串开始或者结束</h3><blockquote><p>startsWith //以…开始<br>endsWith //以…结束</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>String</span> <span class=variable>str1</span> <span class=operator>=</span> <span class=string>"the light"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>String</span> <span class=variable>start</span> <span class=operator>=</span> <span class=string>"the"</span>;</span><br><span class=line>        <span class=type>String</span> <span class=variable>end</span> <span class=operator>=</span> <span class=string>"Ight"</span>;</span><br><span class=line>         </span><br><span class=line>        System.out.println(str1.startsWith(start));<span class=comment>//以...开始</span></span><br><span class=line>        System.out.println(str1.endsWith(end));<span class=comment>//以...结束</span></span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><h2 id=StringBuffer><a class=headerlink href=#StringBuffer title=StringBuffer></a>StringBuffer</h2><h3 id=追加-删除-插入-反转><a title="追加 删除 插入 反转" class=headerlink href=#追加-删除-插入-反转></a>追加 删除 插入 反转</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>String</span> <span class=variable>str1</span> <span class=operator>=</span> <span class=string>"let there "</span>;</span><br><span class=line> </span><br><span class=line>        <span class=type>StringBuffer</span> <span class=variable>sb</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">StringBuffer</span>(str1); <span class=comment>//根据str1创建一个StringBuffer对象</span></span><br><span class=line>        sb.append(<span class=string>"be light"</span>); <span class=comment>//在最后追加</span></span><br><span class=line>         </span><br><span class=line>        System.out.println(sb);</span><br><span class=line>         </span><br><span class=line>        sb.delete(<span class=number>4</span>, <span class=number>10</span>);<span class=comment>//删除4-10之间的字符</span></span><br><span class=line>         </span><br><span class=line>        System.out.println(sb);</span><br><span class=line>         </span><br><span class=line>        sb.insert(<span class=number>4</span>, <span class=string>"there "</span>);<span class=comment>//在4这个位置插入 there</span></span><br><span class=line>         </span><br><span class=line>        System.out.println(sb);</span><br><span class=line>         </span><br><span class=line>        sb.reverse(); <span class=comment>//反转</span></span><br><span class=line>         </span><br><span class=line>        System.out.println(sb);</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><h3 id=长度-容量><a title="长度 容量" class=headerlink href=#长度-容量></a>长度 容量</h3><blockquote><p>为什么StringBuffer可以变长？<br>和String<code>内部是一个字符数组</code>一样，StringBuffer也维护了一个字符数组。 但是，这个字符数组，<code>留有冗余长度</code><br>比如说new StringBuffer(“the”)，其内部的字符数组的长度，是19，而不是3，这样调用插入和追加，在现成的数组的基础上就可以完成了。<br>如果追加的长度超过了19，就会分配一个新的数组，长度比原来多一些，把原来的数据复制到新的数组中，<code>看上去</code> 数组长度就变长了。<br>length: “the”的长度 3<br>capacity: 分配的总空间 19</blockquote><blockquote><p><code>注：</code> 19这个数量，不同的JDK数量是不一样的</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> character;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestString</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>String</span> <span class=variable>str1</span> <span class=operator>=</span> <span class=string>"the"</span>;</span><br><span class=line> </span><br><span class=line>        <span class=type>StringBuffer</span> <span class=variable>sb</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">StringBuffer</span>(str1);</span><br><span class=line>         </span><br><span class=line>        System.out.println(sb.length()); <span class=comment>//内容长度</span></span><br><span class=line>         </span><br><span class=line>        System.out.println(sb.capacity());<span class=comment>//总空间</span></span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><h1 id=日期><a class=headerlink href=#日期 title=日期></a>日期</h1><h2 id=Date><a class=headerlink href=#Date title=Date></a>Date</h2><blockquote><p>Date类<br>注意：是java.util.Date;<br>而非 java.sql.Date，此类是给数据库访问的时候使用的</blockquote><h3 id=时间原点概念><a class=headerlink href=#时间原点概念 title=时间原点概念></a>时间原点概念</h3><blockquote><p>所有的数据类型，无论是整数，布尔，浮点数还是字符串，最后都需要以数字的形式表现出来。</blockquote><blockquote><p>日期类型也不例外，换句话说，一个日期，比如2020年10月1日，在计算机里，会用一个数字来代替。</blockquote><blockquote><p>那么最特殊的一个数字，就是零. 零这个数字，就代表Java中的时间原点，其对应的日期是1970年1月1日 8点0分0秒 。 (为什么是8点，因为中国的太平洋时区是UTC-8，刚好和格林威治时间差8个小时)</blockquote><blockquote><p>为什么对应1970年呢？ 因为1969年发布了第一个 UNIX 版本：AT&T，综合考虑，当时就把1970年当做了时间原点。</blockquote><blockquote><p>所有的日期，都是以为这个0点为基准，每过一毫秒，就+1。</blockquote><h3 id=创建日期对象><a class=headerlink href=#创建日期对象 title=创建日期对象></a>创建日期对象</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> date;</span><br><span class=line> </span><br><span class=line><span class=comment>//</span></span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestDate</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 当前时间</span></span><br><span class=line>        <span class=type>Date</span> <span class=variable>d1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Date</span>();</span><br><span class=line>        System.out.println(<span class=string>"当前时间:"</span>);</span><br><span class=line>        System.out.println(d1);</span><br><span class=line>        System.out.println();</span><br><span class=line>        <span class=comment>// 从1970年1月1日 早上8点0分0秒 开始经历的毫秒数</span></span><br><span class=line>        <span class=type>Date</span> <span class=variable>d2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Date</span>(<span class=number>5000</span>);</span><br><span class=line>        System.out.println(<span class=string>"从1970年1月1日 早上8点0分0秒 开始经历了5秒的时间"</span>);</span><br><span class=line>        System.out.println(d2);</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=getTime><a class=headerlink href=#getTime title=getTime></a>getTime</h3><blockquote><p>getTime() 得到一个long型的整数<br>这个整数代表 从<code>1970.1.1 08:00:00:000</code> 开始 每经历一毫秒，增加1<br>直接打印对象，会看到 “Tue Jan 05 09:51:48 CST 2016” 这样的格式，可读性比较差，为了获得“2016/1/5 09:51:48”这样的格式</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> date;</span><br><span class=line>  </span><br><span class=line><span class=comment>//</span></span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestDate</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//注意：是java.util.Date;</span></span><br><span class=line>        <span class=comment>//而非 java.sql.Date，此类是给数据库访问的时候使用的</span></span><br><span class=line>        Date now= <span class=keyword>new</span> <span class="title class_">Date</span>();</span><br><span class=line>        <span class=comment>//打印当前时间</span></span><br><span class=line>        System.out.println(<span class=string>"当前时间:"</span>+now.toString());</span><br><span class=line>        <span class=comment>//getTime() 得到一个long型的整数</span></span><br><span class=line>        <span class=comment>//这个整数代表 1970.1.1 08:00:00:000，每经历一毫秒，增加1</span></span><br><span class=line>        System.out.println(<span class=string>"当前时间getTime()返回的值是："</span>+now.getTime());</span><br><span class=line>          </span><br><span class=line>        <span class=type>Date</span> <span class=variable>zero</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Date</span>(<span class=number>0</span>);</span><br><span class=line>        System.out.println(<span class=string>"用0作为构造方法，得到的日期是:"</span>+zero);</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=System-currentTimeMillis><a class=headerlink href=#System-currentTimeMillis title=System.currentTimeMillis()></a>System.currentTimeMillis()</h3><blockquote><p>当前日期的毫秒数<br>new Date().getTime() 和 System.currentTimeMillis() 是一样的<br>不过由于机器性能的原因，可能会相差几十毫秒，毕竟每执行一行代码，都是需要时间的</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> date;</span><br><span class=line>   </span><br><span class=line><span class=comment>//</span></span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestDate</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        Date now= <span class=keyword>new</span> <span class="title class_">Date</span>();</span><br><span class=line>  </span><br><span class=line>        <span class=comment>//当前日期的毫秒数</span></span><br><span class=line>        System.out.println(<span class=string>"Date.getTime() \t\t\t返回值: "</span>+now.getTime());</span><br><span class=line>        <span class=comment>//通过System.currentTimeMillis()获取当前日期的毫秒数</span></span><br><span class=line>        System.out.println(<span class=string>"System.currentTimeMillis() \t返回值: "</span>+System.currentTimeMillis());</span><br><span class=line>           </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=日期格式化><a class=headerlink href=#日期格式化 title=日期格式化></a>日期格式化</h2><h3 id=日期转字符串><a class=headerlink href=#日期转字符串 title=日期转字符串></a>日期转字符串</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> date;</span><br><span class=line> </span><br><span class=line><span class=comment>//</span></span><br><span class=line><span class=keyword>import</span> java.text.SimpleDateFormat;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestDate</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//y 代表年</span></span><br><span class=line>        <span class=comment>//M 代表月</span></span><br><span class=line>        <span class=comment>//d 代表日</span></span><br><span class=line>        <span class=comment>//H 代表24进制的小时</span></span><br><span class=line>        <span class=comment>//h 代表12进制的小时</span></span><br><span class=line>        <span class=comment>//m 代表分钟</span></span><br><span class=line>        <span class=comment>//s 代表秒</span></span><br><span class=line>        <span class=comment>//S 代表毫秒</span></span><br><span class=line>        <span class=type>SimpleDateFormat</span> <span class=variable>sdf</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">SimpleDateFormat</span>(<span class=string>"yyyy-MM-dd HH:mm:ss SSS"</span> );</span><br><span class=line>        Date d= <span class=keyword>new</span> <span class="title class_">Date</span>();</span><br><span class=line>        <span class=type>String</span> <span class=variable>str</span> <span class=operator>=</span> sdf.format(d);</span><br><span class=line>        System.out.println(<span class=string>"当前时间通过 yyyy-MM-dd HH:mm:ss SSS 格式化后的输出: "</span>+str);</span><br><span class=line>        </span><br><span class=line>        <span class=type>SimpleDateFormat</span> <span class=variable>sdf1</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">SimpleDateFormat</span>(<span class=string>"yyyy-MM-dd"</span> );</span><br><span class=line>        Date d1= <span class=keyword>new</span> <span class="title class_">Date</span>();</span><br><span class=line>        <span class=type>String</span> <span class=variable>str1</span> <span class=operator>=</span> sdf1.format(d1);</span><br><span class=line>        System.out.println(<span class=string>"当前时间通过 yyyy-MM-dd 格式化后的输出: "</span>+str1);</span><br><span class=line>        </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=字符串转日期><a class=headerlink href=#字符串转日期 title=字符串转日期></a>字符串转日期</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> date;</span><br><span class=line> </span><br><span class=line><span class=comment>//</span></span><br><span class=line><span class=keyword>import</span> java.text.ParseException;</span><br><span class=line><span class=keyword>import</span> java.text.SimpleDateFormat;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestDate</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>SimpleDateFormat</span> <span class=variable>sdf</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">SimpleDateFormat</span>(<span class=string>"yyyy/MM/dd HH:mm:ss"</span> );</span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>str</span> <span class=operator>=</span> <span class=string>"2016/1/5 12:12:12"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=type>Date</span> <span class=variable>d</span> <span class=operator>=</span> sdf.parse(str);</span><br><span class=line>            System.out.printf(<span class=string>"字符串 %s 通过格式  yyyy/MM/dd HH:mm:ss %n转换为日期对象: %s"</span>,str,d.toString());</span><br><span class=line>        } <span class=keyword>catch</span> (ParseException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=Calendar><a class=headerlink href=#Calendar title=Calendar></a>Calendar</h2><h3 id=Calendar与Date进行转换><a class=headerlink href=#Calendar与Date进行转换 title=Calendar与Date进行转换></a>Calendar与Date进行转换</h3><blockquote><p>采用单例模式获取日历对象Calendar.getInstance();</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> date;</span><br><span class=line> </span><br><span class=line><span class=comment>//</span></span><br><span class=line><span class=keyword>import</span> java.util.Calendar;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestDate</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//采用单例模式获取日历对象Calendar.getInstance();</span></span><br><span class=line>        <span class=type>Calendar</span> <span class=variable>c</span> <span class=operator>=</span> Calendar.getInstance();</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//通过日历对象得到日期对象</span></span><br><span class=line>        <span class=type>Date</span> <span class=variable>d</span> <span class=operator>=</span> c.getTime();</span><br><span class=line> </span><br><span class=line>        <span class=type>Date</span> <span class=variable>d2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Date</span>(<span class=number>0</span>);</span><br><span class=line>        c.setTime(d2); <span class=comment>//把这个日历，调成日期 : 1970.1.1 08:00:00</span></span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=翻日历><a class=headerlink href=#翻日历 title=翻日历></a>翻日历</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> date;</span><br><span class=line></span><br><span class=line><span class=keyword>import</span> java.text.SimpleDateFormat;</span><br><span class=line><span class=comment>//</span></span><br><span class=line><span class=keyword>import</span> java.util.Calendar;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestDate</span> {</span><br><span class=line></span><br><span class=line>	<span class=keyword>private</span> <span class=keyword>static</span> <span class=type>SimpleDateFormat</span> <span class=variable>sdf</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">SimpleDateFormat</span>(<span class=string>"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class=line></span><br><span class=line>	<span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>		<span class=type>Calendar</span> <span class=variable>c</span> <span class=operator>=</span> Calendar.getInstance();</span><br><span class=line>		<span class=type>Date</span> <span class=variable>now</span> <span class=operator>=</span> c.getTime();</span><br><span class=line>		<span class=comment>// 当前日期</span></span><br><span class=line>		System.out.println(<span class=string>"当前日期：\t"</span> + format(c.getTime()));</span><br><span class=line></span><br><span class=line>		<span class=comment>// 下个月的今天</span></span><br><span class=line>		c.setTime(now);</span><br><span class=line>		c.add(Calendar.MONTH, <span class=number>1</span>);</span><br><span class=line>		System.out.println(<span class=string>"下个月的今天:\t"</span> +format(c.getTime()));</span><br><span class=line></span><br><span class=line>		<span class=comment>// 去年的今天</span></span><br><span class=line>		c.setTime(now);</span><br><span class=line>		c.add(Calendar.YEAR, -<span class=number>1</span>);</span><br><span class=line>		System.out.println(<span class=string>"去年的今天:\t"</span> +format(c.getTime()));</span><br><span class=line></span><br><span class=line>		<span class=comment>// 上个月的第三天</span></span><br><span class=line>		c.setTime(now);</span><br><span class=line>		c.add(Calendar.MONTH, -<span class=number>1</span>);</span><br><span class=line>		c.set(Calendar.DATE, <span class=number>3</span>);</span><br><span class=line>		System.out.println(<span class=string>"上个月的第三天:\t"</span> +format(c.getTime()));</span><br><span class=line></span><br><span class=line>	}</span><br><span class=line></span><br><span class=line>	<span class=keyword>private</span> <span class=keyword>static</span> String <span class="title function_">format</span><span class=params>(Date time)</span> {</span><br><span class=line>		<span class=keyword>return</span> sdf.format(time);</span><br><span class=line>	}</span><br><span class=line>}</span><br></pre></table></figure><h1 id=异常处理><a class=headerlink href=#异常处理 title=异常处理></a>异常处理</h1><h2 id=什么是异常><a class=headerlink href=#什么是异常 title=什么是异常></a>什么是异常</h2><h3 id=文件不存在异常><a class=headerlink href=#文件不存在异常 title=文件不存在异常></a>文件不存在异常</h3><blockquote><p>比如要打开d盘的LOL.exe文件，这个文件是有可能不存在的<br>Java中通过 new FileInputStream(f) 试图打开某文件，就有可能抛出<code>文件不存在异常FileNotFoundException</code><br>如果不处理该异常，就会有编译错误。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> exception;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestException</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        File f= <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOL.exe"</span>);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//试图打开文件LOL.exe，会抛出FileNotFoundException，如果不处理该异常，就会有编译错误</span></span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=异常处理-1><a class=headerlink href=#异常处理-1 title=异常处理></a>异常处理</h2><h3 id=try-catch><a title="try catch" class=headerlink href=#try-catch></a>try catch</h3><blockquote><ol><li>将可能抛出FileNotFoundException <code>文件不存在异常</code>的代码放在try里<li>如果文件存在，就会顺序往下执行，并且不执行catch块中的代码<li>如果文件不存在，try 里的代码会立即终止，程序流程会运行到对应的catch块中<li>e.printStackTrace(); 会打印出方法的调用痕迹，如此例，会打印出异常开始于TestException的第16行，这样就便于定位和分析到底哪里出了异常</ol></blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> exception;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.FileNotFoundException;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestException</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        File f= <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOL.exe"</span>);</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>try</span>{</span><br><span class=line>            System.out.println(<span class=string>"试图打开 d:/LOL.exe"</span>);</span><br><span class=line>            <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            System.out.println(<span class=string>"成功打开"</span>);</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>catch</span>(FileNotFoundException e){</span><br><span class=line>            System.out.println(<span class=string>"d:/LOL.exe不存在"</span>);</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=使用异常的父类进行catch><a class=headerlink href=#使用异常的父类进行catch title=使用异常的父类进行catch></a>使用异常的父类进行catch</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> exception;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.FileNotFoundException;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestException</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        File f= <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOL.exe"</span>);</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>try</span>{</span><br><span class=line>            System.out.println(<span class=string>"试图打开 d:/LOL.exe"</span>);</span><br><span class=line>            <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            System.out.println(<span class=string>"成功打开"</span>);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>catch</span>(Exception e){</span><br><span class=line>            System.out.println(<span class=string>"d:/LOL.exe不存在"</span>);</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=多异常捕捉办法1><a class=headerlink href=#多异常捕捉办法1 title=多异常捕捉办法1></a>多异常捕捉办法1</h3><blockquote><p>有的时候一段代码会抛出多种异常，比如</blockquote><p><code>new FileInputStream(f); Date d = sdf.parse("2016-06-03");</code><blockquote><p>这段代码，会抛出 文件不存在异常 FileNotFoundException 和 解析异常ParseException<br>解决办法之一是分别进行catch</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=keyword>catch</span> (FileNotFoundException e) {</span><br><span class=line>    System.out.println(<span class=string>"d:/LOL.exe不存在"</span>);</span><br><span class=line>    e.printStackTrace();</span><br><span class=line>} <span class=keyword>catch</span> (ParseException e) {</span><br><span class=line>    System.out.println(<span class=string>"日期格式解析错误"</span>);</span><br><span class=line>    e.printStackTrace();</span><br><span class=line>}</span><br></pre></table></figure><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> exception;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.FileNotFoundException;</span><br><span class=line><span class=keyword>import</span> java.text.ParseException;</span><br><span class=line><span class=keyword>import</span> java.text.SimpleDateFormat;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestException</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOL.exe"</span>);</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            System.out.println(<span class=string>"试图打开 d:/LOL.exe"</span>);</span><br><span class=line>            <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            System.out.println(<span class=string>"成功打开"</span>);</span><br><span class=line>            <span class=type>SimpleDateFormat</span> <span class=variable>sdf</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">SimpleDateFormat</span>(<span class=string>"yyyy-MM-dd"</span>);</span><br><span class=line>            <span class=type>Date</span> <span class=variable>d</span> <span class=operator>=</span> sdf.parse(<span class=string>"2016-06-03"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (FileNotFoundException e) {</span><br><span class=line>            System.out.println(<span class=string>"d:/LOL.exe不存在"</span>);</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        } <span class=keyword>catch</span> (ParseException e) {</span><br><span class=line>            System.out.println(<span class=string>"日期格式解析错误"</span>);</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=多异常捕捉办法2><a class=headerlink href=#多异常捕捉办法2 title=多异常捕捉办法2></a>多异常捕捉办法2</h3><blockquote><p>另一个种办法是把多个异常，放在一个catch里统一捕捉</blockquote><p><code>catch (FileNotFoundException | ParseException e) {</code><blockquote><p>这种方式从 JDK7开始支持，好处是捕捉的代码更紧凑，不足之处是，一旦发生异常，不能确定到底是哪种异常，需要通过instanceof 进行判断具体的异常类型</blockquote><p><code>if (e instanceof FileNotFoundException) 	System.out.println("d:/LOL.exe不存在"); if (e instanceof ParseException) 	System.out.println("日期格式解析错误");</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> exception;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.FileNotFoundException;</span><br><span class=line><span class=keyword>import</span> java.text.ParseException;</span><br><span class=line><span class=keyword>import</span> java.text.SimpleDateFormat;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestException</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOL.exe"</span>);</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            System.out.println(<span class=string>"试图打开 d:/LOL.exe"</span>);</span><br><span class=line>            <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            System.out.println(<span class=string>"成功打开"</span>);</span><br><span class=line>            <span class=type>SimpleDateFormat</span> <span class=variable>sdf</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">SimpleDateFormat</span>(<span class=string>"yyyy-MM-dd"</span>);</span><br><span class=line>            <span class=type>Date</span> <span class=variable>d</span> <span class=operator>=</span> sdf.parse(<span class=string>"2016-06-03"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (FileNotFoundException | ParseException e) {</span><br><span class=line>            <span class=keyword>if</span> (e <span class=keyword>instanceof</span> FileNotFoundException)</span><br><span class=line>                System.out.println(<span class=string>"d:/LOL.exe不存在"</span>);</span><br><span class=line>            <span class=keyword>if</span> (e <span class=keyword>instanceof</span> ParseException)</span><br><span class=line>                System.out.println(<span class=string>"日期格式解析错误"</span>);</span><br><span class=line> </span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=finally><a class=headerlink href=#finally title=finally></a>finally</h3><blockquote><p>无论是否出现异常，finally中的代码都会被执行</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> exception;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.FileNotFoundException;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestException</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        File f= <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOL.exe"</span>);</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>try</span>{</span><br><span class=line>            System.out.println(<span class=string>"试图打开 d:/LOL.exe"</span>);</span><br><span class=line>            <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            System.out.println(<span class=string>"成功打开"</span>);</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>catch</span>(FileNotFoundException e){</span><br><span class=line>            System.out.println(<span class=string>"d:/LOL.exe不存在"</span>);</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>finally</span>{</span><br><span class=line>            System.out.println(<span class=string>"无论文件是否存在， 都会执行的代码"</span>);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=throws><a class=headerlink href=#throws title=throws></a>throws</h3><blockquote><p>考虑如下情况：<br>主方法调用method1<br>method1调用method2<br>method2中打开文件</blockquote><blockquote><p>method2中需要进行异常处理<br>但是method2<code>不打算处理</code>，而是把这个异常通过<code>throws抛出去</code><br>那么method1就会<code>接到该异常</code>。 处理办法也是两种，要么是try catch处理掉，要么也是<code>抛出去</code>。<br>method1选择本地try catch住 一旦try catch住了，就相当于把这个异常消化掉了，主方法在调用method1的时候，就不需要进行异常处理了</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> exception;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.FileNotFoundException;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestException</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        method1();</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">method1</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            method2();</span><br><span class=line>        } <span class=keyword>catch</span> (FileNotFoundException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">method2</span><span class=params>()</span> <span class=keyword>throws</span> FileNotFoundException {</span><br><span class=line> </span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOL.exe"</span>);</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"试图打开 d:/LOL.exe"</span>);</span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>        System.out.println(<span class=string>"成功打开"</span>);</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=throw和throws的区别><a class=headerlink href=#throw和throws的区别 title=throw和throws的区别></a>throw和throws的区别</h3><blockquote><p>throws与throw这两个关键字接近，不过意义不一样，有如下区别：</blockquote><ol><li>throws 出现在方法声明上，而throw通常都出现在方法体内。<li>throws 表示出现异常的一种可能性，并不一定会发生这些异常；throw则是抛出了异常，执行throw则一定抛出了某个异常对象。</ol><h2 id=异常分类><a class=headerlink href=#异常分类 title=异常分类></a>异常分类</h2><h3 id=可查异常><a class=headerlink href=#可查异常 title=可查异常></a>可查异常</h3><blockquote><p>可查异常： CheckedException<br>可查异常即必须进行处理的异常，要么try catch住,要么往外抛，谁调用，谁处理，比如 FileNotFoundException<br>如果不处理，编译器，就不让你通过</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> exception;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.FileNotFoundException;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestException</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        File f= <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOL.exe"</span>);</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>try</span>{</span><br><span class=line>            System.out.println(<span class=string>"试图打开 d:/LOL.exe"</span>);</span><br><span class=line>            <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            System.out.println(<span class=string>"成功打开"</span>);</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>catch</span>(FileNotFoundException e){</span><br><span class=line>            System.out.println(<span class=string>"d:/LOL.exe不存在"</span>);</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=运行时异常><a class=headerlink href=#运行时异常 title=运行时异常></a>运行时异常</h3><blockquote><p>运行时异常RuntimeException指： <code>不是必须进行try catch的异常</code>。</blockquote><blockquote><p><code>常见运行时异常: </code></blockquote><ul><li>除数不能为0异常:ArithmeticException<li>下标越界异常:ArrayIndexOutOfBoundsException<li>空指针异常:NullPointerException</ul><blockquote><p>在编写代码的时候，依然可以使用try catch throws进行处理，与可查异常不同之处在于，<code>即便不进行try catch，也不会有编译错误</code><br>Java之所以会设计运行时异常的原因之一，是因为下标越界，空指针这些运行时异常<code>太过于普遍</code>，如果都需要进行捕捉，代码的可读性就会变得很糟糕。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> exception;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestException</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//任何除数不能为0:ArithmeticException</span></span><br><span class=line>        <span class=type>int</span> <span class=variable>k</span> <span class=operator>=</span> <span class=number>5</span>/<span class=number>0</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//下标越界异常：ArrayIndexOutOfBoundsException</span></span><br><span class=line>        <span class=type>int</span> j[] = <span class=keyword>new</span> <span class="title class_">int</span>[<span class=number>5</span>];</span><br><span class=line>        j[<span class=number>10</span>] = <span class=number>10</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//空指针异常：NullPointerException</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>str</span> <span class=operator>=</span> <span class=literal>null</span>;</span><br><span class=line>        str.length();</span><br><span class=line>   }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=错误><a class=headerlink href=#错误 title=错误></a>错误</h3><blockquote><p>错误Error，指的是<code>系统级别的异常</code>，通常是内存用光了<br>在<code>默认设置下</code>，一般java程序启动的时候，最大可以使用16m的内存<br>如例不停的给StringBuffer追加字符，很快就把内存使用光了。抛出<code>OutOfMemoryError</code><br>与运行时异常一样，错误也是不要求强制捕捉的。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> exception;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestException</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>     </span><br><span class=line>        <span class=type>StringBuffer</span> <span class=variable>sb</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">StringBuffer</span>();</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; Integer.MAX_VALUE; i++) {</span><br><span class=line>            sb.append(<span class=string>'a'</span>);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=三种分类><a class=headerlink href=#三种分类 title=三种分类></a>三种分类</h3><blockquote><p>总体上异常分三类：</blockquote><ol><li>错误<li>运行时异常<li>可查异常</ol><p><img src=http://stepimagewm.how2j.cn/2412.png><h2 id=Throwable><a class=headerlink href=#Throwable title=Throwable></a>Throwable</h2><blockquote><p>Throwable是类，Exception和Error都继承了该类<br>所以在捕捉的时候，也可以使用Throwable进行捕捉<br>如图： 异常分<code>Error</code>和<code>Exception</code><br>Exception里又分<code>运行时异常</code>和<code>可查异常</code>。</blockquote><p><img src=http://stepimagewm.how2j.cn/742.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> exception;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestException</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOL.exe"</span>);</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            <span class=comment>//使用Throwable进行异常捕捉</span></span><br><span class=line>        } <span class=keyword>catch</span> (Throwable t) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            t.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=自定义异常><a class=headerlink href=#自定义异常 title=自定义异常></a>自定义异常</h2><h3 id=创建自定义异常><a class=headerlink href=#创建自定义异常 title=创建自定义异常></a>创建自定义异常</h3><blockquote><p>一个英雄攻击另一个英雄的时候，如果发现另一个英雄已经挂了，就会抛出EnemyHeroIsDeadException<br>创建一个类EnemyHeroIsDeadException，并继承Exception<br>提供两个构造方法</blockquote><ol><li>无参的构造方法<li>带参的构造方法，并调用父类的对应的构造方法</ol><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">EnemyHeroIsDeadException</span> <span class=keyword>extends</span> <span class="title class_">Exception</span>{</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">EnemyHeroIsDeadException</span><span class=params>()</span>{</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">EnemyHeroIsDeadException</span><span class=params>(String msg)</span>{</span><br><span class=line>        <span class=built_in>super</span>(msg);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=抛出自定义异常><a class=headerlink href=#抛出自定义异常 title=抛出自定义异常></a>抛出自定义异常</h3><blockquote><p>在Hero的attack方法中，当发现敌方英雄的血量为0的时候，抛出该异常</blockquote><ol><li>创建一个EnemyHeroIsDeadException实例<li>通过<code>throw</code>抛出该异常<li>当前方法通过<code>throws</code>抛出该异常</ol><blockquote><p>在外部调用attack方法的时候，就需要进行捕捉，并且捕捉的时候，可以通过e.getMessage() 获取当时出错的具体原因。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>protected</span> <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attackHero</span><span class=params>(Hero h)</span> <span class=keyword>throws</span> EnemyHeroIsDeadException{</span><br><span class=line>        <span class=keyword>if</span>(h.hp == <span class=number>0</span>){</span><br><span class=line>            <span class=keyword>throw</span> <span class=keyword>new</span> <span class="title class_">EnemyHeroIsDeadException</span>(h.name + <span class=string>" 已经挂了,不需要施放技能"</span> );</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>return</span> name;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>class</span> <span class="title class_">EnemyHeroIsDeadException</span> <span class=keyword>extends</span> <span class="title class_">Exception</span>{</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>public</span> <span class="title function_">EnemyHeroIsDeadException</span><span class=params>()</span>{</span><br><span class=line>             </span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>public</span> <span class="title function_">EnemyHeroIsDeadException</span><span class=params>(String msg)</span>{</span><br><span class=line>            <span class=built_in>super</span>(msg);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>garen</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        garen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        garen.hp = <span class=number>616</span>;</span><br><span class=line> </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span>  <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>        teemo.hp = <span class=number>0</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            garen.attackHero(teemo);</span><br><span class=line>             </span><br><span class=line>        } <span class=keyword>catch</span> (EnemyHeroIsDeadException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            System.out.println(<span class=string>"异常的具体原因:"</span>+e.getMessage());</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h1 id=I-O><a class=headerlink href=#I-O title=I/O></a>I/O</h1><h2 id=文件对象><a class=headerlink href=#文件对象 title=文件对象></a>文件对象</h2><h3 id=创建一个文件对象><a class=headerlink href=#创建一个文件对象 title=创建一个文件对象></a>创建一个文件对象</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> file;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestFile</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>// 绝对路径</span></span><br><span class=line>        <span class=type>File</span> <span class=variable>f1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOLFolder"</span>);</span><br><span class=line>        System.out.println(<span class=string>"f1的绝对路径："</span> + f1.getAbsolutePath());</span><br><span class=line>        <span class=comment>// 相对路径,相对于工作目录，如果在eclipse中，就是项目目录</span></span><br><span class=line>        <span class=type>File</span> <span class=variable>f2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"LOL.exe"</span>);</span><br><span class=line>        System.out.println(<span class=string>"f2的绝对路径："</span> + f2.getAbsolutePath());</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 把f1作为父目录创建文件对象</span></span><br><span class=line>        <span class=type>File</span> <span class=variable>f3</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(f1, <span class=string>"LOL.exe"</span>);</span><br><span class=line>  </span><br><span class=line>        System.out.println(<span class=string>"f3的绝对路径："</span> + f3.getAbsolutePath());</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=文件常用方法><a class=headerlink href=#文件常用方法 title=文件常用方法></a>文件常用方法</h3><blockquote><p>注意1： 需要在D:\LOLFolder确实存在一个LOL.exe,才可以看到对应的文件长度、修改时间等信息</blockquote><blockquote><p>注意2： renameTo方法用于对物理文件名称进行修改，但是并不会修改File对象的name属性。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> file;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestFile</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOLFolder/LOL.exe"</span>);</span><br><span class=line>        System.out.println(<span class=string>"当前文件是："</span> +f);</span><br><span class=line>        <span class=comment>//文件是否存在</span></span><br><span class=line>        System.out.println(<span class=string>"判断是否存在："</span>+f.exists());</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//是否是文件夹</span></span><br><span class=line>        System.out.println(<span class=string>"判断是否是文件夹："</span>+f.isDirectory());</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//是否是文件（非文件夹）</span></span><br><span class=line>        System.out.println(<span class=string>"判断是否是文件："</span>+f.isFile());</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//文件长度</span></span><br><span class=line>        System.out.println(<span class=string>"获取文件的长度："</span>+f.length());</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//文件最后修改时间</span></span><br><span class=line>        <span class=type>long</span> <span class=variable>time</span> <span class=operator>=</span> f.lastModified();</span><br><span class=line>        <span class=type>Date</span> <span class=variable>d</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Date</span>(time);</span><br><span class=line>        System.out.println(<span class=string>"获取文件的最后修改时间："</span>+d);</span><br><span class=line>        <span class=comment>//设置文件修改时间为1970.1.1 08:00:00</span></span><br><span class=line>        f.setLastModified(<span class=number>0</span>);</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//文件重命名</span></span><br><span class=line>        <span class=type>File</span> <span class=variable>f2</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOLFolder/DOTA.exe"</span>);</span><br><span class=line>        f.renameTo(f2);</span><br><span class=line>        System.out.println(<span class=string>"把LOL.exe改名成了DOTA.exe"</span>);</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"注意： 需要在D:\\LOLFolder确实存在一个LOL.exe,\r\n才可以看到对应的文件长度、修改时间等信息"</span>);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> file;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestFile</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> <span class=keyword>throws</span> IOException {</span><br><span class=line>  </span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/LOLFolder/skin/garen.ski"</span>);</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 以字符串数组的形式，返回当前文件夹下的所有文件（不包含子文件及子文件夹）</span></span><br><span class=line>        f.list();</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 以文件数组的形式，返回当前文件夹下的所有文件（不包含子文件及子文件夹）</span></span><br><span class=line>        File[]fs= f.listFiles();</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 以字符串形式返回获取所在文件夹</span></span><br><span class=line>        f.getParent();</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 以文件形式返回获取所在文件夹</span></span><br><span class=line>        f.getParentFile();</span><br><span class=line>        <span class=comment>// 创建文件夹，如果父文件夹skin不存在，创建就无效</span></span><br><span class=line>        f.mkdir();</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 创建文件夹，如果父文件夹skin不存在，就会创建父文件夹</span></span><br><span class=line>        f.mkdirs();</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 创建一个空文件,如果父文件夹skin不存在，就会抛出异常</span></span><br><span class=line>        f.createNewFile();</span><br><span class=line>        <span class=comment>// 所以创建一个空文件之前，通常都会创建父目录</span></span><br><span class=line>        f.getParentFile().mkdirs();</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 列出所有的盘符c: d: e: 等等</span></span><br><span class=line>        f.listRoots();</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 刪除文件</span></span><br><span class=line>        f.delete();</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// JVM结束的时候，刪除文件，常用于临时文件的删除</span></span><br><span class=line>        f.deleteOnExit();</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=什么是流><a class=headerlink href=#什么是流 title=什么是流></a>什么是流</h3><blockquote><p>当不同的介质之间有数据交互的时候，JAVA就使用流来实现。<br>数据源可以是文件，还可以是数据库，网络甚至是其他的程序</blockquote><blockquote><p>比如读取文件的数据到程序中，站在程序的角度来看，就叫做输入流<br>输入流： InputStream<br>输出流：OutputStream</blockquote><p><img src=http://stepimagewm.how2j.cn/759.png><h3 id=文件输入流><a class=headerlink href=#文件输入流 title=文件输入流></a>文件输入流</h3><blockquote><p>如下代码，就建立了一个文件输入流，这个流可以用来把数据从硬盘的文件，读取到JVM(内存)。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol.txt"</span>);</span><br><span class=line>            <span class=comment>// 创建基于文件的输入流</span></span><br><span class=line>            <span class=type>FileInputStream</span> <span class=variable>fis</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            <span class=comment>// 通过这个输入流，就可以把数据从硬盘，读取到Java的虚拟机中来，也就是读取到内存中</span></span><br><span class=line> </span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=字节流><a class=headerlink href=#字节流 title=字节流></a>字节流</h2><blockquote><p>InputStream字节输入流<br>OutputStream字节输出流<br>用于以字节的形式读取和写入数据</blockquote><h3 id=ASCII码><a class=headerlink href=#ASCII码 title=ASCII码></a>ASCII码</h3><blockquote><p>所有的数据存放在计算机中都是以数字的形式存放的。 所以字母就需要转换为数字才能够存放。</blockquote><blockquote><p>比如A就对应的数字65，a对应的数字97. 不同的字母和符号对应不同的数字，就是一张码表。</blockquote><blockquote><p>ASCII是这样的一种码表。 只包含简单的英文字母，符号，数字等等。 不包含中文，德文，俄语等复杂的。</blockquote><blockquote><p>示例中列出了可见的ASCII码以及对应的十进制和十六进制数字，不可见的暂未列出。</blockquote><table><thead><tr><th align=center>字符<th align=center>十进制数字<th align=center>十六进制数字<tbody><tr><td align=center>!<td align=center>33<td align=center>21<tr><td align=center>“<td align=center>34<td align=center>22<tr><td align=center>#<td align=center>35<td align=center>23<tr><td align=center>$<td align=center>36<td align=center>24<tr><td align=center>%<td align=center>37<td align=center>25<tr><td align=center>&<td align=center>38<td align=center>26<tr><td align=center>‘<td align=center>39<td align=center>27<tr><td align=center>(<td align=center>40<td align=center>28<tr><td align=center>)<td align=center>41<td align=center>29<tr><td align=center>*<td align=center>42<td align=center>2A<tr><td align=center>+<td align=center>43<td align=center>2B<tr><td align=center>,<td align=center>44<td align=center>2C<tr><td align=center>-<td align=center>45<td align=center>2D<tr><td align=center>.<td align=center>46<td align=center>2E<tr><td align=center>/<td align=center>47<td align=center>2F<tr><td align=center>0<td align=center>48<td align=center>30<tr><td align=center>1<td align=center>49<td align=center>31<tr><td align=center>2<td align=center>50<td align=center>32<tr><td align=center>3<td align=center>51<td align=center>33<tr><td align=center>4<td align=center>52<td align=center>34<tr><td align=center>5<td align=center>53<td align=center>35<tr><td align=center>6<td align=center>54<td align=center>36<tr><td align=center>7<td align=center>55<td align=center>37<tr><td align=center>8<td align=center>56<td align=center>38<tr><td align=center>9<td align=center>57<td align=center>39<tr><td align=center>:<td align=center>58<td align=center>3A<tr><td align=center>;<td align=center>59<td align=center>3B<tr><td align=center>&lt;<td align=center>60<td align=center>3C<tr><td align=center>=<td align=center>61<td align=center>3D<tr><td align=center>><td align=center>62<td align=center>3E<tr><td align=center>@<td align=center>64<td align=center>40<tr><td align=center>A<td align=center>65<td align=center>41<tr><td align=center>B<td align=center>66<td align=center>42<tr><td align=center>C<td align=center>67<td align=center>43<tr><td align=center>D<td align=center>68<td align=center>44<tr><td align=center>E<td align=center>69<td align=center>45<tr><td align=center>F<td align=center>70<td align=center>46<tr><td align=center>G<td align=center>71<td align=center>47<tr><td align=center>H<td align=center>72<td align=center>48<tr><td align=center>I<td align=center>73<td align=center>49<tr><td align=center>J<td align=center>74<td align=center>4A<tr><td align=center>K<td align=center>75<td align=center>4B<tr><td align=center>L<td align=center>76<td align=center>4C<tr><td align=center>M<td align=center>77<td align=center>4D<tr><td align=center>N<td align=center>78<td align=center>4E<tr><td align=center>O<td align=center>79<td align=center>4F<tr><td align=center>P<td align=center>80<td align=center>50<tr><td align=center>Q<td align=center>81<td align=center>51<tr><td align=center>R<td align=center>82<td align=center>52<tr><td align=center>S<td align=center>83<td align=center>53<tr><td align=center>T<td align=center>84<td align=center>54<tr><td align=center>U<td align=center>85<td align=center>55<tr><td align=center>V<td align=center>86<td align=center>56<tr><td align=center>W<td align=center>87<td align=center>57<tr><td align=center>X<td align=center>88<td align=center>58<tr><td align=center>Y<td align=center>89<td align=center>59<tr><td align=center>Z<td align=center>90<td align=center>5A<tr><td align=center>[<td align=center>91<td align=center>5B<tr><td align=center>\<td align=center>92<td align=center>5C<tr><td align=center>]<td align=center>93<td align=center>5D<tr><td align=center>^<td align=center>94<td align=center>5E<tr><td align=center>_<td align=center>95<td align=center>5F<tr><td align=center>`<td align=center>96<td align=center>60<tr><td align=center>a<td align=center>97<td align=center>61<tr><td align=center>b<td align=center>98<td align=center>62<tr><td align=center>c<td align=center>99<td align=center>63<tr><td align=center>d<td align=center>100<td align=center>64<tr><td align=center>e<td align=center>101<td align=center>65<tr><td align=center>f<td align=center>102<td align=center>66<tr><td align=center>g<td align=center>103<td align=center>67<tr><td align=center>h<td align=center>104<td align=center>68<tr><td align=center>i<td align=center>105<td align=center>69<tr><td align=center>j<td align=center>106<td align=center>6A<tr><td align=center>k<td align=center>107<td align=center>6B<tr><td align=center>l<td align=center>108<td align=center>6C<tr><td align=center>m<td align=center>109<td align=center>6D<tr><td align=center>n<td align=center>110<td align=center>6E<tr><td align=center>o<td align=center>111<td align=center>6F<tr><td align=center>p<td align=center>112<td align=center>70<tr><td align=center>q<td align=center>113<td align=center>71<tr><td align=center>r<td align=center>114<td align=center>72<tr><td align=center>s<td align=center>115<td align=center>73<tr><td align=center>t<td align=center>116<td align=center>74<tr><td align=center>u<td align=center>117<td align=center>75<tr><td align=center>v<td align=center>118<td align=center>76<tr><td align=center>w<td align=center>119<td align=center>77<tr><td align=center>x<td align=center>120<td align=center>78<tr><td align=center>y<td align=center>121<td align=center>79<tr><td align=center>z<td align=center>122<td align=center>7A<tr><td align=center>{<td align=center>123<td align=center>7B<tr><td align=center>|<td align=center>124<td align=center>7C<tr><td align=center>}<td align=center>125<td align=center>7D<tr><td align=center>~<td align=center>126<td align=center>7E</table><h3 id=以字节流的形式读取文件内容><a class=headerlink href=#以字节流的形式读取文件内容 title=以字节流的形式读取文件内容></a>以字节流的形式读取文件内容</h3><blockquote><p>InputStream是字节输入流，同时也是抽象类，只提供方法声明，不提供方法的具体实现。<br>FileInputStream 是InputStream子类，以FileInputStream 为例进行文件读取</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=comment>//准备文件lol.txt其中的内容是AB，对应的ASCII分别是65 66</span></span><br><span class=line>            <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol.txt"</span>);</span><br><span class=line>            <span class=comment>//创建基于文件的输入流</span></span><br><span class=line>            <span class=type>FileInputStream</span> <span class=variable>fis</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            <span class=comment>//创建字节数组，其长度就是文件的长度</span></span><br><span class=line>            <span class=type>byte</span>[] all =<span class=keyword>new</span> <span class="title class_">byte</span>[(<span class=type>int</span>) f.length()];</span><br><span class=line>            <span class=comment>//以字节流的形式读取文件所有内容</span></span><br><span class=line>            fis.read(all);</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>byte</span> b : all) {</span><br><span class=line>                <span class=comment>//打印出来是65 66</span></span><br><span class=line>                System.out.println(b);</span><br><span class=line>            }</span><br><span class=line>             </span><br><span class=line>            <span class=comment>//每次使用完流，都应该进行关闭</span></span><br><span class=line>            fis.close();</span><br><span class=line>              </span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=以字节流的形式向文件写入数据><a class=headerlink href=#以字节流的形式向文件写入数据 title=以字节流的形式向文件写入数据></a>以字节流的形式向文件写入数据</h3><blockquote><p>OutputStream是字节输出流，同时也是抽象类，只提供方法声明，不提供方法的具体实现。<br>FileOutputStream 是OutputStream子类，以FileOutputStream 为例向文件写出数据</blockquote><blockquote><p>注: 如果文件d:/lol2.txt不存在，写出操作会自动创建该文件。<br>但是如果是文件 d:/xyz/lol2.txt，而目录xyz又不存在，会抛出异常。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileOutputStream;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=comment>// 准备文件lol2.txt其中的内容是空的</span></span><br><span class=line>            <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol2.txt"</span>);</span><br><span class=line>            <span class=comment>// 准备长度是2的字节数组，用88,89初始化，其对应的字符分别是X,Y</span></span><br><span class=line>            <span class=type>byte</span> data[] = { <span class=number>88</span>, <span class=number>89</span> };</span><br><span class=line> </span><br><span class=line>            <span class=comment>// 创建基于文件的输出流</span></span><br><span class=line>            <span class=type>FileOutputStream</span> <span class=variable>fos</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileOutputStream</span>(f);</span><br><span class=line>            <span class=comment>// 把数据写入到输出流</span></span><br><span class=line>            fos.write(data);</span><br><span class=line>            <span class=comment>// 关闭输出流</span></span><br><span class=line>            fos.close();</span><br><span class=line>             </span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=关闭流的方式><a class=headerlink href=#关闭流的方式 title=关闭流的方式></a>关闭流的方式</h2><h3 id=在try中关闭><a class=headerlink href=#在try中关闭 title=在try中关闭></a>在try中关闭</h3><blockquote><p>在try的作用域里关闭文件输入流，在前面的示例中都是使用这种方式，这样做有一个弊端；<br>如果文件不存在，或者读取的时候出现问题而抛出异常，那么就不会执行这一行关闭流的代码，存在巨大的资源占用隐患。 不推荐使用</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol.txt"</span>);</span><br><span class=line>            <span class=type>FileInputStream</span> <span class=variable>fis</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            <span class=type>byte</span>[] all = <span class=keyword>new</span> <span class="title class_">byte</span>[(<span class=type>int</span>) f.length()];</span><br><span class=line>            fis.read(all);</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>byte</span> b : all) {</span><br><span class=line>                System.out.println(b);</span><br><span class=line>            }</span><br><span class=line>            <span class=comment>// 在try 里关闭流</span></span><br><span class=line>            fis.close();</span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=在finally中关闭><a class=headerlink href=#在finally中关闭 title=在finally中关闭></a>在finally中关闭</h3><blockquote><p>这是标准的关闭流的方式</blockquote><ol><li>首先把流的引用声明在try的外面，如果声明在try里面，其作用域无法抵达finally.<li>在finally关闭之前，要先判断该引用是否为空<li>关闭的时候，需要再一次进行try catch处理</ol><blockquote><p>这是标准的严谨的关闭流的方式，但是看上去很繁琐，所以写不重要的或者测试代码的时候，都会采用上面的有隐患try的方式，因为不麻烦。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol.txt"</span>);</span><br><span class=line>        <span class=type>FileInputStream</span> <span class=variable>fis</span> <span class=operator>=</span> <span class=literal>null</span>;</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            fis = <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            <span class=type>byte</span>[] all = <span class=keyword>new</span> <span class="title class_">byte</span>[(<span class=type>int</span>) f.length()];</span><br><span class=line>            fis.read(all);</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>byte</span> b : all) {</span><br><span class=line>                System.out.println(b);</span><br><span class=line>            }</span><br><span class=line> </span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        } <span class=keyword>finally</span> {</span><br><span class=line>            <span class=comment>// 在finally 里关闭流</span></span><br><span class=line>            <span class=keyword>if</span> (<span class=literal>null</span> != fis)</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line> </span><br><span class=line>                    fis.close();</span><br><span class=line>                } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>                    <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                }</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=使用try-的方式><a class=headerlink href=#使用try-的方式 title=使用try()的方式></a>使用try()的方式</h3><blockquote><p>把流定义在try()里,try,catch或者finally结束的时候，会自动关闭<br>这种编写代码的方式叫做 try-with-resources， 这是从JDK7开始支持的技术</blockquote><blockquote><p>所有的流，都实现了一个接口叫做 AutoCloseable，任何类实现了这个接口，都可以在try()中进行实例化。 并且在try, catch, finally结束的时候自动关闭，回收相关资源。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol.txt"</span>);</span><br><span class=line>  </span><br><span class=line>        <span class=comment>//把流定义在try()里,try,catch或者finally结束的时候，会自动关闭</span></span><br><span class=line>        <span class=keyword>try</span> (<span class=type>FileInputStream</span> <span class=variable>fis</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f)) {</span><br><span class=line>            <span class=type>byte</span>[] all = <span class=keyword>new</span> <span class="title class_">byte</span>[(<span class=type>int</span>) f.length()];</span><br><span class=line>            fis.read(all);</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>byte</span> b : all) {</span><br><span class=line>                System.out.println(b);</span><br><span class=line>            }</span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=字符流-READER-WRITER><a title="字符流 READER/WRITER" class=headerlink href=#字符流-READER-WRITER></a>字符流 READER/WRITER</h2><blockquote><p>Reader字符输入流<br>Writer字符输出流<br>专门用于字符的形式读取和写入数据</blockquote><h3 id=使用字符流读取文件><a class=headerlink href=#使用字符流读取文件 title=使用字符流读取文件></a>使用字符流读取文件</h3><blockquote><p>FileReader 是Reader子类，以FileReader 为例进行文件读取</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileReader;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>// 准备文件lol.txt其中的内容是AB</span></span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol.txt"</span>);</span><br><span class=line>        <span class=comment>// 创建基于文件的Reader</span></span><br><span class=line>        <span class=keyword>try</span> (<span class=type>FileReader</span> <span class=variable>fr</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileReader</span>(f)) {</span><br><span class=line>            <span class=comment>// 创建字符数组，其长度就是文件的长度</span></span><br><span class=line>            <span class=type>char</span>[] all = <span class=keyword>new</span> <span class="title class_">char</span>[(<span class=type>int</span>) f.length()];</span><br><span class=line>            <span class=comment>// 以字符流的形式读取文件所有内容</span></span><br><span class=line>            fr.read(all);</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>char</span> b : all) {</span><br><span class=line>                <span class=comment>// 打印出来是A B</span></span><br><span class=line>                System.out.println(b);</span><br><span class=line>            }</span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=使用字符流把字符串写入到文件><a class=headerlink href=#使用字符流把字符串写入到文件 title=使用字符流把字符串写入到文件></a>使用字符流把字符串写入到文件</h3><blockquote><p>FileWriter 是Writer的子类，以FileWriter 为例把字符串写入到文件</blockquote><p><img src=http://stepimagewm.how2j.cn/2432.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileWriter;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>// 准备文件lol2.txt</span></span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol2.txt"</span>);</span><br><span class=line>        <span class=comment>// 创建基于文件的Writer</span></span><br><span class=line>        <span class=keyword>try</span> (<span class=type>FileWriter</span> <span class=variable>fr</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileWriter</span>(f)) {</span><br><span class=line>            <span class=comment>// 以字符流的形式把数据写入到文件中</span></span><br><span class=line>            String data=<span class=string>"abcdefg1234567890"</span>;</span><br><span class=line>            <span class=type>char</span>[] cs = data.toCharArray();</span><br><span class=line>            fr.write(cs);</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=中文问题><a class=headerlink href=#中文问题 title=中文问题></a>中文问题</h2><h3 id=用FileInputStream-字节流正确读取中文><a title="用FileInputStream 字节流正确读取中文" class=headerlink href=#用FileInputStream-字节流正确读取中文></a>用FileInputStream 字节流正确读取中文</h3><blockquote><p>为了能够正确的读取中文内容</blockquote><ol><li>必须了解文本是以哪种编码方式保存字符的<li>使用字节流读取了文本后，再使用<code>对应的编码方式去识别这些数字</code>，得到正确的字符<br>如本例，一个文件中的内容是字符<code>中</code>，编码方式是GBK，那么读出来的数据一定是D6D0。<br>再使用GBK编码方式识别D6D0，就能正确的得到字符<code>中</code>。</ol><blockquote><p>注： 在GBK的棋盘上找到的<code>中</code>字后，JVM会自动找到<code>中</code>在UNICODE这个棋盘上对应的数字，并且以UNICODE上的数字保存在内存中。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"E:\\project\\j2se\\src\\test.txt"</span>);</span><br><span class=line>        <span class=keyword>try</span> (<span class=type>FileInputStream</span> <span class=variable>fis</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);) {</span><br><span class=line>            <span class=type>byte</span>[] all = <span class=keyword>new</span> <span class="title class_">byte</span>[(<span class=type>int</span>) f.length()];</span><br><span class=line>            fis.read(all);</span><br><span class=line>   </span><br><span class=line>            <span class=comment>//文件中读出来的数据是</span></span><br><span class=line>            System.out.println(<span class=string>"文件中读出来的数据是："</span>);</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>byte</span> b : all)</span><br><span class=line>            {</span><br><span class=line>                <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> b&<span class=number>0x000000ff</span>;  <span class=comment>//只取16进制的后两位</span></span><br><span class=line>                System.out.println(Integer.toHexString(i));</span><br><span class=line>            }</span><br><span class=line>            System.out.println(<span class=string>"把这个数字，放在GBK的棋盘上去："</span>);</span><br><span class=line>            <span class=type>String</span> <span class=variable>str</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">String</span>(all,<span class=string>"GBK"</span>);</span><br><span class=line>            System.out.println(str);</span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>   </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=用FileReader-字符流正确读取中文><a title="用FileReader 字符流正确读取中文" class=headerlink href=#用FileReader-字符流正确读取中文></a>用FileReader 字符流正确读取中文</h3><blockquote><p>FileReader得到的是字符，所以一定是已经把字节根据某种编码识别成了字符了<br>而FileReader使用的编码方式是Charset.defaultCharset()的返回值，如果是中文的操作系统，就是GBK<br>FileReader是不能手动设置编码方式的，为了使用其他的编码方式，只能使用InputStreamReader来代替，像这样：</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=keyword>new</span> <span class="title class_">InputStreamReader</span>(<span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f),Charset.forName(<span class=string>"UTF-8"</span>)); </span><br></pre></table></figure><blockquote><p>在本例中，用记事本另存为UTF-8格式，然后用UTF-8就能识别对应的中文了。</blockquote><blockquote><p>解释： 为什么中字前面有一个?<br>如果是使用记事本另存为UTF-8的格式，那么在第一个字节有一个标示符，叫做BOM用来标志这个文件是用UTF-8来编码的。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.FileNotFoundException;</span><br><span class=line><span class=keyword>import</span> java.io.FileReader;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line><span class=keyword>import</span> java.io.InputStreamReader;</span><br><span class=line><span class=keyword>import</span> java.io.UnsupportedEncodingException;</span><br><span class=line><span class=keyword>import</span> java.nio.charset.Charset;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> <span class=keyword>throws</span> UnsupportedEncodingException, FileNotFoundException {</span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"E:\\project\\j2se\\src\\test.txt"</span>);</span><br><span class=line>        System.out.println(<span class=string>"默认编码方式:"</span>+Charset.defaultCharset());</span><br><span class=line>        <span class=comment>//FileReader得到的是字符，所以一定是已经把字节根据某种编码识别成了字符了</span></span><br><span class=line>        <span class=comment>//而FileReader使用的编码方式是Charset.defaultCharset()的返回值，如果是中文的操作系统，就是GBK</span></span><br><span class=line>        <span class=keyword>try</span> (<span class=type>FileReader</span> <span class=variable>fr</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileReader</span>(f)) {</span><br><span class=line>            <span class=type>char</span>[] cs = <span class=keyword>new</span> <span class="title class_">char</span>[(<span class=type>int</span>) f.length()];</span><br><span class=line>            fr.read(cs);</span><br><span class=line>            System.out.printf(<span class=string>"FileReader会使用默认的编码方式%s,识别出来的字符是：%n"</span>,Charset.defaultCharset());</span><br><span class=line>            System.out.println(<span class=keyword>new</span> <span class="title class_">String</span>(cs));</span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>        <span class=comment>//FileReader是不能手动设置编码方式的，为了使用其他的编码方式，只能使用InputStreamReader来代替</span></span><br><span class=line>        <span class=comment>//并且使用new InputStreamReader(new FileInputStream(f),Charset.forName("UTF-8")); 这样的形式</span></span><br><span class=line>        <span class=keyword>try</span> (<span class=type>InputStreamReader</span> <span class=variable>isr</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">InputStreamReader</span>(<span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f),Charset.forName(<span class=string>"UTF-8"</span>))) {</span><br><span class=line>            <span class=type>char</span>[] cs = <span class=keyword>new</span> <span class="title class_">char</span>[(<span class=type>int</span>) f.length()];</span><br><span class=line>            isr.read(cs);</span><br><span class=line>            System.out.printf(<span class=string>"InputStreamReader 指定编码方式UTF-8,识别出来的字符是：%n"</span>);</span><br><span class=line>            System.out.println(<span class=keyword>new</span> <span class="title class_">String</span>(cs));</span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=缓存流><a class=headerlink href=#缓存流 title=缓存流></a>缓存流</h2><blockquote><p>以介质是硬盘为例，<code>字节流和字符流的弊端</code>：<br>在每一次读写的时候，都会访问硬盘。 如果读写的频率比较高的时候，其性能表现不佳。</blockquote><blockquote><p>为了解决以上弊端，采用缓存流。<br>缓存流在读取的时候，会<code>一次性读较多的数据到缓存中</code>，以后每一次的读取，都是在缓存中访问，直到缓存中的数据读取完毕，再到硬盘中读取。</blockquote><blockquote><p>就好比吃饭，<code>不用缓存就是每吃一口都到锅里去铲。用缓存就是先把饭盛到碗里</code>，碗里的吃完了，再到锅里去铲</blockquote><blockquote><p>缓存流在写入数据的时候，会先把数据写入到缓存区，直到缓存区<code>达到一定的量</code>，才把这些数据，<code>一起写入到硬盘中去</code>。按照这种操作模式，就不会像字节流，字符流那样<code>每写一个字节都访问硬盘</code>，从而减少了IO操作。</blockquote><h3 id=使用缓存流读取数据><a class=headerlink href=#使用缓存流读取数据 title=使用缓存流读取数据></a>使用缓存流读取数据</h3><blockquote><p>缓存字符输入流 BufferedReader 可以一次读取一行数据</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.io.BufferedReader;</span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileReader;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>// 准备文件lol.txt其中的内容是</span></span><br><span class=line>        <span class=comment>// garen kill teemo</span></span><br><span class=line>        <span class=comment>// teemo revive after 1 minutes</span></span><br><span class=line>        <span class=comment>// teemo try to garen, but killed again</span></span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol.txt"</span>);</span><br><span class=line>        <span class=comment>// 创建文件字符流</span></span><br><span class=line>        <span class=comment>// 缓存流必须建立在一个存在的流的基础上</span></span><br><span class=line>        <span class=keyword>try</span> (</span><br><span class=line>                <span class=type>FileReader</span> <span class=variable>fr</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileReader</span>(f);</span><br><span class=line>                <span class=type>BufferedReader</span> <span class=variable>br</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">BufferedReader</span>(fr);</span><br><span class=line>            )</span><br><span class=line>        {</span><br><span class=line>            <span class=keyword>while</span> (<span class=literal>true</span>) {</span><br><span class=line>                <span class=comment>// 一次读一行</span></span><br><span class=line>                <span class=type>String</span> <span class=variable>line</span> <span class=operator>=</span> br.readLine();</span><br><span class=line>                <span class=keyword>if</span> (<span class=literal>null</span> == line)</span><br><span class=line>                    <span class=keyword>break</span>;</span><br><span class=line>                System.out.println(line);</span><br><span class=line>            }</span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=使用缓存流写出数据><a class=headerlink href=#使用缓存流写出数据 title=使用缓存流写出数据></a>使用缓存流写出数据</h3><blockquote><p>PrintWriter 缓存字符输出流， 可以一次写出一行数据</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileWriter;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line><span class=keyword>import</span> java.io.PrintWriter;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>// 向文件lol2.txt中写入三行语句</span></span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol2.txt"</span>);</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>try</span> (</span><br><span class=line>                <span class=comment>// 创建文件字符流</span></span><br><span class=line>                <span class=type>FileWriter</span> <span class=variable>fw</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileWriter</span>(f);</span><br><span class=line>                <span class=comment>// 缓存流必须建立在一个存在的流的基础上              </span></span><br><span class=line>                <span class=type>PrintWriter</span> <span class=variable>pw</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">PrintWriter</span>(fw);              </span><br><span class=line>        ) {</span><br><span class=line>            pw.println(<span class=string>"garen kill teemo"</span>);</span><br><span class=line>            pw.println(<span class=string>"teemo revive after 1 minutes"</span>);</span><br><span class=line>            pw.println(<span class=string>"teemo try to garen, but killed again"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>   </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=flush><a class=headerlink href=#flush title=flush></a>flush</h3><blockquote><p>有的时候，需要<code>立即把数据写入到硬盘</code>，而不是等缓存满了才写出去。 这时候就需要用到flush</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line>    </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileWriter;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line><span class=keyword>import</span> java.io.PrintWriter;</span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//向文件lol2.txt中写入三行语句</span></span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol2.txt"</span>);</span><br><span class=line>        <span class=comment>//创建文件字符流</span></span><br><span class=line>        <span class=comment>//缓存流必须建立在一个存在的流的基础上</span></span><br><span class=line>        <span class=keyword>try</span>(<span class=type>FileWriter</span> <span class=variable>fr</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileWriter</span>(f);<span class=type>PrintWriter</span> <span class=variable>pw</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">PrintWriter</span>(fr);) {</span><br><span class=line>            pw.println(<span class=string>"garen kill teemo"</span>);</span><br><span class=line>            <span class=comment>//强制把缓存中的数据写入硬盘，无论缓存是否已满</span></span><br><span class=line>                pw.flush();           </span><br><span class=line>            pw.println(<span class=string>"teemo revive after 1 minutes"</span>);</span><br><span class=line>                pw.flush();</span><br><span class=line>            pw.println(<span class=string>"teemo try to garen, but killed again"</span>);</span><br><span class=line>                pw.flush();</span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=数据流><a class=headerlink href=#数据流 title=数据流></a>数据流</h2><blockquote><p>DataInputStream 数据输入流<br>DataOutputStream 数据输出流</blockquote><h3 id=直接进行字符串的读写><a class=headerlink href=#直接进行字符串的读写 title=直接进行字符串的读写></a>直接进行字符串的读写</h3><blockquote><p>使用数据流的writeUTF()和readUTF() 可以进行数据的<code>格式化顺序读写</code>。<br>如本例，通过DataOutputStream 向文件顺序写出 布尔值，整数和字符串。 然后再通过DataInputStream 顺序读入这些数据。</blockquote><blockquote><p>注： 要用DataInputStream 读取一个文件，这个文件必须是由DataOutputStream 写出的，否则会出现EOFException，因为DataOutputStream 在写出的时候会做一些特殊标记，只有DataInputStream 才能成功的读取。</blockquote><p><img src=http://stepimagewm.how2j.cn/771.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line>      </span><br><span class=line><span class=keyword>import</span> java.io.DataInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.DataOutputStream;</span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.FileOutputStream;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line>      </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        write();</span><br><span class=line>        read();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">read</span><span class=params>()</span> {</span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol.txt"</span>);</span><br><span class=line>        <span class=keyword>try</span> (</span><br><span class=line>                <span class=type>FileInputStream</span> <span class=variable>fis</span>  <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>                <span class=type>DataInputStream</span> <span class=variable>dis</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">DataInputStream</span>(fis);</span><br><span class=line>        ){</span><br><span class=line>            <span class=type>boolean</span> b= dis.readBoolean();</span><br><span class=line>            <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> dis.readInt();</span><br><span class=line>            <span class=type>String</span> <span class=variable>str</span> <span class=operator>=</span> dis.readUTF();</span><br><span class=line>             </span><br><span class=line>            System.out.println(<span class=string>"读取到布尔值:"</span>+b);</span><br><span class=line>            System.out.println(<span class=string>"读取到整数:"</span>+i);</span><br><span class=line>            System.out.println(<span class=string>"读取到字符串:"</span>+str);</span><br><span class=line> </span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">write</span><span class=params>()</span> {</span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/lol.txt"</span>);</span><br><span class=line>        <span class=keyword>try</span> (</span><br><span class=line>                <span class=type>FileOutputStream</span> <span class=variable>fos</span>  <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileOutputStream</span>(f);</span><br><span class=line>                <span class=type>DataOutputStream</span> <span class=variable>dos</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">DataOutputStream</span>(fos);</span><br><span class=line>        ){</span><br><span class=line>            dos.writeBoolean(<span class=literal>true</span>);</span><br><span class=line>            dos.writeInt(<span class=number>300</span>);</span><br><span class=line>            dos.writeUTF(<span class=string>"123 this is gareen"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=对象流><a class=headerlink href=#对象流 title=对象流></a>对象流</h2><blockquote><p>对象流指的是可以直接把一个对象以流的形式传输给其他的介质，比如硬盘</blockquote><blockquote><p>一个对象以流的形式进行传输，叫做序列化。 该对象所对应的类，必须是实现Serializable接口。</blockquote><h3 id=序列化一个对象><a class=headerlink href=#序列化一个对象 title=序列化一个对象></a>序列化一个对象</h3><blockquote><p>创建一个Hero对象，设置其名称为garen。<br>把该对象序列化到一个文件garen.lol。<br>然后再通过序列化把该文件转换为一个Hero对象</blockquote><blockquote><p>注：把一个对象序列化有一个前提是：这个对象的类，必须实现了Serializable接口</blockquote><p><code>Hero.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.Serializable;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">Serializable</span> {</span><br><span class=line>    <span class=comment>//表示这个类当前的版本，如果有了变化，比如新设计了属性，就应该修改这个版本号</span></span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>final</span> <span class=type>long</span> <span class=variable>serialVersionUID</span> <span class=operator>=</span> <span class=number>1L</span>;</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><p><code>TestStream.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line>    </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.FileOutputStream;</span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line><span class=keyword>import</span> java.io.ObjectInputStream;</span><br><span class=line><span class=keyword>import</span> java.io.ObjectOutputStream;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//创建一个Hero garen</span></span><br><span class=line>        <span class=comment>//要把Hero对象直接保存在文件上，务必让Hero类实现Serializable接口</span></span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h.name = <span class=string>"garen"</span>;</span><br><span class=line>        h.hp = <span class=number>616</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//准备一个文件用于保存该对象</span></span><br><span class=line>        <span class=type>File</span> <span class=variable>f</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"d:/garen.lol"</span>);</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span>(</span><br><span class=line>            <span class=comment>//创建对象输出流</span></span><br><span class=line>            <span class=type>FileOutputStream</span> <span class=variable>fos</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileOutputStream</span>(f);</span><br><span class=line>            <span class=type>ObjectOutputStream</span> <span class=variable>oos</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">ObjectOutputStream</span>(fos);</span><br><span class=line>            <span class=comment>//创建对象输入流              </span></span><br><span class=line>            <span class=type>FileInputStream</span> <span class=variable>fis</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class=line>            <span class=type>ObjectInputStream</span> <span class=variable>ois</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">ObjectInputStream</span>(fis);</span><br><span class=line>        ) {</span><br><span class=line>            oos.writeObject(h);</span><br><span class=line>            <span class=type>Hero</span> <span class=variable>h2</span> <span class=operator>=</span> (Hero) ois.readObject();</span><br><span class=line>            System.out.println(h2.name);</span><br><span class=line>            System.out.println(h2.hp);</span><br><span class=line>               </span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>            </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=System-in><a class=headerlink href=#System-in title=System.in></a>System.in</h2><blockquote><p>System.out 是常用的在控制台输出数据的<br>System.in 可以从控制台输入数据</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.IOException;</span><br><span class=line><span class=keyword>import</span> java.io.InputStream;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>// 控制台输入</span></span><br><span class=line>        <span class=keyword>try</span> (<span class=type>InputStream</span> <span class=variable>is</span> <span class=operator>=</span> System.in;) {</span><br><span class=line>            <span class=keyword>while</span> (<span class=literal>true</span>) {</span><br><span class=line>                <span class=comment>// 敲入a,然后敲回车可以看到</span></span><br><span class=line>                <span class=comment>// 97 13 10</span></span><br><span class=line>                <span class=comment>// 97是a的ASCII码</span></span><br><span class=line>                <span class=comment>// 13 10分别对应回车换行</span></span><br><span class=line>                <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> is.read();</span><br><span class=line>                System.out.println(i);</span><br><span class=line>            }</span><br><span class=line>        } <span class=keyword>catch</span> (IOException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=Scanner读取字符串><a class=headerlink href=#Scanner读取字符串 title=Scanner读取字符串></a>Scanner读取字符串</h3><blockquote><p>使用System.in.read虽然可以读取数据，但是很不方便<br>使用Scanner就可以逐行读取了</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line>    </span><br><span class=line><span class=keyword>import</span> java.util.Scanner;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>            <span class=type>Scanner</span> <span class=variable>s</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class=line>             </span><br><span class=line>            <span class=keyword>while</span>(<span class=literal>true</span>){</span><br><span class=line>                <span class=type>String</span> <span class=variable>line</span> <span class=operator>=</span> s.nextLine();</span><br><span class=line>                System.out.println(line);</span><br><span class=line>            }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=Scanner从控制台读取整数><a class=headerlink href=#Scanner从控制台读取整数 title=Scanner从控制台读取整数></a>Scanner从控制台读取整数</h3><p><img src=http://stepimagewm.how2j.cn/2142.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> stream;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.Scanner;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestStream</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Scanner</span> <span class=variable>s</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class=line>        <span class=type>int</span> <span class=variable>a</span> <span class=operator>=</span> s.nextInt();</span><br><span class=line>        System.out.println(<span class=string>"第一个整数："</span>+a);</span><br><span class=line>        <span class=type>int</span> <span class=variable>b</span> <span class=operator>=</span> s.nextInt();</span><br><span class=line>        System.out.println(<span class=string>"第二个整数："</span>+b);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=流关系图><a class=headerlink href=#流关系图 title=流关系图></a>流关系图</h3><blockquote><p>这个图把本章节学到的流关系做了个简单整理</blockquote><ol><li>流分为字节流和字符流<li>字节流下面常用的又有数据流和对象流<li>字符流下面常用的又有缓存流</ol><p><img src=http://stepimagewm.how2j.cn/5678.png><h1 id=集合框架><a class=headerlink href=#集合框架 title=集合框架></a>集合框架</h1><h2 id=ArrayList><a class=headerlink href=#ArrayList title=ArrayList></a>ArrayList</h2><h3 id=使用数组的局限性><a class=headerlink href=#使用数组的局限性 title=使用数组的局限性></a>使用数组的局限性</h3><blockquote><p>如果要存放多个对象，可以使用数组，但是数组有局限性<br>比如 声明长度是10的数组<br>不用的数组就浪费了<br>超过10的个数，又放不下</blockquote><p><code>TestCollection.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//数组的局限性</span></span><br><span class=line>        Hero heros[] = <span class=keyword>new</span> <span class="title class_">Hero</span>[<span class=number>10</span>];</span><br><span class=line>        <span class=comment>//声明长度是10的数组</span></span><br><span class=line>        <span class=comment>//不用的数组就浪费了</span></span><br><span class=line>        <span class=comment>//超过10的个数，又放不下</span></span><br><span class=line>        heros[<span class=number>0</span>] = <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"盖伦"</span>);</span><br><span class=line>                <span class=comment>//放不下要报错</span></span><br><span class=line>        heros[<span class=number>20</span>] = <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"提莫"</span>);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><p><code>Hero.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span> {</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=comment>// 增加一个初始化name的构造方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=comment>// 重写toString方法</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> name;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=ArrayList存放对象><a class=headerlink href=#ArrayList存放对象 title=ArrayList存放对象></a>ArrayList存放对象</h3><blockquote><p>为了解决数组的局限性，引入容器类的概念。 最常见的容器类就是<br>ArrayList<br>容器的容量”capacity”会随着对象的增加，自动增长<br>只需要不断往容器里增加英雄即可，不用担心会出现数组的边界问题。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=meta>@SuppressWarnings("rawtypes")</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//容器类ArrayList，用于存放对象</span></span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line>        heros.add( <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"盖伦"</span>));</span><br><span class=line>        System.out.println(heros.size());</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//容器的容量"capacity"会随着对象的增加，自动增长</span></span><br><span class=line>        <span class=comment>//只需要不断往容器里增加英雄即可，不用担心会出现数组的边界问题。</span></span><br><span class=line>        heros.add( <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"提莫"</span>));</span><br><span class=line>        System.out.println(heros.size());</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><h3 id=增加><a class=headerlink href=#增加 title=增加></a>增加</h3><blockquote><p>add 有两种用法<br>第一种是直接add对象，把对象加在最后面</blockquote><p><code>heros.add(new Hero("hero " + i));</code><blockquote><p>第二种是在指定位置加对象</blockquote><p><code>heros.add(3, specialHero);</code><p><img src=http://stepimagewm.how2j.cn/2453.png><p><code>TestCollection.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 把5个对象加入到ArrayList中</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i));</span><br><span class=line>        }</span><br><span class=line>        System.out.println(heros);</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 在指定位置增加对象</span></span><br><span class=line>        <span class=type>Hero</span> <span class=variable>specialHero</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"special hero"</span>);</span><br><span class=line>        heros.add(<span class=number>3</span>, specialHero);</span><br><span class=line> </span><br><span class=line>        System.out.println(heros.toString());</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><p><code>Hero.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span> {</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=comment>// 增加一个初始化name的构造方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=comment>// 重写toString方法</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> name;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><h3 id=判断是否存在><a class=headerlink href=#判断是否存在 title=判断是否存在></a>判断是否存在</h3><blockquote><p>通过方法<code>contains</code> 判断一个对象是否在容器中。<br>判断标准： 是否是同一个对象，而不是name是否相同。</blockquote><p><img src=http://stepimagewm.how2j.cn/2454.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 初始化5个对象</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i));</span><br><span class=line>        }</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>specialHero</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"special hero"</span>);</span><br><span class=line>        heros.add(specialHero);</span><br><span class=line> </span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        <span class=comment>// 判断一个对象是否在容器中</span></span><br><span class=line>        <span class=comment>// 判断标准： 是否是同一个对象，而不是name是否相同</span></span><br><span class=line>        System.out.print(<span class=string>"虽然一个新的对象名字也叫 hero 1，但是contains的返回是:"</span>);</span><br><span class=line>        System.out.println(heros.contains(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero 1"</span>)));</span><br><span class=line>        System.out.print(<span class=string>"而对specialHero的判断，contains的返回是:"</span>);</span><br><span class=line>        System.out.println(heros.contains(specialHero));</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=获取指定位置的对象><a class=headerlink href=#获取指定位置的对象 title=获取指定位置的对象></a>获取指定位置的对象</h3><blockquote><p>通过get获取指定位置的对象，如果输入的下标越界，一样会报错。</blockquote><p><img src=http://stepimagewm.how2j.cn/2455.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 初始化5个对象</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i));</span><br><span class=line>        }</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>specialHero</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"special hero"</span>);</span><br><span class=line>        heros.add(specialHero);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//获取指定位置的对象</span></span><br><span class=line>        System.out.println(heros.get(<span class=number>5</span>));</span><br><span class=line>        <span class=comment>//如果超出了范围，依然会报错</span></span><br><span class=line>        System.out.println(heros.get(<span class=number>6</span>));</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=获取对象所处的位置><a class=headerlink href=#获取对象所处的位置 title=获取对象所处的位置></a>获取对象所处的位置</h3><blockquote><p><code>indexOf</code>用于判断一个对象在ArrayList中所处的位置<br>与contains一样，判断标准是对象是否相同，而非对象的name值是否相等</blockquote><p><img src=http://stepimagewm.how2j.cn/2456.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 初始化5个对象</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i));</span><br><span class=line>        }</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>specialHero</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"special hero"</span>);</span><br><span class=line>        heros.add(specialHero);</span><br><span class=line> </span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        System.out.println(<span class=string>"specialHero所处的位置:"</span>+heros.indexOf(specialHero));</span><br><span class=line>        System.out.println(<span class=string>"新的英雄，但是名字是\"hero 1\"所处的位置:"</span>+heros.indexOf(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero 1"</span>)));</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=删除><a class=headerlink href=#删除 title=删除></a>删除</h3><blockquote><p>remove用于把对象从ArrayList中删除<br>remove可以根据下标删除ArrayList的元素</blockquote><p><code>heros.remove(2);</code><blockquote><p>也可以根据对象删除</blockquote><p><code>heros.remove(specialHero);</code><p><img src=http://stepimagewm.how2j.cn/2457.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 初始化5个对象</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i));</span><br><span class=line>        }</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>specialHero</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"special hero"</span>);</span><br><span class=line>        heros.add(specialHero);</span><br><span class=line>         </span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        heros.remove(<span class=number>2</span>);</span><br><span class=line>        System.out.println(<span class=string>"删除下标是2的对象"</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        System.out.println(<span class=string>"删除special hero"</span>);</span><br><span class=line>        heros.remove(specialHero);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=替换-1><a class=headerlink href=#替换-1 title=替换></a>替换</h3><blockquote><p><code>set</code>用于替换指定位置的元素。</blockquote><p><img src=http://stepimagewm.how2j.cn/2458.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 初始化5个对象</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i));</span><br><span class=line>        }</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>specialHero</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"special hero"</span>);</span><br><span class=line>        heros.add(specialHero);</span><br><span class=line>         </span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        System.out.println(<span class=string>"把下标是5的元素，替换为\"hero 5\""</span>);</span><br><span class=line>        heros.set(<span class=number>5</span>, <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero 5"</span>));</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=获取大小><a class=headerlink href=#获取大小 title=获取大小></a>获取大小</h3><blockquote><p><code>size</code> 用于获取ArrayList的大小。</blockquote><p><img src=http://stepimagewm.how2j.cn/2459.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 初始化5个对象</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i));</span><br><span class=line>        }</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>specialHero</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"special hero"</span>);</span><br><span class=line>        heros.add(specialHero);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        System.out.println(<span class=string>"获取ArrayList的大小："</span>);</span><br><span class=line>        System.out.println(heros.size());</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=转换为数组><a class=headerlink href=#转换为数组 title=转换为数组></a>转换为数组</h3><blockquote><p><code>toArray</code>可以把一个ArrayList对象转换为数组。<br>需要注意的是，如果要转换为一个Hero数组，那么需要传递一个Hero数组类型的对象给toArray()，这样toArray方法才知道，你希望转换为哪种类型的数组，否则只能转换为Object数组。</blockquote><p><img src=http://stepimagewm.how2j.cn/2460.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 初始化5个对象</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i));</span><br><span class=line>        }</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>specialHero</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"special hero"</span>);</span><br><span class=line>        heros.add(specialHero);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        Hero hs[] = (Hero[])heros.toArray(<span class=keyword>new</span> <span class="title class_">Hero</span>[]{});</span><br><span class=line>        System.out.println(<span class=string>"数组:"</span> +hs);</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=把另一个容器所有对象都加进来><a class=headerlink href=#把另一个容器所有对象都加进来 title=把另一个容器所有对象都加进来></a>把另一个容器所有对象都加进来</h3><blockquote><p><code>addAll</code> 把另一个容器所有对象都加进。</blockquote><p><img src=http://stepimagewm.how2j.cn/2461.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 初始化5个对象</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i));</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"ArrayList heros:\t"</span> + heros);</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//把另一个容器里所有的元素，都加入到该容器里来</span></span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>anotherHeros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line>        anotherHeros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero a"</span>));</span><br><span class=line>        anotherHeros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero b"</span>));</span><br><span class=line>        anotherHeros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero c"</span>));</span><br><span class=line>        System.out.println(<span class=string>"anotherHeros heros:\t"</span> + anotherHeros);</span><br><span class=line>        heros.addAll(anotherHeros);</span><br><span class=line>        System.out.println(<span class=string>"把另一个ArrayList的元素都加入到当前ArrayList:"</span>);</span><br><span class=line>        System.out.println(<span class=string>"ArrayList heros:\t"</span> + heros);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=清空><a class=headerlink href=#清空 title=清空></a>清空</h3><blockquote><p><code>clear</code> 清空一个ArrayList</blockquote><p><img src=http://stepimagewm.how2j.cn/2462.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 初始化5个对象</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i));</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"ArrayList heros:\t"</span> + heros);</span><br><span class=line>        System.out.println(<span class=string>"使用clear清空"</span>);</span><br><span class=line>        heros.clear();</span><br><span class=line>        System.out.println(<span class=string>"ArrayList heros:\t"</span> + heros);</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=List接口><a class=headerlink href=#List接口 title=List接口></a>List接口</h2><h3 id=ArrayList和List><a class=headerlink href=#ArrayList和List title=ArrayList和List></a>ArrayList和List</h3><blockquote><p>ArrayList实现了接口List<br>常见的写法会把引用声明为接口List类型<br>注意：是<code>java.util.List</code>，而不是<code>java.awt.List</code></blockquote><p><img src=http://stepimagewm.how2j.cn/808.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//ArrayList实现了接口List</span></span><br><span class=line>         </span><br><span class=line>        <span class=comment>//常见的写法会把引用声明为接口List类型</span></span><br><span class=line>        <span class=comment>//注意：是java.util.List,而不是java.awt.List</span></span><br><span class=line>        <span class=comment>//接口引用指向子类对象（多态）</span></span><br><span class=line>         </span><br><span class=line>        <span class=type>List</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line>        heros.add( <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"盖伦"</span>));</span><br><span class=line>        System.out.println(heros.size());</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h2 id=在ArrayList上使用泛型><a class=headerlink href=#在ArrayList上使用泛型 title=在ArrayList上使用泛型></a>在ArrayList上使用泛型</h2><h3 id=泛型-Generic><a title="泛型 Generic" class=headerlink href=#泛型-Generic></a>泛型 Generic</h3><blockquote><p>不指定泛型的容器，可以存放任何类型的元素<br>指定了泛型的容器，只能存放指定类型的元素以及其子类</blockquote><p><code>Item.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> property;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Item</span> {</span><br><span class=line>    String name;</span><br><span class=line>    <span class=type>int</span> price;</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Item</span><span class=params>()</span>{</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//提供一个初始化name的构造方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Item</span><span class=params>(String name)</span>{</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">effect</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"物品使用后，可以有效果"</span>);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure><p><code>TestCollection.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> property.Item;</span><br><span class=line><span class=keyword>import</span> charactor.APHero;</span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//对于不使用泛型的容器，可以往里面放英雄，也可以往里面放物品</span></span><br><span class=line>        <span class=type>List</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line>          </span><br><span class=line>        heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"盖伦"</span>));</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//本来用于存放英雄的容器，现在也可以存放物品了</span></span><br><span class=line>        heros.add(<span class=keyword>new</span> <span class="title class_">Item</span>(<span class=string>"冰杖"</span>));</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//对象转型会出现问题</span></span><br><span class=line>        Hero h1=  (Hero) heros.get(<span class=number>0</span>);</span><br><span class=line>        <span class=comment>//尤其是在容器里放的对象太多的时候，就记不清楚哪个位置放的是哪种类型的对象了</span></span><br><span class=line>        Hero h2=  (Hero) heros.get(<span class=number>1</span>);</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//引入泛型Generic</span></span><br><span class=line>        <span class=comment>//声明容器的时候，就指定了这种容器，只能放Hero，放其他的就会出错</span></span><br><span class=line>        List&lt;Hero> genericheros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        genericheros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"盖伦"</span>));</span><br><span class=line>        <span class=comment>//如果不是Hero类型，根本就放不进去</span></span><br><span class=line>        <span class=comment>//genericheros.add(new Item("冰杖"));</span></span><br><span class=line>          </span><br><span class=line>        <span class=comment>//除此之外，还能存放Hero的子类</span></span><br><span class=line>        genericheros.add(<span class=keyword>new</span> <span class="title class_">APHero</span>());</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//并且在取出数据的时候，不需要再进行转型了，因为里面肯定是放的Hero或者其子类</span></span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> genericheros.get(<span class=number>0</span>);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>}</span><br></pre></table></figure><h3 id=泛型的简写><a class=headerlink href=#泛型的简写 title=泛型的简写></a>泛型的简写</h3><blockquote><p>为了不使编译器出现警告，需要前后都使用泛型，像这样：</blockquote><p><code>List&lt;Hero> genericheros = new ArrayList&lt;Hero>();</code><p>不过JDK7提供了一个可以略微减少代码量的泛型简写方式<p><code>List&lt;Hero> genericheros2 = new ArrayList&lt;>();</code><p>后面的泛型可以用&lt;>来代替，聊胜于无吧。<figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        List&lt;Hero> genericheros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        List&lt;Hero> genericheros2 = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>      </span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>}</span><br></pre></table></figure><h2 id=遍历ArrayList><a class=headerlink href=#遍历ArrayList title=遍历ArrayList></a>遍历ArrayList</h2><h3 id=用for循环遍历><a class=headerlink href=#用for循环遍历 title=用for循环遍历></a>用for循环遍历</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Iterator;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 放5个Hero进入容器</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero name "</span> + i));</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 第一种遍历 for循环</span></span><br><span class=line>        System.out.println(<span class=string>"--------for 循环-------"</span>);</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; heros.size(); i++) {</span><br><span class=line>            <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> heros.get(i);</span><br><span class=line>            System.out.println(h);</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=迭代器遍历><a class=headerlink href=#迭代器遍历 title=迭代器遍历></a>迭代器遍历</h3><p><img src=http://stepimagewm.how2j.cn/806.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Iterator;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//放5个Hero进入容器</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero name "</span> +i));</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//第二种遍历，使用迭代器</span></span><br><span class=line>        System.out.println(<span class=string>"--------使用while的iterator-------"</span>);</span><br><span class=line>        Iterator&lt;Hero> it= heros.iterator();</span><br><span class=line>        <span class=comment>//从最开始的位置判断"下一个"位置是否有数据</span></span><br><span class=line>        <span class=comment>//如果有就通过next取出来，并且把指针向下移动</span></span><br><span class=line>        <span class=comment>//直到"下一个"位置没有数据</span></span><br><span class=line>        <span class=keyword>while</span>(it.hasNext()){</span><br><span class=line>            <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> it.next();</span><br><span class=line>            System.out.println(h);</span><br><span class=line>        }</span><br><span class=line>        <span class=comment>//迭代器的for写法</span></span><br><span class=line>        System.out.println(<span class=string>"--------使用for的iterator-------"</span>);</span><br><span class=line>        <span class=keyword>for</span> (Iterator&lt;Hero> iterator = heros.iterator(); iterator.hasNext();) {</span><br><span class=line>            <span class=type>Hero</span> <span class=variable>hero</span> <span class=operator>=</span> (Hero) iterator.next();</span><br><span class=line>            System.out.println(hero);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h3 id=用增强型for循环><a class=headerlink href=#用增强型for循环 title=用增强型for循环></a>用增强型for循环</h3><blockquote><p>使用增强型for循环可以非常方便的遍历ArrayList中的元素，这是很多开发人员的首选。</blockquote><blockquote><p>不过增强型for循环也有不足：<br>无法用来进行ArrayList的初始化<br>无法得知当前是第几个元素了，当需要只打印单数元素的时候，就做不到了。 必须再自定下标变量。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Iterator;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 放5个Hero进入容器</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero name "</span> + i));</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 第三种，增强型for循环</span></span><br><span class=line>        System.out.println(<span class=string>"--------增强型for循环-------"</span>);</span><br><span class=line>        <span class=keyword>for</span> (Hero h : heros) {</span><br><span class=line>            System.out.println(h);</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h2 id=LinkedList><a class=headerlink href=#LinkedList title=LinkedList></a>LinkedList</h2><blockquote><p>序列分先进先出FIFO,先进后出FILO<br>FIFO在Java中又叫Queue 队列<br>FILO在Java中又叫Stack 栈</blockquote><h3 id=LinkedList-与-List接口><a title="LinkedList 与 List接口" class=headerlink href=#LinkedList-与-List接口></a>LinkedList 与 List接口</h3><blockquote><p>与ArrayList一样，LinkedList也实现了List接口，诸如add, remove, contains等等方法。</blockquote><h3 id=双向链表-Deque><a title="双向链表 - Deque" class=headerlink href=#双向链表-Deque></a>双向链表 - Deque</h3><blockquote><p>除了实现了List接口外，LinkedList还实现了双向链表结构Deque，可以很方便的在头尾插入删除数据</blockquote><blockquote><p>什么是链表结构: 与数组结构相比较，数组结构，就好像是电影院，每个位置都有标示，每个位置之间的间隔都是一样的。 而链表就相当于佛珠，每个珠子，只连接前一个和后一个，不用关心除此之外的其他佛珠在哪里。</blockquote><p><img src=http://stepimagewm.how2j.cn/809.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.LinkedList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//LinkedList是一个双向链表结构的list</span></span><br><span class=line>        LinkedList&lt;Hero> ll =<span class=keyword>new</span> <span class="title class_">LinkedList</span>&lt;Hero>();</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//所以可以很方便的在头部和尾部插入数据</span></span><br><span class=line>        <span class=comment>//在最后插入新的英雄</span></span><br><span class=line>        ll.addLast(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero1"</span>));</span><br><span class=line>        ll.addLast(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero2"</span>));</span><br><span class=line>        ll.addLast(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero3"</span>));</span><br><span class=line>        System.out.println(ll);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//在最前面插入新的英雄</span></span><br><span class=line>        ll.addFirst(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"heroX"</span>));</span><br><span class=line>        System.out.println(ll);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//查看最前面的英雄</span></span><br><span class=line>        System.out.println(ll.getFirst());</span><br><span class=line>        <span class=comment>//查看最后面的英雄</span></span><br><span class=line>        System.out.println(ll.getLast());</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//查看不会导致英雄被删除</span></span><br><span class=line>        System.out.println(ll);</span><br><span class=line>        <span class=comment>//取出最前面的英雄</span></span><br><span class=line>        System.out.println(ll.removeFirst());</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//取出最后面的英雄</span></span><br><span class=line>        System.out.println(ll.removeLast());</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//取出会导致英雄被删除</span></span><br><span class=line>        System.out.println(ll);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><h3 id=队列-Queue><a title="队列 - Queue" class=headerlink href=#队列-Queue></a>队列 - Queue</h3><blockquote><p>LinkedList 除了实现了List和Deque外，还实现了<code>Queue</code>接口(队列)。<br>Queue是先进先出队列 <code>FIFO</code>，常用方法：</blockquote><ul><li><code>offer</code> 在最后添加元素<li><code>poll</code> 取出第一个元素<li><code>peek</code> 查看第一个元素</ul><p><img src=http://stepimagewm.how2j.cn/810.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.LinkedList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Queue;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//和ArrayList一样，LinkedList也实现了List接口</span></span><br><span class=line>        <span class=type>List</span> <span class=variable>ll</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">LinkedList</span>&lt;Hero>();</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//所不同的是LinkedList还实现了Deque，进而又实现了Queue这个接口</span></span><br><span class=line>        <span class=comment>//Queue代表FIFO 先进先出的队列</span></span><br><span class=line>        Queue&lt;Hero> q= <span class=keyword>new</span> <span class="title class_">LinkedList</span>&lt;Hero>();</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//加在队列的最后面</span></span><br><span class=line>        System.out.print(<span class=string>"初始化队列：\t"</span>);</span><br><span class=line>        q.offer(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"Hero1"</span>));</span><br><span class=line>        q.offer(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"Hero2"</span>));</span><br><span class=line>        q.offer(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"Hero3"</span>));</span><br><span class=line>        q.offer(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"Hero4"</span>));</span><br><span class=line>          </span><br><span class=line>        System.out.println(q);</span><br><span class=line>        System.out.print(<span class=string>"把第一个元素取poll()出来:\t"</span>);</span><br><span class=line>        <span class=comment>//取出第一个Hero，FIFO 先进先出</span></span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> q.poll();</span><br><span class=line>        System.out.println(h);</span><br><span class=line>        System.out.print(<span class=string>"取出第一个元素之后的队列:\t"</span>);</span><br><span class=line>        System.out.println(q);</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//把第一个拿出来看一看，但是不取出来</span></span><br><span class=line>        h=q.peek();</span><br><span class=line>        System.out.print(<span class=string>"查看peek()第一个元素:\t"</span>);</span><br><span class=line>        System.out.println(h);</span><br><span class=line>        System.out.print(<span class=string>"查看并不会导致第一个元素被取出来:\t"</span>);</span><br><span class=line>        System.out.println(q);</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>}</span><br></pre></table></figure><h2 id=二叉树><a class=headerlink href=#二叉树 title=二叉树></a>二叉树</h2><h3 id=二叉树概念><a class=headerlink href=#二叉树概念 title=二叉树概念></a>二叉树概念</h3><blockquote><p>二叉树由各种<code>节点</code>组成<br>二叉树特点：<br>每个节点都可以有<code>左子</code>节点，<code>右子</code>节点<br>每一个节点都有一个<code>值</code></blockquote><p><img src=http://stepimagewm.how2j.cn/1008.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Node</span> {</span><br><span class=line>    <span class=comment>// 左子节点</span></span><br><span class=line>    <span class=keyword>public</span> Node leftNode;</span><br><span class=line>    <span class=comment>// 右子节点</span></span><br><span class=line>    <span class=keyword>public</span> Node rightNode;</span><br><span class=line>    <span class=comment>// 值</span></span><br><span class=line>    <span class=keyword>public</span> Object value;</span><br><span class=line>}</span><br></pre></table></figure><h3 id=二叉树排序-插入数据><a title="二叉树排序 - 插入数据" class=headerlink href=#二叉树排序-插入数据></a>二叉树排序 - 插入数据</h3><blockquote><p>假设通过二叉树对如下10个随机数进行排序<br>67,7,30,73,10,0,78,81,10,74<br>排序的第一个步骤是把数据插入到该二叉树中<br>插入基本逻辑是，小、相同的放左边，大的放右边</blockquote><ol><li>67 放在根节点<li>7 比 67小，放在67的左节点<li>30 比67 小，找到67的左节点7，30比7大，就放在7的右节点<li>73 比67大， 放在67的右节点<li>10 比 67小，找到67的左节点7，10比7大，找到7的右节点30，10比30小，放在30的左节点。<br>…<br>…<li>10比67小，找到67的左节点7，10比7大，找到7的右节点30，10比30小，找到30的左节点10，10和10一样大，放在左边</ol><p><img src=http://stepimagewm.how2j.cn/1009.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Node</span> {</span><br><span class=line>    <span class=comment>// 左子节点</span></span><br><span class=line>    <span class=keyword>public</span> Node leftNode;</span><br><span class=line>    <span class=comment>// 右子节点</span></span><br><span class=line>    <span class=keyword>public</span> Node rightNode;</span><br><span class=line>  </span><br><span class=line>    <span class=comment>// 值</span></span><br><span class=line>    <span class=keyword>public</span> Object value;</span><br><span class=line>  </span><br><span class=line>    <span class=comment>// 插入 数据</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">add</span><span class=params>(Object v)</span> {</span><br><span class=line>        <span class=comment>// 如果当前节点没有值，就把数据放在当前节点上</span></span><br><span class=line>        <span class=keyword>if</span> (<span class=literal>null</span> == value)</span><br><span class=line>            value = v;</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 如果当前节点有值，就进行判断，新增的值与当前值的大小关系</span></span><br><span class=line>        <span class=keyword>else</span> {</span><br><span class=line>            <span class=comment>// 新增的值，比当前值小或者相同</span></span><br><span class=line>             </span><br><span class=line>            <span class=keyword>if</span> ((Integer) v -((Integer)value) &lt;= <span class=number>0</span>) {</span><br><span class=line>                <span class=keyword>if</span> (<span class=literal>null</span> == leftNode)</span><br><span class=line>                    leftNode = <span class=keyword>new</span> <span class="title class_">Node</span>();</span><br><span class=line>                leftNode.add(v);</span><br><span class=line>            }</span><br><span class=line>            <span class=comment>// 新增的值，比当前值大</span></span><br><span class=line>            <span class=keyword>else</span> {</span><br><span class=line>                <span class=keyword>if</span> (<span class=literal>null</span> == rightNode)</span><br><span class=line>                    rightNode = <span class=keyword>new</span> <span class="title class_">Node</span>();</span><br><span class=line>                rightNode.add(v);</span><br><span class=line>            }</span><br><span class=line>  </span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=type>int</span> randoms[] = <span class=keyword>new</span> <span class="title class_">int</span>[] { <span class=number>67</span>, <span class=number>7</span>, <span class=number>30</span>, <span class=number>73</span>, <span class=number>10</span>, <span class=number>0</span>, <span class=number>78</span>, <span class=number>81</span>, <span class=number>10</span>, <span class=number>74</span> };</span><br><span class=line>  </span><br><span class=line>        <span class=type>Node</span> <span class=variable>roots</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Node</span>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> number : randoms) {</span><br><span class=line>            roots.add(number);</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=二叉树排序-遍历><a title="二叉树排序 - 遍历" class=headerlink href=#二叉树排序-遍历></a>二叉树排序 - 遍历</h3><blockquote><p>通过上一个步骤的插入行为，实际上，数据就已经排好序了。 接下来要做的是看，把这些已经排好序的数据，遍历成我们常用的List或者数组的形式</blockquote><blockquote><p>二叉树的遍历分左序，中序，右序<br><code>左序</code>即： 中间的数遍历后放在<code>左边</code><br><code>中序</code>即： 中间的数遍历后放在<code>中间</code><br><code>右序</code>即： 中间的数遍历后放在<code>右边</code><br>如图所见，我们希望遍历后的结果是从小到大的，所以应该采用<code>中序遍历</code>。</blockquote><p><img src=http://stepimagewm.how2j.cn/1010.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Node</span> {</span><br><span class=line>    <span class=comment>// 左子节点</span></span><br><span class=line>    <span class=keyword>public</span> Node leftNode;</span><br><span class=line>    <span class=comment>// 右子节点</span></span><br><span class=line>    <span class=keyword>public</span> Node rightNode;</span><br><span class=line>  </span><br><span class=line>    <span class=comment>// 值</span></span><br><span class=line>    <span class=keyword>public</span> Object value;</span><br><span class=line>  </span><br><span class=line>    <span class=comment>// 插入 数据</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">add</span><span class=params>(Object v)</span> {</span><br><span class=line>        <span class=comment>// 如果当前节点没有值，就把数据放在当前节点上</span></span><br><span class=line>        <span class=keyword>if</span> (<span class=literal>null</span> == value)</span><br><span class=line>            value = v;</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 如果当前节点有值，就进行判断，新增的值与当前值的大小关系</span></span><br><span class=line>        <span class=keyword>else</span> {</span><br><span class=line>            <span class=comment>// 新增的值，比当前值小或者相同</span></span><br><span class=line>             </span><br><span class=line>            <span class=keyword>if</span> ((Integer) v -((Integer)value) &lt;= <span class=number>0</span>) {</span><br><span class=line>                <span class=keyword>if</span> (<span class=literal>null</span> == leftNode)</span><br><span class=line>                    leftNode = <span class=keyword>new</span> <span class="title class_">Node</span>();</span><br><span class=line>                leftNode.add(v);</span><br><span class=line>            }</span><br><span class=line>            <span class=comment>// 新增的值，比当前值大</span></span><br><span class=line>            <span class=keyword>else</span> {</span><br><span class=line>                <span class=keyword>if</span> (<span class=literal>null</span> == rightNode)</span><br><span class=line>                    rightNode = <span class=keyword>new</span> <span class="title class_">Node</span>();</span><br><span class=line>                rightNode.add(v);</span><br><span class=line>            }</span><br><span class=line>  </span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line> <span class=comment>// 中序遍历所有的节点</span></span><br><span class=line>    <span class=keyword>public</span> List&lt;Object> <span class="title function_">values</span><span class=params>()</span> {</span><br><span class=line>        List&lt;Object> values = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 左节点的遍历结果</span></span><br><span class=line>        <span class=keyword>if</span> (<span class=literal>null</span> != leftNode)</span><br><span class=line>            values.addAll(leftNode.values());</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 当前节点</span></span><br><span class=line>        values.add(value);</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 右节点的遍历结果</span></span><br><span class=line>        <span class=keyword>if</span> (<span class=literal>null</span> != rightNode)</span><br><span class=line>  </span><br><span class=line>            values.addAll(rightNode.values());</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>return</span> values;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=type>int</span> randoms[] = <span class=keyword>new</span> <span class="title class_">int</span>[] { <span class=number>67</span>, <span class=number>7</span>, <span class=number>30</span>, <span class=number>73</span>, <span class=number>10</span>, <span class=number>0</span>, <span class=number>78</span>, <span class=number>81</span>, <span class=number>10</span>, <span class=number>74</span> };</span><br><span class=line>  </span><br><span class=line>        <span class=type>Node</span> <span class=variable>roots</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Node</span>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> number : randoms) {</span><br><span class=line>            roots.add(number);</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>        System.out.println(roots.values());</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=HashMap><a class=headerlink href=#HashMap title=HashMap></a>HashMap</h2><h3 id=HashMap的键值对><a class=headerlink href=#HashMap的键值对 title=HashMap的键值对></a>HashMap的键值对</h3><blockquote><p>HashMap储存数据的方式是 —— 键值对</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.HashMap;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        HashMap&lt;String,String> dictionary = <span class=keyword>new</span> <span class="title class_">HashMap</span>&lt;>();</span><br><span class=line>        dictionary.put(<span class=string>"adc"</span>, <span class=string>"物理英雄"</span>);</span><br><span class=line>        dictionary.put(<span class=string>"apc"</span>, <span class=string>"魔法英雄"</span>);</span><br><span class=line>        dictionary.put(<span class=string>"t"</span>, <span class=string>"坦克"</span>);</span><br><span class=line>         </span><br><span class=line>        System.out.println(dictionary.get(<span class=string>"t"</span>));</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=键不能重复，值可以重复><a class=headerlink href=#键不能重复，值可以重复 title=键不能重复，值可以重复></a>键不能重复，值可以重复</h3><blockquote><p>对于HashMap而言，key是唯一的，不可以重复的。<br>所以，以相同的key 把不同的value插入到 Map中会导致旧元素被覆盖，只留下最后插入的元素。<br>不过，同一个对象可以作为值插入到map中，只要对应的key不一样。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.HashMap;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        HashMap&lt;String,Hero> heroMap = <span class=keyword>new</span> <span class="title class_">HashMap</span>&lt;String,Hero>();</span><br><span class=line>         </span><br><span class=line>        heroMap.put(<span class=string>"gareen"</span>, <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"gareen1"</span>));</span><br><span class=line>        System.out.println(heroMap);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//key为gareen已经有value了，再以gareen作为key放入数据，会导致原英雄，被覆盖</span></span><br><span class=line>        <span class=comment>//不会增加新的元素到Map中</span></span><br><span class=line>        heroMap.put(<span class=string>"gareen"</span>, <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"gareen2"</span>));</span><br><span class=line>        System.out.println(heroMap);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//清空map</span></span><br><span class=line>        heroMap.clear();</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"gareen"</span>);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//同一个对象可以作为值插入到map中，只要对应的key不一样</span></span><br><span class=line>        heroMap.put(<span class=string>"hero1"</span>, gareen);</span><br><span class=line>        heroMap.put(<span class=string>"hero2"</span>, gareen);</span><br><span class=line>         </span><br><span class=line>        System.out.println(heroMap);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=HashSet><a class=headerlink href=#HashSet title=HashSet></a>HashSet</h2><h3 id=元素不能重复><a class=headerlink href=#元素不能重复 title=元素不能重复></a>元素不能重复</h3><blockquote><p>Set中的元素，不能重复</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.HashSet;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        HashSet&lt;String> names = <span class=keyword>new</span> <span class="title class_">HashSet</span>&lt;String>();</span><br><span class=line>         </span><br><span class=line>        names.add(<span class=string>"gareen"</span>);</span><br><span class=line>         </span><br><span class=line>        System.out.println(names);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//第二次插入同样的数据，是插不进去的，容器中只会保留一个</span></span><br><span class=line>        names.add(<span class=string>"gareen"</span>);</span><br><span class=line>        System.out.println(names);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=没有顺序><a class=headerlink href=#没有顺序 title=没有顺序></a>没有顺序</h3><blockquote><p>Set中的元素，没有顺序。<br>严格的说，是没有按照元素的插入顺序排列</blockquote><blockquote><p>HashSet的具体顺序，既不是按照插入顺序，也不是按照hashcode的顺序。关于hashcode有专门的章节讲解: hashcode 原理。</blockquote><blockquote><p>以下是<code>HashSet源代码</code>中的部分注释</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=comment>/**</span></span><br><span class=line><span class=comment> * It makes no guarantees as to the iteration order of the set; </span></span><br><span class=line><span class=comment> * in particular, it does not guarantee that the order will remain constant over time. </span></span><br><span class=line><span class=comment>*/</span></span><br></pre></table></figure><blockquote><p>不保证Set的迭代顺序; 确切的说，在不同条件下，元素的顺序都有可能不一样。</blockquote><blockquote><p>换句话说，同样是插入0-9到HashSet中， 在JVM的不同版本中，看到的顺序都是不一样的。 所以在开发的时候，不能依赖于某种<code>臆测的顺序</code>，这个顺序本身是<code>不稳定</code>的。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.HashSet;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        HashSet&lt;Integer> numbers = <span class=keyword>new</span> <span class="title class_">HashSet</span>&lt;Integer>();</span><br><span class=line> </span><br><span class=line>        numbers.add(<span class=number>9</span>);</span><br><span class=line>        numbers.add(<span class=number>5</span>);</span><br><span class=line>        numbers.add(<span class=number>1</span>);</span><br><span class=line> </span><br><span class=line>        <span class=comment>// Set中的元素排列，不是按照插入顺序</span></span><br><span class=line>        System.out.println(numbers);</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=遍历><a class=headerlink href=#遍历 title=遍历></a>遍历</h3><blockquote><p>Set不提供get()来获取指定位置的元素，所以遍历需要用到迭代器，或者增强型for循环。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.HashSet;</span><br><span class=line><span class=keyword>import</span> java.util.Iterator;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        HashSet&lt;Integer> numbers = <span class=keyword>new</span> <span class="title class_">HashSet</span>&lt;Integer>();</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>20</span>; i++) {</span><br><span class=line>            numbers.add(i);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//Set不提供get方法来获取指定位置的元素</span></span><br><span class=line>        <span class=comment>//numbers.get(0)</span></span><br><span class=line>         </span><br><span class=line>        <span class=comment>//遍历Set可以采用迭代器iterator</span></span><br><span class=line>        <span class=keyword>for</span> (Iterator&lt;Integer> iterator = numbers.iterator(); iterator.hasNext();) {</span><br><span class=line>            <span class=type>Integer</span> <span class=variable>i</span> <span class=operator>=</span> (Integer) iterator.next();</span><br><span class=line>            System.out.println(i);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//或者采用增强型for循环</span></span><br><span class=line>        <span class=keyword>for</span> (Integer i : numbers) {</span><br><span class=line>            System.out.println(i);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=HashSet和HashMap的关系><a class=headerlink href=#HashSet和HashMap的关系 title=HashSet和HashMap的关系></a>HashSet和HashMap的关系</h3><blockquote><p>通过观察HashSet的源代码（如何查看源代码）<br>可以发现HashSet自身并没有独立的实现，而是在里面封装了一个Map.<br>HashSet是作为Map的key而存在的<br>而value是一个命名为PRESENT的static的Object对象，因为是一个类属性，所以只会有一个。</blockquote><p><code>private static final Object PRESENT = new Object();</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.AbstractSet;</span><br><span class=line><span class=keyword>import</span> java.util.HashMap;</span><br><span class=line><span class=keyword>import</span> java.util.Iterator;</span><br><span class=line><span class=keyword>import</span> java.util.Set;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HashSet</span>&lt;E></span><br><span class=line>    <span class=keyword>extends</span> <span class="title class_">AbstractSet</span>&lt;E></span><br><span class=line>    <span class=keyword>implements</span> <span class="title class_">Set</span>&lt;E>, Cloneable, java.io.Serializable</span><br><span class=line>{</span><br><span class=line>    <span class=comment>//HashSet里封装了一个HashMap</span></span><br><span class=line>    <span class=keyword>private</span>  HashMap&lt;E,Object> map;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>final</span> <span class=type>Object</span> <span class=variable>PRESENT</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Object</span>();</span><br><span class=line> </span><br><span class=line>    <span class=comment>//HashSet的构造方法初始化这个HashMap</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">HashSet</span><span class=params>()</span> {</span><br><span class=line>        map = <span class=keyword>new</span> <span class="title class_">HashMap</span>&lt;E,Object>();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=comment>//向HashSet中增加元素，其实就是把该元素作为key，增加到Map中</span></span><br><span class=line>    <span class=comment>//value是PRESENT，静态，final的对象，所有的HashSet都使用这么同一个对象</span></span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">add</span><span class=params>(E e)</span> {</span><br><span class=line>        <span class=keyword>return</span> map.put(e, PRESENT)==<span class=literal>null</span>;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=comment>//HashSet的size就是map的size</span></span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">size</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> map.size();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=comment>//清空Set就是清空Map</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">clear</span><span class=params>()</span> {</span><br><span class=line>        map.clear();</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//迭代Set,就是把Map的键拿出来迭代</span></span><br><span class=line>    <span class=keyword>public</span> Iterator&lt;E> <span class="title function_">iterator</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> map.keySet().iterator();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h2 id=Collection-Collection><a title="Collection & Collection" class=headerlink href=#Collection-Collection></a>Collection & Collection</h2><blockquote><p>Collection是 Set、List、Queue和 Deque 的接口<br>Queue: 先进先出队列<br>Deque: 双向链表</blockquote><blockquote><p>注：Collection和Map之间没有关系，Collection是放一个一个对象的，Map 是放键值对的。<br>注：Deque 继承 Queue,间接的继承了 Collection。</blockquote><p><img src=http://stepimagewm.how2j.cn/830.png><h2 id=Collections><a class=headerlink href=#Collections title=Collections></a>Collections</h2><blockquote><p>Collections是一个类，容器的工具类,就如同Arrays是数组的工具类。</blockquote><h3 id=反转><a class=headerlink href=#反转 title=反转></a>反转</h3><blockquote><p><code>reverse</code> 使List中的数据发生翻转</blockquote><p><img src=http://stepimagewm.how2j.cn/2498.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Collections;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//初始化集合numbers</span></span><br><span class=line>        List&lt;Integer> numbers = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>            numbers.add(i);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"集合中的数据:"</span>);</span><br><span class=line>        System.out.println(numbers);</span><br><span class=line>         </span><br><span class=line>        Collections.reverse(numbers);</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"翻转后集合中的数据:"</span>);</span><br><span class=line>        System.out.println(numbers);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=混淆><a class=headerlink href=#混淆 title=混淆></a>混淆</h3><blockquote><p><code>shuffle</code> 混淆List中数据的顺序</blockquote><p><img src=http://stepimagewm.how2j.cn/2501.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Collections;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//初始化集合numbers</span></span><br><span class=line>        List&lt;Integer> numbers = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>            numbers.add(i);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"集合中的数据:"</span>);</span><br><span class=line>        System.out.println(numbers);</span><br><span class=line>         </span><br><span class=line>        Collections.shuffle(numbers);</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"混淆后集合中的数据:"</span>);</span><br><span class=line>        System.out.println(numbers);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=排序-1><a class=headerlink href=#排序-1 title=排序></a>排序</h3><blockquote><p><code>sort</code> 对List中的数据进行排序</blockquote><p><img src=http://stepimagewm.how2j.cn/2499.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Collections;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//初始化集合numbers</span></span><br><span class=line>        List&lt;Integer> numbers = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>            numbers.add(i);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"集合中的数据:"</span>);</span><br><span class=line>        System.out.println(numbers);</span><br><span class=line> </span><br><span class=line>        Collections.shuffle(numbers);</span><br><span class=line>        System.out.println(<span class=string>"混淆后集合中的数据:"</span>);</span><br><span class=line>        System.out.println(numbers);</span><br><span class=line> </span><br><span class=line>        Collections.sort(numbers);</span><br><span class=line>        System.out.println(<span class=string>"排序后集合中的数据:"</span>);</span><br><span class=line>        System.out.println(numbers);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=交换><a class=headerlink href=#交换 title=交换></a>交换</h3><blockquote><p><code>swap</code> 交换两个数据的位置</blockquote><p><img src=http://stepimagewm.how2j.cn/2500.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Collections;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//初始化集合numbers</span></span><br><span class=line>        List&lt;Integer> numbers = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>            numbers.add(i);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"集合中的数据:"</span>);</span><br><span class=line>        System.out.println(numbers);</span><br><span class=line> </span><br><span class=line>        Collections.swap(numbers,<span class=number>0</span>,<span class=number>5</span>);</span><br><span class=line>        System.out.println(<span class=string>"交换0和5下标的数据后，集合中的数据:"</span>);</span><br><span class=line>        System.out.println(numbers);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=滚动><a class=headerlink href=#滚动 title=滚动></a>滚动</h3><blockquote><p><code>rotate</code> 把List中的数据，向右滚动指定单位的长度</blockquote><p><img src=http://stepimagewm.how2j.cn/2497.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Collections;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//初始化集合numbers</span></span><br><span class=line>        List&lt;Integer> numbers = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>            numbers.add(i);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"集合中的数据:"</span>);</span><br><span class=line>        System.out.println(numbers);</span><br><span class=line> </span><br><span class=line>        Collections.rotate(numbers,<span class=number>2</span>);</span><br><span class=line>        System.out.println(<span class=string>"把集合向右滚动2个单位，标的数据后，集合中的数据:"</span>);</span><br><span class=line>        System.out.println(numbers);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=线程安全化><a class=headerlink href=#线程安全化 title=线程安全化></a>线程安全化</h3><blockquote><p><code>synchronizedList</code> 把非线程安全的List转换为线程安全的List。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Collections;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        List&lt;Integer> numbers = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"把非线程安全的List转换为线程安全的List"</span>);</span><br><span class=line>        List&lt;Integer> synchronizedNumbers = (List&lt;Integer>) Collections.synchronizedList(numbers);</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=ArrayList-vs-HashSet><a title="ArrayList vs HashSet" class=headerlink href=#ArrayList-vs-HashSet></a>ArrayList vs HashSet</h2><h3 id=是否有顺序><a class=headerlink href=#是否有顺序 title=是否有顺序></a>是否有顺序</h3><blockquote><p>ArrayList: 有顺序<br>HashSet: 无顺序</blockquote><blockquote><p>HashSet的具体顺序，既不是按照插入顺序，也不是按照hashcode的顺序。关于hashcode有专门的章节讲解: hashcode 原理。</blockquote><blockquote><p>以下是HasetSet源代码中的部分注释</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=comment>/**</span></span><br><span class=line><span class=comment> * It makes no guarantees as to the iteration order of the set; </span></span><br><span class=line><span class=comment> * in particular, it does not guarantee that the order will remain constant over time. </span></span><br><span class=line><span class=comment>*/</span></span><br></pre></table></figure><blockquote><p>不保证Set的迭代顺序; 确切的说，在不同条件下，元素的顺序都有可能不一样</blockquote><blockquote><p>换句话说，同样是插入0-9到HashSet中， 在JVM的不同版本中，看到的顺序都是不一样的。 所以在开发的时候，不能依赖于某种臆测的顺序，这个顺序本身是不稳定的。</blockquote><p><img src=http://stepimagewm.how2j.cn/798.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.HashSet;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>           </span><br><span class=line>        ArrayList&lt;Integer> numberList =<span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Integer>();</span><br><span class=line>        <span class=comment>//List中的数据按照插入顺序存放</span></span><br><span class=line>        System.out.println(<span class=string>"----------List----------"</span>);</span><br><span class=line>        System.out.println(<span class=string>"向List 中插入 9 5 1"</span>);</span><br><span class=line>        numberList.add(<span class=number>9</span>);</span><br><span class=line>        numberList.add(<span class=number>5</span>);</span><br><span class=line>        numberList.add(<span class=number>1</span>);</span><br><span class=line>        System.out.println(<span class=string>"List 按照顺序存放数据:"</span>);</span><br><span class=line>        System.out.println(numberList);</span><br><span class=line>        System.out.println(<span class=string>"----------Set----------"</span>);</span><br><span class=line>        HashSet&lt;Integer> numberSet =<span class=keyword>new</span> <span class="title class_">HashSet</span>&lt;Integer>();</span><br><span class=line>        System.out.println(<span class=string>"向Set 中插入9 5 1"</span>);</span><br><span class=line>        <span class=comment>//Set中的数据不是按照插入顺序存放</span></span><br><span class=line>        numberSet.add(<span class=number>9</span>);</span><br><span class=line>        numberSet.add(<span class=number>5</span>);</span><br><span class=line>        numberSet.add(<span class=number>1</span>);</span><br><span class=line>        System.out.println(<span class=string>"Set 不是按照顺序存放数据:"</span>);</span><br><span class=line>        System.out.println(numberSet);</span><br><span class=line>           </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=能否重复><a class=headerlink href=#能否重复 title=能否重复></a>能否重复</h3><blockquote><p>List中的数据可以重复<br>Set中的数据不能够重复。<br>重复判断标准是:<br>首先看hashcode是否相同</blockquote><ul><li>如果hashcode不同，则认为是不同数据<li>如果hashcode相同，再比较equals，如果equals相同，则是相同数据，否则是不同数据</ul><p><img src=http://stepimagewm.how2j.cn/2513.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.HashSet;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>           </span><br><span class=line>        ArrayList&lt;Integer> numberList =<span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Integer>();</span><br><span class=line>        <span class=comment>//List中的数据可以重复</span></span><br><span class=line>        System.out.println(<span class=string>"----------List----------"</span>);</span><br><span class=line>        System.out.println(<span class=string>"向List 中插入 9 9"</span>);</span><br><span class=line>        numberList.add(<span class=number>9</span>);</span><br><span class=line>        numberList.add(<span class=number>9</span>);</span><br><span class=line>        System.out.println(<span class=string>"List 中出现两个9:"</span>);</span><br><span class=line>        System.out.println(numberList);</span><br><span class=line>        System.out.println(<span class=string>"----------Set----------"</span>);</span><br><span class=line>        HashSet&lt;Integer> numberSet =<span class=keyword>new</span> <span class="title class_">HashSet</span>&lt;Integer>();</span><br><span class=line>        System.out.println(<span class=string>"向Set 中插入9 9"</span>);</span><br><span class=line>        <span class=comment>//Set中的数据不能重复</span></span><br><span class=line>        numberSet.add(<span class=number>9</span>);</span><br><span class=line>        numberSet.add(<span class=number>9</span>);</span><br><span class=line>        System.out.println(<span class=string>"Set 中只会保留一个9:"</span>);</span><br><span class=line>        System.out.println(numberSet);</span><br><span class=line>           </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=ArrayList-vs-LinkedList><a title="ArrayList vs LinkedList" class=headerlink href=#ArrayList-vs-LinkedList></a>ArrayList vs LinkedList</h2><h3 id=ArrayList和LinkedList的区别><a class=headerlink href=#ArrayList和LinkedList的区别 title=ArrayList和LinkedList的区别></a>ArrayList和LinkedList的区别</h3><blockquote><p>ArrayList <code>插入、删除数据慢</code><br>LinkedList <code>插入、删除数据快</code><br>ArrayList是<code>顺序结构</code>，所以<code>定位很快</code>，指哪找哪。 就像电影院位置一样，有了电影票，一下就找到位置了。<br>LinkedList 是<code>链表结构</code>，就像手里的一串佛珠，要找出第99个佛珠，必须得一个一个的数过去，所以<code>定位慢</code>。</blockquote><p><img src=http://stepimagewm.how2j.cn/799.png><h3 id=插入数据><a class=headerlink href=#插入数据 title=插入数据></a>插入数据</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.LinkedList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        List&lt;Integer> l;</span><br><span class=line>        l = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>        insertFirst(l, <span class=string>"ArrayList"</span>);</span><br><span class=line> </span><br><span class=line>        l = <span class=keyword>new</span> <span class="title class_">LinkedList</span>&lt;>();</span><br><span class=line>        insertFirst(l, <span class=string>"LinkedList"</span>);</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">insertFirst</span><span class=params>(List&lt;Integer> l, String type)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>total</span> <span class=operator>=</span> <span class=number>1000</span> * <span class=number>100</span>;</span><br><span class=line>        <span class=keyword>final</span> <span class=type>int</span> <span class=variable>number</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line>        <span class=type>long</span> <span class=variable>start</span> <span class=operator>=</span> System.currentTimeMillis();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; total; i++) {</span><br><span class=line>            l.add(<span class=number>0</span>, number);</span><br><span class=line>        }</span><br><span class=line>        <span class=type>long</span> <span class=variable>end</span> <span class=operator>=</span> System.currentTimeMillis();</span><br><span class=line>        System.out.printf(<span class=string>"在%s 最前面插入%d条数据，总共耗时 %d 毫秒 %n"</span>, type, total, end - start);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h3 id=定位数据><a class=headerlink href=#定位数据 title=定位数据></a>定位数据</h3><p><img src=http://stepimagewm.how2j.cn/2508.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.LinkedList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        List&lt;Integer> l;</span><br><span class=line>        l = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>        modify(l, <span class=string>"ArrayList"</span>);</span><br><span class=line> </span><br><span class=line>        l = <span class=keyword>new</span> <span class="title class_">LinkedList</span>&lt;>();</span><br><span class=line>        modify(l, <span class=string>"LinkedList"</span>);</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">modify</span><span class=params>(List&lt;Integer> l, String type)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>total</span> <span class=operator>=</span> <span class=number>100</span> * <span class=number>1000</span>;</span><br><span class=line>        <span class=type>int</span> <span class=variable>index</span> <span class=operator>=</span> total/<span class=number>2</span>;</span><br><span class=line>        <span class=keyword>final</span> <span class=type>int</span> <span class=variable>number</span> <span class=operator>=</span> <span class=number>5</span>;</span><br><span class=line>        <span class=comment>//初始化</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; total; i++) {</span><br><span class=line>            l.add(number);</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=type>long</span> <span class=variable>start</span> <span class=operator>=</span> System.currentTimeMillis();</span><br><span class=line> </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; total; i++) {</span><br><span class=line>             <span class=type>int</span> <span class=variable>n</span> <span class=operator>=</span> l.get(index);</span><br><span class=line>             n++;</span><br><span class=line>             l.set(index, n);</span><br><span class=line>        }</span><br><span class=line>        <span class=type>long</span> <span class=variable>end</span> <span class=operator>=</span> System.currentTimeMillis();</span><br><span class=line>        System.out.printf(<span class=string>"%s总长度是%d，定位到第%d个数据，取出来，加1，再放回去%n 重复%d遍，总共耗时 %d 毫秒 %n"</span>, type,total, index,total, end - start);</span><br><span class=line>        System.out.println();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure><h2 id=HashMap-vs-HashTable><a title="HashMap vs HashTable" class=headerlink href=#HashMap-vs-HashTable></a>HashMap vs HashTable</h2><h3 id=HashMap和Hashtable的区别><a class=headerlink href=#HashMap和Hashtable的区别 title=HashMap和Hashtable的区别></a>HashMap和Hashtable的区别</h3><blockquote><p>HashMap和Hashtable都实现了Map接口，都是键值对保存数据的方式<br>区别1：</blockquote><ul><li>HashMap可以存放 null<li>Hashtable不能存放null</ul><blockquote><p>区别2：</blockquote><ul><li>HashMap不是线程安全的类<li>Hashtable是线程安全的类</ul><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.HashMap;</span><br><span class=line><span class=keyword>import</span> java.util.Hashtable;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//HashMap和Hashtable都实现了Map接口，都是键值对保存数据的方式</span></span><br><span class=line>         </span><br><span class=line>        HashMap&lt;String,String> hashMap = <span class=keyword>new</span> <span class="title class_">HashMap</span>&lt;String,String>();</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//HashMap可以用null作key,作value</span></span><br><span class=line>        hashMap.put(<span class=literal>null</span>, <span class=string>"123"</span>);</span><br><span class=line>        hashMap.put(<span class=string>"123"</span>, <span class=literal>null</span>);</span><br><span class=line>         </span><br><span class=line>        Hashtable&lt;String,String> hashtable = <span class=keyword>new</span> <span class="title class_">Hashtable</span>&lt;String,String>();</span><br><span class=line>        <span class=comment>//Hashtable不能用null作key，不能用null作value</span></span><br><span class=line>        hashtable.put(<span class=literal>null</span>, <span class=string>"123"</span>);</span><br><span class=line>        hashtable.put(<span class=string>"123"</span>, <span class=literal>null</span>);</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=Hashcode-原理><a title="Hashcode 原理" class=headerlink href=#Hashcode-原理></a>Hashcode 原理</h2><h3 id=List查找的低效率><a class=headerlink href=#List查找的低效率 title=List查找的低效率></a>List查找的低效率</h3><blockquote><p>假设在List中存放着无重复名称，没有顺序的2000000个Hero，要把名字叫做“hero 1000000”的对象找出来。</blockquote><blockquote><p>List的做法是对每一个进行挨个遍历，直到找到名字叫做“hero 1000000”的英雄。<br><code>最差的情况下，需要遍历和比较2000000次</code>，才能找到对应的英雄。</blockquote><blockquote><p>测试逻辑：</blockquote><ol><li>初始化2000000个对象到ArrayList中<li>打乱容器中的数据顺序<li>进行10次查询，统计每一次消耗的时间</ol><blockquote><p>不同计算机的配置情况下，所花的时间是有区别的。 在本机上，花掉的时间大概是600毫秒左右。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>     </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Collections;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line>     </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>     </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>            </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>j</span> <span class=operator>=</span> <span class=number>0</span>; j &lt; <span class=number>2000000</span>; j++) {</span><br><span class=line>            <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"Hero "</span> + j);</span><br><span class=line>            heros.add(h);</span><br><span class=line>        }</span><br><span class=line>            </span><br><span class=line>        <span class=comment>// 进行10次查找，观察大体的平均值</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>            <span class=comment>// 打乱heros中元素的顺序</span></span><br><span class=line>            Collections.shuffle(heros);</span><br><span class=line>             </span><br><span class=line>            <span class=type>long</span> <span class=variable>start</span> <span class=operator>=</span> System.currentTimeMillis();</span><br><span class=line>     </span><br><span class=line>            <span class=type>String</span> <span class=variable>target</span> <span class=operator>=</span> <span class=string>"Hero 1000000"</span>;</span><br><span class=line>     </span><br><span class=line>            <span class=keyword>for</span> (Hero hero : heros) {</span><br><span class=line>                <span class=keyword>if</span> (hero.name.equals(target)) {</span><br><span class=line>                    System.out.println(<span class=string>"找到了 hero!"</span> );</span><br><span class=line>                    <span class=keyword>break</span>;</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>            <span class=type>long</span> <span class=variable>end</span> <span class=operator>=</span> System.currentTimeMillis();</span><br><span class=line>            <span class=type>long</span> <span class=variable>elapsed</span> <span class=operator>=</span> end - start;</span><br><span class=line>            System.out.println(<span class=string>"一共花了："</span> + elapsed + <span class=string>" 毫秒"</span>);</span><br><span class=line>        }</span><br><span class=line>             </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=HashMap的性能表现><a class=headerlink href=#HashMap的性能表现 title=HashMap的性能表现></a>HashMap的性能表现</h3><blockquote><p>使用HashMap 做同样的查找</blockquote><ol><li>初始化2000000个对象到HashMap中。<li>进行10次查询<li>统计每一次的查询消耗的时间</ol><blockquote><p>可以观察到，几乎不花时间，花费的时间在1毫秒以内。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.HashMap;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        HashMap&lt;String,Hero> heroMap = <span class=keyword>new</span> <span class="title class_">HashMap</span>&lt;String,Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>j</span> <span class=operator>=</span> <span class=number>0</span>; j &lt; <span class=number>2000000</span>; j++) {</span><br><span class=line>            <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"Hero "</span> + j);</span><br><span class=line>            heroMap.put(h.name, h);</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>"数据准备完成"</span>);</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>            <span class=type>long</span> <span class=variable>start</span> <span class=operator>=</span> System.currentTimeMillis();</span><br><span class=line>              </span><br><span class=line>            <span class=comment>//查找名字是Hero 1000000的对象</span></span><br><span class=line>            <span class=type>Hero</span> <span class=variable>target</span> <span class=operator>=</span> heroMap.get(<span class=string>"Hero 1000000"</span>);</span><br><span class=line>            System.out.println(<span class=string>"找到了 hero!"</span> + target.name);</span><br><span class=line>              </span><br><span class=line>            <span class=type>long</span> <span class=variable>end</span> <span class=operator>=</span> System.currentTimeMillis();</span><br><span class=line>            <span class=type>long</span> <span class=variable>elapsed</span> <span class=operator>=</span> end - start;</span><br><span class=line>            System.out.println(<span class=string>"一共花了："</span> + elapsed + <span class=string>" 毫秒"</span>);</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=HashMap原理与字典><a class=headerlink href=#HashMap原理与字典 title=HashMap原理与字典></a>HashMap原理与字典</h3><blockquote><p>在展开HashMap原理的讲解之前，首先回忆一下大家初中和高中使用的汉英字典。</blockquote><blockquote><p>比如要找一个单词对应的中文意思，假设单词是Lengendary,首先在目录找到Lengendary在第 555页。</blockquote><blockquote><p>然后，翻到第555页，这页不只一个单词，但是量已经很少了，逐一比较，很快就定位目标单词Lengendary。</blockquote><blockquote><p>555相当于就是Lengendary对应的<code>hashcode</code></blockquote><h3 id=分析HashMap性能卓越的原因><a class=headerlink href=#分析HashMap性能卓越的原因 title=分析HashMap性能卓越的原因></a>分析HashMap性能卓越的原因</h3><blockquote><p><code>-----hashcode概念-----</code><br>所有的对象，都有一个对应的<code>hashcode（散列值）</code><br>比如字符串“gareen”对应的是1001 (实际上不是，这里是方便理解，假设的值)<br>比如字符串“temoo”对应的是1004<br>比如字符串“db”对应的是1008<br>比如字符串“annie”对应的也是1008</blockquote><blockquote><p><code>-----保存数据-----</code><br>准备一个数组，其长度是2000，并且设定特殊的hashcode算法，使得所有字符串对应的hashcode，都会落在0-1999之间<br>要存放名字是”gareen”的英雄，就把该英雄和名称组成一个<code>键值对</code>，存放在数组的1001这个位置上<br>要存放名字是”temoo”的英雄，就把该英雄存放在数组的1004这个位置上<br>要存放名字是”db”的英雄，就把该英雄存放在数组的1008这个位置上<br>要存放名字是”annie”的英雄，然而 “annie”的hashcode 1008对应的位置<code>已经有db英雄了</code>，那么就在这里创建一个链表，<code>接在db英雄后面存放annie</code></blockquote><blockquote><p><code>-----查找数据-----</code><br>比如要查找gareen，首先计算”gareen”的hashcode是1001，根据1001这个下标，到数组中进行定位，（<code>根据数组下标进行定位，是非常快速的</code>） 发现1001这个位置就只有一个英雄，那么该英雄就是gareen.<br>比如要查找annie，首先计算”annie”的hashcode是1008，根据1008这个下标，到数组中进行定位，发现1008这个位置<code>有两个英雄</code>，那么就对两个英雄的名字进行逐一比较(<code>equals</code>)，因为此时需要比较的量就已经少很多了，很快也就可以找出目标英雄<br>这就是使用hashmap进行查询，非常快原理。</blockquote><blockquote><p>这是一种用空间换时间的思维方式。</blockquote><p><img src=http://stepimagewm.how2j.cn/819.png><h3 id=HashSet判断是否重复><a class=headerlink href=#HashSet判断是否重复 title=HashSet判断是否重复></a>HashSet判断是否重复</h3><blockquote><p>HashSet的数据是不能重复的，相同数据不能保存在一起，到底如何判断是否是重复的呢？<br>根据HashSet和HashMap的关系，我们了解到因为HashSet没有自身的实现，而是里面封装了一个HashMap，所以本质上就是判断HashMap的key是否重复。</blockquote><blockquote><p>再通过上一步的学习，key是否重复，是由两个步骤判断的：<br>hashcode是否一样<br>如果hashcode不一样，就是在不同的坑里，一定是不重复的<br>如果hashcode一样，就是在同一个坑里，还需要进行equals比较<br>如果equals一样，则是重复数据<br>如果equals不一样，则是不同数据。</blockquote><h2 id=比较器><a class=headerlink href=#比较器 title=比较器></a>比较器</h2><h3 id=Comparator><a class=headerlink href=#Comparator title=Comparator></a>Comparator</h3><blockquote><p>假设Hero有三个属性 name,hp,damage<br>一个集合中放存放10个Hero,通过Collections.sort对这10个进行排序。<br>那么到底是hp小的放前面？还是damage小的放前面？Collections.sort也无法确定，所以要指定到底按照哪种属性进行排序。<br>这里就需要提供一个Comparator给定如何进行两个对象之间的大小比较。</blockquote><p><img src=http://stepimagewm.how2j.cn/828.png><p><code>Hero.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span>  {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span> {</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=string>"Hero [name="</span> + name + <span class=string>", hp="</span> + hp + <span class=string>", damage="</span> + damage + <span class=string>"]\r\n"</span>;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name, <span class=type>int</span> hp, <span class=type>int</span> damage)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>        <span class=built_in>this</span>.hp = hp;</span><br><span class=line>        <span class=built_in>this</span>.damage = damage;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure><p><code>TestCollection.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>     </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Collections;</span><br><span class=line><span class=keyword>import</span> java.util.Comparator;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line>    </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>     </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>            </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>            <span class=comment>//通过随机值实例化hero的hp和damage</span></span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span>+ i, r.nextInt(<span class=number>100</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>"初始化后的集合："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>            </span><br><span class=line>        <span class=comment>//直接调用sort会出现编译错误，因为Hero有各种属性</span></span><br><span class=line>        <span class=comment>//到底按照哪种属性进行比较，Collections也不知道，不确定，所以没法排</span></span><br><span class=line>        <span class=comment>//Collections.sort(heros);</span></span><br><span class=line>            </span><br><span class=line>        <span class=comment>//引入Comparator，指定比较的算法</span></span><br><span class=line>        Comparator&lt;Hero> c = <span class=keyword>new</span> <span class="title class_">Comparator</span>&lt;Hero>() {</span><br><span class=line>            <span class=meta>@Override</span></span><br><span class=line>            <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">compare</span><span class=params>(Hero h1, Hero h2)</span> {</span><br><span class=line>                <span class=comment>//按照hp进行排序</span></span><br><span class=line>                <span class=keyword>if</span>(h1.hp>=h2.hp)</span><br><span class=line>                    <span class=keyword>return</span> <span class=number>1</span>;  <span class=comment>//正数表示h1比h2要大</span></span><br><span class=line>                <span class=keyword>else</span></span><br><span class=line>                    <span class=keyword>return</span> -<span class=number>1</span>;</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        Collections.sort(heros,c);</span><br><span class=line>        System.out.println(<span class=string>"按照血量排序后的集合："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=Comparable><a class=headerlink href=#Comparable title=Comparable></a>Comparable</h3><blockquote><p>使Hero类实现Comparable接口<br>在类里面提供比较算法<br>Collections.sort就有足够的信息进行排序了，也无需额外提供比较器Comparator</blockquote><blockquote><p>注： 如果返回-1, 就表示当前的更小，否则就是更大。</blockquote><p><img src=http://stepimagewm.how2j.cn/829.png><p><code>Hero.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">Comparable</span>&lt;Hero>{</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span>{</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name =name;</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=comment>//初始化name,hp,damage的构造方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name,<span class=type>float</span> hp, <span class=type>int</span> damage)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name =name;</span><br><span class=line>        <span class=built_in>this</span>.hp = hp;</span><br><span class=line>        <span class=built_in>this</span>.damage = damage;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">compareTo</span><span class=params>(Hero anotherHero)</span> {</span><br><span class=line>        <span class=keyword>if</span>(damage&lt;anotherHero.damage)</span><br><span class=line>            <span class=keyword>return</span> <span class=number>1</span>; </span><br><span class=line>        <span class=keyword>else</span></span><br><span class=line>            <span class=keyword>return</span> -<span class=number>1</span>;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=string>"Hero [name="</span> + name + <span class=string>", hp="</span> + hp + <span class=string>", damage="</span> + damage + <span class=string>"]\r\n"</span>;</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure><p><code>TestCollection.java</code><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> collection;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Collections;</span><br><span class=line><span class=keyword>import</span> java.util.Comparator;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestCollection</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>            <span class=comment>//通过随机值实例化hero的hp和damage</span></span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span>+ i, r.nextInt(<span class=number>100</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>        System.out.println(<span class=string>"初始化后的集合"</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//Hero类实现了接口Comparable，即自带比较信息。</span></span><br><span class=line>        <span class=comment>//Collections直接进行排序，无需额外的Comparator</span></span><br><span class=line>        Collections.sort(heros);</span><br><span class=line>        System.out.println(<span class=string>"按照伤害高低排序后的集合"</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h2 id=其他-聚合操作><a title="其他 - 聚合操作" class=headerlink href=#其他-聚合操作></a>其他 - 聚合操作</h2><blockquote><p>JDK8之后，引入了对集合的聚合操作，可以非常容易的遍历，筛选，比较集合中的元素。</blockquote><blockquote><p>像这样：</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre><td class=code><pre><span class=line> </span><br><span class=line><span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span>heros</span><br><span class=line>    .stream()</span><br><span class=line>    .sorted((h1,h2)->h1.hp>h2.hp?-<span class=number>1</span>:<span class=number>1</span>)</span><br><span class=line>    .skip(<span class=number>2</span>)</span><br><span class=line>    .map(h->h.getName())</span><br><span class=line>    .findFirst()</span><br><span class=line>    .get();</span><br></pre></table></figure><blockquote><p>但是要用好聚合，必须先掌握Lambda表达式。</blockquote><p><img src=http://stepimagewm.how2j.cn/2564.png><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Collections;</span><br><span class=line><span class=keyword>import</span> java.util.Comparator;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestAggregate</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"初始化集合后的数据 (最后一个数据重复)："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//传统方式</span></span><br><span class=line>        Collections.sort(heros,<span class=keyword>new</span> <span class="title class_">Comparator</span>&lt;Hero>() {</span><br><span class=line>            <span class=meta>@Override</span></span><br><span class=line>            <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">compare</span><span class=params>(Hero o1, Hero o2)</span> {</span><br><span class=line>                <span class=keyword>return</span> (<span class=type>int</span>) (o2.hp-o1.hp);</span><br><span class=line>            }</span><br><span class=line>        });</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>hero</span> <span class=operator>=</span> heros.get(<span class=number>2</span>);</span><br><span class=line>        System.out.println(<span class=string>"通过传统方式找出来的hp第三高的英雄名称是:"</span> + hero.name);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//聚合方式</span></span><br><span class=line>        <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span>heros</span><br><span class=line>            .stream()</span><br><span class=line>            .sorted((h1,h2)->h1.hp>h2.hp?-<span class=number>1</span>:<span class=number>1</span>)</span><br><span class=line>            .skip(<span class=number>2</span>)</span><br><span class=line>            .map(h->h.getName())</span><br><span class=line>            .findFirst()</span><br><span class=line>            .get();</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"通过聚合操作找出来的hp第三高的英雄名称是:"</span> + name);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h1 id=泛型><a class=headerlink href=#泛型 title=泛型></a>泛型</h1><h2 id=集合中的泛型><a class=headerlink href=#集合中的泛型 title=集合中的泛型></a>集合中的泛型</h2><h3 id=不使用泛型><a class=headerlink href=#不使用泛型 title=不使用泛型></a>不使用泛型</h3><blockquote><p>不使用泛型带来的问题<br>ADHero（物理攻击英雄），APHero（魔法攻击英雄）都是Hero的子类。ArrayList 默认接受Object类型的对象，所以所有对象都可以放进ArrayList中。<br>即：get(0) 返回的类型是Object。<br>接着，需要进行强制转换才可以得到APHero类型或者ADHero类型。<br>如果软件开发人员记忆比较好，能记得哪个是哪个，还是可以的。 但是开发人员会犯错误，比如第20行，会记错，把第0个对象转换为ADHero，这样就会出现类型转换异常。</blockquote><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.ADHero;</span><br><span class=line><span class=keyword>import</span> charactor.APHero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGeneric</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=type>ArrayList</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line>         </span><br><span class=line>        heros.add(<span class=keyword>new</span> <span class="title class_">APHero</span>());</span><br><span class=line>        heros.add(<span class=keyword>new</span> <span class="title class_">ADHero</span>());</span><br><span class=line>         </span><br><span class=line>        <span class=type>APHero</span> <span class=variable>apHero</span> <span class=operator>=</span>  (APHero) heros.get(<span class=number>0</span>);</span><br><span class=line>        <span class=type>ADHero</span> <span class=variable>adHero</span> <span class=operator>=</span>  (ADHero) heros.get(<span class=number>1</span>);</span><br><span class=line>         </span><br><span class=line>        <span class=type>ADHero</span> <span class=variable>adHero2</span> <span class=operator>=</span>  (ADHero) heros.get(<span class=number>0</span>);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h3 id=使用泛型><a class=headerlink href=#使用泛型 title=使用泛型></a>使用泛型</h3><blockquote><p>使用泛型的好处：<br>泛型的用法是在容器后面添加<type><br>Type可以是类，抽象类，接口<br>泛型表示这种容器，<code>只能存放APHero</code>，ADHero就放不进去了。 <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.APHero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGeneric</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        ArrayList&lt;APHero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;APHero>();</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//只有APHero可以放进去    </span></span><br><span class=line>        heros.add(<span class=keyword>new</span> <span class="title class_">APHero</span>());</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//ADHero甚至放不进去</span></span><br><span class=line>        <span class=comment>//heros.add(new ADHero());</span></span><br><span class=line>         </span><br><span class=line>        <span class=comment>//获取的时候也不需要进行转型，因为取出来一定是APHero</span></span><br><span class=line>        <span class=type>APHero</span> <span class=variable>apHero</span> <span class=operator>=</span>  heros.get(<span class=number>0</span>);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=子类对象><a class=headerlink href=#子类对象 title=子类对象></a>子类对象</h3><blockquote><p>假设容器的泛型是Hero, 那么Hero的子类APHero, ADHero都可以放进去，和Hero无关的类型Item还是放不进去。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Item;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.ADHero;</span><br><span class=line><span class=keyword>import</span> charactor.APHero;</span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGeneric</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        ArrayList&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//只有作为Hero的子类可以放进去     </span></span><br><span class=line>        heros.add(<span class=keyword>new</span> <span class="title class_">APHero</span>());</span><br><span class=line>        heros.add(<span class=keyword>new</span> <span class="title class_">ADHero</span>());</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//和Hero无关的类型Item还是放不进去</span></span><br><span class=line>        <span class=comment>//heros.add(new Item());</span></span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=泛型的简写-1><a class=headerlink href=#泛型的简写-1 title=泛型的简写></a>泛型的简写</h3><blockquote><p>为了不使编译器出现警告，需要前后都使用泛型，像这样：</blockquote> <p><code>ArrayList&lt;Hero> heros = new ArrayList&lt;Hero>();</code></p> <blockquote><p>不过JDK7提供了一个可以略微减少代码量的泛型简写方式</blockquote> <p><code>ArrayList&lt;Hero> heros2 = new ArrayList&lt;>();</code></p> <blockquote><p>后面的泛型可以用&lt;>来代替，聊胜于无吧。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGeneric</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        ArrayList&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=comment>//后面可以只用&lt;></span></span><br><span class=line>        ArrayList&lt;Hero> heros2 = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=支持泛型的类><a class=headerlink href=#支持泛型的类 title=支持泛型的类></a>支持泛型的类</h2><h3 id=不支持泛型的Stack><a class=headerlink href=#不支持泛型的Stack title=不支持泛型的Stack></a>不支持泛型的Stack</h3><blockquote><p>以Stack栈为例子，如果不使用泛型</blockquote> <ul><li>当需要一个只能放Hero的栈的时候，就需要设计一个HeroStack<li>当需要一个只能放Item的栈的时候，就需要一个ItemStack</ul> <p><code>HeroStack.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.LinkedList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HeroStack</span> {</span><br><span class=line>   </span><br><span class=line>    LinkedList&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">LinkedList</span>&lt;Hero>();</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">push</span><span class=params>(Hero h)</span> {</span><br><span class=line>        heros.addLast(h);</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> Hero <span class="title function_">pull</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> heros.removeLast();</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> Hero <span class="title function_">peek</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> heros.getLast();</span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>           </span><br><span class=line>        <span class=type>HeroStack</span> <span class=variable>heroStack</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">HeroStack</span>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero name "</span> + i);</span><br><span class=line>            System.out.println(<span class=string>"压入 hero:"</span> + h);</span><br><span class=line>            heroStack.push(h);</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span>heroStack.pull();</span><br><span class=line>            System.out.println(<span class=string>"弹出 hero"</span> + h);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>}</span><br></pre></table></figure> <p><code>ItemStack.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.LinkedList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Item;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ItemStack</span> {</span><br><span class=line>   </span><br><span class=line>    LinkedList&lt;Item> Items = <span class=keyword>new</span> <span class="title class_">LinkedList</span>&lt;Item>();</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">push</span><span class=params>(Item h)</span> {</span><br><span class=line>        Items.addLast(h);</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> Item <span class="title function_">pull</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> Items.removeLast();</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> Item <span class="title function_">peek</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> Items.getLast();</span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>           </span><br><span class=line>        <span class=type>ItemStack</span> <span class=variable>ItemStack</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ItemStack</span>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            <span class=type>Item</span> <span class=variable>item</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Item</span>(<span class=string>"Item name "</span> + i);</span><br><span class=line>            System.out.println(<span class=string>"压入 Item:"</span> + item);</span><br><span class=line>            ItemStack.push(item);</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            <span class=type>Item</span> <span class=variable>item</span> <span class=operator>=</span>ItemStack.pull();</span><br><span class=line>            System.out.println(<span class=string>"弹出 Item"</span> + item);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=支持泛型的Stack><a class=headerlink href=#支持泛型的Stack title=支持泛型的Stack></a>支持泛型的Stack</h3><blockquote><p>设计一个支持泛型的栈MyStack<br>设计这个类的时候，在类的声明上，加上一个<t>，表示该类支持泛型。<br>T是type的缩写，也可以使用任何其他的合法的变量，比如A,B,X都可以，但是一般约定成俗使用T，代表类型。 <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.HashMap;</span><br><span class=line><span class=keyword>import</span> java.util.LinkedList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line><span class=keyword>import</span> property.Item;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">MyStack</span>&lt;T> {</span><br><span class=line>   </span><br><span class=line>    LinkedList&lt;T> values = <span class=keyword>new</span> <span class="title class_">LinkedList</span>&lt;T>();</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">push</span><span class=params>(T t)</span> {</span><br><span class=line>        values.addLast(t);</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> T <span class="title function_">pull</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> values.removeLast();</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> T <span class="title function_">peek</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> values.getLast();</span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//在声明这个Stack的时候，使用泛型&lt;Hero>就表示该Stack只能放Hero</span></span><br><span class=line>        MyStack&lt;Hero> heroStack = <span class=keyword>new</span> <span class="title class_">MyStack</span>&lt;>();</span><br><span class=line>        heroStack.push(<span class=keyword>new</span> <span class="title class_">Hero</span>());</span><br><span class=line>        <span class=comment>//不能放Item</span></span><br><span class=line>        heroStack.push(<span class=keyword>new</span> <span class="title class_">Item</span>());</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//在声明这个Stack的时候，使用泛型&lt;Item>就表示该Stack只能放Item</span></span><br><span class=line>        MyStack&lt;Item> itemStack = <span class=keyword>new</span> <span class="title class_">MyStack</span>&lt;>();</span><br><span class=line>        itemStack.push(<span class=keyword>new</span> <span class="title class_">Item</span>());</span><br><span class=line>        <span class=comment>//不能放Hero</span></span><br><span class=line>        itemStack.push(<span class=keyword>new</span> <span class="title class_">Hero</span>());</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>}</span><br></pre></table></figure> <h2 id=通配符><a class=headerlink href=#通配符 title=通配符></a>通配符</h2><h3 id=extends><a title="? extends" class=headerlink href=#extends></a>? extends</h3><blockquote><p>ArrayList heroList&lt;? extends Hero> 表示这是一个Hero泛型或者其子类泛型<br>heroList 的泛型可能是Hero<br>heroList 的泛型可能是APHero<br>heroList 的泛型可能是ADHero<br>所以 可以确凿的是，从heroList取出来的对象，一定是可以转型成Hero的</blockquote> <blockquote><p>但是，不能往里面放东西，因为<br>放APHero就不满足<adhero><br>放ADHero又不满足<aphero> <p><img alt="Alt text" src=/./1557839242864.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.ADHero;</span><br><span class=line><span class=keyword>import</span> charactor.APHero;</span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGeneric</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        ArrayList&lt;APHero> apHeroList = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;APHero>();</span><br><span class=line>        apHeroList.add(<span class=keyword>new</span> <span class="title class_">APHero</span>());</span><br><span class=line>         </span><br><span class=line>        ArrayList&lt;? <span class=keyword>extends</span> <span class="title class_">Hero</span>> heroList = apHeroList;</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//? extends Hero 表示这是一个Hero泛型的子类泛型</span></span><br><span class=line>          </span><br><span class=line>        <span class=comment>//heroList 的泛型可以是Hero</span></span><br><span class=line>        <span class=comment>//heroList 的泛型可以使APHero</span></span><br><span class=line>        <span class=comment>//heroList 的泛型可以使ADHero</span></span><br><span class=line>          </span><br><span class=line>        <span class=comment>//可以确凿的是，从heroList取出来的对象，一定是可以转型成Hero的</span></span><br><span class=line>          </span><br><span class=line>        Hero h= heroList.get(<span class=number>0</span>);</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//但是，不能往里面放东西</span></span><br><span class=line>        heroList.add(<span class=keyword>new</span> <span class="title class_">ADHero</span>()); <span class=comment>//编译错误，因为heroList的泛型 有可能是APHero</span></span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=super-1><a title="? super" class=headerlink href=#super-1></a>? super</h3><blockquote><p>ArrayList heroList&lt;? super Hero> 表示这是一个Hero泛型或者其父类泛型<br>heroList的泛型可能是Hero<br>heroList的泛型可能是Object</blockquote> <blockquote><p>可以往里面插入Hero以及Hero的子类<br>但是取出来有风险，因为不确定取出来是Hero还是Object</blockquote> <p><img src=http://stepimagewm.how2j.cn/838.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.ADHero;</span><br><span class=line><span class=keyword>import</span> charactor.APHero;</span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGeneric</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        ArrayList&lt;? <span class=built_in>super</span> Hero> heroList = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Object>();</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//? super Hero 表示 heroList的泛型是Hero或者其父类泛型</span></span><br><span class=line>          </span><br><span class=line>        <span class=comment>//heroList 的泛型可以是Hero</span></span><br><span class=line>        <span class=comment>//heroList 的泛型可以是Object</span></span><br><span class=line>          </span><br><span class=line>        <span class=comment>//所以就可以插入Hero</span></span><br><span class=line>        heroList.add(<span class=keyword>new</span> <span class="title class_">Hero</span>());</span><br><span class=line>        <span class=comment>//也可以插入Hero的子类</span></span><br><span class=line>        heroList.add(<span class=keyword>new</span> <span class="title class_">APHero</span>());</span><br><span class=line>        heroList.add(<span class=keyword>new</span> <span class="title class_">ADHero</span>());</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//但是，不能从里面取数据出来,因为其泛型可能是Object,而Object是强转Hero会失败</span></span><br><span class=line>        Hero h= heroList.get(<span class=number>0</span>);</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=泛型通配符><a title="泛型通配符 ?" class=headerlink href=#泛型通配符></a>泛型通配符 ?</h3><blockquote><p>泛型通配符? 代表任意泛型<br>既然?代表任意泛型，那么换句话说，这个容器什么泛型都有可能</blockquote> <blockquote><p>所以只能以Object的形式取出来<br>并且不能往里面放对象，因为不知道到底是一个什么泛型的容器</blockquote> <p><img src=http://stepimagewm.how2j.cn/836.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> property.Item;</span><br><span class=line><span class=keyword>import</span> charactor.APHero;</span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGeneric</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        ArrayList&lt;APHero> apHeroList = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;APHero>();</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//?泛型通配符，表示任意泛型</span></span><br><span class=line>        ArrayList&lt;?> generalList = apHeroList;</span><br><span class=line> </span><br><span class=line>        <span class=comment>//?的缺陷1： 既然?代表任意泛型，那么换句话说，你就不知道这个容器里面是什么类型</span></span><br><span class=line>        <span class=comment>//所以只能以Object的形式取出来</span></span><br><span class=line>        <span class=type>Object</span> <span class=variable>o</span> <span class=operator>=</span> generalList.get(<span class=number>0</span>);</span><br><span class=line> </span><br><span class=line>        <span class=comment>//?的缺陷2： 既然?代表任意泛型，那么既有可能是Hero,也有可能是Item</span></span><br><span class=line>        <span class=comment>//所以，放哪种对象进去，都有风险，结果就什么什么类型的对象，都不能放进去</span></span><br><span class=line>        generalList.add(<span class=keyword>new</span> <span class="title class_">Item</span>()); <span class=comment>//编译错误 因为?代表任意泛型，很有可能不是Item</span></span><br><span class=line>        generalList.add(<span class=keyword>new</span> <span class="title class_">Hero</span>()); <span class=comment>//编译错误 因为?代表任意泛型，很有可能不是Hero</span></span><br><span class=line>        generalList.add(<span class=keyword>new</span> <span class="title class_">APHero</span>()); <span class=comment>//编译错误  因为?代表任意泛型，很有可能不是APHero</span></span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=泛型通配符总结><a class=headerlink href=#泛型通配符总结 title=泛型通配符总结></a>泛型通配符总结</h3><blockquote><ul><li>如果希望只取出，不插入，就使用<code>? extends Hero</code><li>如果希望只插入，不取出，就使用<code>? super Hero</code><li>如果希望，又能插入，又能取出，<code>就不要用通配符 ？</code></ul></blockquote> <h2 id=子类泛型-与-父类泛型-的转换><a title="子类泛型 与 父类泛型 的转换" class=headerlink href=#子类泛型-与-父类泛型-的转换></a>子类泛型 与 父类泛型 的转换</h2><h3 id=对象转型-1><a class=headerlink href=#对象转型-1 title=对象转型></a>对象转型</h3><blockquote><p>根据面向对象学习的知识，子类转父类 是一定可以成功的。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.ADHero;</span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGeneric</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        <span class=type>ADHero</span> <span class=variable>ad</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ADHero</span>();</span><br><span class=line>        <span class=comment>//子类转父类</span></span><br><span class=line>        h = ad;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br><span class=line></span><br></pre></table></figure> <h3 id=子类泛型-不能转-父类泛型><a title="子类泛型 不能转 父类泛型" class=headerlink href=#子类泛型-不能转-父类泛型></a>子类泛型 不能转 父类泛型</h3><p><img src=http://stepimagewm.how2j.cn/835.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.ADHero;</span><br><span class=line><span class=keyword>import</span> charactor.APHero;</span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGeneric</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        ArrayList&lt;Hero> hs =<span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>        ArrayList&lt;ADHero> adhs =<span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line> </span><br><span class=line>        <span class=comment>//假设能转换成功</span></span><br><span class=line>        hs = adhs;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//作为Hero泛型的hs,是可以向其中加入APHero的</span></span><br><span class=line>        <span class=comment>//但是hs这个引用，实际上是指向的一个ADHero泛型的容器</span></span><br><span class=line>        <span class=comment>//如果能加进去，就变成了ADHero泛型的容器里放进了APHero，这就矛盾了</span></span><br><span class=line>        hs.add(<span class=keyword>new</span> <span class="title class_">APHero</span>());</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=父类泛型-也不能转换为-子类泛型><a title="父类泛型 也不能转换为 子类泛型" class=headerlink href=#父类泛型-也不能转换为-子类泛型></a>父类泛型 也不能转换为 子类泛型</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> generic;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.ADHero;</span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestGeneric</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        ArrayList&lt;Hero> hs =<span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>        ArrayList&lt;ADHero> adhs =<span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>  </span><br><span class=line>        <span class=comment>//假设能成功</span></span><br><span class=line>        adhs = hs;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//这个时候adhs实际上指向的是泛型是Hero的容器,而这个容器里可能放的是一个APHero</span></span><br><span class=line>        <span class=comment>//而根据泛型，直接取出来就转型成了ADHero</span></span><br><span class=line>        <span class=comment>//所以就变成了APHero转型成ADHero，这是矛盾的。</span></span><br><span class=line>        <span class=type>ADHero</span> <span class=variable>ad</span> <span class=operator>=</span>adhs.get(<span class=number>0</span>);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure> <h1 id=Lambda><a class=headerlink href=#Lambda title=Lambda></a>Lambda</h1><h2 id=普通方法><a class=headerlink href=#普通方法 title=普通方法></a>普通方法</h2><blockquote><p>使用一个普通方法，在for循环遍历中进行条件判断，筛选出满足条件的数据</blockquote> <p><code>hp>100 && damage&lt;50</code></p> <p><img src=http://stepimagewm.how2j.cn/2551.png></p> <p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>     </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">Comparable</span>&lt;Hero>{</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>        </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>        </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span>{</span><br><span class=line>           </span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name =name;</span><br><span class=line>   </span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>    <span class=comment>//初始化name,hp,damage的构造方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name,<span class=type>float</span> hp, <span class=type>int</span> damage)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name =name;</span><br><span class=line>        <span class=built_in>this</span>.hp = hp;</span><br><span class=line>        <span class=built_in>this</span>.damage = damage;</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">compareTo</span><span class=params>(Hero anotherHero)</span> {</span><br><span class=line>        <span class=keyword>if</span>(damage&lt;anotherHero.damage)</span><br><span class=line>            <span class=keyword>return</span> <span class=number>1</span>; </span><br><span class=line>        <span class=keyword>else</span></span><br><span class=line>            <span class=keyword>return</span> -<span class=number>1</span>;</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=string>"Hero [name="</span> + name + <span class=string>", hp="</span> + hp + <span class=string>", damage="</span> + damage + <span class=string>"]\r\n"</span>;</span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestLambda.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestLambda</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>"初始化后的集合："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        System.out.println(<span class=string>"筛选出 hp>100 && damange&lt;50的英雄"</span>);</span><br><span class=line>        filter(heros);</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">filter</span><span class=params>(List&lt;Hero> heros)</span> {</span><br><span class=line>        <span class=keyword>for</span> (Hero hero : heros) {</span><br><span class=line>            <span class=keyword>if</span>(hero.hp><span class=number>100</span> && hero.damage&lt;<span class=number>50</span>)</span><br><span class=line>                System.out.print(hero);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=匿名类方式><a class=headerlink href=#匿名类方式 title=匿名类方式></a>匿名类方式</h3><blockquote><p>首先准备一个接口HeroChecker，提供一个test(Hero)方法<br>然后通过匿名类的方式，实现这个接口</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line><span class=type>HeroChecker</span> <span class=variable>checker</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">HeroChecker</span>() {</span><br><span class=line>	<span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">test</span><span class=params>(Hero h)</span> {</span><br><span class=line>		<span class=keyword>return</span> (h.hp><span class=number>100</span> && h.damage&lt;<span class=number>50</span>);</span><br><span class=line>	}</span><br><span class=line>};</span><br></pre></table></figure> <blockquote><p>接着调用filter，传递这个checker进去进行判断，这种方式就很像通过Collections.sort在对一个Hero集合排序，需要传一个Comparator的匿名类对象进去一样。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2552.png></p> <p><code>HeroChecker.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>interface</span> <span class="title class_">HeroChecker</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">test</span><span class=params>(Hero h)</span>;</span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestLambda.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestLambda</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>"初始化后的集合："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        System.out.println(<span class=string>"使用匿名类的方式，筛选出 hp>100 && damange&lt;50的英雄"</span>);</span><br><span class=line>        <span class=type>HeroChecker</span> <span class=variable>checker</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">HeroChecker</span>() {</span><br><span class=line>            <span class=meta>@Override</span></span><br><span class=line>            <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">test</span><span class=params>(Hero h)</span> {</span><br><span class=line>                <span class=keyword>return</span> (h.hp><span class=number>100</span> && h.damage&lt;<span class=number>50</span>);</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>           </span><br><span class=line>        filter(heros,checker);</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">filter</span><span class=params>(List&lt;Hero> heros,HeroChecker checker)</span> {</span><br><span class=line>        <span class=keyword>for</span> (Hero hero : heros) {</span><br><span class=line>            <span class=keyword>if</span>(checker.test(hero))</span><br><span class=line>                System.out.print(hero);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=Lambda方式><a class=headerlink href=#Lambda方式 title=Lambda方式></a>Lambda方式</h3><blockquote><p>使用Lambda方式筛选出数据</blockquote> <p><code>filter(heros,(h)->h.hp>100 && h.damage&lt;50);</code></p> <blockquote><p>同样是调用filter方法，从上一步的传递匿名类对象，变成了传递一个Lambda表达式进去</blockquote> <p><code>h->h.hp>100 && h.damage&lt;50</code></p> <blockquote><p>咋一看Lambda表达式似乎不好理解，其实很简单，下一步讲解如何从一个匿名类一点点演变成Lambda表达式。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2553.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestLamdba</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>"初始化后的集合："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        System.out.println(<span class=string>"使用Lamdba的方式，筛选出 hp>100 && damange&lt;50的英雄"</span>);</span><br><span class=line>        filter(heros,h->h.hp><span class=number>100</span> && h.damage&lt;<span class=number>50</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">filter</span><span class=params>(List&lt;Hero> heros,HeroChecker checker)</span> {</span><br><span class=line>        <span class=keyword>for</span> (Hero hero : heros) {</span><br><span class=line>            <span class=keyword>if</span>(checker.test(hero))</span><br><span class=line>                System.out.print(hero);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=从匿名类演变成Lambda表达式><a class=headerlink href=#从匿名类演变成Lambda表达式 title=从匿名类演变成Lambda表达式></a>从匿名类演变成Lambda表达式</h3><blockquote><p>Lambda表达式可以看成是匿名类一点点演变过来</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestLamdba</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>"初始化后的集合："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        System.out.println(<span class=string>"使用匿名类的方式，筛选出 hp>100 && damange&lt;50的英雄"</span>);</span><br><span class=line>        <span class=comment>// 1.匿名类的正常写法</span></span><br><span class=line>        <span class=type>HeroChecker</span> <span class=variable>c1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">HeroChecker</span>() {</span><br><span class=line>            <span class=meta>@Override</span></span><br><span class=line>            <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">test</span><span class=params>(Hero h)</span> {</span><br><span class=line>                <span class=keyword>return</span> (h.hp > <span class=number>100</span> && h.damage &lt; <span class=number>50</span>);</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        <span class=comment>// 2.把new HeroCheker，方法名，方法返回类型信息去掉</span></span><br><span class=line>        <span class=comment>// 只保留方法参数和方法体</span></span><br><span class=line>        <span class=comment>// 参数和方法体之间加上符号 -></span></span><br><span class=line>        <span class=type>HeroChecker</span> <span class=variable>c2</span> <span class=operator>=</span> (Hero h) -> {</span><br><span class=line>            <span class=keyword>return</span> h.hp > <span class=number>100</span> && h.damage &lt; <span class=number>50</span>;</span><br><span class=line>        };</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 3.把return和{}去掉</span></span><br><span class=line>        <span class=type>HeroChecker</span> <span class=variable>c3</span> <span class=operator>=</span> (Hero h) -> h.hp > <span class=number>100</span> && h.damage &lt; <span class=number>50</span>;</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 4.把参数类型和圆括号去掉</span></span><br><span class=line>        <span class=type>HeroChecker</span> <span class=variable>c4</span> <span class=operator>=</span> h -> h.hp > <span class=number>100</span> && h.damage &lt; <span class=number>50</span>;</span><br><span class=line> </span><br><span class=line>        <span class=comment>// 5.把c4作为参数传递进去</span></span><br><span class=line>        filter(heros, c4);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>// 6.直接把表达式传递进去</span></span><br><span class=line>        filter(heros, h -> h.hp > <span class=number>100</span> && h.damage &lt; <span class=number>50</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">filter</span><span class=params>(List&lt;Hero> heros, HeroChecker checker)</span> {</span><br><span class=line>        <span class=keyword>for</span> (Hero hero : heros) {</span><br><span class=line>            <span class=keyword>if</span> (checker.test(hero))</span><br><span class=line>                System.out.print(hero);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=匿名方法><a class=headerlink href=#匿名方法 title=匿名方法></a>匿名方法</h3><blockquote><p>与匿名类 概念相比较，<br>Lambda 其实就是匿名方法，这是一种把方法作为参数进行传递的编程思想。</blockquote> <blockquote><p>虽然代码是这么写</blockquote> <p><code>filter(heros, h -> h.hp > 100 && h.damage &lt; 50);</code></p> <blockquote><p>但是，Java会在背后，悄悄的，把这些都还原成匿名类方式。<br>引入Lambda表达式，会使得代码更加紧凑，而不是各种接口和匿名类到处飞。</blockquote> <h3 id=Lambda的弊端><a class=headerlink href=#Lambda的弊端 title=Lambda的弊端></a>Lambda的弊端</h3><blockquote><p>Lambda表达式虽然带来了代码的简洁，但是也有其局限性。</blockquote> <ol><li>可读性差，与<code>啰嗦的</code>但是<code>清晰的</code>匿名类代码结构比较起来，Lambda表达式一旦变得比较长，就难以理解<li>不便于调试，很难在Lambda表达式中增加调试信息，比如日志<li>版本支持，Lambda表达式在JDK8版本中才开始支持，如果系统使用的是以前的版本，考虑系统的稳定性等原因，而不愿意升级，那么就无法使用。</ol> <blockquote><p>Lambda比较适合用在简短的业务代码中，并不适合用在复杂的系统中，会加大维护成本。</blockquote> <h2 id=方法引用><a class=headerlink href=#方法引用 title=方法引用></a>方法引用</h2><h3 id=引用静态方法><a class=headerlink href=#引用静态方法 title=引用静态方法></a>引用静态方法</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestLambda</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>"初始化后的集合："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>           </span><br><span class=line>        <span class=type>HeroChecker</span> <span class=variable>c</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">HeroChecker</span>() {</span><br><span class=line>            <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">test</span><span class=params>(Hero h)</span> {</span><br><span class=line>                <span class=keyword>return</span> h.hp><span class=number>100</span> && h.damage&lt;<span class=number>50</span>;</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>          </span><br><span class=line>        System.out.println(<span class=string>"使用匿名类过滤"</span>);</span><br><span class=line>        filter(heros, c);</span><br><span class=line>        System.out.println(<span class=string>"使用Lambda表达式"</span>);</span><br><span class=line>        filter(heros, h->h.hp><span class=number>100</span> && h.damage&lt;<span class=number>50</span>);</span><br><span class=line>        System.out.println(<span class=string>"在Lambda表达式中使用静态方法"</span>);</span><br><span class=line>        filter(heros, h -> TestLambda.testHero(h) );</span><br><span class=line>        System.out.println(<span class=string>"直接引用静态方法"</span>);</span><br><span class=line>        filter(heros, TestLambda::testHero);</span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=type>boolean</span> <span class="title function_">testHero</span><span class=params>(Hero h)</span> {</span><br><span class=line>        <span class=keyword>return</span> h.hp><span class=number>100</span> && h.damage&lt;<span class=number>50</span>;</span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">filter</span><span class=params>(List&lt;Hero> heros, HeroChecker checker)</span> {</span><br><span class=line>        <span class=keyword>for</span> (Hero hero : heros) {</span><br><span class=line>            <span class=keyword>if</span> (checker.test(hero))</span><br><span class=line>                System.out.print(hero);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=引用对象方法><a class=headerlink href=#引用对象方法 title=引用对象方法></a>引用对象方法</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestLambda</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>"初始化后的集合："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>     </span><br><span class=line>        System.out.println(<span class=string>"使用引用对象方法  的过滤结果："</span>);</span><br><span class=line>        <span class=comment>//使用类的对象方法</span></span><br><span class=line>        <span class=type>TestLambda</span> <span class=variable>testLambda</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">TestLambda</span>();</span><br><span class=line>        filter(heros, testLambda::testHero);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">testHero</span><span class=params>(Hero h)</span> {</span><br><span class=line>        <span class=keyword>return</span> h.hp><span class=number>100</span> && h.damage&lt;<span class=number>50</span>;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">filter</span><span class=params>(List&lt;Hero> heros, HeroChecker checker)</span> {</span><br><span class=line>        <span class=keyword>for</span> (Hero hero : heros) {</span><br><span class=line>            <span class=keyword>if</span> (checker.test(hero))</span><br><span class=line>                System.out.print(hero);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=引用容器中的对象的方法><a class=headerlink href=#引用容器中的对象的方法 title=引用容器中的对象的方法></a>引用容器中的对象的方法</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestLambda</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>"初始化后的集合："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"Lambda表达式："</span>);       </span><br><span class=line>        filter(heros,h-> h.hp><span class=number>100</span> && h.damage&lt;<span class=number>50</span> );</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"Lambda表达式中调用容器中的对象的matched方法："</span>);       </span><br><span class=line>        filter(heros,h-> h.matched() );</span><br><span class=line>  </span><br><span class=line>        System.out.println(<span class=string>"引用容器中对象的方法 之过滤结果："</span>);       </span><br><span class=line>        filter(heros, Hero::matched);</span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">testHero</span><span class=params>(Hero h)</span> {</span><br><span class=line>        <span class=keyword>return</span> h.hp><span class=number>100</span> && h.damage&lt;<span class=number>50</span>;</span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">filter</span><span class=params>(List&lt;Hero> heros, HeroChecker checker)</span> {</span><br><span class=line>        <span class=keyword>for</span> (Hero hero : heros) {</span><br><span class=line>            <span class=keyword>if</span> (checker.test(hero))</span><br><span class=line>                System.out.print(hero);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=引用构造器><a class=headerlink href=#引用构造器 title=引用构造器></a>引用构造器</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.function.Supplier;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestLambda</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>    Supplier&lt;List> s = <span class=keyword>new</span> <span class="title class_">Supplier</span>&lt;List>() {</span><br><span class=line>        <span class=keyword>public</span> List <span class="title function_">get</span><span class=params>()</span> {</span><br><span class=line>            <span class=keyword>return</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line>        }</span><br><span class=line>    };</span><br><span class=line> </span><br><span class=line>    <span class=comment>//匿名类</span></span><br><span class=line>    <span class=type>List</span> <span class=variable>list1</span> <span class=operator>=</span> getList(s);</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//Lambda表达式</span></span><br><span class=line>    <span class=type>List</span> <span class=variable>list2</span> <span class=operator>=</span> getList(()-><span class=keyword>new</span> <span class="title class_">ArrayList</span>());</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//引用构造器</span></span><br><span class=line>    <span class=type>List</span> <span class=variable>list3</span> <span class=operator>=</span> getList(ArrayList::<span class=keyword>new</span>);</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> List <span class="title function_">getList</span><span class=params>(Supplier&lt;List> s)</span>{</span><br><span class=line>        <span class=keyword>return</span> s.get();</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure> <h2 id=聚合操作><a class=headerlink href=#聚合操作 title=聚合操作></a>聚合操作</h2><h3 id=传统方式与聚合操作方式遍历数据><a class=headerlink href=#传统方式与聚合操作方式遍历数据 title=传统方式与聚合操作方式遍历数据></a>传统方式与聚合操作方式遍历数据</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestAggregate</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"初始化后的集合："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        System.out.println(<span class=string>"查询条件：hp>100 && damage&lt;50"</span>);</span><br><span class=line>        System.out.println(<span class=string>"通过传统操作方式找出满足条件的数据："</span>);</span><br><span class=line> </span><br><span class=line>        <span class=keyword>for</span> (Hero h : heros) {</span><br><span class=line>            <span class=keyword>if</span> (h.hp > <span class=number>100</span> && h.damage &lt; <span class=number>50</span>)</span><br><span class=line>                System.out.println(h.name);</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"通过聚合操作方式找出满足条件的数据："</span>);</span><br><span class=line>        heros</span><br><span class=line>            .stream()</span><br><span class=line>            .filter(h -> h.hp > <span class=number>100</span> && h.damage &lt; <span class=number>50</span>)</span><br><span class=line>            .forEach(h -> System.out.println(h.name));</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=Stream和管道的概念><a class=headerlink href=#Stream和管道的概念 title=Stream和管道的概念></a>Stream和管道的概念</h3><blockquote><p>要了解聚合操作，首先要建立Stream和管道的概念<br>Stream 和Collection结构化的数据不一样，Stream是一系列的元素，就像是生产线上的罐头一样，一串串的出来。</blockquote> <blockquote><p>管道指的是一系列的聚合操作。<br>管道又分3个部分:</blockquote> <ul><li>管道源：在这个例子里，源是一个List<li>中间操作： 每个中间操作，又会返回一个Stream，比如.filter()又返回一个Stream, 中间操作是“懒”操作，并不会真正进行遍历。<li>结束操作：当这个操作执行后，流就被使用“光”了，无法再被操作。所以这必定是流的最后一个操作。 结束操作不会返回Stream，但是会返回int、float、String、 Collection或者像forEach，什么都不返回, 结束操作才进行真正的遍历行为，在遍历的时候，才会去进行中间操作的相关判断。</ul> <blockquote><p>注： 这个Stream和I/O章节的InputStream,OutputStream是不一样的概念。</blockquote> <h4 id=管道源><a class=headerlink href=#管道源 title=管道源></a>管道源</h4><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Arrays;</span><br><span class=line><span class=keyword>import</span> java.util.HashMap;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestAggregate</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>        <span class=comment>//管道源是集合</span></span><br><span class=line>        heros</span><br><span class=line>        .stream()</span><br><span class=line>        .forEach(h->System.out.println(h.name));</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//管道源是数组</span></span><br><span class=line>        Hero hs[] = heros.toArray(<span class=keyword>new</span> <span class="title class_">Hero</span>[heros.size()]);</span><br><span class=line>        Arrays.stream(hs)</span><br><span class=line>        .forEach(h->System.out.println(h.name));</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h4 id=中间操作><a class=headerlink href=#中间操作 title=中间操作></a>中间操作</h4><blockquote><p>每个中间操作，又会返回一个Stream，比如.filter()又返回一个Stream, 中间操作是“懒”操作，并不会真正进行遍历。</blockquote> <blockquote><p>中间操作比较多，主要分两类：</blockquote> <ul><li>对元素进行筛选<li>转换为其他形式的流</ul> <blockquote><p><code>对元素进行筛选</code>：</blockquote> <ul><li>filter 匹配<li>distinct 去除重复(根据equals判断)<li>sorted 自然排序<li>sorted(Comparator<t>) 指定排序 <li>limit 保留</li> <li>skip 忽略</li> <blockquote><p><code>转换为其他形式的流</code></blockquote> <ul><li>mapToDouble 转换为double的流<li>map 转换为任意类型的流</ul> <p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>      </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> <span class=keyword>implements</span> <span class="title class_">Comparable</span>&lt;Hero>{</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>         </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>         </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span>{</span><br><span class=line>            </span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">getName</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> name;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setName</span><span class=params>(String name)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> <span class="title function_">getHp</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> hp;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setHp</span><span class=params>(<span class=type>float</span> hp)</span> {</span><br><span class=line>        <span class=built_in>this</span>.hp = hp;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">getDamage</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> damage;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setDamage</span><span class=params>(<span class=type>int</span> damage)</span> {</span><br><span class=line>        <span class=built_in>this</span>.damage = damage;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name =name;</span><br><span class=line>    }</span><br><span class=line>    <span class=comment>//初始化name,hp,damage的构造方法</span></span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String name,<span class=type>float</span> hp, <span class=type>int</span> damage)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name =name;</span><br><span class=line>        <span class=built_in>this</span>.hp = hp;</span><br><span class=line>        <span class=built_in>this</span>.damage = damage;</span><br><span class=line>    }</span><br><span class=line>    </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">compareTo</span><span class=params>(Hero anotherHero)</span> {</span><br><span class=line>        <span class=keyword>if</span>(damage&lt;anotherHero.damage)</span><br><span class=line>            <span class=keyword>return</span> <span class=number>1</span>; </span><br><span class=line>        <span class=keyword>else</span></span><br><span class=line>            <span class=keyword>return</span> -<span class=number>1</span>;</span><br><span class=line>    }</span><br><span class=line>    </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=string>"Hero [name="</span> + name + <span class=string>", hp="</span> + hp + <span class=string>", damage="</span> + damage + <span class=string>"]\r\n"</span>;</span><br><span class=line>    }</span><br><span class=line>        </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestAggregate.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestAggregate</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>        <span class=comment>//制造一个重复数据</span></span><br><span class=line>        heros.add(heros.get(<span class=number>0</span>));</span><br><span class=line>        System.out.println(<span class=string>"初始化集合后的数据 (最后一个数据重复)："</span>);</span><br><span class=line>        System.out.println(heros);</span><br><span class=line>        System.out.println(<span class=string>"满足条件hp>100&&damage&lt;50的数据"</span>);</span><br><span class=line>          </span><br><span class=line>        heros</span><br><span class=line>            .stream()</span><br><span class=line>            .filter(h->h.hp><span class=number>100</span>&&h.damage&lt;<span class=number>50</span>)</span><br><span class=line>            .forEach(h->System.out.print(h));</span><br><span class=line>          </span><br><span class=line>        System.out.println(<span class=string>"去除重复的数据，去除标准是看equals"</span>);</span><br><span class=line>        heros</span><br><span class=line>            .stream()</span><br><span class=line>            .distinct()</span><br><span class=line>            .forEach(h->System.out.print(h));</span><br><span class=line>        System.out.println(<span class=string>"按照血量排序"</span>);</span><br><span class=line>        heros</span><br><span class=line>            .stream()</span><br><span class=line>            .sorted((h1,h2)->h1.hp>=h2.hp?<span class=number>1</span>:-<span class=number>1</span>)</span><br><span class=line>            .forEach(h->System.out.print(h));</span><br><span class=line>          </span><br><span class=line>        System.out.println(<span class=string>"保留3个"</span>);</span><br><span class=line>        heros</span><br><span class=line>            .stream()</span><br><span class=line>            .limit(<span class=number>3</span>)</span><br><span class=line>            .forEach(h->System.out.print(h));</span><br><span class=line>          </span><br><span class=line>        System.out.println(<span class=string>"忽略前3个"</span>);</span><br><span class=line>        heros</span><br><span class=line>            .stream()</span><br><span class=line>            .skip(<span class=number>3</span>)</span><br><span class=line>            .forEach(h->System.out.print(h));</span><br><span class=line>          </span><br><span class=line>        System.out.println(<span class=string>"转换为double的Stream"</span>);</span><br><span class=line>        heros</span><br><span class=line>            .stream()</span><br><span class=line>            .mapToDouble(Hero::getHp)</span><br><span class=line>            .forEach(h->System.out.println(h));</span><br><span class=line>          </span><br><span class=line>        System.out.println(<span class=string>"转换任意类型的Stream"</span>);</span><br><span class=line>        heros</span><br><span class=line>            .stream()</span><br><span class=line>            .map((h)-> h.name + <span class=string>" - "</span> + h.hp + <span class=string>" - "</span> + h.damage)</span><br><span class=line>            .forEach(h->System.out.println(h));</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h4 id=结束操作><a class=headerlink href=#结束操作 title=结束操作></a>结束操作</h4><blockquote><p>当进行结束操作后，流就被使用“光”了，无法再被操作。所以这必定是流的最后一个操作。 结束操作不会返回Stream，但是会返回int、float、String、 Collection或者像forEach，什么都不返回,。</blockquote> <blockquote><p>结束操作才真正进行遍历行为，前面的中间操作也在这个时候，才真正的执行。</blockquote> <blockquote><p>常见结束操作如下：</blockquote> <ul><li>forEach() 遍历每个元素<li>toArray() 转换为数组<li>min(Comparator<t>) 取最小的元素 <li>max(Comparator<t>) 取最大的元素 <li>count() 总数</li> <li>findFirst() 第一个元素</li> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> lambda;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Arrays;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line><span class=keyword>import</span> java.util.Random;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> org.omg.Messaging.SYNC_WITH_TRANSPORT;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestAggregate</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Random</span> <span class=variable>r</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Random</span>();</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            heros.add(<span class=keyword>new</span> <span class="title class_">Hero</span>(<span class=string>"hero "</span> + i, r.nextInt(<span class=number>1000</span>), r.nextInt(<span class=number>100</span>)));</span><br><span class=line>        }</span><br><span class=line>        System.out.println(<span class=string>"遍历集合中的每个数据"</span>);</span><br><span class=line>        heros</span><br><span class=line>            .stream()</span><br><span class=line>            .forEach(h->System.out.print(h));</span><br><span class=line>        System.out.println(<span class=string>"返回一个数组"</span>);</span><br><span class=line>        Object[] hs= heros</span><br><span class=line>            .stream()</span><br><span class=line>            .toArray();</span><br><span class=line>        System.out.println(Arrays.toString(hs));</span><br><span class=line>        System.out.println(<span class=string>"返回伤害最低的那个英雄"</span>);</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>minDamageHero</span> <span class=operator>=</span></span><br><span class=line>        heros</span><br><span class=line>            .stream()</span><br><span class=line>            .min((h1,h2)->h1.damage-h2.damage)</span><br><span class=line>            .get();</span><br><span class=line>        System.out.print(minDamageHero);</span><br><span class=line>        System.out.println(<span class=string>"返回伤害最高的那个英雄"</span>);</span><br><span class=line> </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>mxnDamageHero</span> <span class=operator>=</span></span><br><span class=line>                heros</span><br><span class=line>                .stream()</span><br><span class=line>                .max((h1,h2)->h1.damage-h2.damage)</span><br><span class=line>                .get();</span><br><span class=line>        System.out.print(mxnDamageHero);     </span><br><span class=line>         </span><br><span class=line>        System.out.println(<span class=string>"流中数据的总数"</span>);</span><br><span class=line>        <span class=type>long</span> <span class=variable>count</span> <span class=operator>=</span> heros</span><br><span class=line>                .stream()</span><br><span class=line>                .count();</span><br><span class=line>        System.out.println(count);</span><br><span class=line> </span><br><span class=line>        System.out.println(<span class=string>"第一个英雄"</span>);</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>firstHero</span> <span class=operator>=</span></span><br><span class=line>                heros</span><br><span class=line>                .stream()</span><br><span class=line>                .findFirst()</span><br><span class=line>                .get();</span><br><span class=line>         </span><br><span class=line>        System.out.println(firstHero);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h1 id=多线程><a class=headerlink href=#多线程 title=多线程></a>多线程</h1><h2 id=启动一个线程><a class=headerlink href=#启动一个线程 title=启动一个线程></a>启动一个线程</h2><blockquote><p>多线程即在同一时间，可以做多件事情。</blockquote> <blockquote><p>创建多线程有3种方式，分别是：<ul><li><code>继承线程类</code><li><code>实现Runnable接口</code><li><code>匿名类</code></ul></blockquote> <h3 id=线程概念><a class=headerlink href=#线程概念 title=线程概念></a>线程概念</h3><blockquote><p>首先要理解进程(Processor)和线程(Thread)的区别</blockquote> <ul><li><code>进程：</code>启动一个LOL.exe就叫一个进程。 接着又启动一个DOTA.exe，这叫两个进程。<li><code>线程：</code>线程是在进程内部同时做的事情，比如在LOL里，有很多事情要同时做，比如”盖伦” 击杀“提莫”，同时“赏金猎人”又在击杀“盲僧”，这就是由多线程来实现的。</ul> <blockquote><p>此处代码演示的是不使用多线程的情况：<br>只有在盖伦杀掉提莫后，赏金猎人才开始杀盲僧。</blockquote> <p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.Serializable;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span>{</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attackHero</span><span class=params>(Hero h)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=comment>//为了表示攻击需要时间，每次攻击暂停1000毫秒</span></span><br><span class=line>            Thread.sleep(<span class=number>1000</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>        h.hp-=damage;</span><br><span class=line>        System.out.format(<span class=string>"%s 正在攻击 %s, %s的血变成了 %.0f%n"</span>,name,h.name,h.name,h.hp);</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>if</span>(h.isDead())</span><br><span class=line>            System.out.println(h.name +<span class=string>"死了！"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">isDead</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=number>0</span>>=hp?<span class=literal>true</span>:<span class=literal>false</span>;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestThread.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>616</span>;</span><br><span class=line>        gareen.damage = <span class=number>50</span>;</span><br><span class=line> </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>        teemo.hp = <span class=number>300</span>;</span><br><span class=line>        teemo.damage = <span class=number>30</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>bh</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        bh.name = <span class=string>"赏金猎人"</span>;</span><br><span class=line>        bh.hp = <span class=number>500</span>;</span><br><span class=line>        bh.damage = <span class=number>65</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>leesin</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        leesin.name = <span class=string>"盲僧"</span>;</span><br><span class=line>        leesin.hp = <span class=number>455</span>;</span><br><span class=line>        leesin.damage = <span class=number>80</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//盖伦攻击提莫</span></span><br><span class=line>        <span class=keyword>while</span>(!teemo.isDead()){</span><br><span class=line>            gareen.attackHero(teemo);</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=comment>//赏金猎人攻击盲僧</span></span><br><span class=line>        <span class=keyword>while</span>(!leesin.isDead()){</span><br><span class=line>            bh.attackHero(leesin);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=创建多线程-继承线程类><a class=headerlink href=#创建多线程-继承线程类 title=创建多线程-继承线程类></a>创建多线程-继承线程类</h3><blockquote><p>使用多线程，就可以做到盖伦在攻击提莫的<code>同时</code>，赏金猎人也在攻击盲僧<br>设计一个类KillThread <code>继承Thread，并且重写run方法</code></blockquote> <blockquote><p>启动线程办法： 实例化一个KillThread对象，并且调用其<code>start</code>方法<br>就可以观察到 赏金猎人攻击盲僧的<code>同时</code>，盖伦也在攻击提莫。</blockquote> <p><code>KillThread.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">KillThread</span> <span class=keyword>extends</span> <span class="title class_">Thread</span>{</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>private</span> Hero h1;</span><br><span class=line>    <span class=keyword>private</span> Hero h2;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">KillThread</span><span class=params>(Hero h1, Hero h2)</span>{</span><br><span class=line>        <span class=built_in>this</span>.h1 = h1;</span><br><span class=line>        <span class=built_in>this</span>.h2 = h2;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>while</span>(!h2.isDead()){</span><br><span class=line>            h1.attackHero(h2);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestThread.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>616</span>;</span><br><span class=line>        gareen.damage = <span class=number>50</span>;</span><br><span class=line> </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>        teemo.hp = <span class=number>300</span>;</span><br><span class=line>        teemo.damage = <span class=number>30</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>bh</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        bh.name = <span class=string>"赏金猎人"</span>;</span><br><span class=line>        bh.hp = <span class=number>500</span>;</span><br><span class=line>        bh.damage = <span class=number>65</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>leesin</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        leesin.name = <span class=string>"盲僧"</span>;</span><br><span class=line>        leesin.hp = <span class=number>455</span>;</span><br><span class=line>        leesin.damage = <span class=number>80</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>KillThread</span> <span class=variable>killThread1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">KillThread</span>(gareen,teemo);</span><br><span class=line>        killThread1.start();</span><br><span class=line>        <span class=type>KillThread</span> <span class=variable>killThread2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">KillThread</span>(bh,leesin);</span><br><span class=line>        killThread2.start();</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=创建多线程-实现Runnable接口><a class=headerlink href=#创建多线程-实现Runnable接口 title=创建多线程-实现Runnable接口></a>创建多线程-实现Runnable接口</h3><blockquote><p>创建类Battle，实现Runnable接口<br>启动的时候，首先创建一个Battle对象，然后再根据该battle对象创建一个线程对象，并启动</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=type>Battle</span> <span class=variable>battle1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Battle</span>(gareen,teemo);</span><br><span class=line><span class=keyword>new</span> <span class="title class_">Thread</span>(battle1).start();</span><br></pre></table></figure> <blockquote><p>battle1 对象实现了Runnable接口，所以有run方法，但是直接调用run方法，并不会启动一个新的线程。必须借助一个线程对象的start()方法，才会启动一个新的线程。</blockquote> <blockquote><p>所以，在创建Thread对象的时候，把battle1作为构造方法的参数传递进去，这个线程启动的时候，就会去执行battle1.run()方法了。</blockquote> <p><code>Battle.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Battle</span> <span class=keyword>implements</span> <span class="title class_">Runnable</span>{</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>private</span> Hero h1;</span><br><span class=line>    <span class=keyword>private</span> Hero h2;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Battle</span><span class=params>(Hero h1, Hero h2)</span>{</span><br><span class=line>        <span class=built_in>this</span>.h1 = h1;</span><br><span class=line>        <span class=built_in>this</span>.h2 = h2;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>while</span>(!h2.isDead()){</span><br><span class=line>            h1.attackHero(h2);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestThread.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>616</span>;</span><br><span class=line>        gareen.damage = <span class=number>50</span>;</span><br><span class=line> </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>        teemo.hp = <span class=number>300</span>;</span><br><span class=line>        teemo.damage = <span class=number>30</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>bh</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        bh.name = <span class=string>"赏金猎人"</span>;</span><br><span class=line>        bh.hp = <span class=number>500</span>;</span><br><span class=line>        bh.damage = <span class=number>65</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>leesin</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        leesin.name = <span class=string>"盲僧"</span>;</span><br><span class=line>        leesin.hp = <span class=number>455</span>;</span><br><span class=line>        leesin.damage = <span class=number>80</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>Battle</span> <span class=variable>battle1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Battle</span>(gareen,teemo);</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">Thread</span>(battle1).start();</span><br><span class=line> </span><br><span class=line>        <span class=type>Battle</span> <span class=variable>battle2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Battle</span>(bh,leesin);</span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">Thread</span>(battle2).start();</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=创建多线程-匿名类><a class=headerlink href=#创建多线程-匿名类 title=创建多线程-匿名类></a>创建多线程-匿名类</h3><blockquote><p>使用匿名类，继承Thread,重写run方法，直接在run方法中写业务代码<br>匿名类的一个好处是可以很方便的访问外部的局部变量。<br>前提是外部的局部变量需要被声明为final。(JDK7以后就不需要了)</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>616</span>;</span><br><span class=line>        gareen.damage = <span class=number>50</span>;</span><br><span class=line>  </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>        teemo.hp = <span class=number>300</span>;</span><br><span class=line>        teemo.damage = <span class=number>30</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>bh</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        bh.name = <span class=string>"赏金猎人"</span>;</span><br><span class=line>        bh.hp = <span class=number>500</span>;</span><br><span class=line>        bh.damage = <span class=number>65</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>leesin</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        leesin.name = <span class=string>"盲僧"</span>;</span><br><span class=line>        leesin.hp = <span class=number>455</span>;</span><br><span class=line>        leesin.damage = <span class=number>80</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//匿名类</span></span><br><span class=line>        Thread t1= <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=comment>//匿名类中用到外部的局部变量teemo，必须把teemo声明为final</span></span><br><span class=line>                <span class=comment>//但是在JDK7以后，就不是必须加final的了</span></span><br><span class=line>                <span class=keyword>while</span>(!teemo.isDead()){</span><br><span class=line>                    gareen.attackHero(teemo);</span><br><span class=line>                }              </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>         </span><br><span class=line>        t1.start();</span><br><span class=line>          </span><br><span class=line>        Thread t2= <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>while</span>(!leesin.isDead()){</span><br><span class=line>                    bh.attackHero(leesin);</span><br><span class=line>                }              </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t2.start();</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=创建多线程的三种方式><a class=headerlink href=#创建多线程的三种方式 title=创建多线程的三种方式></a>创建多线程的三种方式</h3><blockquote><p>把上述3种方式再整理一下：</blockquote> <blockquote><ol><li>继承Thread类<li>实现Runnable接口<li>匿名类的方式</ol></blockquote> <blockquote><p>注： 启动线程是start()方法，run()并不能启动一个新的线程。</blockquote> <h2 id=常见线程方法><a class=headerlink href=#常见线程方法 title=常见线程方法></a>常见线程方法</h2><h3 id=当前线程暂停><a class=headerlink href=#当前线程暂停 title=当前线程暂停></a>当前线程暂停</h3><blockquote><p>Thread.sleep(1000); 表示当前线程暂停1000毫秒 ，其他线程不受影响<br>Thread.sleep(1000); 会抛出InterruptedException 中断异常，因为当前线程sleep的时候，有可能被停止，这时就会抛出 InterruptedException</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>         </span><br><span class=line>        Thread t1= <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=type>int</span> <span class=variable>seconds</span> <span class=operator>=</span><span class=number>0</span>;</span><br><span class=line>                <span class=keyword>while</span>(<span class=literal>true</span>){</span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>1000</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                    System.out.printf(<span class=string>"已经玩了LOL %d 秒%n"</span>, seconds++);</span><br><span class=line>                }              </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t1.start();</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=加入到当前线程中><a class=headerlink href=#加入到当前线程中 title=加入到当前线程中></a>加入到当前线程中</h3><blockquote><p>首先解释一下主线程的概念<br>所有进程，至少会有一个线程即主线程，即main方法开始执行，就会有一个看不见的主线程存在。</blockquote> <blockquote><p>在42行执行t.join，即表明在主线程中加入该线程。<br>主线程会等待该线程结束完毕， 才会往下运行。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>616</span>;</span><br><span class=line>        gareen.damage = <span class=number>50</span>;</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>        teemo.hp = <span class=number>300</span>;</span><br><span class=line>        teemo.damage = <span class=number>30</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>bh</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        bh.name = <span class=string>"赏金猎人"</span>;</span><br><span class=line>        bh.hp = <span class=number>500</span>;</span><br><span class=line>        bh.damage = <span class=number>65</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>leesin</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        leesin.name = <span class=string>"盲僧"</span>;</span><br><span class=line>        leesin.hp = <span class=number>455</span>;</span><br><span class=line>        leesin.damage = <span class=number>80</span>;</span><br><span class=line>          </span><br><span class=line>        Thread t1= <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>while</span>(!teemo.isDead()){</span><br><span class=line>                    gareen.attackHero(teemo);</span><br><span class=line>                }              </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>          </span><br><span class=line>        t1.start();</span><br><span class=line> </span><br><span class=line>        <span class=comment>//代码执行到这里，一直是main线程在运行</span></span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=comment>//t1线程加入到main线程中来，只有t1线程运行结束，才会继续往下走</span></span><br><span class=line>            t1.join();</span><br><span class=line>        } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        Thread t2= <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>while</span>(!leesin.isDead()){</span><br><span class=line>                    bh.attackHero(leesin);</span><br><span class=line>                }              </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        <span class=comment>//会观察到盖伦把提莫杀掉后，才运行t2线程</span></span><br><span class=line>        t2.start();</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=线程优先级><a class=headerlink href=#线程优先级 title=线程优先级></a>线程优先级</h3><blockquote><p>当线程处于竞争关系的时候，优先级高的线程会有更大的几率获得CPU资源<br>为了演示该效果，要把暂停时间去掉，多条线程各自会尽力去占有CPU资源<br>同时把英雄的血量增加100倍，攻击减低到1，才有足够的时间观察到优先级的演示<br>如图可见，线程1的优先级是MAX_PRIORITY，所以它争取到了更多的CPU资源执行代码</blockquote> <p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.io.Serializable;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span>{</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attackHero</span><span class=params>(Hero h)</span> {</span><br><span class=line>        <span class=comment>//把暂停时间去掉，多条线程各自会尽力去占有CPU资源</span></span><br><span class=line>        <span class=comment>//线程的优先级效果才可以看得出来</span></span><br><span class=line><span class=comment>//        try {</span></span><br><span class=line><span class=comment>//           </span></span><br><span class=line><span class=comment>//            Thread.sleep(0);</span></span><br><span class=line><span class=comment>//        } catch (InterruptedException e) {</span></span><br><span class=line><span class=comment>//            // TODO Auto-generated catch block</span></span><br><span class=line><span class=comment>//            e.printStackTrace();</span></span><br><span class=line><span class=comment>//        }</span></span><br><span class=line>        h.hp-=damage;</span><br><span class=line>        System.out.format(<span class=string>"%s 正在攻击 %s, %s的血变成了 %.0f%n"</span>,name,h.name,h.name,h.hp);</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>if</span>(h.isDead())</span><br><span class=line>            System.out.println(h.name +<span class=string>"死了！"</span>);</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">isDead</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=number>0</span>>=hp?<span class=literal>true</span>:<span class=literal>false</span>;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestThread.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>6160</span>;</span><br><span class=line>        gareen.damage = <span class=number>1</span>;</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>        teemo.hp = <span class=number>3000</span>;</span><br><span class=line>        teemo.damage = <span class=number>1</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>bh</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        bh.name = <span class=string>"赏金猎人"</span>;</span><br><span class=line>        bh.hp = <span class=number>5000</span>;</span><br><span class=line>        bh.damage = <span class=number>1</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>leesin</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        leesin.name = <span class=string>"盲僧"</span>;</span><br><span class=line>        leesin.hp = <span class=number>4505</span>;</span><br><span class=line>        leesin.damage = <span class=number>1</span>;</span><br><span class=line>          </span><br><span class=line>        Thread t1= <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line> </span><br><span class=line>                <span class=keyword>while</span>(!teemo.isDead()){</span><br><span class=line>                    gareen.attackHero(teemo);</span><br><span class=line>                }              </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>          </span><br><span class=line>        Thread t2= <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>while</span>(!leesin.isDead()){</span><br><span class=line>                    bh.attackHero(leesin);</span><br><span class=line>                }              </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>         </span><br><span class=line>        t1.setPriority(Thread.MAX_PRIORITY);</span><br><span class=line>        t2.setPriority(Thread.MIN_PRIORITY);</span><br><span class=line>        t1.start();</span><br><span class=line>        t2.start();</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=临时暂停><a class=headerlink href=#临时暂停 title=临时暂停></a>临时暂停</h3><blockquote><p>当前线程，临时暂停，使得其他线程可以有更多的机会占用CPU资源。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>61600</span>;</span><br><span class=line>        gareen.damage = <span class=number>1</span>;</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>teemo</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        teemo.name = <span class=string>"提莫"</span>;</span><br><span class=line>        teemo.hp = <span class=number>30000</span>;</span><br><span class=line>        teemo.damage = <span class=number>1</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>bh</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        bh.name = <span class=string>"赏金猎人"</span>;</span><br><span class=line>        bh.hp = <span class=number>50000</span>;</span><br><span class=line>        bh.damage = <span class=number>1</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>leesin</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        leesin.name = <span class=string>"盲僧"</span>;</span><br><span class=line>        leesin.hp = <span class=number>45050</span>;</span><br><span class=line>        leesin.damage = <span class=number>1</span>;</span><br><span class=line>          </span><br><span class=line>        Thread t1= <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line> </span><br><span class=line>                <span class=keyword>while</span>(!teemo.isDead()){</span><br><span class=line>                    gareen.attackHero(teemo);</span><br><span class=line>                }              </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>          </span><br><span class=line>        Thread t2= <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>while</span>(!leesin.isDead()){</span><br><span class=line>                    <span class=comment>//临时暂停，使得t1可以占用CPU资源</span></span><br><span class=line>                    Thread.<span class=keyword>yield</span>();</span><br><span class=line>                     </span><br><span class=line>                    bh.attackHero(leesin);</span><br><span class=line>                }              </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>         </span><br><span class=line>        t1.setPriority(<span class=number>5</span>);</span><br><span class=line>        t2.setPriority(<span class=number>5</span>);</span><br><span class=line>        t1.start();</span><br><span class=line>        t2.start();</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=守护线程><a class=headerlink href=#守护线程 title=守护线程></a>守护线程</h3><blockquote><p>守护线程的概念是： 当一个进程里，所有的线程都是守护线程的时候，结束当前进程。</blockquote> <blockquote><p>就好像一个公司有销售部，生产部这些和业务挂钩的部门。<br>除此之外，还有后勤，行政等这些支持部门。</blockquote> <blockquote><p>如果一家公司销售部，生产部都解散了，那么只剩下后勤和行政，那么这家公司也可以解散了。</blockquote> <blockquote><p>守护线程就相当于那些支持部门，如果一个进程只剩下守护线程，那么进程就会自动结束。</blockquote> <blockquote><p>守护线程通常会被用来做日志，性能统计等工作。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>          </span><br><span class=line>        Thread t1= <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=type>int</span> <span class=variable>seconds</span> <span class=operator>=</span><span class=number>0</span>;</span><br><span class=line>                 </span><br><span class=line>                <span class=keyword>while</span>(<span class=literal>true</span>){</span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>1000</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                    System.out.printf(<span class=string>"已经玩了LOL %d 秒%n"</span>, seconds++);</span><br><span class=line>                     </span><br><span class=line>                }              </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t1.setDaemon(<span class=literal>true</span>);</span><br><span class=line>        t1.start();</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>}</span><br></pre></table></figure> <h2 id=同步><a class=headerlink href=#同步 title=同步></a>同步</h2><blockquote><p>多线程的同步问题指的是多个线程同时修改一个数据的时候，可能导致的问题。<br>多线程的问题，又叫<code>Concurrency</code> 问题。</blockquote> <h3 id=演示同步问题><a class=headerlink href=#演示同步问题 title=演示同步问题></a>演示同步问题</h3><blockquote><p>假设盖伦有10000滴血，并且在基地里，同时又被对方多个英雄攻击<br>就是有多个线程在减少盖伦的hp<br>同时又有多个线程在恢复盖伦的hp<br>假设线程的数量是一样的，并且每次改变的值都是1，那么所有线程结束后，盖伦应该还是10000滴血。</blockquote> <blockquote><p>但是。。。</blockquote> <blockquote><p>注意： 不是每一次运行都会看到错误的数据产生，多运行几次，或者增加运行的次数。</blockquote> <p><img src=http://stepimagewm.how2j.cn/786.png></p> <p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span>{</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//回血</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">recover</span><span class=params>()</span>{</span><br><span class=line>        hp=hp+<span class=number>1</span>;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//掉血</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">hurt</span><span class=params>()</span>{</span><br><span class=line>        hp=hp-<span class=number>1</span>;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attackHero</span><span class=params>(Hero h)</span> {</span><br><span class=line>        h.hp-=damage;</span><br><span class=line>        System.out.format(<span class=string>"%s 正在攻击 %s, %s的血变成了 %.0f%n"</span>,name,h.name,h.name,h.hp);</span><br><span class=line>        <span class=keyword>if</span>(h.isDead())</span><br><span class=line>            System.out.println(h.name +<span class=string>"死了！"</span>);</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">isDead</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=number>0</span>>=hp?<span class=literal>true</span>:<span class=literal>false</span>;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestThread.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>    </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>            </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>10000</span>;</span><br><span class=line>           </span><br><span class=line>        System.out.printf(<span class=string>"盖伦的初始血量是 %.0f%n"</span>, gareen.hp);</span><br><span class=line>           </span><br><span class=line>        <span class=comment>//多线程同步问题指的是多个线程同时修改一个数据的时候，导致的问题</span></span><br><span class=line>           </span><br><span class=line>        <span class=comment>//假设盖伦有10000滴血，并且在基地里，同时又被对方多个英雄攻击</span></span><br><span class=line>           </span><br><span class=line>        <span class=comment>//用JAVA代码来表示，就是有多个线程在减少盖伦的hp</span></span><br><span class=line>        <span class=comment>//同时又有多个线程在恢复盖伦的hp</span></span><br><span class=line>           </span><br><span class=line>        <span class=comment>//n个线程增加盖伦的hp</span></span><br><span class=line>           </span><br><span class=line>        <span class=type>int</span> <span class=variable>n</span> <span class=operator>=</span> <span class=number>10000</span>;</span><br><span class=line>   </span><br><span class=line>        Thread[] addThreads = <span class=keyword>new</span> <span class="title class_">Thread</span>[n];</span><br><span class=line>        Thread[] reduceThreads = <span class=keyword>new</span> <span class="title class_">Thread</span>[n];</span><br><span class=line>           </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; n; i++) {</span><br><span class=line>            <span class=type>Thread</span> <span class=variable>t</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                    gareen.recover();</span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>100</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>            };</span><br><span class=line>            t.start();</span><br><span class=line>            addThreads[i] = t;</span><br><span class=line>               </span><br><span class=line>        }</span><br><span class=line>           </span><br><span class=line>        <span class=comment>//n个线程减少盖伦的hp</span></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; n; i++) {</span><br><span class=line>            <span class=type>Thread</span> <span class=variable>t</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                    gareen.hurt();</span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>100</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>            };</span><br><span class=line>            t.start();</span><br><span class=line>            reduceThreads[i] = t;</span><br><span class=line>        }</span><br><span class=line>           </span><br><span class=line>        <span class=comment>//等待所有增加线程结束</span></span><br><span class=line>        <span class=keyword>for</span> (Thread t : addThreads) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                t.join();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        <span class=comment>//等待所有减少线程结束</span></span><br><span class=line>        <span class=keyword>for</span> (Thread t : reduceThreads) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                t.join();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>           </span><br><span class=line>        <span class=comment>//代码执行到这里，所有增加和减少线程都结束了</span></span><br><span class=line>           </span><br><span class=line>        <span class=comment>//增加和减少线程的数量是一样的，每次都增加，减少1.</span></span><br><span class=line>        <span class=comment>//那么所有线程都结束后，盖伦的hp应该还是初始值</span></span><br><span class=line>           </span><br><span class=line>        <span class=comment>//但是事实上观察到的是：</span></span><br><span class=line>                   </span><br><span class=line>        System.out.printf(<span class=string>"%d个增加线程和%d个减少线程结束后%n盖伦的血量变成了 %.0f%n"</span>, n,n,gareen.hp);</span><br><span class=line>           </span><br><span class=line>    }</span><br><span class=line>        </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=分析同步问题产生的原因><a class=headerlink href=#分析同步问题产生的原因 title=分析同步问题产生的原因></a>分析同步问题产生的原因</h3><blockquote><ol><li>假设增加线程先进入，得到的hp是10000<li>进行增加运算<li>正在做增加运算的时候，还没有来得及修改hp的值，减少线程来了<li>减少线程得到的hp的值也是10000<li>减少线程进行减少运算<li>增加线程运算结束，得到值10001，并把这个值赋予hp<li>减少线程也运算结束，得到值9999，并把这个值赋予hp</ol></blockquote> <blockquote><p>hp，最后的值就是9999</blockquote> <blockquote><p>虽然经历了两个线程各自增减了一次，本来期望还是原值10000，但是却得到了一个9999<br>这个时候的值9999是一个错误的值，在业务上又叫做<code>脏数据</code>。</blockquote> <p><img src=http://stepimagewm.how2j.cn/787.png></p> <h3 id=解决思路><a class=headerlink href=#解决思路 title=解决思路></a>解决思路</h3><blockquote><p>总体解决思路是： 在增加线程访问hp期间，其他线程不可以访问hp<ol><li>增加线程获取到hp的值，并进行运算<li>在运算期间，减少线程试图来获取hp的值，但是不被允许<li>增加线程运算结束，并成功修改hp的值为10001<li>减少线程，在增加线程做完后，才能访问hp的值，即10001<li>减少线程运算，并得到新的值10000</ol></blockquote> <p><a href=http://stepimagewm.how2j.cn/788.png rel=noopener target=_blank></a></p> <h3 id=synchronized-同步对象概念><a title="synchronized 同步对象概念" class=headerlink href=#synchronized-同步对象概念></a>synchronized 同步对象概念</h3><blockquote><p>解决上述问题之前，先理解<code>synchronized</code>关键字的意义<br>如下代码：</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=type>Object</span> <span class=variable>someObject</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">Object</span>();</span><br><span class=line><span class=keyword>synchronized</span> (someObject){</span><br><span class=line>  <span class=comment>//此处的代码只有占有了someObject后才可以执行</span></span><br><span class=line>}</span><br></pre></table></figure> <blockquote><p><code>synchronized表示当前线程，独占对象 someObject</code><br>当前线程<code>独占</code>了对象someObject，如果有<code>其他线程试图占有</code>对象someObject，<code>就会等待</code>，直到当前线程释放对someObject的占用。</blockquote> <blockquote><p>someObject 又叫同步对象，所有的对象，都可以作为同步对象<br>为了达到同步的效果，必须使用同一个同步对象</blockquote> <blockquote><p><code>释放同步对象</code>的方式： synchronized 块自然结束，或者有异常抛出</blockquote> <p><img src=http://stepimagewm.how2j.cn/789.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.text.SimpleDateFormat;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> String <span class="title function_">now</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>return</span> <span class=keyword>new</span> <span class="title class_">SimpleDateFormat</span>(<span class=string>"HH:mm:ss"</span>).format(<span class=keyword>new</span> <span class="title class_">Date</span>());</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>final</span> <span class=type>Object</span> <span class=variable>someObject</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Object</span>();</span><br><span class=line>          </span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    System.out.println( now()+<span class=string>" t1 线程已经运行"</span>);</span><br><span class=line>                    System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 试图占有对象：someObject"</span>);</span><br><span class=line>                    <span class=keyword>synchronized</span> (someObject) {</span><br><span class=line>                          </span><br><span class=line>                        System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 占有对象：someObject"</span>);</span><br><span class=line>                        Thread.sleep(<span class=number>5000</span>);</span><br><span class=line>                        System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 释放对象：someObject"</span>);</span><br><span class=line>                    }</span><br><span class=line>                    System.out.println(now()+<span class=string>" t1 线程结束"</span>);</span><br><span class=line>                } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                    <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t1.setName(<span class=string>" t1"</span>);</span><br><span class=line>        t1.start();</span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>  </span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    System.out.println( now()+<span class=string>" t2 线程已经运行"</span>);</span><br><span class=line>                    System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 试图占有对象：someObject"</span>);</span><br><span class=line>                    <span class=keyword>synchronized</span> (someObject) {</span><br><span class=line>                        System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 占有对象：someObject"</span>);</span><br><span class=line>                        Thread.sleep(<span class=number>5000</span>);</span><br><span class=line>                        System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 释放对象：someObject"</span>);</span><br><span class=line>                    }</span><br><span class=line>                    System.out.println(now()+<span class=string>" t2 线程结束"</span>);</span><br><span class=line>                } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                    <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t2.setName(<span class=string>" t2"</span>);</span><br><span class=line>        t2.start();</span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=使用synchronized-解决同步问题><a title="使用synchronized 解决同步问题" class=headerlink href=#使用synchronized-解决同步问题></a>使用synchronized 解决同步问题</h3><blockquote><p>所有需要修改hp的地方，有要<code>建立在占有someObject的基础上</code>。<br>而对象 someObject在同一时间，只能被一个线程占有。 间接地，<code>导致同一时间，hp只能被一个线程修改</code>。</blockquote> <p><img src=http://stepimagewm.how2j.cn/790.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.awt.GradientPaint;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Object</span> <span class=variable>someObject</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Object</span>();</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>10000</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=type>int</span> <span class=variable>n</span> <span class=operator>=</span> <span class=number>10000</span>;</span><br><span class=line>  </span><br><span class=line>        Thread[] addThreads = <span class=keyword>new</span> <span class="title class_">Thread</span>[n];</span><br><span class=line>        Thread[] reduceThreads = <span class=keyword>new</span> <span class="title class_">Thread</span>[n];</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; n; i++) {</span><br><span class=line>            <span class=type>Thread</span> <span class=variable>t</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                     </span><br><span class=line>                    <span class=comment>//任何线程要修改hp的值，必须先占用someObject</span></span><br><span class=line>                    <span class=keyword>synchronized</span> (someObject) {</span><br><span class=line>                        gareen.recover();</span><br><span class=line>                    }</span><br><span class=line>                     </span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>100</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>            };</span><br><span class=line>            t.start();</span><br><span class=line>            addThreads[i] = t;</span><br><span class=line>              </span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; n; i++) {</span><br><span class=line>            <span class=type>Thread</span> <span class=variable>t</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                    <span class=comment>//任何线程要修改hp的值，必须先占用someObject</span></span><br><span class=line>                    <span class=keyword>synchronized</span> (someObject) {</span><br><span class=line>                        gareen.hurt();</span><br><span class=line>                    }</span><br><span class=line>                     </span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>100</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>            };</span><br><span class=line>            t.start();</span><br><span class=line>            reduceThreads[i] = t;</span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (Thread t : addThreads) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                t.join();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>for</span> (Thread t : reduceThreads) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                t.join();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>        System.out.printf(<span class=string>"%d个增加线程和%d个减少线程结束后%n盖伦的血量是 %.0f%n"</span>, n,n,gareen.hp);</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=使用hero对象作为同步对象><a class=headerlink href=#使用hero对象作为同步对象 title=使用hero对象作为同步对象></a>使用hero对象作为同步对象</h3><blockquote><p>既然任意对象都可以用来作为同步对象，而所有的线程访问的都是同一个hero对象，<code>索性就使用gareen来作为同步对象</code>。</blockquote> <blockquote><p>进一步的，对于Hero的hurt方法，加上：</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=keyword>synchronized</span> (<span class=built_in>this</span>) {</span><br><span class=line>}</span><br></pre></table></figure> <blockquote><p>表示当前对象为同步对象，即也是gareen为同步对象。</blockquote> <p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span>{</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//回血</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">recover</span><span class=params>()</span>{</span><br><span class=line>        hp=hp+<span class=number>1</span>;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//掉血</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">hurt</span><span class=params>()</span>{</span><br><span class=line>        <span class=comment>//使用this作为同步对象</span></span><br><span class=line>        <span class=keyword>synchronized</span> (<span class=built_in>this</span>) {</span><br><span class=line>            hp=hp-<span class=number>1</span>;   </span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attackHero</span><span class=params>(Hero h)</span> {</span><br><span class=line>        h.hp-=damage;</span><br><span class=line>        System.out.format(<span class=string>"%s 正在攻击 %s, %s的血变成了 %.0f%n"</span>,name,h.name,h.name,h.hp);</span><br><span class=line>        <span class=keyword>if</span>(h.isDead())</span><br><span class=line>            System.out.println(h.name +<span class=string>"死了！"</span>);</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">isDead</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=number>0</span>>=hp?<span class=literal>true</span>:<span class=literal>false</span>;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestThread.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.awt.GradientPaint;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>10000</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=type>int</span> <span class=variable>n</span> <span class=operator>=</span> <span class=number>10000</span>;</span><br><span class=line>  </span><br><span class=line>        Thread[] addThreads = <span class=keyword>new</span> <span class="title class_">Thread</span>[n];</span><br><span class=line>        Thread[] reduceThreads = <span class=keyword>new</span> <span class="title class_">Thread</span>[n];</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; n; i++) {</span><br><span class=line>            <span class=type>Thread</span> <span class=variable>t</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                     </span><br><span class=line>                    <span class=comment>//使用gareen作为synchronized</span></span><br><span class=line>                    <span class=keyword>synchronized</span> (gareen) {</span><br><span class=line>                        gareen.recover();</span><br><span class=line>                    }</span><br><span class=line>                     </span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>100</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>            };</span><br><span class=line>            t.start();</span><br><span class=line>            addThreads[i] = t;</span><br><span class=line>              </span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; n; i++) {</span><br><span class=line>            <span class=type>Thread</span> <span class=variable>t</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                    <span class=comment>//使用gareen作为synchronized</span></span><br><span class=line>                    <span class=comment>//在方法hurt中有synchronized(this)</span></span><br><span class=line>                    gareen.hurt();</span><br><span class=line>                     </span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>100</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>            };</span><br><span class=line>            t.start();</span><br><span class=line>            reduceThreads[i] = t;</span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (Thread t : addThreads) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                t.join();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>for</span> (Thread t : reduceThreads) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                t.join();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>        System.out.printf(<span class=string>"%d个增加线程和%d个减少线程结束后%n盖伦的血量是 %.0f%n"</span>, n,n,gareen.hp);</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=在方法前，加上修饰符synchronized><a class=headerlink href=#在方法前，加上修饰符synchronized title=在方法前，加上修饰符synchronized></a>在方法前，加上修饰符synchronized</h3><blockquote><p>在recover前，直接加上synchronized ，其所对应的同步对象，就是this和hurt方法达到的效果是一样。</blockquote> <blockquote><p>外部线程访问gareen的方法，就不需要额外使用synchronized 了。</blockquote> <p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span>{</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//回血</span></span><br><span class=line>    <span class=comment>//直接在方法前加上修饰符synchronized</span></span><br><span class=line>    <span class=comment>//其所对应的同步对象，就是this</span></span><br><span class=line>    <span class=comment>//和hurt方法达到的效果一样</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>synchronized</span> <span class=keyword>void</span> <span class="title function_">recover</span><span class=params>()</span>{</span><br><span class=line>        hp=hp+<span class=number>1</span>;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=comment>//掉血</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">hurt</span><span class=params>()</span>{</span><br><span class=line>        <span class=comment>//使用this作为同步对象</span></span><br><span class=line>        <span class=keyword>synchronized</span> (<span class=built_in>this</span>) {</span><br><span class=line>            hp=hp-<span class=number>1</span>;   </span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attackHero</span><span class=params>(Hero h)</span> {</span><br><span class=line>        h.hp-=damage;</span><br><span class=line>        System.out.format(<span class=string>"%s 正在攻击 %s, %s的血变成了 %.0f%n"</span>,name,h.name,h.name,h.hp);</span><br><span class=line>        <span class=keyword>if</span>(h.isDead())</span><br><span class=line>            System.out.println(h.name +<span class=string>"死了！"</span>);</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">isDead</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=number>0</span>>=hp?<span class=literal>true</span>:<span class=literal>false</span>;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestThread.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.awt.GradientPaint;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>10000</span>;</span><br><span class=line>          </span><br><span class=line>        <span class=type>int</span> <span class=variable>n</span> <span class=operator>=</span> <span class=number>10000</span>;</span><br><span class=line>  </span><br><span class=line>        Thread[] addThreads = <span class=keyword>new</span> <span class="title class_">Thread</span>[n];</span><br><span class=line>        Thread[] reduceThreads = <span class=keyword>new</span> <span class="title class_">Thread</span>[n];</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; n; i++) {</span><br><span class=line>            <span class=type>Thread</span> <span class=variable>t</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                     </span><br><span class=line>                    <span class=comment>//recover自带synchronized</span></span><br><span class=line>                    gareen.recover();</span><br><span class=line>                     </span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>100</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>            };</span><br><span class=line>            t.start();</span><br><span class=line>            addThreads[i] = t;</span><br><span class=line>              </span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; n; i++) {</span><br><span class=line>            <span class=type>Thread</span> <span class=variable>t</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                    <span class=comment>//hurt自带synchronized</span></span><br><span class=line>                    gareen.hurt();</span><br><span class=line>                     </span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>100</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>            };</span><br><span class=line>            t.start();</span><br><span class=line>            reduceThreads[i] = t;</span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>for</span> (Thread t : addThreads) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                t.join();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>for</span> (Thread t : reduceThreads) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                t.join();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>        System.out.printf(<span class=string>"%d个增加线程和%d个减少线程结束后%n盖伦的血量是 %.0f%n"</span>, n,n,gareen.hp);</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>       </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=线程安全的类><a class=headerlink href=#线程安全的类 title=线程安全的类></a>线程安全的类</h3><blockquote><p>如果一个类，其<code>方法都是有synchronized修饰的</code>，那么该类就叫做<code>线程安全的类</code>。</blockquote> <blockquote><p>同一时间，只有一个线程能够进入 <code>这种类的一个实例</code> 的去修改数据，进而保证了这个实例中的数据的安全(不会同时被多线程修改而变成脏数据)</blockquote> <blockquote><p>比如<code>StringBuffer</code>和<code>StringBuilder</code>的区别</blockquote> <ul><li>StringBuffer的方法都是有synchronized修饰的，StringBuffer就叫做线程安全的类；<li>而StringBuilder就不是线程安全的类。</ul> <p><img src=http://stepimagewm.how2j.cn/793.png></p> <h2 id=常见的线程安全相关的面试题><a class=headerlink href=#常见的线程安全相关的面试题 title=常见的线程安全相关的面试题></a>常见的线程安全相关的面试题</h2><h3 id=HashMap和Hashtable的区别-1><a class=headerlink href=#HashMap和Hashtable的区别-1 title=HashMap和Hashtable的区别></a>HashMap和Hashtable的区别</h3><blockquote><p><code>相同点：</code><ul><li>HashMap和Hashtable都实现了Map接口，都是键值对保存数据的方式。</ul></blockquote> <blockquote><p><code>区别1：</code></blockquote> <ul><li>HashMap可以存放 null<li>Hashtable不能存放null</ul> <blockquote><p><code>区别2：</code></blockquote> <ul><li>HashMap不是线程安全的类<li>Hashtable是线程安全的类</ul> <p><img src=http://stepimagewm.how2j.cn/2595.png></p> <h3 id=StringBuffer-和-StringBuilder-的区别><a title="StringBuffer 和 StringBuilder 的区别" class=headerlink href=#StringBuffer-和-StringBuilder-的区别></a>StringBuffer 和 StringBuilder 的区别</h3><blockquote><p><code>StringBuffer 是线程安全的。</code><br><code>StringBuilder 是非线程安全的。</code></blockquote> <blockquote><p>所以当进行大量字符串拼接操作的时候，如果是单线程就用StringBuilder会更快些，如果是多线程，就需要用StringBuffer 保证数据的安全性。</blockquote> <blockquote><p>非线程安全的为什么会比线程安全的快？ 因为不需要同步嘛，省略了些时间。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2596.png></p> <h3 id=ArrayList-和-Vector-的区别><a title="ArrayList 和 Vector 的区别" class=headerlink href=#ArrayList-和-Vector-的区别></a>ArrayList 和 Vector 的区别</h3><blockquote><p><code>Vector是线程安全的</code><br><code>ArrayList是非线程安全的</code></blockquote> <blockquote><p>ArrayList类的声明：</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ArrayList</span>&lt;E> <span class=keyword>extends</span> <span class="title class_">AbstractList</span>&lt;E></span><br><span class=line>        <span class=keyword>implements</span> <span class="title class_">List</span>&lt;E>, RandomAccess, Cloneable, java.io.Serializable</span><br></pre></table></figure> <blockquote><p>Vector类的声明：</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Vector</span>&lt;E>    <span class=keyword>extends</span> <span class="title class_">AbstractList</span>&lt;E></span><br><span class=line>    <span class=keyword>implements</span> <span class="title class_">List</span>&lt;E>, RandomAccess, Cloneable, java.io.Serializable</span><br></pre></table></figure> <h3 id=把非线程安全的集合转换为线程安全><a class=headerlink href=#把非线程安全的集合转换为线程安全 title=把非线程安全的集合转换为线程安全></a>把非线程安全的集合转换为线程安全</h3><blockquote><p>ArrayList是非线程安全的，换句话说，多个线程可以同时进入一个ArrayList对象的add方法。</blockquote> <blockquote><p>借助<code>Collections.synchronizedList</code>，可以把ArrayList转换为线程安全的List。</blockquote> <blockquote><p>与此类似的，还有HashSet, LinkedList, HashMap等等非线程安全的类，都通过工具类Collections转换为线程安全的。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.Collections;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        List&lt;Integer> list1 = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;>();</span><br><span class=line>        List&lt;Integer> list2 = Collections.synchronizedList(list1);</span><br><span class=line>    }</span><br><span class=line>        </span><br><span class=line>}</span><br></pre></table></figure> <h2 id=多线程死锁><a class=headerlink href=#多线程死锁 title=多线程死锁></a>多线程死锁</h2><h3 id=演示死锁><a class=headerlink href=#演示死锁 title=演示死锁></a>演示死锁</h3><blockquote><ol><li>线程1 首先占有对象1，接着试图占有对象2<li>线程2 首先占有对象2，接着试图占有对象1<li>线程1 等待线程2释放对象2<li>与此同时，线程2等待线程1释放对象1</ol></blockquote> <blockquote><p>就会。。。一直等待下去，直到天荒地老，海枯石烂，山无棱 ，天地合。。。</blockquote> <p><img src=http://stepimagewm.how2j.cn/794.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>ahri</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        ahri.name = <span class=string>"九尾妖狐"</span>;</span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>annie</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        annie.name = <span class=string>"安妮"</span>;</span><br><span class=line>         </span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=comment>//占有九尾妖狐</span></span><br><span class=line>                <span class=keyword>synchronized</span> (ahri) {</span><br><span class=line>                    System.out.println(<span class=string>"t1 已占有九尾妖狐"</span>);</span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        <span class=comment>//停顿1000毫秒，另一个线程有足够的时间占有安妮</span></span><br><span class=line>                        Thread.sleep(<span class=number>1000</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                     </span><br><span class=line>                    System.out.println(<span class=string>"t1 试图占有安妮"</span>);</span><br><span class=line>                    System.out.println(<span class=string>"t1 等待中 。。。。"</span>);</span><br><span class=line>                    <span class=keyword>synchronized</span> (annie) {</span><br><span class=line>                        System.out.println(<span class=string>"do something"</span>);</span><br><span class=line>                    }</span><br><span class=line>                }  </span><br><span class=line>                 </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t1.start();</span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=comment>//占有安妮</span></span><br><span class=line>                <span class=keyword>synchronized</span> (annie) {</span><br><span class=line>                    System.out.println(<span class=string>"t2 已占有安妮"</span>);</span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                         </span><br><span class=line>                        <span class=comment>//停顿1000毫秒，另一个线程有足够的时间占有暂用九尾妖狐</span></span><br><span class=line>                        Thread.sleep(<span class=number>1000</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                    System.out.println(<span class=string>"t2 试图占有九尾妖狐"</span>);</span><br><span class=line>                    System.out.println(<span class=string>"t2 等待中 。。。。"</span>);</span><br><span class=line>                    <span class=keyword>synchronized</span> (ahri) {</span><br><span class=line>                        System.out.println(<span class=string>"do something"</span>);</span><br><span class=line>                    }</span><br><span class=line>                }  </span><br><span class=line>                 </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t2.start();</span><br><span class=line>   }</span><br><span class=line>        </span><br><span class=line>}</span><br></pre></table></figure> <h2 id=线程之间的交互-WAIT-和-NOTIFY><a title="线程之间的交互 - WAIT 和 NOTIFY" class=headerlink href=#线程之间的交互-WAIT-和-NOTIFY></a>线程之间的交互 - WAIT 和 NOTIFY</h2><blockquote><p>线程之间有交互通知的需求，考虑如下情况：<br>有两个线程，处理同一个英雄。 一个加血，一个减血。</blockquote> <blockquote><p>减血的线程，发现血量=1，就停止减血，直到加血的线程为英雄加了血，才可以继续减血。</blockquote> <h3 id=不好的解决方式><a class=headerlink href=#不好的解决方式 title=不好的解决方式></a>不好的解决方式</h3><blockquote><p>故意设计减血线程频率更高，盖伦的血量迟早会到达1。减血线程中使用while循环判断是否是1，如果是1就不停的循环,直到加血线程回复了血量。</blockquote> <blockquote><p>这是不好的解决方式，因为会大量占用CPU，拖慢性能。</blockquote> <p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span>{</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>synchronized</span> <span class=keyword>void</span> <span class="title function_">recover</span><span class=params>()</span>{</span><br><span class=line>        hp=hp+<span class=number>1</span>;</span><br><span class=line>    }    </span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>synchronized</span> <span class=keyword>void</span> <span class="title function_">hurt</span><span class=params>()</span>{</span><br><span class=line>            hp=hp-<span class=number>1</span>;   </span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attackHero</span><span class=params>(Hero h)</span> {</span><br><span class=line>        h.hp-=damage;</span><br><span class=line>        System.out.format(<span class=string>"%s 正在攻击 %s, %s的血变成了 %.0f%n"</span>,name,h.name,h.name,h.hp);</span><br><span class=line>        <span class=keyword>if</span>(h.isDead())</span><br><span class=line>            System.out.println(h.name +<span class=string>"死了！"</span>);</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">isDead</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=number>0</span>>=hp?<span class=literal>true</span>:<span class=literal>false</span>;</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestThread.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>    </span><br><span class=line><span class=keyword>import</span> java.awt.GradientPaint;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>616</span>;</span><br><span class=line>           </span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>while</span>(<span class=literal>true</span>){</span><br><span class=line>                     </span><br><span class=line>                    <span class=comment>//因为减血更快，所以盖伦的血量迟早会到达1</span></span><br><span class=line>                    <span class=comment>//使用while循环判断是否是1，如果是1就不停的循环</span></span><br><span class=line>                    <span class=comment>//直到加血线程回复了血量</span></span><br><span class=line>                    <span class=keyword>while</span>(gareen.hp==<span class=number>1</span>){</span><br><span class=line>                        <span class=keyword>continue</span>;</span><br><span class=line>                    }</span><br><span class=line>                     </span><br><span class=line>                    gareen.hurt();</span><br><span class=line>                    System.out.printf(<span class=string>"t1 为%s 减血1点,减少血后，%s的血量是%.0f%n"</span>,gareen.name,gareen.name,gareen.hp);</span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>10</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line> </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t1.start();</span><br><span class=line> </span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>while</span>(<span class=literal>true</span>){</span><br><span class=line>                    gareen.recover();</span><br><span class=line>                    System.out.printf(<span class=string>"t2 为%s 回血1点,增加血后，%s的血量是%.0f%n"</span>,gareen.name,gareen.name,gareen.hp);</span><br><span class=line> </span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>100</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line> </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t2.start();</span><br><span class=line>           </span><br><span class=line>    }</span><br><span class=line>        </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=使用wait和notify进行线程交互><a class=headerlink href=#使用wait和notify进行线程交互 title=使用wait和notify进行线程交互></a>使用wait和notify进行线程交互</h3><blockquote><p>在Hero类中：<br><strong>hurt()减血方法</strong>：当hp=1的时候，执行this.wait();<br><code>this.wait()</code>表示<code>让占有this的线程等待，并临时释放占有</code>。进入hurt方法的线程必然是减血线程，this.wait()会让减血线程临时释放对this的占有。 这样加血线程，就有机会进入recover()加血方法了。</blockquote> <blockquote><p><strong>recover() 加血方法</strong>：增加了血量，执行this.notify();<br><code>this.notify()</code> 表示<code>通知那些等待在this的线程，可以苏醒过来了</code>。 等待在this的线程，恰恰就是减血线程。 一旦recover()结束， 加血线程释放了this，减血线程，就可以重新占有this，并执行后面的减血工作。</blockquote> <p><img src=http://stepimagewm.how2j.cn/796.png></p> <p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>synchronized</span> <span class=keyword>void</span> <span class="title function_">recover</span><span class=params>()</span> {</span><br><span class=line>        hp = hp + <span class=number>1</span>;</span><br><span class=line>        System.out.printf(<span class=string>"%s 回血1点,增加血后，%s的血量是%.0f%n"</span>, name, name, hp);</span><br><span class=line>        <span class=comment>// 通知那些等待在this对象上的线程，可以醒过来了，如第20行，等待着的减血线程，苏醒过来</span></span><br><span class=line>        <span class=built_in>this</span>.notify();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>synchronized</span> <span class=keyword>void</span> <span class="title function_">hurt</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>if</span> (hp == <span class=number>1</span>) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                <span class=comment>// 让占有this的减血线程，暂时释放对this的占有，并等待</span></span><br><span class=line>                <span class=built_in>this</span>.wait();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        hp = hp - <span class=number>1</span>;</span><br><span class=line>        System.out.printf(<span class=string>"%s 减血1点,减少血后，%s的血量是%.0f%n"</span>, name, name, hp);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attackHero</span><span class=params>(Hero h)</span> {</span><br><span class=line>        h.hp -= damage;</span><br><span class=line>        System.out.format(<span class=string>"%s 正在攻击 %s, %s的血变成了 %.0f%n"</span>, name, h.name, h.name, h.hp);</span><br><span class=line>        <span class=keyword>if</span> (h.isDead())</span><br><span class=line>            System.out.println(h.name + <span class=string>"死了！"</span>);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">isDead</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=number>0</span> >= hp ? <span class=literal>true</span> : <span class=literal>false</span>;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestThread.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>      </span><br><span class=line><span class=keyword>import</span> java.awt.GradientPaint;</span><br><span class=line>    </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>      </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>    </span><br><span class=line>        <span class=keyword>final</span> <span class=type>Hero</span> <span class=variable>gareen</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        gareen.name = <span class=string>"盖伦"</span>;</span><br><span class=line>        gareen.hp = <span class=number>616</span>;</span><br><span class=line>             </span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>while</span>(<span class=literal>true</span>){</span><br><span class=line>                       </span><br><span class=line>                    <span class=comment>//无需循环判断</span></span><br><span class=line><span class=comment>//                    while(gareen.hp==1){</span></span><br><span class=line><span class=comment>//                        continue;</span></span><br><span class=line><span class=comment>//                    }</span></span><br><span class=line>                       </span><br><span class=line>                    gareen.hurt();</span><br><span class=line>                     </span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>10</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>   </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t1.start();</span><br><span class=line>   </span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>while</span>(<span class=literal>true</span>){</span><br><span class=line>                    gareen.recover();</span><br><span class=line>   </span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>100</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>   </span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t2.start();</span><br><span class=line>             </span><br><span class=line>    }</span><br><span class=line>          </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=关于wait、notify-和-notifyAll><a title="关于wait、notify 和 notifyAll" class=headerlink href=#关于wait、notify-和-notifyAll></a>关于wait、notify 和 notifyAll</h3><blockquote><p>留意wait()和notify() 这两个方法是什么对象上的？</blockquote> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line>public synchronized void hurt() {</span><br><span class=line>  ...</span><br><span class=line>  this.wait();</span><br><span class=line>  ...</span><br><span class=line>}</span><br></pre></table></figure> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line>public synchronized void recover() {</span><br><span class=line>   ...</span><br><span class=line>   this.notify();</span><br><span class=line>}</span><br></pre></table></figure> <blockquote><p>这里需要强调的是，wait方法和notify方法，<code>并不是Thread线程上的方法</code>，它们是Object上的方法。 因为所有的Object都可以被用来作为同步对象，所以准确的讲，wait和notify是同步对象上的方法。</blockquote> <blockquote><p><code>wait()</code>的意思是： 让占用了这个同步对象的线程，临时释放当前的占用，并且等待。 所以调用wait是有前提条件的，一定是在synchronized块里，否则就会出错。</blockquote> <blockquote><p><code>notify()</code>的意思是，通知一个等待在这个同步对象上的线程，你可以苏醒过来了，有机会重新占用当前对象了。</blockquote> <blockquote><p><code>notifyAll()</code> 的意思是，通知所有的等待在这个同步对象上的线程，你们可以苏醒过来了，有机会重新占用当前对象了。</blockquote> <h2 id=线程池><a class=headerlink href=#线程池 title=线程池></a>线程池</h2><blockquote><p>每一个线程的启动和结束都是比较消耗时间和占用资源的。 如果在系统中用到了很多的线程，大量的启动和结束动作会导致系统的性能变卡，响应变慢。</blockquote> <blockquote><p>为了解决这个问题，引入<code>线程池</code>这种设计思想。 线程池的模式很像生产者消费者模式，消费的对象是一个一个的能够运行的<code>任务</code>。</blockquote> <h3 id=线程池设计思路><a class=headerlink href=#线程池设计思路 title=线程池设计思路></a>线程池设计思路</h3><blockquote><p>线程池的思路和生产者消费者模型是很接近的。</blockquote> <ol><li>准备一个任务容器<li>一次性启动10个 消费者线程<li>刚开始任务容器是空的，所以线程都wait在上面。<li>直到一个外部线程往这个任务容器中扔了一个“任务”，就会有一个消费者线程被唤醒notify<li>这个消费者线程取出“任务”，并且执行这个任务，执行完毕后，继续等待下一次任务的到来。<li>如果短时间内，有较多的任务加入，那么就会有多个线程被唤醒，去执行这些任务。</ol> <blockquote><p>在整个过程中，都不需要创建新的线程，而是循环使用这些已经存在的线程。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2600.png></p> <h3 id=开发一个自定义线程池><a class=headerlink href=#开发一个自定义线程池 title=开发一个自定义线程池></a>开发一个自定义线程池</h3><blockquote><p>这是一个自定义的线程池，虽然不够完善和健壮，但是已经足以说明线程池的工作原理</blockquote> <blockquote><p>缓慢的给这个线程池添加任务，会看到有多条线程来执行这些任务。<br>线程7执行完毕任务后，<code>又回到池子里</code>，下一次任务来的时候，线程7又来执行新的任务。</blockquote> <p><img src=http://stepimagewm.how2j.cn/1006.png></p> <p><code>ThreadPool.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.LinkedList;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ThreadPool</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=comment>// 线程池大小</span></span><br><span class=line>    <span class=type>int</span> threadPoolSize;</span><br><span class=line>  </span><br><span class=line>    <span class=comment>// 任务容器</span></span><br><span class=line>    LinkedList&lt;Runnable> tasks = <span class=keyword>new</span> <span class="title class_">LinkedList</span>&lt;Runnable>();</span><br><span class=line>  </span><br><span class=line>    <span class=comment>// 试图消费任务的线程</span></span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">ThreadPool</span><span class=params>()</span> {</span><br><span class=line>        threadPoolSize = <span class=number>10</span>;</span><br><span class=line>  </span><br><span class=line>        <span class=comment>// 启动10个任务消费者线程</span></span><br><span class=line>        <span class=keyword>synchronized</span> (tasks) {</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; threadPoolSize; i++) {</span><br><span class=line>                <span class=keyword>new</span> <span class="title class_">TaskConsumeThread</span>(<span class=string>"任务消费者线程 "</span> + i).start();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">add</span><span class=params>(Runnable r)</span> {</span><br><span class=line>        <span class=keyword>synchronized</span> (tasks) {</span><br><span class=line>            tasks.add(r);</span><br><span class=line>            <span class=comment>// 唤醒等待的任务消费者线程</span></span><br><span class=line>            tasks.notifyAll();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>class</span> <span class="title class_">TaskConsumeThread</span> <span class=keyword>extends</span> <span class="title class_">Thread</span> {</span><br><span class=line>        <span class=keyword>public</span> <span class="title function_">TaskConsumeThread</span><span class=params>(String name)</span> {</span><br><span class=line>            <span class=built_in>super</span>(name);</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>        Runnable task;</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span> {</span><br><span class=line>            System.out.println(<span class=string>"启动： "</span> + <span class=built_in>this</span>.getName());</span><br><span class=line>            <span class=keyword>while</span> (<span class=literal>true</span>) {</span><br><span class=line>                <span class=keyword>synchronized</span> (tasks) {</span><br><span class=line>                    <span class=keyword>while</span> (tasks.isEmpty()) {</span><br><span class=line>                        <span class=keyword>try</span> {</span><br><span class=line>                            tasks.wait();</span><br><span class=line>                        } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                            e.printStackTrace();</span><br><span class=line>                        }</span><br><span class=line>                    }</span><br><span class=line>                    task = tasks.removeLast();</span><br><span class=line>                    <span class=comment>// 允许添加任务的线程可以继续添加任务</span></span><br><span class=line>                    tasks.notifyAll();</span><br><span class=line>  </span><br><span class=line>                }</span><br><span class=line>                System.out.println(<span class=built_in>this</span>.getName() + <span class=string>" 获取到任务，并执行"</span>);</span><br><span class=line>                task.run();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestThread.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>       </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ThreadPool</span> <span class=variable>pool</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ThreadPool</span>();</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>5</span>; i++) {</span><br><span class=line>            <span class=type>Runnable</span> <span class=variable>task</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Runnable</span>() {</span><br><span class=line>                <span class=meta>@Override</span></span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span> {</span><br><span class=line>                    <span class=comment>//System.out.println("执行任务");</span></span><br><span class=line>                    <span class=comment>//任务可能是打印一句话</span></span><br><span class=line>                    <span class=comment>//可能是访问文件</span></span><br><span class=line>                    <span class=comment>//可能是做排序</span></span><br><span class=line>                }</span><br><span class=line>            };</span><br><span class=line>             </span><br><span class=line>            pool.add(task);</span><br><span class=line>             </span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                Thread.sleep(<span class=number>1000</span>);</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>           </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=测试线程池><a class=headerlink href=#测试线程池 title=测试线程池></a>测试线程池</h3><blockquote><p>创造一个情景，每个任务执行的时间都是1秒。刚开始是间隔1秒钟向线程池中添加任务。</blockquote> <blockquote><p>然后间隔时间越来越短，执行任务的线程还没有来得及结束，新的任务又来了。就会观察到线程池里的其他线程被唤醒来执行这些任务。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2601.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        ThreadPool pool= <span class=keyword>new</span> <span class="title class_">ThreadPool</span>();</span><br><span class=line>        <span class=type>int</span> sleep=<span class=number>1000</span>;</span><br><span class=line>        <span class=keyword>while</span>(<span class=literal>true</span>){</span><br><span class=line>            pool.add(<span class=keyword>new</span> <span class="title class_">Runnable</span>(){</span><br><span class=line>                <span class=meta>@Override</span></span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span> {</span><br><span class=line>                    <span class=comment>//System.out.println("执行任务");</span></span><br><span class=line>                    <span class=keyword>try</span> {</span><br><span class=line>                        Thread.sleep(<span class=number>1000</span>);</span><br><span class=line>                    } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                        <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                        e.printStackTrace();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>            });</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                Thread.sleep(sleep);</span><br><span class=line>                sleep = sleep><span class=number>100</span>?sleep-<span class=number>100</span>:sleep;</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>              </span><br><span class=line>        }</span><br><span class=line>          </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=使用java自带线程池><a class=headerlink href=#使用java自带线程池 title=使用java自带线程池></a>使用java自带线程池</h3><blockquote><p>java提供自带的线程池，而不需要自己去开发一个自定义线程池了。</blockquote> <p>线程池类<code>ThreadPoolExecutor</code>在包<code>java.util.concurrent</code>下</p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>ThreadPoolExecutor threadPool= <span class=keyword>new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class=number>10</span>, <span class=number>15</span>, <span class=number>60</span>, TimeUnit.SECONDS, <span class=keyword>new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable>());</span><br></pre></table></figure> <blockquote></blockquote> <ul><li>第一个参数10 表示这个线程池<code>初始化了10个线程</code>在里面工作；<li>第二个参数15 表示如果10个线程不够用了，就会自动增加到<code>最多15个线程</code>；<li>第三个参数60 结合第四个参数 TimeUnit.SECONDS，表示经过60秒，多出来的线程还没有接- 到活儿，就会回收，最后保持池子里就10个；<li>第四个参数 TimeUnit.SECONDS 如上；<li>第五个参数 new LinkedBlockingQueue() 用来放任务的集合；</ul> <blockquote><p><code>execute</code>方法用于添加新的任务。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.concurrent.LinkedBlockingQueue;</span><br><span class=line><span class=keyword>import</span> java.util.concurrent.ThreadPoolExecutor;</span><br><span class=line><span class=keyword>import</span> java.util.concurrent.TimeUnit;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> <span class=keyword>throws</span> InterruptedException {</span><br><span class=line>           </span><br><span class=line>        ThreadPoolExecutor threadPool= <span class=keyword>new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class=number>10</span>, <span class=number>15</span>, <span class=number>60</span>, TimeUnit.SECONDS, <span class=keyword>new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable>());</span><br><span class=line>           </span><br><span class=line>        threadPool.execute(<span class=keyword>new</span> <span class="title class_">Runnable</span>(){</span><br><span class=line>   </span><br><span class=line>            <span class=meta>@Override</span></span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span> {</span><br><span class=line>                <span class=comment>// TODO Auto-generated method stub</span></span><br><span class=line>                System.out.println(<span class=string>"任务1"</span>);</span><br><span class=line>            }</span><br><span class=line>               </span><br><span class=line>        });</span><br><span class=line>   </span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>}</span><br></pre></table></figure> <h2 id=Lock对象><a class=headerlink href=#Lock对象 title=Lock对象></a>Lock对象</h2><blockquote><p>与synchronized类似的，lock也能够达到同步的效果。</blockquote> <h3 id=回忆-synchronized-同步的方式><a title="回忆 synchronized 同步的方式" class=headerlink href=#回忆-synchronized-同步的方式></a>回忆 synchronized 同步的方式</h3><blockquote><p>首先回忆一下 synchronized 同步对象的方式。当一个线程占用 synchronized 同步对象，其他线程就不能占用了，直到释放这个同步对象为止。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2610.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.text.SimpleDateFormat;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> String <span class="title function_">now</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>return</span> <span class=keyword>new</span> <span class="title class_">SimpleDateFormat</span>(<span class=string>"HH:mm:ss"</span>).format(<span class=keyword>new</span> <span class="title class_">Date</span>());</span><br><span class=line>    }</span><br><span class=line>      </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>final</span> <span class=type>Object</span> <span class=variable>someObject</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Object</span>();</span><br><span class=line>           </span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    System.out.println( now()+<span class=string>" t1 线程已经运行"</span>);</span><br><span class=line>                    System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 试图占有对象：someObject"</span>);</span><br><span class=line>                    <span class=keyword>synchronized</span> (someObject) {</span><br><span class=line>                           </span><br><span class=line>                        System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 占有对象：someObject"</span>);</span><br><span class=line>                        Thread.sleep(<span class=number>5000</span>);</span><br><span class=line>                        System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 释放对象：someObject"</span>);</span><br><span class=line>                    }</span><br><span class=line>                    System.out.println(now()+<span class=string>" t1 线程结束"</span>);</span><br><span class=line>                } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                    <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t1.setName(<span class=string>" t1"</span>);</span><br><span class=line>        t1.start();</span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>   </span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    System.out.println( now()+<span class=string>" t2 线程已经运行"</span>);</span><br><span class=line>                    System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 试图占有对象：someObject"</span>);</span><br><span class=line>                    <span class=keyword>synchronized</span> (someObject) {</span><br><span class=line>                        System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 占有对象：someObject"</span>);</span><br><span class=line>                        Thread.sleep(<span class=number>5000</span>);</span><br><span class=line>                        System.out.println( now()+<span class=built_in>this</span>.getName()+ <span class=string>" 释放对象：someObject"</span>);</span><br><span class=line>                    }</span><br><span class=line>                    System.out.println(now()+<span class=string>" t2 线程结束"</span>);</span><br><span class=line>                } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                    <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t2.setName(<span class=string>" t2"</span>);</span><br><span class=line>        t2.start();</span><br><span class=line>    }</span><br><span class=line>        </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=使用Lock对象实现同步效果><a class=headerlink href=#使用Lock对象实现同步效果 title=使用Lock对象实现同步效果></a>使用Lock对象实现同步效果</h3><blockquote><p>Lock是一个接口，为了使用一个Lock对象，需要用到</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=type>Lock</span> <span class=variable>lock</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ReentrantLock</span>();</span><br></pre></table></figure> <blockquote><p>与 <code>synchronized (someObject)</code> 类似的，<code>lock()</code>方法，表示当前线程占用lock对象，一旦占用，其他线程就不能占用了。<br>与 <code>synchronized</code> 不同的是，一旦synchronized 块结束，就会自动释放对<code>someObject</code>的占用。 lock却必须调用<code>unlock</code>方法进行手动释放，为了保证释放的执行，往往会把unlock() 放在finally中进行。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2611.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.text.SimpleDateFormat;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line><span class=keyword>import</span> java.util.concurrent.locks.Lock;</span><br><span class=line><span class=keyword>import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> String <span class="title function_">now</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=keyword>new</span> <span class="title class_">SimpleDateFormat</span>(<span class=string>"HH:mm:ss"</span>).format(<span class=keyword>new</span> <span class="title class_">Date</span>());</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">log</span><span class=params>(String msg)</span> {</span><br><span class=line>        System.out.printf(<span class=string>"%s %s %s %n"</span>, now() , Thread.currentThread().getName() , msg);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Lock</span> <span class=variable>lock</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class=line> </span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>() {</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span> {</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    log(<span class=string>"线程启动"</span>);</span><br><span class=line>                    log(<span class=string>"试图占有对象：lock"</span>);</span><br><span class=line> </span><br><span class=line>                    lock.lock();</span><br><span class=line> </span><br><span class=line>                    log(<span class=string>"占有对象：lock"</span>);</span><br><span class=line>                    log(<span class=string>"进行5秒的业务操作"</span>);</span><br><span class=line>                    Thread.sleep(<span class=number>5000</span>);</span><br><span class=line> </span><br><span class=line>                } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                } <span class=keyword>finally</span> {</span><br><span class=line>                    log(<span class=string>"释放对象：lock"</span>);</span><br><span class=line>                    lock.unlock();</span><br><span class=line>                }</span><br><span class=line>                log(<span class=string>"线程结束"</span>);</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t1.setName(<span class=string>"t1"</span>);</span><br><span class=line>        t1.start();</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=comment>//先让t1飞2秒</span></span><br><span class=line>            Thread.sleep(<span class=number>2000</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (InterruptedException e1) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e1.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>() {</span><br><span class=line> </span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span> {</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    log(<span class=string>"线程启动"</span>);</span><br><span class=line>                    log(<span class=string>"试图占有对象：lock"</span>);</span><br><span class=line> </span><br><span class=line>                    lock.lock();</span><br><span class=line> </span><br><span class=line>                    log(<span class=string>"占有对象：lock"</span>);</span><br><span class=line>                    log(<span class=string>"进行5秒的业务操作"</span>);</span><br><span class=line>                    Thread.sleep(<span class=number>5000</span>);</span><br><span class=line> </span><br><span class=line>                } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                } <span class=keyword>finally</span> {</span><br><span class=line>                    log(<span class=string>"释放对象：lock"</span>);</span><br><span class=line>                    lock.unlock();</span><br><span class=line>                }</span><br><span class=line>                log(<span class=string>"线程结束"</span>);</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t2.setName(<span class=string>"t2"</span>);</span><br><span class=line>        t2.start();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=trylock方法><a class=headerlink href=#trylock方法 title=trylock方法></a>trylock方法</h3><blockquote><p><code>synchronized</code> 是<code>不占用到手不罢休</code>的，会一直试图占用下去。<br>与 synchronized 的钻牛角尖不一样，Lock接口还提供了一个trylock方法。</blockquote> <blockquote><p><code>trylock</code>会在指定时间范围内<code>试图占用</code>，占成功了，就啪啪啪。 如果时间到了，还占用不成功，扭头就走~</blockquote> <blockquote><p>注意： 因为使用trylock有可能成功，有可能失败，所以后面unlock释放锁的时候，需要判断是否占用成功了，如果没占用成功也unlock,就会抛出异常。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2612.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br><span class=line>94</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.text.SimpleDateFormat;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line><span class=keyword>import</span> java.util.concurrent.TimeUnit;</span><br><span class=line><span class=keyword>import</span> java.util.concurrent.locks.Lock;</span><br><span class=line><span class=keyword>import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> String <span class="title function_">now</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=keyword>new</span> <span class="title class_">SimpleDateFormat</span>(<span class=string>"HH:mm:ss"</span>).format(<span class=keyword>new</span> <span class="title class_">Date</span>());</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">log</span><span class=params>(String msg)</span> {</span><br><span class=line>        System.out.printf(<span class=string>"%s %s %s %n"</span>, now() , Thread.currentThread().getName() , msg);</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Lock</span> <span class=variable>lock</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class=line> </span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>() {</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span> {</span><br><span class=line>                <span class=type>boolean</span> <span class=variable>locked</span> <span class=operator>=</span> <span class=literal>false</span>;</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    log(<span class=string>"线程启动"</span>);</span><br><span class=line>                    log(<span class=string>"试图占有对象：lock"</span>);</span><br><span class=line> </span><br><span class=line>                    locked = lock.tryLock(<span class=number>1</span>,TimeUnit.SECONDS);</span><br><span class=line>                    <span class=keyword>if</span>(locked){</span><br><span class=line>                        log(<span class=string>"占有对象：lock"</span>);</span><br><span class=line>                        log(<span class=string>"进行5秒的业务操作"</span>);</span><br><span class=line>                        Thread.sleep(<span class=number>5000</span>);</span><br><span class=line>                    }</span><br><span class=line>                    <span class=keyword>else</span>{</span><br><span class=line>                        log(<span class=string>"经过1秒钟的努力，还没有占有对象，放弃占有"</span>);</span><br><span class=line>                    }</span><br><span class=line> </span><br><span class=line>                } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                } <span class=keyword>finally</span> {</span><br><span class=line>                     </span><br><span class=line>                    <span class=keyword>if</span>(locked){</span><br><span class=line>                        log(<span class=string>"释放对象：lock"</span>);</span><br><span class=line>                        lock.unlock();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>                log(<span class=string>"线程结束"</span>);</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t1.setName(<span class=string>"t1"</span>);</span><br><span class=line>        t1.start();</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=comment>//先让t1飞2秒</span></span><br><span class=line>            Thread.sleep(<span class=number>2000</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (InterruptedException e1) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e1.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>() {</span><br><span class=line> </span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span> {</span><br><span class=line>                <span class=type>boolean</span> <span class=variable>locked</span> <span class=operator>=</span> <span class=literal>false</span>;</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    log(<span class=string>"线程启动"</span>);</span><br><span class=line>                    log(<span class=string>"试图占有对象：lock"</span>);</span><br><span class=line> </span><br><span class=line>                    locked = lock.tryLock(<span class=number>1</span>,TimeUnit.SECONDS);</span><br><span class=line>                    <span class=keyword>if</span>(locked){</span><br><span class=line>                        log(<span class=string>"占有对象：lock"</span>);</span><br><span class=line>                        log(<span class=string>"进行5秒的业务操作"</span>);</span><br><span class=line>                        Thread.sleep(<span class=number>5000</span>);</span><br><span class=line>                    }</span><br><span class=line>                    <span class=keyword>else</span>{</span><br><span class=line>                        log(<span class=string>"经过1秒钟的努力，还没有占有对象，放弃占有"</span>);</span><br><span class=line>                    }</span><br><span class=line> </span><br><span class=line>                } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                } <span class=keyword>finally</span> {</span><br><span class=line>                     </span><br><span class=line>                    <span class=keyword>if</span>(locked){</span><br><span class=line>                        log(<span class=string>"释放对象：lock"</span>);</span><br><span class=line>                        lock.unlock();</span><br><span class=line>                    }</span><br><span class=line>                }</span><br><span class=line>                log(<span class=string>"线程结束"</span>);</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t2.setName(<span class=string>"t2"</span>);</span><br><span class=line>        t2.start();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=线程交互><a class=headerlink href=#线程交互 title=线程交互></a>线程交互</h3><blockquote><p>使用synchronized方式进行线程交互，用到的是同步对象的wait,notify和notifyAll方法</blockquote> <blockquote><p>Lock也提供了类似的解决办法，首先通过lock对象得到一个Condition对象，然后分别调用这个Condition对象的：<code>await, signal, signalAll</code> 方法</blockquote> <blockquote><p><code>注意</code>： 不是 Condition 对象的 wait, nofity, notifyAll 方法，而是 await, signal, signalAll 方法。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2617.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.text.SimpleDateFormat;</span><br><span class=line><span class=keyword>import</span> java.util.Date;</span><br><span class=line><span class=keyword>import</span> java.util.concurrent.locks.Condition;</span><br><span class=line><span class=keyword>import</span> java.util.concurrent.locks.Lock;</span><br><span class=line><span class=keyword>import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> String <span class="title function_">now</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=keyword>new</span> <span class="title class_">SimpleDateFormat</span>(<span class=string>"HH:mm:ss"</span>).format(<span class=keyword>new</span> <span class="title class_">Date</span>());</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">log</span><span class=params>(String msg)</span> {</span><br><span class=line>        System.out.printf(<span class=string>"%s %s %s %n"</span>, now() , Thread.currentThread().getName() , msg);</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Lock</span> <span class=variable>lock</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class=line>        <span class=type>Condition</span> <span class=variable>condition</span> <span class=operator>=</span> lock.newCondition();</span><br><span class=line>         </span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t1</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>() {</span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span> {</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    log(<span class=string>"线程启动"</span>);</span><br><span class=line>                    log(<span class=string>"试图占有对象：lock"</span>);</span><br><span class=line>  </span><br><span class=line>                    lock.lock();</span><br><span class=line>  </span><br><span class=line>                    log(<span class=string>"占有对象：lock"</span>);</span><br><span class=line>                    log(<span class=string>"进行5秒的业务操作"</span>);</span><br><span class=line>                    Thread.sleep(<span class=number>5000</span>);</span><br><span class=line>                    log(<span class=string>"临时释放对象 lock， 并等待"</span>);</span><br><span class=line>                    condition.await();</span><br><span class=line>                    log(<span class=string>"重新占有对象 lock，并进行5秒的业务操作"</span>);</span><br><span class=line>                    Thread.sleep(<span class=number>5000</span>);</span><br><span class=line>  </span><br><span class=line>                } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                } <span class=keyword>finally</span> {</span><br><span class=line>                    log(<span class=string>"释放对象：lock"</span>);</span><br><span class=line>                    lock.unlock();</span><br><span class=line>                }</span><br><span class=line>                log(<span class=string>"线程结束"</span>);</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t1.setName(<span class=string>"t1"</span>);</span><br><span class=line>        t1.start();</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=comment>//先让t1飞2秒</span></span><br><span class=line>            Thread.sleep(<span class=number>2000</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (InterruptedException e1) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e1.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>        <span class=type>Thread</span> <span class=variable>t2</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Thread</span>() {</span><br><span class=line>  </span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span> {</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    log(<span class=string>"线程启动"</span>);</span><br><span class=line>                    log(<span class=string>"试图占有对象：lock"</span>);</span><br><span class=line>  </span><br><span class=line>                    lock.lock();</span><br><span class=line>  </span><br><span class=line>                    log(<span class=string>"占有对象：lock"</span>);</span><br><span class=line>                    log(<span class=string>"进行5秒的业务操作"</span>);</span><br><span class=line>                    Thread.sleep(<span class=number>5000</span>);</span><br><span class=line>                    log(<span class=string>"唤醒等待中的线程"</span>);</span><br><span class=line>                    condition.signal();</span><br><span class=line>  </span><br><span class=line>                } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                } <span class=keyword>finally</span> {</span><br><span class=line>                    log(<span class=string>"释放对象：lock"</span>);</span><br><span class=line>                    lock.unlock();</span><br><span class=line>                }</span><br><span class=line>                log(<span class=string>"线程结束"</span>);</span><br><span class=line>            }</span><br><span class=line>        };</span><br><span class=line>        t2.setName(<span class=string>"t2"</span>);</span><br><span class=line>        t2.start();</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=总结-Lock-和-synchronized-的区别><a title="总结 Lock 和 synchronized 的区别" class=headerlink href=#总结-Lock-和-synchronized-的区别></a>总结 Lock 和 synchronized 的区别</h3><blockquote><ol><li><code>Lock</code>是一个接口，是代码层面的实现；<br><code>synchronized</code>是Java中的关键字，是内置的语言实现；</ol></blockquote> <blockquote><ol start=2><li><code>Lock</code>可以选择性的获取锁，如果一段时间获取不到，可以放弃。借助Lock的这个特性，就能够规避死锁;<br><code>synchronized</code>不行，会一根筋一直获取下去。 synchronized必须通过谨慎和良好的设计，才能减少死锁的发生；</ol></blockquote> <blockquote><ol start=3><li><code>Lock</code>必须手动释放， 所以如果忘记了释放锁，一样会造成死锁；<br><code>synchronized</code>在发生异常和同步块结束的时候，会自动释放锁；</ol></blockquote> <h2 id=原子访问><a class=headerlink href=#原子访问 title=原子访问></a>原子访问</h2><h3 id=原子性操作概念><a class=headerlink href=#原子性操作概念 title=原子性操作概念></a>原子性操作概念</h3><blockquote><p>所谓的原子性操作即不可中断的操作，比如赋值操作:</blockquote> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>int i = 5;</span><br></pre></table></figure> <blockquote><p>原子性操作本身是线程安全的，但是 i++ 这个行为，事实上是有3个原子性操作组成的。</blockquote> <ol><li>取 i 的值；<li>i + 1；<li>把新的值赋予i；</ol> <blockquote><p>这三个步骤，每一步都是一个原子操作，但是合在一起，就不是原子操作，<code>就不是线程安全的</code>。 换句话说，一个线程在步骤1 取i 的值结束后，还没有来得及进行步骤2，另一个线程也可以取 i的值了。</blockquote> <blockquote><p>这也是分析同步问题产生的原因 中的原理。<code>i++ ，i--， i = i+1</code> 这些都是<code>非原子性操作</code>。<br>只有<code>int i = 1</code>,这个赋值操作是<code>原子性</code>的。</blockquote> <h3 id=AtomicInteger><a class=headerlink href=#AtomicInteger title=AtomicInteger></a>AtomicInteger</h3><blockquote><p>JDK6 以后，新增加了一个包<code>java.util.concurrent.atomic</code>，里面有各种原子类，比如<code>AtomicInteger</code>。</blockquote> <blockquote><p>而AtomicInteger提供了各种自增，自减等方法，这些方法都是原子性的。 换句话说，自增方法 <code>incrementAndGet</code> 是线程安全的，同一个时间，只有一个线程可以调用这个方法。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> <span class=keyword>throws</span> InterruptedException {</span><br><span class=line>        <span class=type>AtomicInteger</span> <span class=variable>atomicI</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">AtomicInteger</span>();</span><br><span class=line>        <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> atomicI.decrementAndGet();</span><br><span class=line>        <span class=type>int</span> <span class=variable>j</span> <span class=operator>=</span> atomicI.incrementAndGet();</span><br><span class=line>        <span class=type>int</span> <span class=variable>k</span> <span class=operator>=</span> atomicI.addAndGet(<span class=number>3</span>);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=同步测试><a class=headerlink href=#同步测试 title=同步测试></a>同步测试</h3><blockquote><p>分别使用基本变量的非原子性的<code>++运算符</code>和 <code>原子性的AtomicInteger对象</code>的 <code>incrementAndGet</code> 来进行多线程测试。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2626.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> multiplethread;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestThread</span> {</span><br><span class=line>    </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=type>int</span> <span class=variable>value</span> <span class=operator>=</span> <span class=number>0</span>;</span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> <span class=type>AtomicInteger</span> <span class=variable>atomicValue</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">AtomicInteger</span>();</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>number</span> <span class=operator>=</span> <span class=number>100000</span>;</span><br><span class=line>        Thread[] ts1 = <span class=keyword>new</span> <span class="title class_">Thread</span>[number];</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; number; i++) {</span><br><span class=line>            <span class=type>Thread</span> <span class=variable>t</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                    value++;</span><br><span class=line>                }</span><br><span class=line>            };</span><br><span class=line>            t.start();</span><br><span class=line>            ts1[i] = t;</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//等待这些线程全部结束</span></span><br><span class=line>        <span class=keyword>for</span> (Thread t : ts1) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                t.join();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        System.out.printf(<span class=string>"%d个线程进行value++后，value的值变成:%d%n"</span>, number,value);</span><br><span class=line>        Thread[] ts2 = <span class=keyword>new</span> <span class="title class_">Thread</span>[number];</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; number; i++) {</span><br><span class=line>            <span class=type>Thread</span> <span class=variable>t</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">Thread</span>(){</span><br><span class=line>                <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span>{</span><br><span class=line>                    atomicValue.incrementAndGet();</span><br><span class=line>                }</span><br><span class=line>            };</span><br><span class=line>            t.start();</span><br><span class=line>            ts2[i] = t;</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//等待这些线程全部结束</span></span><br><span class=line>        <span class=keyword>for</span> (Thread t : ts2) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                t.join();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        System.out.printf(<span class=string>"%d个线程进行atomicValue.incrementAndGet();后，atomicValue的值变成:%d%n"</span>, number,atomicValue.intValue());</span><br><span class=line>    }</span><br><span class=line>        </span><br><span class=line>}</span><br></pre></table></figure> <h1 id=JDBC><a class=headerlink href=#JDBC title=JDBC></a>JDBC</h1><h2 id=准备工作><a class=headerlink href=#准备工作 title=准备工作></a>准备工作</h2><h3 id=为项目导入mysql-jdbc的jar包><a class=headerlink href=#为项目导入mysql-jdbc的jar包 title=为项目导入mysql-jdbc的jar包></a>为项目导入mysql-jdbc的jar包</h3><blockquote><p>访问MySQL数据库需要用到第三方的类，这些第三方的类，都被压缩在一个叫做Jar的文件里。为了代码能够使用第三方的类，需要为项目导入mysql的专用Jar包<code>mysql-connector-java-5.0.8-bin.jar</code>。<br>通常都会把项目用到的jar包统一放在项目的lib目录下，在本例就会放在<br>E:\project\j2se\lib 这个位置，然后在eclipse中导入这个jar包。</blockquote> <p><img src=http://stepimagewm.how2j.cn/856.png></p> <h3 id=初始化驱动><a class=headerlink href=#初始化驱动 title=初始化驱动></a>初始化驱动</h3><blockquote><p>通过<code>Class.forName</code>(“com.mysql.jdbc.Driver”);<br>初始化驱动类<code>com.mysql.jdbc.Driver</code><br>就在 mysql-connector-java-5.0.8-bin.jar中<br>如果忘记了第一个步骤的导包，就会抛出ClassNotFoundException</blockquote> <blockquote><p>Class.forName是把这个类加载到JVM中，加载的时候，就会执行其中的静态初始化块，完成驱动的初始化的相关工作。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>           </span><br><span class=line>        <span class=comment>//初始化驱动</span></span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=comment>//驱动类com.mysql.jdbc.Driver</span></span><br><span class=line>            <span class=comment>//就在 mysql-connector-java-5.0.8-bin.jar中</span></span><br><span class=line>            <span class=comment>//如果忘记了第一个步骤的导包，就会抛出ClassNotFoundException</span></span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>              </span><br><span class=line>            System.out.println(<span class=string>"数据库驱动加载成功 ！"</span>);</span><br><span class=line>   </span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>           </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=建立与数据库的连接><a class=headerlink href=#建立与数据库的连接 title=建立与数据库的连接></a>建立与数据库的连接</h3><blockquote><p>建立与数据库的Connection连接<br>这里需要提供：<br>数据库所处于的ip:127.0.0.1 (本机)<br>数据库的端口号： 3306 （mysql专用端口号）<br>数据库名称 how2java<br>编码方式 UTF-8<br>账号 root<br>密码 admin</blockquote> <blockquote><p>注： 这一步要成功执行，必须建立在mysql中有数据库how2java的基础上，如果没有，点击创建数据库查看如何进行数据库的创建。</blockquote> <p><img src=http://stepimagewm.how2j.cn/858.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 建立与数据库的Connection连接</span></span><br><span class=line>            <span class=comment>// 这里需要提供：</span></span><br><span class=line>            <span class=comment>// 数据库所处于的ip:127.0.0.1 (本机)</span></span><br><span class=line>            <span class=comment>// 数据库的端口号： 3306 （mysql专用端口号）</span></span><br><span class=line>            <span class=comment>// 数据库名称 how2java</span></span><br><span class=line>            <span class=comment>// 编码方式 UTF-8</span></span><br><span class=line>            <span class=comment>// 账号 root</span></span><br><span class=line>            <span class=comment>// 密码 admin</span></span><br><span class=line>  </span><br><span class=line>            <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager</span><br><span class=line>                    .getConnection(</span><br><span class=line>                            <span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class=line>                            <span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>  </span><br><span class=line>            System.out.println(<span class=string>"连接成功，获取连接对象： "</span> + c);</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=创建Statement><a class=headerlink href=#创建Statement title=创建Statement></a>创建Statement</h3><blockquote><p>Statement是用于执行SQL语句的，比如增加，删除。</blockquote> <p><img src=http://stepimagewm.how2j.cn/859.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>  </span><br><span class=line>            <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager</span><br><span class=line>                    .getConnection(</span><br><span class=line>                            <span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class=line>                            <span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 注意：使用的是 java.sql.Statement</span></span><br><span class=line>            <span class=comment>// 不要不小心使用到： com.mysql.jdbc.Statement;</span></span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();</span><br><span class=line>  </span><br><span class=line>            System.out.println(<span class=string>"获取 Statement对象： "</span> + s);</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=执行SQL语句><a class=headerlink href=#执行SQL语句 title=执行SQL语句></a>执行SQL语句</h3><blockquote><p>s.execute执行sql语句<br>执行成功后，用mysql-front进行查看，明确插入成功。</blockquote> <blockquote><p>执行SQL语句之前要确保数据库how2java中有表hero的存在，如果没有，需要事先创建表。</blockquote> <p><img src=http://stepimagewm.how2j.cn/860.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>  </span><br><span class=line>            <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager</span><br><span class=line>                    .getConnection(</span><br><span class=line>                            <span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class=line>                            <span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>  </span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 准备sql语句</span></span><br><span class=line>            <span class=comment>// 注意： 字符串要用单引号'</span></span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,"</span>+<span class=string>"'提莫'"</span>+<span class=string>","</span>+<span class=number>313.0f</span>+<span class=string>","</span>+<span class=number>50</span>+<span class=string>")"</span>;</span><br><span class=line>            s.execute(sql);</span><br><span class=line>  </span><br><span class=line>            System.out.println(<span class=string>"执行插入语句成功"</span>);</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=关闭连接><a class=headerlink href=#关闭连接 title=关闭连接></a>关闭连接</h3><blockquote><p>数据库的连接是有限资源，相关操作结束后，养成关闭数据库的好习惯<br>先关闭Statement<br>后关闭Connection</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> <span class=literal>null</span>;</span><br><span class=line>        <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> <span class=literal>null</span>;</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line> </span><br><span class=line>            c = DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>, <span class=string>"root"</span>,</span><br><span class=line>                    <span class=string>"admin"</span>);</span><br><span class=line> </span><br><span class=line>            s = c.createStatement();</span><br><span class=line> </span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,"</span> + <span class=string>"'提莫'"</span> + <span class=string>","</span> + <span class=number>313.0f</span> + <span class=string>","</span> + <span class=number>50</span> + <span class=string>")"</span>;</span><br><span class=line> </span><br><span class=line>            s.execute(sql);</span><br><span class=line> </span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        } <span class=keyword>finally</span> {</span><br><span class=line>            <span class=comment>// 数据库的连接时有限资源，相关操作结束后，养成关闭数据库的好习惯</span></span><br><span class=line>            <span class=comment>// 先关闭Statement</span></span><br><span class=line>            <span class=keyword>if</span> (s != <span class=literal>null</span>)</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    s.close();</span><br><span class=line>                } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>                    <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                }</span><br><span class=line>            <span class=comment>// 后关闭Connection</span></span><br><span class=line>            <span class=keyword>if</span> (c != <span class=literal>null</span>)</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    c.close();</span><br><span class=line>                } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>                    <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                }</span><br><span class=line> </span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=使用-try-with-resource-的方式自动关闭连接><a title="使用 try-with-resource 的方式自动关闭连接" class=headerlink href=#使用-try-with-resource-的方式自动关闭连接></a>使用 try-with-resource 的方式自动关闭连接</h3><blockquote><p>如果觉得上一步的关闭连接的方式很麻烦，可以参考关闭流 的方式，使用<code>try-with-resource</code>的方式自动关闭连接，因为Connection和Statement都实现了AutoCloseable接口。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> (</span><br><span class=line>            <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class=line>                <span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();             </span><br><span class=line>        )</span><br><span class=line>        {</span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,"</span> + <span class=string>"'提莫'"</span> + <span class=string>","</span> + <span class=number>313.0f</span> + <span class=string>","</span> + <span class=number>50</span> + <span class=string>")"</span>;</span><br><span class=line>            s.execute(sql);</span><br><span class=line>              </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=增、删、改><a class=headerlink href=#增、删、改 title=增、删、改></a>增、删、改</h2><blockquote><p>CRUD是最常见的数据库操作，即增删改查<br><code>C</code> 增加(Create)<br><code>R</code> 读取查询(Retrieve)<br><code>U</code> 更新(Update)<br><code>D</code> 删除(Delete)</blockquote> <blockquote><p>在JDBC中增加，删除，修改的操作都很类似，只是传递不同的SQL语句就行了。</blockquote> <h3 id=增加-1><a class=headerlink href=#增加-1 title=增加></a>增加</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>   </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>   </span><br><span class=line>        <span class=keyword>try</span> (</span><br><span class=line>            <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class=line>                <span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();             </span><br><span class=line>        )</span><br><span class=line>        {</span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,"</span> + <span class=string>"'提莫'"</span> + <span class=string>","</span> + <span class=number>313.0f</span> + <span class=string>","</span> + <span class=number>50</span> + <span class=string>")"</span>;</span><br><span class=line>            s.execute(sql);</span><br><span class=line>               </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=删除-1><a class=headerlink href=#删除-1 title=删除></a>删除</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>   </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>   </span><br><span class=line>        <span class=keyword>try</span> (</span><br><span class=line>            <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class=line>                <span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();             </span><br><span class=line>        )</span><br><span class=line>        {</span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"delete from hero where id = 5"</span>;</span><br><span class=line>            s.execute(sql);</span><br><span class=line>               </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=修改><a class=headerlink href=#修改 title=修改></a>修改</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>   </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>   </span><br><span class=line>        <span class=keyword>try</span> (</span><br><span class=line>            <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class=line>                <span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();             </span><br><span class=line>        )</span><br><span class=line>        {</span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"update hero set name = 'name 5' where id = 3"</span>;</span><br><span class=line>            s.execute(sql);</span><br><span class=line>               </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=查询><a class=headerlink href=#查询 title=查询></a>查询</h2><h3 id=查询语句><a class=headerlink href=#查询语句 title=查询语句></a>查询语句</h3><blockquote><p><code>executeQuery</code> 执行SQL查询语句</blockquote> <blockquote><p>注意： 在取第二列的数据的时候，用的是rs.get(2) ，而不是get(1). 这个是整个Java自带的api里<code>唯二</code>的地方，使用<code>基1</code>的，即2就代表第二个。</blockquote> <blockquote><p>另一个地方是在<code>PreparedStatement</code>这里。</blockquote> <p><img src=http://stepimagewm.how2j.cn/866.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.ResultSet;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class=line>                <span class=string>"root"</span>, <span class=string>"admin"</span>); <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();) {</span><br><span class=line> </span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"select * from hero"</span>;</span><br><span class=line> </span><br><span class=line>            <span class=comment>// 执行查询语句，并把结果集返回给ResultSet</span></span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> s.executeQuery(sql);</span><br><span class=line>            <span class=keyword>while</span> (rs.next()) {</span><br><span class=line>                <span class=type>int</span> <span class=variable>id</span> <span class=operator>=</span> rs.getInt(<span class=string>"id"</span>);<span class=comment>// 可以使用字段名</span></span><br><span class=line>                <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span> rs.getString(<span class=number>2</span>);<span class=comment>// 也可以使用字段的顺序</span></span><br><span class=line>                <span class=type>float</span> <span class=variable>hp</span> <span class=operator>=</span> rs.getFloat(<span class=string>"hp"</span>);</span><br><span class=line>                <span class=type>int</span> <span class=variable>damage</span> <span class=operator>=</span> rs.getInt(<span class=number>4</span>);</span><br><span class=line>                System.out.printf(<span class=string>"%d\t%s\t%f\t%d%n"</span>, id, name, hp, damage);</span><br><span class=line>            }</span><br><span class=line>            <span class=comment>// 不一定要在这里关闭ReultSet，因为Statement关闭的时候，会自动关闭ResultSet</span></span><br><span class=line>            <span class=comment>// rs.close();</span></span><br><span class=line> </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=SQL语句判断账号密码是否正确><a class=headerlink href=#SQL语句判断账号密码是否正确 title=SQL语句判断账号密码是否正确></a>SQL语句判断账号密码是否正确</h3><blockquote><p>1.创建一个用户表，有字段name,password<br>2.插入一条数据</blockquote> <figure class="highlight sql"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=keyword>insert into</span> <span class=keyword>user</span> <span class=keyword>values</span>(<span class=keyword>null</span>,<span class=string>'dashen'</span>,<span class=string>'thisispassword'</span>);</span><br></pre></table></figure> <blockquote><p>3.SQL语句判断账号密码是否正确</blockquote> <blockquote><p>判断账号密码的<code>正确方式</code>是根据账号和密码到表中去找数据，如果有数据，就表明密码正确了，如果没数据，就表明密码错误。</blockquote> <blockquote><p><code>不恰当的方式</code> 是把uers表的数据全部查到内存中，挨个进行比较。 如果users表里有100万条数据呢？ 内存都不够用的。</blockquote> <p><code>SQL</code></p> <figure class="highlight sql"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=keyword>CREATE TABLE</span> <span class=keyword>user</span> (</span><br><span class=line>  id <span class=type>int</span>(<span class=number>11</span>) AUTO_INCREMENT,</span><br><span class=line>  name <span class=type>varchar</span>(<span class=number>30</span>) ,</span><br><span class=line>  password <span class=type>varchar</span>(<span class=number>30</span>),</span><br><span class=line>  <span class=keyword>PRIMARY KEY</span> (id)</span><br><span class=line>) ;</span><br><span class=line><span class=keyword>insert into</span> <span class=keyword>user</span> <span class=keyword>values</span>(<span class=keyword>null</span>,<span class=string>'dashen'</span>,<span class=string>'thisispassword'</span>);</span><br></pre></table></figure> <p><code>TestJDBC.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.ResultSet;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class=line>                <span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>                <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();</span><br><span class=line>                 </span><br><span class=line>                ) {</span><br><span class=line>            <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span> <span class=string>"dashen"</span>;</span><br><span class=line>            <span class=comment>//正确的密码是：thisispassword</span></span><br><span class=line>            <span class=type>String</span> <span class=variable>password</span> <span class=operator>=</span> <span class=string>"thisispassword1"</span>;</span><br><span class=line>   </span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"select * from user where name = '"</span> + name +<span class=string>"' and password = '"</span> + password+<span class=string>"'"</span>;</span><br><span class=line>              </span><br><span class=line>            <span class=comment>// 执行查询语句，并把结果集返回给ResultSet</span></span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> s.executeQuery(sql);</span><br><span class=line>              </span><br><span class=line>            <span class=keyword>if</span>(rs.next())</span><br><span class=line>                System.out.println(<span class=string>"账号密码正确"</span>);</span><br><span class=line>            <span class=keyword>else</span></span><br><span class=line>                System.out.println(<span class=string>"账号密码错误"</span>);</span><br><span class=line>             </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>   </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=获取总数><a class=headerlink href=#获取总数 title=获取总数></a>获取总数</h3><blockquote><p>执行的sql语句为</blockquote> <figure class="highlight sql"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=keyword>select</span> <span class=built_in>count</span>(<span class=operator>*</span>) <span class=keyword>from</span> hero</span><br></pre></table></figure> <blockquote><p>然后通过ResultSet获取出来。</blockquote> <p><img src=http://stepimagewm.how2j.cn/1714.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.ResultSet;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,</span><br><span class=line>                <span class=string>"root"</span>, <span class=string>"admin"</span>); <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();) {</span><br><span class=line> </span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"select count(*) from hero"</span>;</span><br><span class=line> </span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> s.executeQuery(sql);</span><br><span class=line>            <span class=type>int</span> <span class=variable>total</span> <span class=operator>=</span> <span class=number>0</span>;</span><br><span class=line>            <span class=keyword>while</span> (rs.next()) {</span><br><span class=line>                total = rs.getInt(<span class=number>1</span>);</span><br><span class=line>            }</span><br><span class=line> </span><br><span class=line>            System.out.println(<span class=string>"表Hero中总共有:"</span> + total+<span class=string>" 条数据"</span>);</span><br><span class=line> </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=预编译Statement><a class=headerlink href=#预编译Statement title=预编译Statement></a>预编译Statement</h2><h3 id=使用PreparedStatement><a class=headerlink href=#使用PreparedStatement title=使用PreparedStatement></a>使用PreparedStatement</h3><blockquote><p>和 Statement一样，PreparedStatement也是用来执行sql语句的<br>与创建Statement不同的是，需要根据sql语句创建PreparedStatement。<br>除此之外，还能够通过设置参数，指定相应的值，而不是Statement那样使用字符串拼接。</blockquote> <blockquote><p>注： 这是JAVA里<code>唯二</code>的<code>基1</code>的地方，另一个是查询语句中的<code>ResultSet</code>也是<code>基1</code>的。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>    </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.PreparedStatement;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line>    </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>        <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,?,?,?)"</span>;</span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,<span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>            <span class=comment>// 根据sql语句创建PreparedStatement</span></span><br><span class=line>            <span class=type>PreparedStatement</span> <span class=variable>ps</span> <span class=operator>=</span> c.prepareStatement(sql);</span><br><span class=line>        ) {</span><br><span class=line>             </span><br><span class=line>            <span class=comment>// 设置参数</span></span><br><span class=line>            ps.setString(<span class=number>1</span>, <span class=string>"提莫"</span>);</span><br><span class=line>            ps.setFloat(<span class=number>2</span>, <span class=number>313.0f</span>);</span><br><span class=line>            ps.setInt(<span class=number>3</span>, <span class=number>50</span>);</span><br><span class=line>            <span class=comment>// 执行</span></span><br><span class=line>            ps.execute();</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=PreparedStatement的优点1-参数设置><a title="PreparedStatement的优点1 - 参数设置" class=headerlink href=#PreparedStatement的优点1-参数设置></a>PreparedStatement的优点1 - 参数设置</h3><blockquote><p><code>Statement</code> 需要进行字符串拼接，可读性和维护性比较差</blockquote> <figure class="highlight sql"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>String <span class=keyword>sql</span> <span class=operator>=</span> "insert into hero values(null,"<span class=operator>+</span>"'提莫'"<span class=operator>+</span>","<span class=operator>+</span><span class=number>313.0</span>f<span class=operator>+</span>","<span class=operator>+</span><span class=number>50</span><span class=operator>+</span>")";</span><br></pre></table></figure> <blockquote><p><code>PreparedStatement</code> 使用参数设置，可读性好，不易犯错</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,?,?,?)"</span>;</span><br></pre></table></figure> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.PreparedStatement;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>        <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,?,?,?)"</span>;</span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,<span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();</span><br><span class=line>            <span class=type>PreparedStatement</span> <span class=variable>ps</span> <span class=operator>=</span> c.prepareStatement(sql);</span><br><span class=line>        ) {</span><br><span class=line>            <span class=comment>// Statement需要进行字符串拼接，可读性和维修性比较差</span></span><br><span class=line>            <span class=type>String</span> <span class=variable>sql0</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,"</span> + <span class=string>"'提莫'"</span> + <span class=string>","</span> + <span class=number>313.0f</span> + <span class=string>","</span> + <span class=number>50</span> + <span class=string>")"</span>;</span><br><span class=line>            s.execute(sql0);</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// PreparedStatement 使用参数设置，可读性好，不易犯错</span></span><br><span class=line>            <span class=comment>// "insert into hero values(null,?,?,?)";</span></span><br><span class=line>            ps.setString(<span class=number>1</span>, <span class=string>"提莫"</span>);</span><br><span class=line>            ps.setFloat(<span class=number>2</span>, <span class=number>313.0f</span>);</span><br><span class=line>            ps.setInt(<span class=number>3</span>, <span class=number>50</span>);</span><br><span class=line>            ps.execute();</span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=PreparedStatement的优点2-性能表现><a title="PreparedStatement的优点2 - 性能表现" class=headerlink href=#PreparedStatement的优点2-性能表现></a>PreparedStatement的优点2 - 性能表现</h3><blockquote><p>PreparedStatement有预编译机制，性能比Statement更快。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.PreparedStatement;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>        <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,?,?,?)"</span>;</span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,<span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>                <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();</span><br><span class=line>                <span class=type>PreparedStatement</span> <span class=variable>ps</span> <span class=operator>=</span> c.prepareStatement(sql);</span><br><span class=line>            ) {</span><br><span class=line>            <span class=comment>// Statement执行10次，需要10次把SQL语句传输到数据库端</span></span><br><span class=line>            <span class=comment>// 数据库要对每一次来的SQL语句进行编译处理</span></span><br><span class=line>            <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>                <span class=type>String</span> <span class=variable>sql0</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,"</span> + <span class=string>"'提莫'"</span> + <span class=string>","</span></span><br><span class=line>                        + <span class=number>313.0f</span> + <span class=string>","</span> + <span class=number>50</span> + <span class=string>")"</span>;</span><br><span class=line>                s.execute(sql0);</span><br><span class=line>            }</span><br><span class=line>            s.close();</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// PreparedStatement 执行10次，只需要1次把SQL语句传输到数据库端</span></span><br><span class=line>            <span class=comment>// 数据库对带?的SQL进行预编译</span></span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 每次执行，只需要传输参数到数据库端</span></span><br><span class=line>            <span class=comment>// 1. 网络传输量比Statement更小</span></span><br><span class=line>            <span class=comment>// 2. 数据库不需要再进行编译，响应更快</span></span><br><span class=line>            <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>10</span>; i++) {</span><br><span class=line>                ps.setString(<span class=number>1</span>, <span class=string>"提莫"</span>);</span><br><span class=line>                ps.setFloat(<span class=number>2</span>, <span class=number>313.0f</span>);</span><br><span class=line>                ps.setInt(<span class=number>3</span>, <span class=number>50</span>);</span><br><span class=line>                ps.execute();</span><br><span class=line>            }</span><br><span class=line> </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=PreparedStatement的优点3-防止SQL注入式攻击><a title="PreparedStatement的优点3 - 防止SQL注入式攻击" class=headerlink href=#PreparedStatement的优点3-防止SQL注入式攻击></a>PreparedStatement的优点3 - 防止SQL注入式攻击</h3><blockquote><p>假设name是用户提交来的数据</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span> <span class=string>"'盖伦' OR 1=1"</span>;</span><br></pre></table></figure> <blockquote><p>使用Statement就需要进行字符串拼接<br>拼接出来的语句是：</blockquote> <figure class="highlight sql"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=keyword>select</span> <span class=operator>*</span> <span class=keyword>from</span> hero <span class=keyword>where</span> name <span class=operator>=</span> <span class=string>'盖伦'</span> <span class=keyword>OR</span> <span class=number>1</span><span class=operator>=</span><span class=number>1</span></span><br></pre></table></figure> <blockquote><p>因为有OR 1=1，这是恒成立的<br>那么就会把所有的英雄都查出来，而不只是盖伦。<br>如果Hero表里的数据是海量的，比如几百万条，<code>把这个表里的数据全部查出来</code>。<br>会让数据库负载变高，CPU100%，内存消耗光，<code>响应变得极其缓慢</code>。</blockquote> <blockquote><p>而PreparedStatement使用的是<code>参数设置</code>，就不会有这个问题。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.PreparedStatement;</span><br><span class=line><span class=keyword>import</span> java.sql.ResultSet;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>        <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"select * from hero where name = ?"</span>;</span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,<span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>                <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();</span><br><span class=line>            <span class=type>PreparedStatement</span> <span class=variable>ps</span> <span class=operator>=</span> c.prepareStatement(sql);</span><br><span class=line>        ) {</span><br><span class=line>            <span class=comment>// 假设name是用户提交来的数据</span></span><br><span class=line>            <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span> <span class=string>"'盖伦' OR 1=1"</span>;</span><br><span class=line>            <span class=type>String</span> <span class=variable>sql0</span> <span class=operator>=</span> <span class=string>"select * from hero where name = "</span> + name;</span><br><span class=line>            <span class=comment>// 拼接出来的SQL语句就是</span></span><br><span class=line>            <span class=comment>// select * from hero where name = '盖伦' OR 1=1</span></span><br><span class=line>            <span class=comment>// 因为有OR 1=1，所以恒成立</span></span><br><span class=line>            <span class=comment>// 那么就会把所有的英雄都查出来，而不只是盖伦</span></span><br><span class=line>            <span class=comment>// 如果Hero表里的数据是海量的，比如几百万条，把这个表里的数据全部查出来</span></span><br><span class=line>            <span class=comment>// 会让数据库负载变高，CPU100%，内存消耗光，响应变得极其缓慢</span></span><br><span class=line>            System.out.println(sql0);</span><br><span class=line>  </span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs0</span> <span class=operator>=</span> s.executeQuery(sql0);</span><br><span class=line>            <span class=keyword>while</span> (rs0.next()) {</span><br><span class=line>                <span class=type>String</span> <span class=variable>heroName</span> <span class=operator>=</span> rs0.getString(<span class=string>"name"</span>);</span><br><span class=line>                System.out.println(heroName);</span><br><span class=line>            }</span><br><span class=line>  </span><br><span class=line>            s.execute(sql0);</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 使用预编译Statement就可以杜绝SQL注入</span></span><br><span class=line>  </span><br><span class=line>            ps.setString(<span class=number>1</span>, name);</span><br><span class=line>  </span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> ps.executeQuery();</span><br><span class=line>            <span class=comment>// 查不出数据出来</span></span><br><span class=line>            <span class=keyword>while</span> (rs.next()) {</span><br><span class=line>                <span class=type>String</span> <span class=variable>heroName</span> <span class=operator>=</span> rs.getString(<span class=string>"name"</span>);</span><br><span class=line>                System.out.println(heroName);</span><br><span class=line>            }</span><br><span class=line> </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=execute-与-executeUpdate-的区别><a title="execute 与 executeUpdate 的区别" class=headerlink href=#execute-与-executeUpdate-的区别></a>execute 与 executeUpdate 的区别</h2><h3 id=相同点><a class=headerlink href=#相同点 title=相同点></a>相同点</h3><blockquote><p><code>execute</code>与<code>executeUpdate</code>的相同点：都可以执行增加，删除，修改；</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,<span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();) {</span><br><span class=line> </span><br><span class=line>            <span class=type>String</span> <span class=variable>sqlInsert</span> <span class=operator>=</span> <span class=string>"insert into Hero values (null,'盖伦',616,100)"</span>;</span><br><span class=line>            <span class=type>String</span> <span class=variable>sqlDelete</span> <span class=operator>=</span> <span class=string>"delete from Hero where id = 100"</span>;</span><br><span class=line>            <span class=type>String</span> <span class=variable>sqlUpdate</span> <span class=operator>=</span> <span class=string>"update Hero set hp = 300 where id = 100"</span>;</span><br><span class=line> </span><br><span class=line>            <span class=comment>// 相同点：都可以执行增加，删除，修改</span></span><br><span class=line> </span><br><span class=line>            s.execute(sqlInsert);</span><br><span class=line>            s.execute(sqlDelete);</span><br><span class=line>            s.execute(sqlUpdate);</span><br><span class=line>            s.executeUpdate(sqlInsert);</span><br><span class=line>            s.executeUpdate(sqlDelete);</span><br><span class=line>            s.executeUpdate(sqlUpdate);</span><br><span class=line> </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=不同点><a class=headerlink href=#不同点 title=不同点></a>不同点</h3><blockquote><p>不同1：</blockquote> <ul><li><code>execute</code>可以执行查询语句, 然后通过getResultSet，把结果集取出来;<li><code>executeUpdate</code>不能执行查询语句;</ul> <blockquote><p>不同2:</blockquote> <ul><li><code>execute</code>返回boolean类型，true表示执行的是查询语句，false表示执行的是insert, delete, update等等<li><code>executeUpdate</code>返回的是int，表示有多少条数据受到了影响;</ul> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.ResultSet;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,<span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();) {</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 不同1：execute可以执行查询语句</span></span><br><span class=line>            <span class=comment>// 然后通过getResultSet，把结果集取出来</span></span><br><span class=line>            <span class=type>String</span> <span class=variable>sqlSelect</span> <span class=operator>=</span> <span class=string>"select * from hero"</span>;</span><br><span class=line>  </span><br><span class=line>            s.execute(sqlSelect);</span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> s.getResultSet();</span><br><span class=line>            <span class=keyword>while</span> (rs.next()) {</span><br><span class=line>                System.out.println(rs.getInt(<span class=string>"id"</span>));</span><br><span class=line>            }</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// executeUpdate不能执行查询语句</span></span><br><span class=line>            <span class=comment>// s.executeUpdate(sqlSelect);</span></span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 不同2:</span></span><br><span class=line>            <span class=comment>// execute返回boolean类型，true表示执行的是查询语句，false表示执行的是insert,delete,update等等</span></span><br><span class=line>            <span class=type>boolean</span> <span class=variable>isSelect</span> <span class=operator>=</span> s.execute(sqlSelect);</span><br><span class=line>            System.out.println(isSelect);</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// executeUpdate返回的是int，表示有多少条数据受到了影响</span></span><br><span class=line>            <span class=type>String</span> <span class=variable>sqlUpdate</span> <span class=operator>=</span> <span class=string>"update Hero set hp = 300 where id &lt; 100"</span>;</span><br><span class=line>            <span class=type>int</span> <span class=variable>number</span> <span class=operator>=</span> s.executeUpdate(sqlUpdate);</span><br><span class=line>            System.out.println(number);</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=特殊操作><a class=headerlink href=#特殊操作 title=特殊操作></a>特殊操作</h2><h3 id=获取自增长id><a class=headerlink href=#获取自增长id title=获取自增长id></a>获取自增长id</h3><blockquote><p>在Statement通过execute或者executeUpdate执行完插入语句后，MySQL会为新插入的数据分配一个自增长id，(前提是这个表的id设置为了自增长,在Mysql创建表的时候，AUTO_INCREMENT就表示自增长)</blockquote> <figure class="highlight sql"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=keyword>CREATE TABLE</span> hero (</span><br><span class=line>  id <span class=type>int</span>(<span class=number>11</span>) AUTO_INCREMENT,</span><br><span class=line>  ...</span><br><span class=line>}</span><br></pre></table></figure> <blockquote><p>但是无论是execute还是executeUpdate都不会返回这个自增长id是多少。需要通过<code>Statement</code>的<code>getGeneratedKeys</code>获取该id;</blockquote> <blockquote><p>注： 第20行的代码，后面加了个<code>Statement.RETURN_GENERATED_KEYS</code>参数，以确保会返回自增长ID。 通常情况下不需要加这个，有的时候需要加，所以先加上，保险一些</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=type>PreparedStatement</span> <span class=variable>ps</span> <span class=operator>=</span> c.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);</span><br></pre></table></figure> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.PreparedStatement;</span><br><span class=line><span class=keyword>import</span> java.sql.ResultSet;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>         <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,?,?,?)"</span>;</span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,<span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>                <span class=type>PreparedStatement</span> <span class=variable>ps</span> <span class=operator>=</span> c.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);          </span><br><span class=line>                ) {</span><br><span class=line>  </span><br><span class=line>            ps.setString(<span class=number>1</span>, <span class=string>"盖伦"</span>);</span><br><span class=line>            ps.setFloat(<span class=number>2</span>, <span class=number>616</span>);</span><br><span class=line>            ps.setInt(<span class=number>3</span>, <span class=number>100</span>);</span><br><span class=line>   </span><br><span class=line>            <span class=comment>// 执行插入语句</span></span><br><span class=line>            ps.execute();</span><br><span class=line>   </span><br><span class=line>            <span class=comment>// 在执行完插入语句后，MySQL会为新插入的数据分配一个自增长id</span></span><br><span class=line>            <span class=comment>// JDBC通过getGeneratedKeys获取该id</span></span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> ps.getGeneratedKeys();</span><br><span class=line>            <span class=keyword>if</span> (rs.next()) {</span><br><span class=line>                <span class=type>int</span> <span class=variable>id</span> <span class=operator>=</span> rs.getInt(<span class=number>1</span>);</span><br><span class=line>                System.out.println(id);</span><br><span class=line>            }</span><br><span class=line>   </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>   </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=获取表的元数据><a class=headerlink href=#获取表的元数据 title=获取表的元数据></a>获取表的元数据</h3><blockquote><p>元数据概念：<br>和数据库服务器相关的数据，比如数据库版本，有哪些表，表有哪些字段，字段类型是什么等等。</blockquote> <p><img src=http://stepimagewm.how2j.cn/878.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DatabaseMetaData;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.ResultSet;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> <span class=keyword>throws</span> Exception {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,<span class=string>"root"</span>, <span class=string>"admin"</span>);) {</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 查看数据库层面的元数据</span></span><br><span class=line>            <span class=comment>// 即数据库服务器版本，驱动版本，都有哪些数据库等等</span></span><br><span class=line>  </span><br><span class=line>            <span class=type>DatabaseMetaData</span> <span class=variable>dbmd</span> <span class=operator>=</span> c.getMetaData();</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 获取数据库服务器产品名称</span></span><br><span class=line>            System.out.println(<span class=string>"数据库产品名称:\t"</span>+dbmd.getDatabaseProductName());</span><br><span class=line>            <span class=comment>// 获取数据库服务器产品版本号</span></span><br><span class=line>            System.out.println(<span class=string>"数据库产品版本:\t"</span>+dbmd.getDatabaseProductVersion());</span><br><span class=line>            <span class=comment>// 获取数据库服务器用作类别和表名之间的分隔符 如test.user</span></span><br><span class=line>            System.out.println(<span class=string>"数据库和表分隔符:\t"</span>+dbmd.getCatalogSeparator());</span><br><span class=line>            <span class=comment>// 获取驱动版本</span></span><br><span class=line>            System.out.println(<span class=string>"驱动版本:\t"</span>+dbmd.getDriverVersion());</span><br><span class=line>  </span><br><span class=line>            System.out.println(<span class=string>"可用的数据库列表："</span>);</span><br><span class=line>            <span class=comment>// 获取数据库名称</span></span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> dbmd.getCatalogs();</span><br><span class=line>  </span><br><span class=line>            <span class=keyword>while</span> (rs.next()) {</span><br><span class=line>                System.out.println(<span class=string>"数据库名称:\t"</span>+rs.getString(<span class=number>1</span>));</span><br><span class=line>            }</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=事务><a class=headerlink href=#事务 title=事务></a>事务</h2><h3 id=不使用事务的情况><a class=headerlink href=#不使用事务的情况 title=不使用事务的情况></a>不使用事务的情况</h3><blockquote><p><code>没有事务的前提下</code>：<br>假设业务操作是：加血，减血各做一次。结束后，英雄的血量不变。<br>而减血的SQL，不小心写错写成了 updata(而非update)，那么最后结果是血量增加了，而非期望的不变。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,<span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();) {</span><br><span class=line>  </span><br><span class=line>            <span class=comment>//没有事务的前提下</span></span><br><span class=line>            <span class=comment>//假设业务操作时，加血，减血各做一次</span></span><br><span class=line>            <span class=comment>//结束后，英雄的血量不变</span></span><br><span class=line>              </span><br><span class=line>            <span class=comment>//加血的SQL</span></span><br><span class=line>            <span class=type>String</span> <span class=variable>sql1</span> <span class=operator>=</span> <span class=string>"update hero set hp = hp +1 where id = 22"</span>;</span><br><span class=line>            s.execute(sql1);</span><br><span class=line>              </span><br><span class=line>            <span class=comment>//减血的SQL</span></span><br><span class=line>            <span class=comment>//不小心写错写成了 updata(而非update)</span></span><br><span class=line>              </span><br><span class=line>            <span class=type>String</span> <span class=variable>sql2</span> <span class=operator>=</span> <span class=string>"updata hero set hp = hp -1 where id = 22"</span>;</span><br><span class=line>            s.execute(sql2);</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=使用事务><a class=headerlink href=#使用事务 title=使用事务></a>使用事务</h3><blockquote><p>在事务中的多个操作，<code>要么都成功，要么都失败</code>。</blockquote> <ul><li>通过 c.setAutoCommit(false);<code>关闭自动提交</code><li>使用 c.commit(); 进行<code>手动提交</code></ul> <blockquote><p>在22行-35行之间的数据库操作，就处于同一个事务当中，要么都成功，要么都失败<br>所以，虽然第一条SQL语句是可以执行的，但是第二条SQL语句有错误，其结果就是两条SQL语句<code>都没有被提交</code>。 除非两条SQL语句都是正确的。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,<span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();) {</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 有事务的前提下</span></span><br><span class=line>            <span class=comment>// 在事务中的多个操作，要么都成功，要么都失败</span></span><br><span class=line>  </span><br><span class=line>            c.setAutoCommit(<span class=literal>false</span>);</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 加血的SQL</span></span><br><span class=line>            <span class=type>String</span> <span class=variable>sql1</span> <span class=operator>=</span> <span class=string>"update hero set hp = hp +1 where id = 22"</span>;</span><br><span class=line>            s.execute(sql1);</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 减血的SQL</span></span><br><span class=line>            <span class=comment>// 不小心写错写成了 updata(而非update)</span></span><br><span class=line>  </span><br><span class=line>            <span class=type>String</span> <span class=variable>sql2</span> <span class=operator>=</span> <span class=string>"updata hero set hp = hp -1 where id = 22"</span>;</span><br><span class=line>            s.execute(sql2);</span><br><span class=line>  </span><br><span class=line>            <span class=comment>// 手动提交</span></span><br><span class=line>            c.commit();</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=MYSQL-表的类型必须是INNODB才支持事务><a title="MYSQL 表的类型必须是INNODB才支持事务" class=headerlink href=#MYSQL-表的类型必须是INNODB才支持事务></a>MYSQL 表的类型必须是INNODB才支持事务</h3><blockquote><p>在Mysql中，只有当表的类型是INNODB的时候，才支持事务，所以需要把表的类型设置为INNODB,否则无法观察到事务。<br>修改表的类型为INNODB的SQL：</blockquote> <p><code>alter table hero ENGINE  = innodb;</code></p> <blockquote><p>查看表的类型的SQL</blockquote> <p><code>show table status from how2java; </code></p> <blockquote><p>不过有个前提，就是当前的MYSQL服务器本身要支持INNODB。</blockquote> <h2 id=ORM><a class=headerlink href=#ORM title=ORM></a>ORM</h2><blockquote><p><code>ORM</code> = <code>Object Relationship Database Mapping</code><br>对象和关系数据库的映射。简单说，一个对象，对应数据库里的一条记录。</blockquote> <h3 id=根据id返回一个Hero对象><a class=headerlink href=#根据id返回一个Hero对象 title=根据id返回一个Hero对象></a>根据id返回一个Hero对象</h3><p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=comment>//增加id属性</span></span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> id;</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestJDBC.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.ResultSet;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestJDBC</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> Hero <span class="title function_">get</span><span class=params>(<span class=type>int</span> id)</span> {</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>hero</span> <span class=operator>=</span> <span class=literal>null</span>;</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>,<span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>            <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();) {</span><br><span class=line> </span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"select * from hero where id = "</span> + id;</span><br><span class=line>   </span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> s.executeQuery(sql);</span><br><span class=line>   </span><br><span class=line>            <span class=comment>// 因为id是唯一的，ResultSet最多只能有一条记录</span></span><br><span class=line>            <span class=comment>// 所以使用if代替while</span></span><br><span class=line>            <span class=keyword>if</span> (rs.next()) {</span><br><span class=line>                hero = <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>                <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span> rs.getString(<span class=number>2</span>);</span><br><span class=line>                <span class=type>float</span> <span class=variable>hp</span> <span class=operator>=</span> rs.getFloat(<span class=string>"hp"</span>);</span><br><span class=line>                <span class=type>int</span> <span class=variable>damage</span> <span class=operator>=</span> rs.getInt(<span class=number>4</span>);</span><br><span class=line>                hero.name = name;</span><br><span class=line>                hero.hp = hp;</span><br><span class=line>                hero.damage = damage;</span><br><span class=line>                hero.id = id;</span><br><span class=line>            }</span><br><span class=line>   </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>return</span> hero;</span><br><span class=line>   </span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>           </span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> get(<span class=number>22</span>);</span><br><span class=line>        System.out.println(h.name);</span><br><span class=line>   </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=DAO><a class=headerlink href=#DAO title=DAO></a>DAO</h2><blockquote><p>数据访问对象 <code>DAO</code> = <code>DataAccess Object</code></blockquote> <h3 id=DAO接口><a class=headerlink href=#DAO接口 title=DAO接口></a>DAO接口</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>interface</span> <span class="title class_">DAO</span>{</span><br><span class=line>    <span class=comment>//增加</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">add</span><span class=params>(Hero hero)</span>;</span><br><span class=line>    <span class=comment>//修改</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">update</span><span class=params>(Hero hero)</span>;</span><br><span class=line>    <span class=comment>//删除</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">delete</span><span class=params>(<span class=type>int</span> id)</span>;</span><br><span class=line>    <span class=comment>//获取</span></span><br><span class=line>    <span class=keyword>public</span> Hero <span class="title function_">get</span><span class=params>(<span class=type>int</span> id)</span>;</span><br><span class=line>    <span class=comment>//查询</span></span><br><span class=line>    <span class=keyword>public</span> List&lt;Hero> <span class="title function_">list</span><span class=params>()</span>;</span><br><span class=line>    <span class=comment>//分页查询</span></span><br><span class=line>    <span class=keyword>public</span> List&lt;Hero> <span class="title function_">list</span><span class=params>(<span class=type>int</span> start, <span class=type>int</span> count)</span>;</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=HeroDAO><a class=headerlink href=#HeroDAO title=HeroDAO></a>HeroDAO</h3><blockquote><p>设计类HeroDAO，实现接口DAO</blockquote> <blockquote><p>这个HeroDAO和答案-ORM很接近，做了几个改进：<br>1.把驱动的初始化放在了构造方法HeroDAO里：</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class="title function_">HeroDAO</span><span class=params>()</span> {</span><br><span class=line>	<span class=keyword>try</span> {</span><br><span class=line>		Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>	} <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>		e.printStackTrace();</span><br><span class=line>	}</span><br><span class=line>}</span><br></pre></table></figure> <blockquote><p>因为驱动初始化只需要执行一次，所以放在这里更合适，其他方法里也不需要写了，代码更简洁</blockquote> <blockquote><p>2.提供了一个getConnection方法返回连接<br>所有的数据库操作都需要事先拿到一个数据库连接Connection，以前的做法每个方法里都会写一个，如果要改动密码，那么每个地方都需要修改。 通过这种方式，只需要修改这一个地方就可以了。 代码变得更容易维护，而且也更加简洁。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br><span class=line>94</span><br><span class=line>95</span><br><span class=line>96</span><br><span class=line>97</span><br><span class=line>98</span><br><span class=line>99</span><br><span class=line>100</span><br><span class=line>101</span><br><span class=line>102</span><br><span class=line>103</span><br><span class=line>104</span><br><span class=line>105</span><br><span class=line>106</span><br><span class=line>107</span><br><span class=line>108</span><br><span class=line>109</span><br><span class=line>110</span><br><span class=line>111</span><br><span class=line>112</span><br><span class=line>113</span><br><span class=line>114</span><br><span class=line>115</span><br><span class=line>116</span><br><span class=line>117</span><br><span class=line>118</span><br><span class=line>119</span><br><span class=line>120</span><br><span class=line>121</span><br><span class=line>122</span><br><span class=line>123</span><br><span class=line>124</span><br><span class=line>125</span><br><span class=line>126</span><br><span class=line>127</span><br><span class=line>128</span><br><span class=line>129</span><br><span class=line>130</span><br><span class=line>131</span><br><span class=line>132</span><br><span class=line>133</span><br><span class=line>134</span><br><span class=line>135</span><br><span class=line>136</span><br><span class=line>137</span><br><span class=line>138</span><br><span class=line>139</span><br><span class=line>140</span><br><span class=line>141</span><br><span class=line>142</span><br><span class=line>143</span><br><span class=line>144</span><br><span class=line>145</span><br><span class=line>146</span><br><span class=line>147</span><br><span class=line>148</span><br><span class=line>149</span><br><span class=line>150</span><br><span class=line>151</span><br><span class=line>152</span><br><span class=line>153</span><br><span class=line>154</span><br><span class=line>155</span><br><span class=line>156</span><br><span class=line>157</span><br><span class=line>158</span><br><span class=line>159</span><br><span class=line>160</span><br><span class=line>161</span><br><span class=line>162</span><br><span class=line>163</span><br><span class=line>164</span><br><span class=line>165</span><br><span class=line>166</span><br><span class=line>167</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.PreparedStatement;</span><br><span class=line><span class=keyword>import</span> java.sql.ResultSet;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">HeroDAO</span> <span class=keyword>implements</span> <span class="title class_">DAO</span>{</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">HeroDAO</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> Connection <span class="title function_">getConnection</span><span class=params>()</span> <span class=keyword>throws</span> SQLException {</span><br><span class=line>        <span class=keyword>return</span> DriverManager.getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>, <span class=string>"root"</span>,</span><br><span class=line>                <span class=string>"admin"</span>);</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">getTotal</span><span class=params>()</span> {</span><br><span class=line>        <span class=type>int</span> <span class=variable>total</span> <span class=operator>=</span> <span class=number>0</span>;</span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> getConnection(); <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();) {</span><br><span class=line>  </span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"select count(*) from hero"</span>;</span><br><span class=line>  </span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> s.executeQuery(sql);</span><br><span class=line>            <span class=keyword>while</span> (rs.next()) {</span><br><span class=line>                total = rs.getInt(<span class=number>1</span>);</span><br><span class=line>            }</span><br><span class=line>  </span><br><span class=line>            System.out.println(<span class=string>"total:"</span> + total);</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>  </span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>return</span> total;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">add</span><span class=params>(Hero hero)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"insert into hero values(null,?,?,?)"</span>;</span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> getConnection(); <span class=type>PreparedStatement</span> <span class=variable>ps</span> <span class=operator>=</span> c.prepareStatement(sql);) {</span><br><span class=line>  </span><br><span class=line>            ps.setString(<span class=number>1</span>, hero.name);</span><br><span class=line>            ps.setFloat(<span class=number>2</span>, hero.hp);</span><br><span class=line>            ps.setInt(<span class=number>3</span>, hero.damage);</span><br><span class=line>  </span><br><span class=line>            ps.execute();</span><br><span class=line>  </span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> ps.getGeneratedKeys();</span><br><span class=line>            <span class=keyword>if</span> (rs.next()) {</span><br><span class=line>                <span class=type>int</span> <span class=variable>id</span> <span class=operator>=</span> rs.getInt(<span class=number>1</span>);</span><br><span class=line>                hero.id = id;</span><br><span class=line>            }</span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>  </span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">update</span><span class=params>(Hero hero)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"update hero set name= ?, hp = ? , damage = ? where id = ?"</span>;</span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> getConnection(); <span class=type>PreparedStatement</span> <span class=variable>ps</span> <span class=operator>=</span> c.prepareStatement(sql);) {</span><br><span class=line>  </span><br><span class=line>            ps.setString(<span class=number>1</span>, hero.name);</span><br><span class=line>            ps.setFloat(<span class=number>2</span>, hero.hp);</span><br><span class=line>            ps.setInt(<span class=number>3</span>, hero.damage);</span><br><span class=line>            ps.setInt(<span class=number>4</span>, hero.id);</span><br><span class=line>  </span><br><span class=line>            ps.execute();</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>  </span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>  </span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">delete</span><span class=params>(<span class=type>int</span> id)</span> {</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> getConnection(); <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();) {</span><br><span class=line>  </span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"delete from hero where id = "</span> + id;</span><br><span class=line>  </span><br><span class=line>            s.execute(sql);</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>  </span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> Hero <span class="title function_">get</span><span class=params>(<span class=type>int</span> id)</span> {</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>hero</span> <span class=operator>=</span> <span class=literal>null</span>;</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> getConnection(); <span class=type>Statement</span> <span class=variable>s</span> <span class=operator>=</span> c.createStatement();) {</span><br><span class=line>  </span><br><span class=line>            <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"select * from hero where id = "</span> + id;</span><br><span class=line>  </span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> s.executeQuery(sql);</span><br><span class=line>  </span><br><span class=line>            <span class=keyword>if</span> (rs.next()) {</span><br><span class=line>                hero = <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>                <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span> rs.getString(<span class=number>2</span>);</span><br><span class=line>                <span class=type>float</span> <span class=variable>hp</span> <span class=operator>=</span> rs.getFloat(<span class=string>"hp"</span>);</span><br><span class=line>                <span class=type>int</span> <span class=variable>damage</span> <span class=operator>=</span> rs.getInt(<span class=number>4</span>);</span><br><span class=line>                hero.name = name;</span><br><span class=line>                hero.hp = hp;</span><br><span class=line>                hero.damage = damage;</span><br><span class=line>                hero.id = id;</span><br><span class=line>            }</span><br><span class=line>  </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>  </span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>return</span> hero;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> List&lt;Hero> <span class="title function_">list</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> list(<span class=number>0</span>, Short.MAX_VALUE);</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> List&lt;Hero> <span class="title function_">list</span><span class=params>(<span class=type>int</span> start, <span class=type>int</span> count)</span> {</span><br><span class=line>        List&lt;Hero> heros = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Hero>();</span><br><span class=line>  </span><br><span class=line>        <span class=type>String</span> <span class=variable>sql</span> <span class=operator>=</span> <span class=string>"select * from hero order by id desc limit ?,? "</span>;</span><br><span class=line>  </span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> getConnection(); <span class=type>PreparedStatement</span> <span class=variable>ps</span> <span class=operator>=</span> c.prepareStatement(sql);) {</span><br><span class=line>  </span><br><span class=line>            ps.setInt(<span class=number>1</span>, start);</span><br><span class=line>            ps.setInt(<span class=number>2</span>, count);</span><br><span class=line>  </span><br><span class=line>            <span class=type>ResultSet</span> <span class=variable>rs</span> <span class=operator>=</span> ps.executeQuery();</span><br><span class=line>  </span><br><span class=line>            <span class=keyword>while</span> (rs.next()) {</span><br><span class=line>                <span class=type>Hero</span> <span class=variable>hero</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>                <span class=type>int</span> <span class=variable>id</span> <span class=operator>=</span> rs.getInt(<span class=number>1</span>);</span><br><span class=line>                <span class=type>String</span> <span class=variable>name</span> <span class=operator>=</span> rs.getString(<span class=number>2</span>);</span><br><span class=line>                <span class=type>float</span> <span class=variable>hp</span> <span class=operator>=</span> rs.getFloat(<span class=string>"hp"</span>);</span><br><span class=line>                <span class=type>int</span> <span class=variable>damage</span> <span class=operator>=</span> rs.getInt(<span class=number>4</span>);</span><br><span class=line>                hero.id = id;</span><br><span class=line>                hero.name = name;</span><br><span class=line>                hero.hp = hp;</span><br><span class=line>                hero.damage = damage;</span><br><span class=line>                heros.add(hero);</span><br><span class=line>            }</span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>  </span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>return</span> heros;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure> <h2 id=数据库连接池><a class=headerlink href=#数据库连接池 title=数据库连接池></a>数据库连接池</h2><h3 id=数据库连接池原理-传统方式><a title="数据库连接池原理 - 传统方式" class=headerlink href=#数据库连接池原理-传统方式></a>数据库连接池原理 - 传统方式</h3><blockquote><p>当有多个线程，每个线程都需要连接数据库执行SQL语句的话，那么每个线程都会创建一个连接，并且在使用完毕后，关闭连接。</blockquote> <blockquote><p>创建连接和关闭连接的过程也是比较消耗时间的，当多线程并发的时候，系统就会变得很卡顿。</blockquote> <blockquote><p>同时，一个数据库同时支持的连接总数也是有限的，如果多线程并发量很大，那么数据库连接的总数就会被消耗光，后续线程发起的数据库连接就会失败。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2654.png></p> <h3 id=数据库连接池原理-使用池><a title="数据库连接池原理 - 使用池" class=headerlink href=#数据库连接池原理-使用池></a>数据库连接池原理 - 使用池</h3><blockquote><p>与传统方式不同，连接池在使用之前，就会创建好一定数量的连接。<br>如果有任何线程需要使用连接，那么就从连接池里面<code>借用</code>，<code>而不是自己重新创建</code>。<br>使用完毕后，又把这个连接<code>归还</code>给连接池供下一次或者其他线程使用。<br>倘若发生多线程并发情况，连接池里的连接被<code>借用光了</code>，那么其他线程就会临时等待，直到有连接被<code>归还</code>回来，再继续使用。<br>整个过程，这些连接都<code>不会被关闭</code>，而是不断的被循环使用，从而节约了启动和关闭连接的时间。</blockquote> <p><img src=http://stepimagewm.how2j.cn/2655.png></p> <h3 id=ConnectionPool构造方法和初始化><a class=headerlink href=#ConnectionPool构造方法和初始化 title=ConnectionPool构造方法和初始化></a>ConnectionPool构造方法和初始化</h3><blockquote><ol><li><code>ConnectionPool()</code> 构造方法约定了这个连接池一共有多少连接；<li>在<code>init()</code> 初始化方法中，创建了size条连接。 注意，这里不能使用try-with-resource这种自动关闭连接的方式，因为连接恰恰需要保持不关闭状态，供后续循环使用；<li><code>getConnection</code>， 判断是否为空，如果是空的就<code>wait</code>等待，否则就借用一条连接出去；<li><code>returnConnection</code>， 在使用完毕后，归还这个连接到连接池，并且在归还完毕后，调用<code>notifyAll</code>，通知那些等待的线程，有新的连接可以借用了。</ol></blockquote> <blockquote><p>注：连接池设计用到了多线程的wait和notifyAll，这些内容可以在多线程交互章节查阅学习。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ConnectionPool</span> {</span><br><span class=line>  </span><br><span class=line>    List&lt;Connection> cs = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&lt;Connection>();</span><br><span class=line>  </span><br><span class=line>    <span class=type>int</span> size;</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">ConnectionPool</span><span class=params>(<span class=type>int</span> size)</span> {</span><br><span class=line>        <span class=built_in>this</span>.size = size;</span><br><span class=line>        init();</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">init</span><span class=params>()</span> {</span><br><span class=line>          </span><br><span class=line>        <span class=comment>//这里恰恰不能使用try-with-resource的方式，因为这些连接都需要是"活"的，不要被自动关闭了</span></span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>            <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; size; i++) {</span><br><span class=line>                <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> DriverManager</span><br><span class=line>                        .getConnection(<span class=string>"jdbc:mysql://127.0.0.1:3306/how2java?characterEncoding=UTF-8"</span>, <span class=string>"root"</span>, <span class=string>"admin"</span>);</span><br><span class=line>  </span><br><span class=line>                cs.add(c);</span><br><span class=line>  </span><br><span class=line>            }</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        } <span class=keyword>catch</span> (SQLException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>synchronized</span> Connection <span class="title function_">getConnection</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>while</span> (cs.isEmpty()) {</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                <span class=built_in>this</span>.wait();</span><br><span class=line>            } <span class=keyword>catch</span> (InterruptedException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>        <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> cs.remove(<span class=number>0</span>);</span><br><span class=line>        <span class=keyword>return</span> c;</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>synchronized</span> <span class=keyword>void</span> <span class="title function_">returnConnection</span><span class=params>(Connection c)</span> {</span><br><span class=line>        cs.add(c);</span><br><span class=line>        <span class=built_in>this</span>.notifyAll();</span><br><span class=line>    }</span><br><span class=line>  </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=测试类><a class=headerlink href=#测试类 title=测试类></a>测试类</h3><blockquote><p>首先初始化一个有3条连接的数据库连接池<br>然后创建100个线程，每个线程都会从连接池中借用连接，并且在借用之后，归还连接。 拿到连接之后，执行一个耗时1秒的SQL语句。</blockquote> <blockquote><p>运行程序，就可以观察到如图所示的效果:</blockquote> <p><img src=http://stepimagewm.how2j.cn/1833.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> jdbc;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line><span class=keyword>import</span> java.sql.Statement;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> jdbc.ConnectionPool;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestConnectionPool</span> {</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>ConnectionPool</span> <span class=variable>cp</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ConnectionPool</span>(<span class=number>3</span>);</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i &lt; <span class=number>100</span>; i++) {</span><br><span class=line>            <span class=keyword>new</span> <span class="title class_">WorkingThread</span>(<span class=string>"working thread"</span> + i, cp).start();</span><br><span class=line>        }</span><br><span class=line>   </span><br><span class=line>    }</span><br><span class=line>}</span><br><span class=line>   </span><br><span class=line><span class=keyword>class</span> <span class="title class_">WorkingThread</span> <span class=keyword>extends</span> <span class="title class_">Thread</span> {</span><br><span class=line>    <span class=keyword>private</span> ConnectionPool cp;</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">WorkingThread</span><span class=params>(String name, ConnectionPool cp)</span> {</span><br><span class=line>        <span class=built_in>super</span>(name);</span><br><span class=line>        <span class=built_in>this</span>.cp = cp;</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">run</span><span class=params>()</span> {</span><br><span class=line>        <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> cp.getConnection();</span><br><span class=line>        System.out.println(<span class=built_in>this</span>.getName()+ <span class=string>":\t 获取了一根连接，并开始工作"</span>  );</span><br><span class=line>        <span class=keyword>try</span> (<span class=type>Statement</span> <span class=variable>st</span> <span class=operator>=</span> c.createStatement()){</span><br><span class=line>             </span><br><span class=line>            <span class=comment>//模拟时耗１秒的数据库ＳＱＬ语句</span></span><br><span class=line>            Thread.sleep(<span class=number>1000</span>);</span><br><span class=line>            st.execute(<span class=string>"select * from hero"</span>);</span><br><span class=line>   </span><br><span class=line>        } <span class=keyword>catch</span> (SQLException | InterruptedException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>        cp.returnConnection(c);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h1 id=反射机制><a class=headerlink href=#反射机制 title=反射机制></a>反射机制</h1><h2 id=获取类对象><a class=headerlink href=#获取类对象 title=获取类对象></a>获取类对象</h2><h3 id=什么是类对象？><a class=headerlink href=#什么是类对象？ title=什么是类对象？></a>什么是类对象？</h3><blockquote><p>在理解类对象之前，先说我们熟悉的对象之间的区别：<br>garen和teemo都是Hero对象，他们的区别在于，各自有不同的名称，血量，伤害值。</blockquote> <blockquote><p>然后说说类之间的区别：<br>Hero和Item都是类，他们的区别在于有不同的方法，不同的属性。</blockquote> <blockquote><p>类对象，就是用于描述这种类，都有什么属性、什么方法的。</blockquote> <h3 id=获取类对象-1><a class=headerlink href=#获取类对象-1 title=获取类对象></a>获取类对象</h3><blockquote><p>获取类对象有3种方式:</blockquote> <ol><li>Class.forName<li>Hero.class<li>new Hero().getClass()</ol> <blockquote><p>在一个JVM中，一种类，只会有一个类对象存在。所以以上三种方式取出来的类对象，都是一样的。</blockquote> <blockquote><p>注： 准确的讲是一个ClassLoader下，一种类，只会有一个类对象存在。通常一个JVM下，只会有一个ClassLoader。因为还没有引入ClassLoader概念， 所以暂时不展开了。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> reflection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestReflection</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>            <span class=type>String</span> <span class=variable>className</span> <span class=operator>=</span> <span class=string>"charactor.Hero"</span>;</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                Class pClass1=Class.forName(className);</span><br><span class=line>                Class pClass2=Hero.class;</span><br><span class=line>                Class pClass3=<span class=keyword>new</span> <span class="title class_">Hero</span>().getClass();</span><br><span class=line>                System.out.println(pClass1==pClass2);</span><br><span class=line>                System.out.println(pClass1==pClass3);</span><br><span class=line>            } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=获取类对象的时候，会导致类属性被初始化><a class=headerlink href=#获取类对象的时候，会导致类属性被初始化 title=获取类对象的时候，会导致类属性被初始化></a>获取类对象的时候，会导致类属性被初始化</h3><blockquote><p>为Hero增加一个静态属性,并且在静态初始化块里进行初始化，参考 类属性初始化。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line><span class=keyword>static</span> String copyright;</span><br><span class=line><span class=keyword>static</span> {</span><br><span class=line>    System.out.println(<span class=string>"初始化 copyright"</span>);</span><br><span class=line>    copyright = <span class=string>"版权由Riot Games公司所有"</span>;</span><br><span class=line>}</span><br></pre></table></figure> <blockquote><p>无论什么途径获取类对象，都会导致静态属性被初始化，而且只会执行一次。（除了直接使用 <code>Class c = Hero.class</code> 这种方式，这种方式不会导致静态属性被初始化）</blockquote> <p><img src=http://stepimagewm.how2j.cn/2708.png></p> <p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> id;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>static</span> String copyright;</span><br><span class=line> </span><br><span class=line>    <span class=keyword>static</span> {</span><br><span class=line>        System.out.println(<span class=string>"初始化 copyright"</span>);</span><br><span class=line>        copyright = <span class=string>"版权由Riot Games公司所有"</span>;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestReflection.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> reflection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestReflection</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>            <span class=type>String</span> <span class=variable>className</span> <span class=operator>=</span> <span class=string>"charactor.Hero"</span>;</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                Class pClass1=Class.forName(className);</span><br><span class=line>                Class pClass2=Hero.class;</span><br><span class=line>                Class pClass3=<span class=keyword>new</span> <span class="title class_">Hero</span>().getClass();</span><br><span class=line>            } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=创建对象><a class=headerlink href=#创建对象 title=创建对象></a>创建对象</h2><blockquote><p>与传统的通过new 来获取对象的方式不同。<br><code>反射机制</code>，会先拿到Hero的“<code>类对象</code>”，然后通过类对象获取“<code>构造器对象</code>” ，再通过构造器对象<code>创建一个对象</code>。</blockquote> <h3 id=创建一个对象><a class=headerlink href=#创建一个对象 title=创建一个对象></a>创建一个对象</h3><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> reflection;</span><br><span class=line><span class=keyword>import</span> java.lang.reflect.Constructor;</span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestReflection</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=comment>//传统的使用new的方式创建对象</span></span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h1</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>        h1.name = <span class=string>"teemo"</span>;</span><br><span class=line>        System.out.println(h1);</span><br><span class=line>          </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=comment>//使用反射的方式创建对象</span></span><br><span class=line>            <span class=type>String</span> <span class=variable>className</span> <span class=operator>=</span> <span class=string>"charactor.Hero"</span>;</span><br><span class=line>            <span class=comment>//类对象</span></span><br><span class=line>            Class pClass=Class.forName(className);</span><br><span class=line>            <span class=comment>//构造器</span></span><br><span class=line>            Constructor c= pClass.getConstructor();</span><br><span class=line>            <span class=comment>//通过构造器实例化</span></span><br><span class=line>            Hero h2= (Hero) c.newInstance();</span><br><span class=line>            h2.name=<span class=string>"gareen"</span>;</span><br><span class=line>            System.out.println(h2);</span><br><span class=line>        } <span class=keyword>catch</span> (Exception e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=访问属性><a class=headerlink href=#访问属性 title=访问属性></a>访问属性</h2><blockquote><p>通过反射机制修改对象的属性。</blockquote> <h3 id=Hero-java><a class=headerlink href=#Hero-java title=Hero.java></a>Hero.java</h3><blockquote><p>为了访问属性，把name修改为public。<br>对于private修饰的成员，需要使用setAccessible(true)才能访问和修改。不在此知识点讨论。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> id;</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">getName</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> name;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setName</span><span class=params>(String name)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span>{</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String string)</span> {</span><br><span class=line>        name =string;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=string>"Hero [name="</span> + name + <span class=string>"]"</span>;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">isDead</span><span class=params>()</span> {</span><br><span class=line>        <span class=comment>// TODO Auto-generated method stub</span></span><br><span class=line>        <span class=keyword>return</span> <span class=literal>false</span>;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attackHero</span><span class=params>(Hero h2)</span> {</span><br><span class=line>        System.out.println(<span class=built_in>this</span>.name+ <span class=string>" 正在攻击 "</span> + h2.getName());</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=TestRelection><a class=headerlink href=#TestRelection title=TestRelection></a>TestRelection</h3><blockquote><p>通过反射修改属性的值。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> reflection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.lang.reflect.Field;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line>  </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestReflection</span> {</span><br><span class=line>  </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>            <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span><span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line>            <span class=comment>//使用传统方式修改name的值为garen</span></span><br><span class=line>            h.name = <span class=string>"garen"</span>;</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                <span class=comment>//获取类Hero的名字叫做name的字段</span></span><br><span class=line>                Field f1= h.getClass().getDeclaredField(<span class=string>"name"</span>);</span><br><span class=line>                <span class=comment>//修改这个字段的值</span></span><br><span class=line>                f1.set(h, <span class=string>"teemo"</span>);</span><br><span class=line>                <span class=comment>//打印被修改后的值</span></span><br><span class=line>                System.out.println(h.name);</span><br><span class=line>                 </span><br><span class=line>            } <span class=keyword>catch</span> (Exception e) {</span><br><span class=line>                <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=getField-和-getDeclaredField-的区别><a title="getField 和 getDeclaredField 的区别" class=headerlink href=#getField-和-getDeclaredField-的区别></a>getField 和 getDeclaredField 的区别</h3><blockquote><p>getField和getDeclaredField的区别<br>这两个方法都是用于获取字段：</blockquote> <ul><li><code>getField</code> 只能获取public的，包括从父类继承来的字段。<li><code>getDeclaredField</code> 可以获取本类所有的字段，包括private的，但是不能获取继承来的字段。</ul> <blockquote><p>注： 这里只能获取到private的字段，但并不能访问该private字段的值，除非加上setAccessible(true)</blockquote> <h2 id=调用方法><a class=headerlink href=#调用方法 title=调用方法></a>调用方法</h2><blockquote><p>通过反射机制，调用一个对象的方法。</blockquote> <h3 id=调用方法-1><a class=headerlink href=#调用方法-1 title=调用方法></a>调用方法</h3><blockquote><p>首先为Hero的name属性，增加setter和getter，通过反射机制调用Hero的setName</blockquote> <p><code>Hero.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> charactor;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>public</span> String name;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>float</span> hp;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> damage;</span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> id;</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">getName</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> name;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setName</span><span class=params>(String name)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>()</span>{</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class="title function_">Hero</span><span class=params>(String string)</span> {</span><br><span class=line>        name =string;</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> <span class=string>"Hero [name="</span> + name + <span class=string>"]"</span>;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">isDead</span><span class=params>()</span> {</span><br><span class=line>        <span class=comment>// TODO Auto-generated method stub</span></span><br><span class=line>        <span class=keyword>return</span> <span class=literal>false</span>;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">attackHero</span><span class=params>(Hero h2)</span> {</span><br><span class=line>        <span class=comment>// TODO Auto-generated method stub</span></span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <p><code>TestReflection.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> reflection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.lang.reflect.Method;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> charactor.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">TestReflection</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>Hero</span> <span class=variable>h</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">Hero</span>();</span><br><span class=line> </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            <span class=comment>// 获取这个名字叫做setName，参数类型是String的方法</span></span><br><span class=line>            <span class=type>Method</span> <span class=variable>m</span> <span class=operator>=</span> h.getClass().getMethod(<span class=string>"setName"</span>, String.class);</span><br><span class=line>            <span class=comment>// 对h对象，调用这个方法</span></span><br><span class=line>            m.invoke(h, <span class=string>"盖伦"</span>);</span><br><span class=line>            <span class=comment>// 使用传统的方式，调用getName方法</span></span><br><span class=line>            System.out.println(h.getName());</span><br><span class=line> </span><br><span class=line>        } <span class=keyword>catch</span> (Exception e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line> </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=反射机制的作用><a class=headerlink href=#反射机制的作用 title=反射机制的作用></a>反射机制的作用</h2><blockquote><p>反射非常强大，但是学习了之后，会不知道该如何使用，反而觉得还不如直接调用方法来的直接和方便。</blockquote> <blockquote><p>通常来说，需要在学习了Spring 的依赖注入，反转控制之后，才会对反射有更好的理解，但是刚学到这里的同学，不一定接触了Spring，所以在这里举两个例子，来演示一下反射的一种实际运用。</blockquote> <h3 id=业务类><a class=headerlink href=#业务类 title=业务类></a>业务类</h3><blockquote><p>首先准备两个业务类，这两个业务类很简单，就是各自都有一个业务方法，分别打印不同的字符串。</blockquote> <p><code>Service1.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> reflection;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Service1</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">doService1</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"业务方法1"</span>);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <p><code>Service2.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> reflection;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Service2</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">doService2</span><span class=params>()</span>{</span><br><span class=line>        System.out.println(<span class=string>"业务方法2"</span>);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=非反射方式><a class=headerlink href=#非反射方式 title=非反射方式></a>非反射方式</h3><blockquote><p>当需要从第一个业务方法切换到第二个业务方法的时候，使用非反射方式，必须修改代码，并且重新编译运行，才可以达到效果。</blockquote> <p><code>Test.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> reflection;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Test</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">Service1</span>().doService1();</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <p><code>Test.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> reflection;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Test</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line><span class=comment>//      new Service1().doService1();</span></span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">Service2</span>().doService2();</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=反射方式><a class=headerlink href=#反射方式 title=反射方式></a>反射方式</h3><blockquote><p>使用反射方式，首先准备一个配置文件，就叫做spring.txt吧, 放在src目录下。 里面存放的是类的名称，和要调用的方法名。<br>在测试类Test中，首先取出类名称和方法名，然后通过反射去调用这个方法。</blockquote> <blockquote><p>当需要从调用第一个业务方法，切换到调用第二个业务方法的时候，不需要修改一行代码，也不需要重新编译，只需要修改配置文件spring.txt，再运行即可。</blockquote> <blockquote><p>这也是Spring框架的最基本的原理，只是它做的更丰富，安全，健壮。</blockquote> <p><img src=http://stepimagewm.how2j.cn/4264.png></p> <p><code>spring.txt</code></p> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line>class=reflection.Service1</span><br><span class=line>method=doService1</span><br></pre></table></figure> <p><code>Test.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> reflection;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.io.File;</span><br><span class=line><span class=keyword>import</span> java.io.FileInputStream;</span><br><span class=line><span class=keyword>import</span> java.lang.reflect.Constructor;</span><br><span class=line><span class=keyword>import</span> java.lang.reflect.Method;</span><br><span class=line><span class=keyword>import</span> java.util.Properties;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Test</span> {</span><br><span class=line> </span><br><span class=line>    <span class=meta>@SuppressWarnings({ "rawtypes", "unchecked" })</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> <span class=keyword>throws</span> Exception {</span><br><span class=line> </span><br><span class=line>        <span class=comment>//从spring.txt中获取类名称和方法名称</span></span><br><span class=line>        <span class=type>File</span> <span class=variable>springConfigFile</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">File</span>(<span class=string>"e:\\project\\j2se\\src\\spring.txt"</span>);</span><br><span class=line>        Properties springConfig= <span class=keyword>new</span> <span class="title class_">Properties</span>();</span><br><span class=line>        springConfig.load(<span class=keyword>new</span> <span class="title class_">FileInputStream</span>(springConfigFile));</span><br><span class=line>        <span class=type>String</span> <span class=variable>className</span> <span class=operator>=</span> (String) springConfig.get(<span class=string>"class"</span>);</span><br><span class=line>        <span class=type>String</span> <span class=variable>methodName</span> <span class=operator>=</span> (String) springConfig.get(<span class=string>"method"</span>);</span><br><span class=line>         </span><br><span class=line>        <span class=comment>//根据类名称获取类对象</span></span><br><span class=line>        <span class=type>Class</span> <span class=variable>clazz</span> <span class=operator>=</span> Class.forName(className);</span><br><span class=line>        <span class=comment>//根据方法名称，获取方法对象</span></span><br><span class=line>        <span class=type>Method</span> <span class=variable>m</span> <span class=operator>=</span> clazz.getMethod(methodName);</span><br><span class=line>        <span class=comment>//获取构造器</span></span><br><span class=line>        <span class=type>Constructor</span> <span class=variable>c</span> <span class=operator>=</span> clazz.getConstructor();</span><br><span class=line>        <span class=comment>//根据构造器，实例化出对象</span></span><br><span class=line>        <span class=type>Object</span> <span class=variable>service</span> <span class=operator>=</span> c.newInstance();</span><br><span class=line>        <span class=comment>//调用对象的指定方法</span></span><br><span class=line>        m.invoke(service);</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h1 id=注解><a class=headerlink href=#注解 title=注解></a>注解</h1><h2 id=注解简介><a class=headerlink href=#注解简介 title=注解简介></a>注解简介</h2><blockquote><p>本模块首先简单介绍基本注解，然后借助自定义注解的方式，帮助大家理解 Hibernate，Spring, Struts等等第三方注解是如何工作的。<br>因为是高级内容，所以需要有如下前置基础：</blockquote> <ol><li>反射：反射用于解析注解中的信息；<li>有任意使用注解方式使用框架的经验，如：Hibernate, Spring, Struts，Mybatis 等；</ol> <h2 id=基本内置注解><a class=headerlink href=#基本内置注解 title=基本内置注解></a>基本内置注解</h2><h3 id=Override><a class=headerlink href=#Override title=@Override></a>@Override</h3><blockquote><p>@Override 用在方法上，表示这个方法重写了父类的方法，如toString()。<br>如果父类没有这个方法，那么就无法编译通过，如例所示，在fromString()方法上加上@Override 注解，就会失败，因为Hero类的父类Object，并没有fromString方法。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> annotation;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line> </span><br><span class=line>    String name;</span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">toString</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>return</span> name;</span><br><span class=line>    }</span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">fromString</span><span class=params>()</span>{</span><br><span class=line>        <span class=keyword>return</span> name;</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=Deprecated><a class=headerlink href=#Deprecated title=@Deprecated></a>@Deprecated</h3><blockquote><p>@Deprecated 表示这个方法已经过期，不建议开发者使用。(暗示在将来某个不确定的版本，就有可能会取消掉)</blockquote> <blockquote><p>如例所示，开地图这个方法hackMap，被注解为过期，在调用的时候，就会受到提示。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> annotation;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line> </span><br><span class=line>    String name;</span><br><span class=line>     </span><br><span class=line>    <span class=meta>@Deprecated</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">hackMap</span><span class=params>()</span>{</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">Hero</span>().hackMap();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=SuppressWarnings><a class=headerlink href=#SuppressWarnings title=@SuppressWarnings></a>@SuppressWarnings</h3><blockquote><p>@SuppressWarnings Suppress英文的意思是抑制的意思，这个注解的用处是忽略警告信息。<br>比如大家使用集合的时候，有时候为了偷懒，会不写泛型，像这样：</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=type>List</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br></pre></table></figure> <blockquote><p>那么就会导致编译器出现警告，而加上</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=meta>@SuppressWarnings({ "rawtypes", "unused" })</span></span><br></pre></table></figure> <blockquote><p>就对这些警告进行了抑制，即忽略掉这些警告信息。<br>@SuppressWarnings 有常见的值，分别对应如下意思<ol><li><code>deprecation</code>：使用了不赞成使用的类或方法时的警告(使用@Deprecated使得编译器产生的警告)；<li><code>unchecked</code>：执行了未检查的转换时的警告，例如当使用集合时没有用泛型 (Generics) 来指定集合保存的类型; 关闭编译器警告<li><code>fallthrough</code>：当 Switch 程序块直接通往下一种情况而没有 Break 时的警告;<li><code>path</code>：在类路径、源文件路径等中有不存在的路径时的警告;<li><code>serial</code>：当在可序列化的类上缺少 serialVersionUID 定义时的警告;<li><code>finally</code>：任何 finally 子句不能正常完成时的警告;<li><code>rawtypes</code>：泛型类型未指明<li><code>unused</code>: 引用定义了，但是没有被使用<li><code>all</code>：关于以上所有情况的警告。</ol></blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> annotation;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.util.ArrayList;</span><br><span class=line><span class=keyword>import</span> java.util.List;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    String name;</span><br><span class=line>    <span class=meta>@SuppressWarnings({ "rawtypes", "unused" })</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=type>List</span> <span class=variable>heros</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=SafeVarargs><a class=headerlink href=#SafeVarargs title=@SafeVarargs></a>@SafeVarargs</h3><blockquote><p>@SafeVarargs 这是1.7 之后新加入的基本注解. 如例所示，当使用可变数量的参数的时候，而参数的类型又是泛型T的话，就会出现警告。 这个时候，就使用@SafeVarargs来去掉这个警告</blockquote> <blockquote><p>@SafeVarargs注解只能用在参数长度可变的方法或构造方法上，且方法必须声明为static或final，否则会出现编译错误。一个方法使用@SafeVarargs注解的前提是，开发人员必须确保这个方法的实现中对泛型类型参数的处理不会引发类型安全问题。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre><td class=code><pre><span class=line></span><br><span class=line><span class=keyword>package</span> annotation;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    String name;</span><br><span class=line> </span><br><span class=line>    <span class=meta>@SafeVarargs</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> &lt;T> T <span class="title function_">getFirstOne</span><span class=params>(T... elements)</span> {</span><br><span class=line>        <span class=keyword>return</span> elements.length > <span class=number>0</span> ? elements[<span class=number>0</span>] : <span class=literal>null</span>;</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=FunctionalInterface><a class=headerlink href=#FunctionalInterface title=@FunctionalInterface></a>@FunctionalInterface</h3><blockquote><p>@FunctionalInterface这是Java1.8 新增的注解，用于约定函数式接口。<br>函数式接口概念： 如果接口中只有一个抽象方法（可以包含多个默认方法或多个static方法），该接口称为函数式接口。函数式接口其存在的意义，主要是配合Lambda 表达式 来使用。</blockquote> <blockquote><p>如例所示，AD接口只有一个adAttack方法，那么就可以被注解为@FunctionalInterface,而AP接口有两个方法apAttack()和apAttack2(),那么就不能被注解为函数式接口。</blockquote> <p><code>AD.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> annotation;</span><br><span class=line> </span><br><span class=line><span class=meta>@FunctionalInterface</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>interface</span> <span class="title class_">AD</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">adAttack</span><span class=params>()</span>;</span><br><span class=line>}</span><br></pre></table></figure> <p><code>AP.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> annotation;</span><br><span class=line> </span><br><span class=line><span class=meta>@FunctionalInterface</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>interface</span> <span class="title class_">AP</span> {</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">apAttack</span><span class=params>()</span>;</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">apAttack2</span><span class=params>()</span>;</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=自定义注解><a class=headerlink href=#自定义注解 title=自定义注解></a>自定义注解</h2><blockquote><p>在本例中，把数据库连接的工具类DBUtil改造成为注解的方式，来举例演示怎么自定义注解以及如何解析这些自定义注解。</blockquote> <h3 id=非注解方式DBUtil><a class=headerlink href=#非注解方式DBUtil title=非注解方式DBUtil></a>非注解方式DBUtil</h3><blockquote><p>通常来讲，在一个基于JDBC开发的项目里，都会有一个DBUtil这么一个类，在这个类里统一提供连接数据库的IP地址，端口，数据库名称， 账号，密码，编码方式等信息。如例所示，在这个DBUtil类里，这些信息，就是以属性的方式定义在类里的。</blockquote> <blockquote><p>大家可以运行试试，运行结果是获取一个连接数据库test的连接Connection实例。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> util;</span><br><span class=line>   </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line>   </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">DBUtil</span> {</span><br><span class=line>    <span class=keyword>static</span> <span class=type>String</span> <span class=variable>ip</span> <span class=operator>=</span> <span class=string>"127.0.0.1"</span>;</span><br><span class=line>    <span class=keyword>static</span> <span class=type>int</span> <span class=variable>port</span> <span class=operator>=</span> <span class=number>3306</span>;</span><br><span class=line>    <span class=keyword>static</span> <span class=type>String</span> <span class=variable>database</span> <span class=operator>=</span> <span class=string>"test"</span>;</span><br><span class=line>    <span class=keyword>static</span> <span class=type>String</span> <span class=variable>encoding</span> <span class=operator>=</span> <span class=string>"UTF-8"</span>;</span><br><span class=line>    <span class=keyword>static</span> <span class=type>String</span> <span class=variable>loginName</span> <span class=operator>=</span> <span class=string>"root"</span>;</span><br><span class=line>    <span class=keyword>static</span> <span class=type>String</span> <span class=variable>password</span> <span class=operator>=</span> <span class=string>"admin"</span>;</span><br><span class=line>    <span class=keyword>static</span>{</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line>   </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> Connection <span class="title function_">getConnection</span><span class=params>()</span> <span class=keyword>throws</span> SQLException {</span><br><span class=line>        <span class=type>String</span> <span class=variable>url</span> <span class=operator>=</span> String.format(<span class=string>"jdbc:mysql://%s:%d/%s?characterEncoding=%s"</span>, ip, port, database, encoding);</span><br><span class=line>        <span class=keyword>return</span> DriverManager.getConnection(url, loginName, password);</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> <span class=keyword>throws</span> SQLException {</span><br><span class=line>        System.out.println(getConnection());</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=自定义注解-JDBCConfig><a class=headerlink href=#自定义注解-JDBCConfig title=自定义注解@JDBCConfig></a>自定义注解@JDBCConfig</h3><blockquote><p>接下来，就要把DBUtil这个类改造成为支持自定义注解的方式。 首先创建一个注解JDBCConfig</blockquote> <blockquote><p>1.创建注解类型的时候即不使用class也不使用interface,而是使用@interface</blockquote> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>public @interface JDBCConfig </span><br></pre></table></figure> <blockquote><p>2.元注解<br><code>@Target({METHOD,TYPE})</code> 表示这个注解可以用用在类/接口上，还可以用在方法上<br><code>@Retention(RetentionPolicy.RUNTIME)</code> 表示这是一个运行时注解，即运行起来之后，才获取注解中的相关信息，而不像基本注解如@Override 那种不用运行，在编译时eclipse就可以进行相关工作的编译时注解。<br><code>@Inherited</code> 表示这个注解可以被子类继承<br><code>@Documented</code> 表示当执行javadoc的时候，本注解会生成相关文档<br>请在学习完本知识点最后一个步骤解析注解之后，再查看 元注解，做更详尽的学习。</blockquote> <blockquote><p>3.注解元素，这些注解元素就用于存放注解信息，在解析的时候获取出来</blockquote> <p>String ip();<br> int port() default 3306;<br> String database();<br> String encoding();<br> String loginName();<br> String password();</p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> anno;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> <span class=keyword>static</span> java.lang.annotation.ElementType.METHOD;</span><br><span class=line><span class=keyword>import</span> <span class=keyword>static</span> java.lang.annotation.ElementType.TYPE;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Documented;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Inherited;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Retention;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.RetentionPolicy;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Target;</span><br><span class=line> </span><br><span class=line><span class=meta>@Target({METHOD,TYPE})</span></span><br><span class=line><span class=meta>@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=line><span class=meta>@Inherited</span></span><br><span class=line><span class=meta>@Documented</span></span><br><span class=line><span class=keyword>public</span> <span class=meta>@interface</span> JDBCConfig {</span><br><span class=line>     String <span class="title function_">ip</span><span class=params>()</span>;</span><br><span class=line>     <span class=type>int</span> <span class="title function_">port</span><span class=params>()</span> <span class=keyword>default</span> <span class=number>3306</span>;</span><br><span class=line>     String <span class="title function_">database</span><span class=params>()</span>;</span><br><span class=line>     String <span class="title function_">encoding</span><span class=params>()</span>;</span><br><span class=line>     String <span class="title function_">loginName</span><span class=params>()</span>;</span><br><span class=line>     String <span class="title function_">password</span><span class=params>()</span>;</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=注解方式DBUtil><a class=headerlink href=#注解方式DBUtil title=注解方式DBUtil></a>注解方式DBUtil</h3><blockquote><p>有了自定义注解@JDBCConfig之后，我们就把非注解方式DBUtil改造成为注解方式DBUtil。<br>如例所示，数据库相关配置信息本来是以属性的方式存放的，现在改为了以注解的方式，提供这些信息了。</blockquote> <blockquote><p>注： 目前只是以注解的方式提供这些信息，但是还没有解析，接下来进行解析。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> util;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> anno.JDBCConfig;</span><br><span class=line> </span><br><span class=line><span class=meta>@JDBCConfig(ip = "127.0.0.1", database = "test", encoding = "UTF-8", loginName = "root", password = "admin")</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">DBUtil</span> {</span><br><span class=line>    <span class=keyword>static</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=解析注解><a class=headerlink href=#解析注解 title=解析注解></a>解析注解</h3><blockquote><p>接下来就通过反射，获取这个DBUtil这个类上的注解对象</blockquote> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>JDBCConfig config = DBUtil.class.getAnnotation(JDBCConfig.class);</span><br></pre></table></figure> <blockquote><p>拿到注解对象之后，通过其方法，获取各个注解元素的值：</blockquote> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line>String ip = config.ip();</span><br><span class=line>int port = config.port();</span><br><span class=line>String database = config.database();</span><br><span class=line>String encoding = config.encoding();</span><br><span class=line>String loginName = config.loginName();</span><br><span class=line>String password = config.password();</span><br></pre></table></figure> <blockquote><p>后续就一样了，根据这些配置信息得到一个数据库连接Connection实例。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> util;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> anno.JDBCConfig;</span><br><span class=line> </span><br><span class=line><span class=meta>@JDBCConfig(ip = "127.0.0.1", database = "test", encoding = "UTF-8", loginName = "root", password = "admin")</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">DBUtil</span> {</span><br><span class=line>    <span class=keyword>static</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> Connection <span class="title function_">getConnection</span><span class=params>()</span> <span class=keyword>throws</span> SQLException, NoSuchMethodException, SecurityException {</span><br><span class=line>        <span class=type>JDBCConfig</span> <span class=variable>config</span> <span class=operator>=</span> DBUtil.class.getAnnotation(JDBCConfig.class);</span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>ip</span> <span class=operator>=</span> config.ip();</span><br><span class=line>        <span class=type>int</span> <span class=variable>port</span> <span class=operator>=</span> config.port();</span><br><span class=line>        <span class=type>String</span> <span class=variable>database</span> <span class=operator>=</span> config.database();</span><br><span class=line>        <span class=type>String</span> <span class=variable>encoding</span> <span class=operator>=</span> config.encoding();</span><br><span class=line>        <span class=type>String</span> <span class=variable>loginName</span> <span class=operator>=</span> config.loginName();</span><br><span class=line>        <span class=type>String</span> <span class=variable>password</span> <span class=operator>=</span> config.password();</span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>url</span> <span class=operator>=</span> String.format(<span class=string>"jdbc:mysql://%s:%d/%s?characterEncoding=%s"</span>, ip, port, database, encoding);</span><br><span class=line>        <span class=keyword>return</span> DriverManager.getConnection(url, loginName, password);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> <span class=keyword>throws</span> NoSuchMethodException, SecurityException, SQLException {</span><br><span class=line>        <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> getConnection();</span><br><span class=line>        System.out.println(c);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=元注解><a class=headerlink href=#元注解 title=元注解></a>元注解</h2><h3 id=元注解概念><a class=headerlink href=#元注解概念 title=元注解概念></a>元注解概念</h3><blockquote><p>在讲解元注解概念之前，我们先建立元数据的概念。 元数据在英语中对应单词 metadata, metadata在wiki中的解释是：<br>Metadata is data [information] that provides information about other data<br>为其他数据提供信息的数据</blockquote> <blockquote><p>这样元注解就好理解了，元注解 meta annotation用于注解 <code>自定义注解</code> 的注解。</blockquote> <blockquote><p>元注解有这么几种：</blockquote> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line>@Target </span><br><span class=line>@Retention </span><br><span class=line>@Inherited </span><br><span class=line>@Documented </span><br><span class=line>@Repeatable (java1.8 新增)</span><br></pre></table></figure> <h3 id=Target><a class=headerlink href=#Target title=@Target></a>@Target</h3><blockquote><p><code>@Target</code> 表示这个注解能放在什么位置上，是只能放在类上？还是即可以放在方法上，又可以放在属性上。自定义注解<code>@JDBCConfig</code> 这个注解上的<code>@Target</code>是：<code>@Target({METHOD,TYPE})</code>，表示他可以用在方法和类型上（类和接口），但是不能放在属性等其他位置。 可以选择的位置列表如下：</blockquote> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre><td class=code><pre><span class=line>ElementType.TYPE：能修饰类、接口或枚举类型</span><br><span class=line>ElementType.FIELD：能修饰成员变量</span><br><span class=line>ElementType.METHOD：能修饰方法</span><br><span class=line>ElementType.PARAMETER：能修饰参数</span><br><span class=line>ElementType.CONSTRUCTOR：能修饰构造器</span><br><span class=line>ElementType.LOCAL_VARIABLE：能修饰局部变量</span><br><span class=line>ElementType.ANNOTATION_TYPE：能修饰注解</span><br><span class=line>ElementType.PACKAGE：能修饰包</span><br></pre></table></figure> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> anno;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> <span class=keyword>static</span> java.lang.annotation.ElementType.METHOD;</span><br><span class=line><span class=keyword>import</span> <span class=keyword>static</span> java.lang.annotation.ElementType.TYPE;</span><br><span class=line>  </span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Documented;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Inherited;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Retention;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.RetentionPolicy;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Target;</span><br><span class=line>  </span><br><span class=line><span class=meta>@Target({METHOD,TYPE})</span></span><br><span class=line><span class=meta>@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=line><span class=meta>@Inherited</span></span><br><span class=line><span class=meta>@Documented</span></span><br><span class=line><span class=keyword>public</span> <span class=meta>@interface</span> JDBCConfig {</span><br><span class=line>     String <span class="title function_">ip</span><span class=params>()</span>;</span><br><span class=line>     <span class=type>int</span> <span class="title function_">port</span><span class=params>()</span> <span class=keyword>default</span> <span class=number>3306</span>;</span><br><span class=line>     String <span class="title function_">database</span><span class=params>()</span>;</span><br><span class=line>     String <span class="title function_">encoding</span><span class=params>()</span>;</span><br><span class=line>     String <span class="title function_">loginName</span><span class=params>()</span>;</span><br><span class=line>     String <span class="title function_">password</span><span class=params>()</span>;</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=Retention><a class=headerlink href=#Retention title=@Retention></a>@Retention</h3><blockquote><p><code>@Retention</code> 表示生命周期，自定义注解<code>@JDBCConfig</code> 上的值是 <code>RetentionPolicy.RUNTIME</code>, 表示可以在运行的时候依然可以使用。</blockquote> <blockquote><p><code>@Retention</code>可选的值有3个：<ul><li><code>RetentionPolicy.SOURCE</code>： 注解只在源代码中存在，编译成class之后，就没了。<code>@Override</code> 就是这种注解。<li><code>RetentionPolicy.CLASS</code>： 注解在java文件编程成.class文件后，依然存在，但是运行起来后就没了。<code>@Retention</code>的默认值，即当没有显式指定<code>@Retention</code>的时候，就会是这种类型。<li><code>RetentionPolicy.RUNTIME</code>： 注解在运行起来之后依然存在，程序可以通过反射获取这些信息，自定义注解<code>@JDBCConfig</code> 就是这样。</ul></blockquote> <blockquote><p>大家可以试试把自定义注解<code>@JDBCConfig</code>的<code>@Retention</code>改成其他两种，并且运行起来，看看有什么不同。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> anno;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> <span class=keyword>static</span> java.lang.annotation.ElementType.METHOD;</span><br><span class=line><span class=keyword>import</span> <span class=keyword>static</span> java.lang.annotation.ElementType.TYPE;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Documented;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Inherited;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Retention;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.RetentionPolicy;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Target;</span><br><span class=line> </span><br><span class=line><span class=meta>@Target({METHOD,TYPE})</span></span><br><span class=line><span class=meta>@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=line><span class=meta>@Inherited</span></span><br><span class=line><span class=meta>@Documented</span></span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=meta>@interface</span> JDBCConfig {</span><br><span class=line>     String <span class="title function_">ip</span><span class=params>()</span>;</span><br><span class=line>     <span class=type>int</span> <span class="title function_">port</span><span class=params>()</span> <span class=keyword>default</span> <span class=number>3306</span>;</span><br><span class=line>     String <span class="title function_">database</span><span class=params>()</span>;</span><br><span class=line>     String <span class="title function_">encoding</span><span class=params>()</span>;</span><br><span class=line>     String <span class="title function_">loginName</span><span class=params>()</span>;</span><br><span class=line>     String <span class="title function_">password</span><span class=params>()</span>;</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=Inherited><a class=headerlink href=#Inherited title=@Inherited></a>@Inherited</h3><blockquote><p><code>@Inherited</code> 表示该注解具有继承性。如例，设计一个<code>DBUtil</code>的子类，其<code>getConnection2</code>方法，可以获取到父类DBUtil上的注解信息。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> util;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> anno.JDBCConfig;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">DBUtilChild</span> <span class=keyword>extends</span> <span class="title class_">DBUtil</span> {</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> Connection <span class="title function_">getConnection2</span><span class=params>()</span> <span class=keyword>throws</span> SQLException, NoSuchMethodException, SecurityException {</span><br><span class=line>        <span class=type>JDBCConfig</span> <span class=variable>config</span> <span class=operator>=</span> DBUtilChild.class.getAnnotation(JDBCConfig.class);</span><br><span class=line>        <span class=type>String</span> <span class=variable>ip</span> <span class=operator>=</span> config.ip();</span><br><span class=line>        <span class=type>int</span> <span class=variable>port</span> <span class=operator>=</span> config.port();</span><br><span class=line>        <span class=type>String</span> <span class=variable>database</span> <span class=operator>=</span> config.database();</span><br><span class=line>        <span class=type>String</span> <span class=variable>encoding</span> <span class=operator>=</span> config.encoding();</span><br><span class=line>        <span class=type>String</span> <span class=variable>loginName</span> <span class=operator>=</span> config.loginName();</span><br><span class=line>        <span class=type>String</span> <span class=variable>password</span> <span class=operator>=</span> config.password();</span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>url</span> <span class=operator>=</span> String.format(<span class=string>"jdbc:mysql://%s:%d/%s?characterEncoding=%s"</span>, ip, port, database, encoding);</span><br><span class=line>        <span class=keyword>return</span> DriverManager.getConnection(url, loginName, password);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> <span class=keyword>throws</span> NoSuchMethodException, SecurityException, SQLException {</span><br><span class=line>        <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> getConnection2();</span><br><span class=line>        System.out.println(c);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=Documented><a class=headerlink href=#Documented title=@Documented></a>@Documented</h3><blockquote><p>@Documented 如图所示， 在用javadoc命令生成API文档后，DBUtil的文档里会出现该注解说明。</blockquote> <blockquote><p>注： 使用eclipse把项目中的.java文件导成API文档步骤：</blockquote> <ol><li>选中项目<li>点开菜单File<li>点击Export<li>点开java->javadoc->点next<li>点finish</ol> <p><img src=http://stepimagewm.how2j.cn/4041.png></p> <h3 id=Repeatable-java1-8-新增><a title="@Repeatable (java1.8 新增)" class=headerlink href=#Repeatable-java1-8-新增></a>@Repeatable (java1.8 新增)</h3><blockquote><p>当没有@Repeatable修饰的时候，注解在同一个位置，只能出现一次，如例所示：</blockquote> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line>@JDBCConfig(ip = "127.0.0.1", database = "test", encoding = "UTF-8", loginName = "root", password = "admin")</span><br><span class=line>@JDBCConfig(ip = "127.0.0.1", database = "test", encoding = "UTF-8", loginName = "root", password = "admin")</span><br></pre></table></figure> <blockquote><p>重复做两次就会报错了。<br>使用<code>@Repeatable</code>之后，再配合一些其他动作，就可以在同一个地方使用多次了。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> util;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.sql.Connection;</span><br><span class=line><span class=keyword>import</span> java.sql.DriverManager;</span><br><span class=line><span class=keyword>import</span> java.sql.SQLException;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> anno.JDBCConfig;</span><br><span class=line> </span><br><span class=line><span class=meta>@JDBCConfig(ip = "127.0.0.1", database = "test", encoding = "UTF-8", loginName = "root", password = "admin")</span></span><br><span class=line><span class=meta>@JDBCConfig(ip = "127.0.0.1", database = "test", encoding = "UTF-8", loginName = "root", password = "admin")</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">DBUtil</span> {</span><br><span class=line>    <span class=keyword>static</span> {</span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            Class.forName(<span class=string>"com.mysql.jdbc.Driver"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (ClassNotFoundException e) {</span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> Connection <span class="title function_">getConnection</span><span class=params>()</span> <span class=keyword>throws</span> SQLException, NoSuchMethodException, SecurityException {</span><br><span class=line>        <span class=type>JDBCConfig</span> <span class=variable>config</span> <span class=operator>=</span> DBUtil.class.getAnnotation(JDBCConfig.class);</span><br><span class=line>        System.out.println(config);</span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>ip</span> <span class=operator>=</span> config.ip();</span><br><span class=line>        <span class=type>int</span> <span class=variable>port</span> <span class=operator>=</span> config.port();</span><br><span class=line>        <span class=type>String</span> <span class=variable>database</span> <span class=operator>=</span> config.database();</span><br><span class=line>        <span class=type>String</span> <span class=variable>encoding</span> <span class=operator>=</span> config.encoding();</span><br><span class=line>        <span class=type>String</span> <span class=variable>loginName</span> <span class=operator>=</span> config.loginName();</span><br><span class=line>        <span class=type>String</span> <span class=variable>password</span> <span class=operator>=</span> config.password();</span><br><span class=line> </span><br><span class=line>        <span class=type>String</span> <span class=variable>url</span> <span class=operator>=</span> String.format(<span class=string>"jdbc:mysql://%s:%d/%s?characterEncoding=%s"</span>, ip, port, database, encoding);</span><br><span class=line>        <span class=keyword>return</span> DriverManager.getConnection(url, loginName, password);</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> <span class=keyword>throws</span> NoSuchMethodException, SecurityException, SQLException {</span><br><span class=line>        <span class=type>Connection</span> <span class=variable>c</span> <span class=operator>=</span> getConnection();</span><br><span class=line>        System.out.println(c);</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=Repeatable-运用举例><a title="@Repeatable 运用举例" class=headerlink href=#Repeatable-运用举例></a>@Repeatable 运用举例</h3><blockquote><p>比如在练习练习-查找文件内容 中有一个要求，即查找文件后缀名是.java的文件，我们把部分代码修改为注解，并且使用@Repeatable 这个元注解来表示，文件后缀名的范围可以是java, html, css, js 等等。</blockquote> <blockquote><p>为了紧凑起见，把注解作为内部类的形式放在一个文件里。</blockquote> <ol><li>注解FileTypes，其value()返回一个FileType数组<li>注解FileType，其@Repeatable的值采用FileTypes<li>运用注解：在work方法上重复使用多次@FileType注解<li>解析注解： 在work方法内，通过反射获取到本方法上的FileType类型的注解数组，然后遍历本数组。</ol> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> annotation;</span><br><span class=line><span class=keyword>import</span> <span class=keyword>static</span> java.lang.annotation.ElementType.METHOD;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Repeatable;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Retention;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.RetentionPolicy;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Target;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">FindFiles</span> {</span><br><span class=line>    <span class=meta>@Target( METHOD)</span></span><br><span class=line>    <span class=meta>@Retention( RetentionPolicy.RUNTIME )</span></span><br><span class=line>    <span class=keyword>public</span> <span class=meta>@interface</span> FileTypes {</span><br><span class=line>        FileType[] value();</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=meta>@Target(  METHOD )</span></span><br><span class=line>    <span class=meta>@Retention( RetentionPolicy.RUNTIME )</span></span><br><span class=line>    <span class=meta>@Repeatable( FileTypes.class )</span></span><br><span class=line>    <span class=keyword>public</span> <span class=meta>@interface</span> FileType {</span><br><span class=line>        String <span class="title function_">value</span><span class=params>()</span>;</span><br><span class=line>    };</span><br><span class=line> </span><br><span class=line>    <span class=meta>@FileType( ".java" )</span></span><br><span class=line>    <span class=meta>@FileType( ".html" )</span></span><br><span class=line>    <span class=meta>@FileType( ".css" )</span></span><br><span class=line>    <span class=meta>@FileType( ".js" )</span></span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">work</span><span class=params>()</span>{</span><br><span class=line>         </span><br><span class=line>        <span class=keyword>try</span> {</span><br><span class=line>            FileType[] fileTypes= <span class=built_in>this</span>.getClass().getMethod(<span class=string>"work"</span>).getAnnotationsByType(FileType.class);</span><br><span class=line>            System.out.println(<span class=string>"将从如下后缀名的文件中查找文件内容"</span>);</span><br><span class=line>            <span class=keyword>for</span> (FileType fileType : fileTypes) {</span><br><span class=line>                System.out.println(fileType.value());</span><br><span class=line>            }</span><br><span class=line>            System.out.println(<span class=string>"查找过程略。。。"</span>);</span><br><span class=line>        } <span class=keyword>catch</span> (NoSuchMethodException | SecurityException e) {</span><br><span class=line>            <span class=comment>// TODO Auto-generated catch block</span></span><br><span class=line>            e.printStackTrace();</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">FindFiles</span>().work();</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=仿-Hibernate-注解><a title="仿 Hibernate 注解" class=headerlink href=#仿-Hibernate-注解></a>仿 Hibernate 注解</h2><h3 id=hibernate两种配置方式><a class=headerlink href=#hibernate两种配置方式 title=hibernate两种配置方式></a>hibernate两种配置方式</h3><blockquote><p>hibernate有两种配置方式，分别是*.hbm.xml 配置方式 和注解方式。 虽然方式不一样，但是都是用于解决如下问题：</blockquote> <ol><li>当前类是否实体类<li>对应的表名称<li>主键对应哪个属性， 自增长策略是什么，对应字段名称是什么<li>非主键属性对应字段名称是什么</ol> <blockquote><p>接下来，我会做一套仿hibernate的注解，并且在一个实体类Hero上运用这些注解，并通过反射解析这些注解信息，来解决上述的问题。</blockquote> <h3 id=自定义hibernate注解><a class=headerlink href=#自定义hibernate注解 title=自定义hibernate注解></a>自定义hibernate注解</h3><blockquote><p>参考hibernate的 注解配置方式 ，自定义5个注解，分别对应hibernate中用到的注解：</blockquote> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line>hibernate_annotation.MyEntity 对应 javax.persistence.Entity</span><br><span class=line>hibernate_annotation.MyTable 对应 javax.persistence.Table</span><br><span class=line>hibernate_annotation.MyId 对应 javax.persistence.Id</span><br><span class=line>hibernate_annotation.MyGeneratedValue 对应 javax.persistence.GeneratedValue</span><br><span class=line>hibernate_annotation.MyColumn 对应 javax.persistence.Column</span><br></pre></table></figure> <p><code>MyEntity.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> hibernate_annotation;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.lang.annotation.ElementType;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Retention;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.RetentionPolicy;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Target;</span><br><span class=line> </span><br><span class=line><span class=meta>@Target(ElementType.TYPE)</span></span><br><span class=line><span class=meta>@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=line><span class=keyword>public</span> <span class=meta>@interface</span> MyEntity {</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <p><code>MyTable.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> hibernate_annotation;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.lang.annotation.ElementType;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Retention;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.RetentionPolicy;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Target;</span><br><span class=line> </span><br><span class=line><span class=meta>@Target(ElementType.TYPE)</span></span><br><span class=line><span class=meta>@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=line><span class=keyword>public</span> <span class=meta>@interface</span> MyTable {</span><br><span class=line> </span><br><span class=line>    String <span class="title function_">name</span><span class=params>()</span>;</span><br><span class=line>}</span><br></pre></table></figure> <p><code>MyId.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> hibernate_annotation;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.lang.annotation.ElementType;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Retention;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.RetentionPolicy;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Target;</span><br><span class=line> </span><br><span class=line><span class=meta>@Target(ElementType.METHOD)</span></span><br><span class=line><span class=meta>@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=line><span class=keyword>public</span> <span class=meta>@interface</span> MyId {</span><br><span class=line> </span><br><span class=line>}</span><br></pre></table></figure> <p><code>MyGeneratedValue.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> hibernate_annotation;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.lang.annotation.ElementType;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Retention;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.RetentionPolicy;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Target;</span><br><span class=line> </span><br><span class=line><span class=meta>@Target(ElementType.METHOD)</span></span><br><span class=line><span class=meta>@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=line><span class=keyword>public</span> <span class=meta>@interface</span> MyGeneratedValue {</span><br><span class=line>    String <span class="title function_">strategy</span><span class=params>()</span>;</span><br><span class=line>}</span><br></pre></table></figure> <p><code>MyColumn.java</code></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> hibernate_annotation;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.lang.annotation.ElementType;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Retention;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.RetentionPolicy;</span><br><span class=line><span class=keyword>import</span> java.lang.annotation.Target;</span><br><span class=line> </span><br><span class=line><span class=meta>@Target(ElementType.METHOD)</span></span><br><span class=line><span class=meta>@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class=line><span class=keyword>public</span> <span class=meta>@interface</span> MyColumn {</span><br><span class=line>    String <span class="title function_">value</span><span class=params>()</span>;</span><br><span class=line>}</span><br></pre></table></figure> <h3 id=运用在Hero对象上><a class=headerlink href=#运用在Hero对象上 title=运用在Hero对象上></a>运用在Hero对象上</h3><blockquote><p>像以注解方式配置Product类 那样，在Hero类上运用这些自定义注解：<br>当注解的方法是value的时候，给这个注解赋值时，本来应该是：</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=meta>@MyColumn(value="name_")</span></span><br></pre></table></figure> <blockquote><p>现在可以简略一点，写为:</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=meta>@MyColumn("name_")</span></span><br></pre></table></figure> <blockquote><p>只有当名称是value的时候可以这样，其他名称如name, strategy等不行。</blockquote> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> pojo;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> hibernate_annotation.MyColumn;</span><br><span class=line><span class=keyword>import</span> hibernate_annotation.MyEntity;</span><br><span class=line><span class=keyword>import</span> hibernate_annotation.MyGeneratedValue;</span><br><span class=line><span class=keyword>import</span> hibernate_annotation.MyId;</span><br><span class=line><span class=keyword>import</span> hibernate_annotation.MyTable;</span><br><span class=line> </span><br><span class=line><span class=meta>@MyEntity</span></span><br><span class=line><span class=meta>@MyTable(name="hero_")</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">Hero</span> {</span><br><span class=line>    <span class=keyword>private</span> <span class=type>int</span> id;</span><br><span class=line>    <span class=keyword>private</span> String name;</span><br><span class=line>    <span class=keyword>private</span> <span class=type>int</span> damage;</span><br><span class=line>    <span class=keyword>private</span> <span class=type>int</span> armor;</span><br><span class=line>     </span><br><span class=line>    <span class=meta>@MyId</span></span><br><span class=line>    <span class=meta>@MyGeneratedValue(strategy = "identity")</span></span><br><span class=line>    <span class=meta>@MyColumn("id_")</span></span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">getId</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> id;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setId</span><span class=params>(<span class=type>int</span> id)</span> {</span><br><span class=line>        <span class=built_in>this</span>.id = id;</span><br><span class=line>    }</span><br><span class=line>    <span class=meta>@MyColumn("name_")</span></span><br><span class=line>    <span class=keyword>public</span> String <span class="title function_">getName</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> name;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setName</span><span class=params>(String name)</span> {</span><br><span class=line>        <span class=built_in>this</span>.name = name;</span><br><span class=line>    }</span><br><span class=line>    <span class=meta>@MyColumn("damage_")</span></span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">getDamage</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> damage;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setDamage</span><span class=params>(<span class=type>int</span> damage)</span> {</span><br><span class=line>        <span class=built_in>this</span>.damage = damage;</span><br><span class=line>    }</span><br><span class=line>    <span class=meta>@MyColumn("armor_")</span></span><br><span class=line>    <span class=keyword>public</span> <span class=type>int</span> <span class="title function_">getArmor</span><span class=params>()</span> {</span><br><span class=line>        <span class=keyword>return</span> armor;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">setArmor</span><span class=params>(<span class=type>int</span> armor)</span> {</span><br><span class=line>        <span class=built_in>this</span>.armor = armor;</span><br><span class=line>    }</span><br><span class=line>     </span><br><span class=line>}</span><br></pre></table></figure> <h3 id=解析注解-1><a class=headerlink href=#解析注解-1 title=解析注解></a>解析注解</h3><blockquote><p>创建一个解析类<code>ParseHibernateAnnotation</code>，获取Hero类上配置的注解信息，其运行结果如图所示。</blockquote> <blockquote><p>思路如下：</blockquote> <ol><li>首先获取<code>Hero.class</code>类对象；<li>判断本类是否进行了<code>MyEntity</code> 注解；<li>获取注解 <code>MyTable</code>；<li>遍历所有的方法，如果某个方法有<code>MyId</code>注解，那么就记录为主键方法<code>primaryKeyMethod</code> ；<li>把主键方法的自增长策略注解<code>MyGeneratedValue</code>和对应的字段注解<code>MyColumn</code> 取出来，并打印；<li>遍历所有非主键方法，并且有<code>MyColumn</code>注解的方法，打印属性名称和字段名称的对应关系；</ol> <p><img src=http://stepimagewm.how2j.cn/4048.png></p> <figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br></pre><td class=code><pre><span class=line><span class=keyword>package</span> test;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> java.lang.reflect.Method;</span><br><span class=line> </span><br><span class=line><span class=keyword>import</span> hibernate_annotation.MyColumn;</span><br><span class=line><span class=keyword>import</span> hibernate_annotation.MyEntity;</span><br><span class=line><span class=keyword>import</span> hibernate_annotation.MyGeneratedValue;</span><br><span class=line><span class=keyword>import</span> hibernate_annotation.MyId;</span><br><span class=line><span class=keyword>import</span> hibernate_annotation.MyTable;</span><br><span class=line><span class=keyword>import</span> pojo.Hero;</span><br><span class=line> </span><br><span class=line><span class=keyword>public</span> <span class=keyword>class</span> <span class="title class_">ParseHibernateAnnotation</span> {</span><br><span class=line> </span><br><span class=line>    <span class=keyword>public</span> <span class=keyword>static</span> <span class=keyword>void</span> <span class="title function_">main</span><span class=params>(String[] args)</span> {</span><br><span class=line> </span><br><span class=line>        Class&lt;Hero> clazz = Hero.class;</span><br><span class=line>        <span class=type>MyEntity</span> <span class=variable>myEntity</span> <span class=operator>=</span> (MyEntity) clazz.getAnnotation(MyEntity.class);</span><br><span class=line>        <span class=keyword>if</span> (<span class=literal>null</span> == myEntity) {</span><br><span class=line>            System.out.println(<span class=string>"Hero类不是实体类"</span>);</span><br><span class=line>        } <span class=keyword>else</span> {</span><br><span class=line>            System.out.println(<span class=string>"Hero类是实体类"</span>);</span><br><span class=line>            MyTable myTable= (MyTable) clazz.getAnnotation(MyTable.class);</span><br><span class=line>            <span class=type>String</span> <span class=variable>tableName</span> <span class=operator>=</span> myTable.name();</span><br><span class=line>            System.out.println(<span class=string>"其对应的表名是:"</span> + tableName);</span><br><span class=line>            Method[] methods =clazz.getMethods();</span><br><span class=line>            <span class=type>Method</span> <span class=variable>primaryKeyMethod</span> <span class=operator>=</span> <span class=literal>null</span>;</span><br><span class=line>            <span class=keyword>for</span> (Method m: methods) {</span><br><span class=line>                <span class=type>MyId</span> <span class=variable>myId</span> <span class=operator>=</span> m.getAnnotation(MyId.class);</span><br><span class=line>                <span class=keyword>if</span>(<span class=literal>null</span>!=myId){</span><br><span class=line>                    primaryKeyMethod = m;</span><br><span class=line>                    <span class=keyword>break</span>;</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>             </span><br><span class=line>            <span class=keyword>if</span>(<span class=literal>null</span>!=primaryKeyMethod){</span><br><span class=line>                System.out.println(<span class=string>"找到主键："</span> + method2attribute( primaryKeyMethod.getName() ));</span><br><span class=line>                <span class=type>MyGeneratedValue</span> <span class=variable>myGeneratedValue</span> <span class=operator>=</span></span><br><span class=line>                primaryKeyMethod.getAnnotation(MyGeneratedValue.class);</span><br><span class=line>                System.out.println(<span class=string>"其自增长策略是："</span> +myGeneratedValue.strategy());</span><br><span class=line>                <span class=type>MyColumn</span> <span class=variable>myColumn</span> <span class=operator>=</span> primaryKeyMethod.getAnnotation(MyColumn.class);</span><br><span class=line>                System.out.println(<span class=string>"对应数据库中的字段是："</span> +myColumn.value());</span><br><span class=line>            }</span><br><span class=line>            System.out.println(<span class=string>"其他非主键属性分别对应的数据库字段如下："</span>);</span><br><span class=line>            <span class=keyword>for</span> (Method m: methods) {</span><br><span class=line>                <span class=keyword>if</span>(m==primaryKeyMethod){</span><br><span class=line>                    <span class=keyword>continue</span>;</span><br><span class=line>                }</span><br><span class=line>                <span class=type>MyColumn</span> <span class=variable>myColumn</span> <span class=operator>=</span> m.getAnnotation(MyColumn.class);</span><br><span class=line>                <span class=comment>//那些setter方法上是没有MyColumn注解的</span></span><br><span class=line>                <span class=keyword>if</span>(<span class=literal>null</span>==myColumn)</span><br><span class=line>                    <span class=keyword>continue</span>;</span><br><span class=line>                System.out.format(<span class=string>"属性： %s\t对应的数据库字段是:%s%n"</span>,method2attribute(m.getName()),myColumn.value());</span><br><span class=line> </span><br><span class=line>            }</span><br><span class=line>             </span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line> </span><br><span class=line>    <span class=keyword>private</span> <span class=keyword>static</span> String <span class="title function_">method2attribute</span><span class=params>(String methodName)</span> {</span><br><span class=line>        <span class=type>String</span> <span class=variable>result</span> <span class=operator>=</span> methodName; ;</span><br><span class=line>        result = result.replaceFirst(<span class=string>"get"</span>, <span class=string>""</span>);</span><br><span class=line>        result = result.replaceFirst(<span class=string>"is"</span>, <span class=string>""</span>);</span><br><span class=line>        <span class=keyword>if</span>(result.length()&lt;=<span class=number>1</span>){</span><br><span class=line>            <span class=keyword>return</span> result.toLowerCase();</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>else</span>{</span><br><span class=line>            <span class=keyword>return</span> result.substring(<span class=number>0</span>,<span class=number>1</span>).toLowerCase() + result.substring(<span class=number>1</span>,result.length());</span><br><span class=line>        }</span><br><span class=line>         </span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure> <h2 id=注解分类><a class=headerlink href=#注解分类 title=注解分类></a>注解分类</h2><h3 id=按照作用域分><a class=headerlink href=#按照作用域分 title=按照作用域分></a>按照作用域分</h3><blockquote><p>根据注解的作用域@Retention，注解分为：</blockquote> <figure class="highlight plaintext"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line>RetentionPolicy.SOURCE： Java源文件上的注解</span><br><span class=line>RetentionPolicy.CLASS： Class类文件上的注解</span><br><span class=line>RetentionPolicy.RUNTIME： 运行时的注解</span><br></pre></table></figure> <h3 id=按照来源分><a class=headerlink href=#按照来源分 title=按照来源分></a>按照来源分</h3><blockquote><p>按照注解的来源，也是分为3类</blockquote> <ol><li>内置注解 如@Override ，@Deprecated 等等<li>第三方注解，如Hibernate, Struts等等<li>自定义注解，如仿hibernate的自定义注解</ol> <blockquote><p>在工作中，大部分都是使用第三方注解， 当然第三方注解本身就是自定义注解。 本教程的主要作用是帮助大家理解这些第三方注解是如何工作的，让大家用得心里踏实一些。</blockquote> <footer class=post-footer><div class=post-tags><a href=/tags/Java/ rel=tag># Java</a></div><div class="social-like a2a_kit a2a_kit_size_32 a2a_default_style"><a class=a2a_dd href=https://www.addtoany.com/share rel=noopener target=_blank></a><a class=a2a_button_facebook></a><a class=a2a_button_twitter></a><a class=a2a_button_wechat></a></div><div class=post-nav><div class=post-nav-item><a title="Oracle APEX 中国社区第一次线下活动圆满结束！" href=/Oracle/Oracle-APEX/apex-cn-group-event_20190419/ rel=prev> <i class="fa fa-angle-left"></i> Oracle APEX 中国社区第一次线下活动圆满结束！ </a></div><div class=post-nav-item><a title="Java学习笔记 - Hutool" href=/Java/java_hutool/ rel=next> Java学习笔记 - Hutool <i class="fa fa-angle-right"></i> </a></div></div></footer> <footer class=footer><div class=footer-inner><div class=copyright>© 2017 – <span itemprop=copyrightYear>2025</span><span class=with-love> <i class="fa fa-heart"></i> </span><span class=author itemprop=copyrightHolder>王方钢 / Kenny Wang</span></div><div class=wordcount><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-chart-line"></i> </span> <span title=站点总字数>332k</span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-coffee"></i> </span> <span title=站点阅读时长>20:06</span> </span></div><div class=powered-by>由 <a href=https://hexo.io/ rel=noopener target=_blank>Hexo</a> & <a href=https://theme-next.js.org/muse/ rel=noopener target=_blank>NexT.Muse</a> 强力驱动</div></div></footer> <div class="toggle sidebar-toggle" role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div> <div class=sidebar-dimmer></div> <div aria-label=返回顶部 class=back-to-top role=button><i class="fa fa-arrow-up fa-lg"></i><span>0%</span></div> <div class=reading-progress-bar></div> <noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript> 